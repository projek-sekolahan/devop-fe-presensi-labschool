var Q4=Object.defineProperty;var J4=(e,t,n)=>t in e?Q4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Z4=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var pt=(e,t,n)=>J4(e,typeof t!="symbol"?t+"":t,n);import"https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics.js";import"https://www.gstatic.com/firebasejs/9.6.1/firebase-messaging.js";var dY=Z4((yY,X4)=>{function eP(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function Nf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ak={exports:{}},Pf={},sk={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su=Symbol.for("react.element"),tP=Symbol.for("react.portal"),nP=Symbol.for("react.fragment"),rP=Symbol.for("react.strict_mode"),oP=Symbol.for("react.profiler"),iP=Symbol.for("react.provider"),aP=Symbol.for("react.context"),sP=Symbol.for("react.forward_ref"),lP=Symbol.for("react.suspense"),uP=Symbol.for("react.memo"),cP=Symbol.for("react.lazy"),Px=Symbol.iterator;function dP(e){return e===null||typeof e!="object"?null:(e=Px&&e[Px]||e["@@iterator"],typeof e=="function"?e:null)}var lk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uk=Object.assign,ck={};function $s(e,t,n){this.props=e,this.context=t,this.refs=ck,this.updater=n||lk}$s.prototype.isReactComponent={};$s.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dk(){}dk.prototype=$s.prototype;function fv(e,t,n){this.props=e,this.context=t,this.refs=ck,this.updater=n||lk}var hv=fv.prototype=new dk;hv.constructor=fv;uk(hv,$s.prototype);hv.isPureReactComponent=!0;var Ax=Array.isArray,fk=Object.prototype.hasOwnProperty,pv={current:null},hk={key:!0,ref:!0,__self:!0,__source:!0};function pk(e,t,n){var r,o={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)fk.call(t,r)&&!hk.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:Su,type:e,key:i,ref:a,props:o,_owner:pv.current}}function fP(e,t){return{$$typeof:Su,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Su}function hP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Dx=/\/+/g;function Lh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hP(""+e.key):t.toString(36)}function Hc(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Su:case tP:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Lh(a,0):r,Ax(o)?(n="",e!=null&&(n=e.replace(Dx,"$&/")+"/"),Hc(o,t,n,"",function(u){return u})):o!=null&&(mv(o)&&(o=fP(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Dx,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",Ax(e))for(var s=0;s<e.length;s++){i=e[s];var l=r+Lh(i,s);a+=Hc(i,t,n,l,o)}else if(l=dP(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=r+Lh(i,s++),a+=Hc(i,t,n,l,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function rc(e,t,n){if(e==null)return e;var r=[],o=0;return Hc(e,r,"","",function(i){return t.call(n,i,o++)}),r}function pP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xn={current:null},Gc={transition:null},mP={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:Gc,ReactCurrentOwner:pv};function mk(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:rc,forEach:function(e,t,n){rc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rc(e,function(){t++}),t},toArray:function(e){return rc(e,function(t){return t})||[]},only:function(e){if(!mv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pe.Component=$s;Pe.Fragment=nP;Pe.Profiler=oP;Pe.PureComponent=fv;Pe.StrictMode=rP;Pe.Suspense=lP;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mP;Pe.act=mk;Pe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=uk({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=pv.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)fk.call(t,l)&&!hk.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Su,type:e.type,key:o,ref:i,props:r,_owner:a}};Pe.createContext=function(e){return e={$$typeof:aP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:iP,_context:e},e.Consumer=e};Pe.createElement=pk;Pe.createFactory=function(e){var t=pk.bind(null,e);return t.type=e,t};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(e){return{$$typeof:sP,render:e}};Pe.isValidElement=mv;Pe.lazy=function(e){return{$$typeof:cP,_payload:{_status:-1,_result:e},_init:pP}};Pe.memo=function(e,t){return{$$typeof:uP,type:e,compare:t===void 0?null:t}};Pe.startTransition=function(e){var t=Gc.transition;Gc.transition={};try{e()}finally{Gc.transition=t}};Pe.unstable_act=mk;Pe.useCallback=function(e,t){return xn.current.useCallback(e,t)};Pe.useContext=function(e){return xn.current.useContext(e)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(e){return xn.current.useDeferredValue(e)};Pe.useEffect=function(e,t){return xn.current.useEffect(e,t)};Pe.useId=function(){return xn.current.useId()};Pe.useImperativeHandle=function(e,t,n){return xn.current.useImperativeHandle(e,t,n)};Pe.useInsertionEffect=function(e,t){return xn.current.useInsertionEffect(e,t)};Pe.useLayoutEffect=function(e,t){return xn.current.useLayoutEffect(e,t)};Pe.useMemo=function(e,t){return xn.current.useMemo(e,t)};Pe.useReducer=function(e,t,n){return xn.current.useReducer(e,t,n)};Pe.useRef=function(e){return xn.current.useRef(e)};Pe.useState=function(e){return xn.current.useState(e)};Pe.useSyncExternalStore=function(e,t,n){return xn.current.useSyncExternalStore(e,t,n)};Pe.useTransition=function(){return xn.current.useTransition()};Pe.version="18.3.1";sk.exports=Pe;var C=sk.exports;const $r=Nf(C),Hl=eP({__proto__:null,default:$r},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=C,vP=Symbol.for("react.element"),yP=Symbol.for("react.fragment"),xP=Object.prototype.hasOwnProperty,bP=gP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wP={key:!0,ref:!0,__self:!0,__source:!0};function gk(e,t,n){var r,o={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)xP.call(t,r)&&!wP.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:vP,type:e,key:i,ref:a,props:o,_owner:bP.current}}Pf.Fragment=yP;Pf.jsx=gk;Pf.jsxs=gk;ak.exports=Pf;var w=ak.exports,pm={},vk={exports:{}},Qn={},yk={exports:{}},xk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,B){var L=P.length;P.push(B);e:for(;0<L;){var $=L-1>>>1,q=P[$];if(0<o(q,B))P[$]=B,P[L]=q,L=$;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var B=P[0],L=P.pop();if(L!==B){P[0]=L;e:for(var $=0,q=P.length,Q=q>>>1;$<Q;){var ee=2*($+1)-1,te=P[ee],re=ee+1,ce=P[re];if(0>o(te,L))re<q&&0>o(ce,te)?(P[$]=ce,P[re]=L,$=re):(P[$]=te,P[ee]=L,$=ee);else if(re<q&&0>o(ce,L))P[$]=ce,P[re]=L,$=re;else break e}}return B}function o(P,B){var L=P.sortIndex-B.sortIndex;return L!==0?L:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=P)r(u),B.sortIndex=B.expirationTime,t(l,B);else break;B=n(u)}}function b(P){if(m=!1,x(P),!p)if(n(l)!==null)p=!0,V(k);else{var B=n(u);B!==null&&z(b,B.startTime-P)}}function k(P,B){p=!1,m&&(m=!1,g(R),R=-1),h=!0;var L=f;try{for(x(B),d=n(l);d!==null&&(!(d.expirationTime>B)||P&&!A());){var $=d.callback;if(typeof $=="function"){d.callback=null,f=d.priorityLevel;var q=$(d.expirationTime<=B);B=e.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),x(B)}else r(l);d=n(l)}if(d!==null)var Q=!0;else{var ee=n(u);ee!==null&&z(b,ee.startTime-B),Q=!1}return Q}finally{d=null,f=L,h=!1}}var E=!1,T=null,R=-1,_=5,S=-1;function A(){return!(e.unstable_now()-S<_)}function N(){if(T!==null){var P=e.unstable_now();S=P;var B=!0;try{B=T(!0,P)}finally{B?O():(E=!1,T=null)}}else E=!1}var O;if(typeof v=="function")O=function(){v(N)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,F=M.port2;M.port1.onmessage=N,O=function(){F.postMessage(null)}}else O=function(){y(N,0)};function V(P){T=P,E||(E=!0,O())}function z(P,B){R=y(function(){P(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,V(k))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var L=f;f=B;try{return P()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var L=f;f=P;try{return B()}finally{f=L}},e.unstable_scheduleCallback=function(P,B,L){var $=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?$+L:$):L=$,P){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=L+q,P={id:c++,callback:B,priorityLevel:P,startTime:L,expirationTime:q,sortIndex:-1},L>$?(P.sortIndex=L,t(u,P),n(l)===null&&P===n(u)&&(m?(g(R),R=-1):m=!0,z(b,L-$))):(P.sortIndex=q,t(l,P),p||h||(p=!0,V(k))),P},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(P){var B=f;return function(){var L=f;f=B;try{return P.apply(this,arguments)}finally{f=L}}}})(xk);yk.exports=xk;var kP=yk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CP=C,Kn=kP;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bk=new Set,Gl={};function va(e,t){Es(e,t),Es(e+"Capture",t)}function Es(e,t){for(Gl[e]=t,e=0;e<t.length;e++)bk.add(t[e])}var Ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mm=Object.prototype.hasOwnProperty,EP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mx={},Fx={};function SP(e){return mm.call(Fx,e)?!0:mm.call(Mx,e)?!1:EP.test(e)?Fx[e]=!0:(Mx[e]=!0,!1)}function RP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TP(e,t,n,r){if(t===null||typeof t>"u"||RP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bn(e,t,n,r,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xt[e]=new bn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xt[t]=new bn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xt[e]=new bn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xt[e]=new bn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xt[e]=new bn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xt[e]=new bn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xt[e]=new bn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xt[e]=new bn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xt[e]=new bn(e,5,!1,e.toLowerCase(),null,!1,!1)});var gv=/[\-:]([a-z])/g;function vv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gv,vv);Xt[t]=new bn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gv,vv);Xt[t]=new bn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gv,vv);Xt[t]=new bn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xt[e]=new bn(e,1,!1,e.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xt[e]=new bn(e,1,!1,e.toLowerCase(),null,!0,!0)});function yv(e,t,n,r){var o=Xt.hasOwnProperty(t)?Xt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TP(t,n,o,r)&&(n=null),r||o===null?SP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Fo=CP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oc=Symbol.for("react.element"),za=Symbol.for("react.portal"),Va=Symbol.for("react.fragment"),xv=Symbol.for("react.strict_mode"),gm=Symbol.for("react.profiler"),wk=Symbol.for("react.provider"),kk=Symbol.for("react.context"),bv=Symbol.for("react.forward_ref"),vm=Symbol.for("react.suspense"),ym=Symbol.for("react.suspense_list"),wv=Symbol.for("react.memo"),Xo=Symbol.for("react.lazy"),Ck=Symbol.for("react.offscreen"),Ox=Symbol.iterator;function rl(e){return e===null||typeof e!="object"?null:(e=Ox&&e[Ox]||e["@@iterator"],typeof e=="function"?e:null)}var st=Object.assign,Bh;function yl(e){if(Bh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bh=t&&t[1]||""}return`
`+Bh+e}var jh=!1;function zh(e,t){if(!e||jh)return"";jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(a!==1||s!==1)do if(a--,s--,0>s||o[a]!==i[s]){var l=`
`+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{jh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?yl(e):""}function _P(e){switch(e.tag){case 5:return yl(e.type);case 16:return yl("Lazy");case 13:return yl("Suspense");case 19:return yl("SuspenseList");case 0:case 2:case 15:return e=zh(e.type,!1),e;case 11:return e=zh(e.type.render,!1),e;case 1:return e=zh(e.type,!0),e;default:return""}}function xm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Va:return"Fragment";case za:return"Portal";case gm:return"Profiler";case xv:return"StrictMode";case vm:return"Suspense";case ym:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kk:return(e.displayName||"Context")+".Consumer";case wk:return(e._context.displayName||"Context")+".Provider";case bv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wv:return t=e.displayName||null,t!==null?t:xm(e.type)||"Memo";case Xo:t=e._payload,e=e._init;try{return xm(e(t))}catch{}}return null}function IP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xm(t);case 8:return t===xv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ek(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function NP(e){var t=Ek(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ic(e){e._valueTracker||(e._valueTracker=NP(e))}function Sk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ek(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ud(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bm(e,t){var n=t.checked;return st({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Lx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=bi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rk(e,t){t=t.checked,t!=null&&yv(e,"checked",t,!1)}function wm(e,t){Rk(e,t);var n=bi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?km(e,t.type,n):t.hasOwnProperty("defaultValue")&&km(e,t.type,bi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function km(e,t,n){(t!=="number"||ud(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xl=Array.isArray;function ss(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+bi(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Cm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return st({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(xl(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:bi(n)}}function Tk(e,t){var n=bi(t.value),r=bi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function zx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _k(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Em(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_k(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ac,Ik=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ac=ac||document.createElement("div"),ac.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ac.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var El={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PP=["Webkit","ms","Moz","O"];Object.keys(El).forEach(function(e){PP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),El[t]=El[e]})});function Nk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||El.hasOwnProperty(e)&&El[e]?(""+t).trim():t+"px"}function Pk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Nk(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var AP=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sm(e,t){if(t){if(AP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Rm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tm=null;function kv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _m=null,ls=null,us=null;function Vx(e){if(e=_u(e)){if(typeof _m!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Of(t),_m(e.stateNode,e.type,t))}}function Ak(e){ls?us?us.push(e):us=[e]:ls=e}function Dk(){if(ls){var e=ls,t=us;if(us=ls=null,Vx(e),t)for(e=0;e<t.length;e++)Vx(t[e])}}function Mk(e,t){return e(t)}function Fk(){}var Vh=!1;function Ok(e,t,n){if(Vh)return e(t,n);Vh=!0;try{return Mk(e,t,n)}finally{Vh=!1,(ls!==null||us!==null)&&(Fk(),Dk())}}function ql(e,t){var n=e.stateNode;if(n===null)return null;var r=Of(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var Im=!1;if(Ro)try{var ol={};Object.defineProperty(ol,"passive",{get:function(){Im=!0}}),window.addEventListener("test",ol,ol),window.removeEventListener("test",ol,ol)}catch{Im=!1}function DP(e,t,n,r,o,i,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Sl=!1,cd=null,dd=!1,Nm=null,MP={onError:function(e){Sl=!0,cd=e}};function FP(e,t,n,r,o,i,a,s,l){Sl=!1,cd=null,DP.apply(MP,arguments)}function OP(e,t,n,r,o,i,a,s,l){if(FP.apply(this,arguments),Sl){if(Sl){var u=cd;Sl=!1,cd=null}else throw Error(J(198));dd||(dd=!0,Nm=u)}}function ya(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Lk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wx(e){if(ya(e)!==e)throw Error(J(188))}function LP(e){var t=e.alternate;if(!t){if(t=ya(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Wx(o),e;if(i===r)return Wx(o),t;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function Bk(e){return e=LP(e),e!==null?jk(e):null}function jk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jk(e);if(t!==null)return t;e=e.sibling}return null}var zk=Kn.unstable_scheduleCallback,$x=Kn.unstable_cancelCallback,BP=Kn.unstable_shouldYield,jP=Kn.unstable_requestPaint,vt=Kn.unstable_now,zP=Kn.unstable_getCurrentPriorityLevel,Cv=Kn.unstable_ImmediatePriority,Vk=Kn.unstable_UserBlockingPriority,fd=Kn.unstable_NormalPriority,VP=Kn.unstable_LowPriority,Wk=Kn.unstable_IdlePriority,Af=null,Ur=null;function WP(e){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(Af,e,void 0,(e.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:HP,$P=Math.log,UP=Math.LN2;function HP(e){return e>>>=0,e===0?32:31-($P(e)/UP|0)|0}var sc=64,lc=4194304;function bl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~o;s!==0?r=bl(s):(i&=a,i!==0&&(r=bl(i)))}else a=n&~o,a!==0?r=bl(a):i!==0&&(r=bl(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sr(t),o=1<<n,r|=e[n],t&=~o;return r}function GP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Sr(i),s=1<<a,l=o[a];l===-1?(!(s&n)||s&r)&&(o[a]=GP(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function Pm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $k(){var e=sc;return sc<<=1,!(sc&4194240)&&(sc=64),e}function Wh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ru(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sr(t),e[t]=n}function qP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Sr(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function Ev(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sr(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var je=0;function Uk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hk,Sv,Gk,Kk,qk,Am=!1,uc=[],si=null,li=null,ui=null,Xl=new Map,Yl=new Map,Qo=[],XP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ux(e,t){switch(e){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":Xl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(t.pointerId)}}function il(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=_u(t),t!==null&&Sv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function YP(e,t,n,r,o){switch(t){case"focusin":return si=il(si,e,t,n,r,o),!0;case"dragenter":return li=il(li,e,t,n,r,o),!0;case"mouseover":return ui=il(ui,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Xl.set(i,il(Xl.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Yl.set(i,il(Yl.get(i)||null,e,t,n,r,o)),!0}return!1}function Xk(e){var t=Ki(e.target);if(t!==null){var n=ya(t);if(n!==null){if(t=n.tag,t===13){if(t=Lk(n),t!==null){e.blockedOn=t,qk(e.priority,function(){Gk(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Dm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Tm=r,n.target.dispatchEvent(r),Tm=null}else return t=_u(n),t!==null&&Sv(t),e.blockedOn=n,!1;t.shift()}return!0}function Hx(e,t,n){Kc(e)&&n.delete(t)}function QP(){Am=!1,si!==null&&Kc(si)&&(si=null),li!==null&&Kc(li)&&(li=null),ui!==null&&Kc(ui)&&(ui=null),Xl.forEach(Hx),Yl.forEach(Hx)}function al(e,t){e.blockedOn===t&&(e.blockedOn=null,Am||(Am=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,QP)))}function Ql(e){function t(o){return al(o,e)}if(0<uc.length){al(uc[0],e);for(var n=1;n<uc.length;n++){var r=uc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(si!==null&&al(si,e),li!==null&&al(li,e),ui!==null&&al(ui,e),Xl.forEach(t),Yl.forEach(t),n=0;n<Qo.length;n++)r=Qo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Qo.length&&(n=Qo[0],n.blockedOn===null);)Xk(n),n.blockedOn===null&&Qo.shift()}var cs=Fo.ReactCurrentBatchConfig,pd=!0;function JP(e,t,n,r){var o=je,i=cs.transition;cs.transition=null;try{je=1,Rv(e,t,n,r)}finally{je=o,cs.transition=i}}function ZP(e,t,n,r){var o=je,i=cs.transition;cs.transition=null;try{je=4,Rv(e,t,n,r)}finally{je=o,cs.transition=i}}function Rv(e,t,n,r){if(pd){var o=Dm(e,t,n,r);if(o===null)Jh(e,t,r,md,n),Ux(e,r);else if(YP(o,e,t,n,r))r.stopPropagation();else if(Ux(e,r),t&4&&-1<XP.indexOf(e)){for(;o!==null;){var i=_u(o);if(i!==null&&Hk(i),i=Dm(e,t,n,r),i===null&&Jh(e,t,r,md,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Jh(e,t,r,null,n)}}var md=null;function Dm(e,t,n,r){if(md=null,e=kv(r),e=Ki(e),e!==null)if(t=ya(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Lk(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return md=e,null}function Yk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zP()){case Cv:return 1;case Vk:return 4;case fd:case VP:return 16;case Wk:return 536870912;default:return 16}default:return 16}}var ei=null,Tv=null,qc=null;function Qk(){if(qc)return qc;var e,t=Tv,n=t.length,r,o="value"in ei?ei.value:ei.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[i-r];r++);return qc=o.slice(e,1<r?1-r:void 0)}function Xc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cc(){return!0}function Gx(){return!1}function Jn(e){function t(n,r,o,i,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cc:Gx,this.isPropagationStopped=Gx,this}return st(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),t}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_v=Jn(Us),Tu=st({},Us,{view:0,detail:0}),eA=Jn(Tu),$h,Uh,sl,Df=st({},Tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sl&&(sl&&e.type==="mousemove"?($h=e.screenX-sl.screenX,Uh=e.screenY-sl.screenY):Uh=$h=0,sl=e),$h)},movementY:function(e){return"movementY"in e?e.movementY:Uh}}),Kx=Jn(Df),tA=st({},Df,{dataTransfer:0}),nA=Jn(tA),rA=st({},Tu,{relatedTarget:0}),Hh=Jn(rA),oA=st({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),iA=Jn(oA),aA=st({},Us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sA=Jn(aA),lA=st({},Us,{data:0}),qx=Jn(lA),uA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dA[e])?!!t[e]:!1}function Iv(){return fA}var hA=st({},Tu,{key:function(e){if(e.key){var t=uA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iv,charCode:function(e){return e.type==="keypress"?Xc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pA=Jn(hA),mA=st({},Df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xx=Jn(mA),gA=st({},Tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iv}),vA=Jn(gA),yA=st({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),xA=Jn(yA),bA=st({},Df,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wA=Jn(bA),kA=[9,13,27,32],Nv=Ro&&"CompositionEvent"in window,Rl=null;Ro&&"documentMode"in document&&(Rl=document.documentMode);var CA=Ro&&"TextEvent"in window&&!Rl,Jk=Ro&&(!Nv||Rl&&8<Rl&&11>=Rl),Yx=" ",Qx=!1;function Zk(e,t){switch(e){case"keyup":return kA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wa=!1;function EA(e,t){switch(e){case"compositionend":return eC(t);case"keypress":return t.which!==32?null:(Qx=!0,Yx);case"textInput":return e=t.data,e===Yx&&Qx?null:e;default:return null}}function SA(e,t){if(Wa)return e==="compositionend"||!Nv&&Zk(e,t)?(e=Qk(),qc=Tv=ei=null,Wa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jk&&t.locale!=="ko"?null:t.data;default:return null}}var RA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RA[e.type]:t==="textarea"}function tC(e,t,n,r){Ak(r),t=gd(t,"onChange"),0<t.length&&(n=new _v("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Tl=null,Jl=null;function TA(e){fC(e,0)}function Mf(e){var t=Ha(e);if(Sk(t))return e}function _A(e,t){if(e==="change")return t}var nC=!1;if(Ro){var Gh;if(Ro){var Kh="oninput"in document;if(!Kh){var Zx=document.createElement("div");Zx.setAttribute("oninput","return;"),Kh=typeof Zx.oninput=="function"}Gh=Kh}else Gh=!1;nC=Gh&&(!document.documentMode||9<document.documentMode)}function eb(){Tl&&(Tl.detachEvent("onpropertychange",rC),Jl=Tl=null)}function rC(e){if(e.propertyName==="value"&&Mf(Jl)){var t=[];tC(t,Jl,e,kv(e)),Ok(TA,t)}}function IA(e,t,n){e==="focusin"?(eb(),Tl=t,Jl=n,Tl.attachEvent("onpropertychange",rC)):e==="focusout"&&eb()}function NA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mf(Jl)}function PA(e,t){if(e==="click")return Mf(t)}function AA(e,t){if(e==="input"||e==="change")return Mf(t)}function DA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _r=typeof Object.is=="function"?Object.is:DA;function Zl(e,t){if(_r(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!mm.call(t,o)||!_r(e[o],t[o]))return!1}return!0}function tb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nb(e,t){var n=tb(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tb(n)}}function oC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function iC(){for(var e=window,t=ud();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ud(e.document)}return t}function Pv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function MA(e){var t=iC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&oC(n.ownerDocument.documentElement,n)){if(r!==null&&Pv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=nb(n,i);var a=nb(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FA=Ro&&"documentMode"in document&&11>=document.documentMode,$a=null,Mm=null,_l=null,Fm=!1;function rb(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fm||$a==null||$a!==ud(r)||(r=$a,"selectionStart"in r&&Pv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_l&&Zl(_l,r)||(_l=r,r=gd(Mm,"onSelect"),0<r.length&&(t=new _v("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$a)))}function dc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ua={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionend:dc("Transition","TransitionEnd")},qh={},aC={};Ro&&(aC=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Ff(e){if(qh[e])return qh[e];if(!Ua[e])return e;var t=Ua[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in aC)return qh[e]=t[n];return e}var sC=Ff("animationend"),lC=Ff("animationiteration"),uC=Ff("animationstart"),cC=Ff("transitionend"),dC=new Map,ob="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(e,t){dC.set(e,t),va(t,[e])}for(var Xh=0;Xh<ob.length;Xh++){var Yh=ob[Xh],OA=Yh.toLowerCase(),LA=Yh[0].toUpperCase()+Yh.slice(1);Ti(OA,"on"+LA)}Ti(sC,"onAnimationEnd");Ti(lC,"onAnimationIteration");Ti(uC,"onAnimationStart");Ti("dblclick","onDoubleClick");Ti("focusin","onFocus");Ti("focusout","onBlur");Ti(cC,"onTransitionEnd");Es("onMouseEnter",["mouseout","mouseover"]);Es("onMouseLeave",["mouseout","mouseover"]);Es("onPointerEnter",["pointerout","pointerover"]);Es("onPointerLeave",["pointerout","pointerover"]);va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));va("onBeforeInput",["compositionend","keypress","textInput","paste"]);va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BA=new Set("cancel close invalid load scroll toggle".split(" ").concat(wl));function ib(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,OP(r,t,void 0,e),e.currentTarget=null}function fC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;ib(o,s,u),i=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;ib(o,s,u),i=l}}}if(dd)throw e=Nm,dd=!1,Nm=null,e}function Qe(e,t){var n=t[zm];n===void 0&&(n=t[zm]=new Set);var r=e+"__bubble";n.has(r)||(hC(t,e,2,!1),n.add(r))}function Qh(e,t,n){var r=0;t&&(r|=4),hC(n,e,r,t)}var fc="_reactListening"+Math.random().toString(36).slice(2);function eu(e){if(!e[fc]){e[fc]=!0,bk.forEach(function(n){n!=="selectionchange"&&(BA.has(n)||Qh(n,!1,e),Qh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fc]||(t[fc]=!0,Qh("selectionchange",!1,t))}}function hC(e,t,n,r){switch(Yk(t)){case 1:var o=JP;break;case 4:o=ZP;break;default:o=Rv}n=o.bind(null,t,n,e),o=void 0,!Im||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Jh(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;a=a.return}for(;s!==null;){if(a=Ki(s),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}s=s.parentNode}}r=r.return}Ok(function(){var u=i,c=kv(n),d=[];e:{var f=dC.get(e);if(f!==void 0){var h=_v,p=e;switch(e){case"keypress":if(Xc(n)===0)break e;case"keydown":case"keyup":h=pA;break;case"focusin":p="focus",h=Hh;break;case"focusout":p="blur",h=Hh;break;case"beforeblur":case"afterblur":h=Hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Kx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=nA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=vA;break;case sC:case lC:case uC:h=iA;break;case cC:h=xA;break;case"scroll":h=eA;break;case"wheel":h=wA;break;case"copy":case"cut":case"paste":h=sA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Xx}var m=(t&4)!==0,y=!m&&e==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,g!==null&&(b=ql(v,g),b!=null&&m.push(tu(v,b,x)))),y)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==Tm&&(p=n.relatedTarget||n.fromElement)&&(Ki(p)||p[To]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Ki(p):null,p!==null&&(y=ya(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=Kx,b="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Xx,b="onPointerLeave",g="onPointerEnter",v="pointer"),y=h==null?f:Ha(h),x=p==null?f:Ha(p),f=new m(b,v+"leave",h,n,c),f.target=y,f.relatedTarget=x,b=null,Ki(c)===u&&(m=new m(g,v+"enter",p,n,c),m.target=x,m.relatedTarget=y,b=m),y=b,h&&p)t:{for(m=h,g=p,v=0,x=m;x;x=Na(x))v++;for(x=0,b=g;b;b=Na(b))x++;for(;0<v-x;)m=Na(m),v--;for(;0<x-v;)g=Na(g),x--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=Na(m),g=Na(g)}m=null}else m=null;h!==null&&ab(d,f,h,m,!1),p!==null&&y!==null&&ab(d,y,p,m,!0)}}e:{if(f=u?Ha(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=_A;else if(Jx(f))if(nC)k=AA;else{k=NA;var E=IA}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=PA);if(k&&(k=k(e,u))){tC(d,k,n,c);break e}E&&E(e,f,u),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&km(f,"number",f.value)}switch(E=u?Ha(u):window,e){case"focusin":(Jx(E)||E.contentEditable==="true")&&($a=E,Mm=u,_l=null);break;case"focusout":_l=Mm=$a=null;break;case"mousedown":Fm=!0;break;case"contextmenu":case"mouseup":case"dragend":Fm=!1,rb(d,n,c);break;case"selectionchange":if(FA)break;case"keydown":case"keyup":rb(d,n,c)}var T;if(Nv)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Wa?Zk(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Jk&&n.locale!=="ko"&&(Wa||R!=="onCompositionStart"?R==="onCompositionEnd"&&Wa&&(T=Qk()):(ei=c,Tv="value"in ei?ei.value:ei.textContent,Wa=!0)),E=gd(u,R),0<E.length&&(R=new qx(R,e,null,n,c),d.push({event:R,listeners:E}),T?R.data=T:(T=eC(n),T!==null&&(R.data=T)))),(T=CA?EA(e,n):SA(e,n))&&(u=gd(u,"onBeforeInput"),0<u.length&&(c=new qx("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}fC(d,t)})}function tu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gd(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=ql(e,n),i!=null&&r.unshift(tu(e,i,o)),i=ql(e,t),i!=null&&r.push(tu(e,i,o))),e=e.return}return r}function Na(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ab(e,t,n,r,o){for(var i=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,o?(l=ql(n,i),l!=null&&a.unshift(tu(n,l,s))):o||(l=ql(n,i),l!=null&&a.push(tu(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var jA=/\r\n?/g,zA=/\u0000|\uFFFD/g;function sb(e){return(typeof e=="string"?e:""+e).replace(jA,`
`).replace(zA,"")}function hc(e,t,n){if(t=sb(t),sb(e)!==t&&n)throw Error(J(425))}function vd(){}var Om=null,Lm=null;function Bm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jm=typeof setTimeout=="function"?setTimeout:void 0,VA=typeof clearTimeout=="function"?clearTimeout:void 0,lb=typeof Promise=="function"?Promise:void 0,WA=typeof queueMicrotask=="function"?queueMicrotask:typeof lb<"u"?function(e){return lb.resolve(null).then(e).catch($A)}:jm;function $A(e){setTimeout(function(){throw e})}function Zh(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ql(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ql(t)}function ci(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ub(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Hs=Math.random().toString(36).slice(2),Lr="__reactFiber$"+Hs,nu="__reactProps$"+Hs,To="__reactContainer$"+Hs,zm="__reactEvents$"+Hs,UA="__reactListeners$"+Hs,HA="__reactHandles$"+Hs;function Ki(e){var t=e[Lr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[To]||n[Lr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ub(e);e!==null;){if(n=e[Lr])return n;e=ub(e)}return t}e=n,n=e.parentNode}return null}function _u(e){return e=e[Lr]||e[To],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ha(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Of(e){return e[nu]||null}var Vm=[],Ga=-1;function _i(e){return{current:e}}function et(e){0>Ga||(e.current=Vm[Ga],Vm[Ga]=null,Ga--)}function Ge(e,t){Ga++,Vm[Ga]=e.current,e.current=t}var wi={},fn=_i(wi),_n=_i(!1),sa=wi;function Ss(e,t){var n=e.type.contextTypes;if(!n)return wi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function In(e){return e=e.childContextTypes,e!=null}function yd(){et(_n),et(fn)}function cb(e,t,n){if(fn.current!==wi)throw Error(J(168));Ge(fn,t),Ge(_n,n)}function pC(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(J(108,IP(e)||"Unknown",o));return st({},n,r)}function xd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wi,sa=fn.current,Ge(fn,e),Ge(_n,_n.current),!0}function db(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=pC(e,t,sa),r.__reactInternalMemoizedMergedChildContext=e,et(_n),et(fn),Ge(fn,e)):et(_n),Ge(_n,n)}var po=null,Lf=!1,ep=!1;function mC(e){po===null?po=[e]:po.push(e)}function GA(e){Lf=!0,mC(e)}function Ii(){if(!ep&&po!==null){ep=!0;var e=0,t=je;try{var n=po;for(je=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}po=null,Lf=!1}catch(o){throw po!==null&&(po=po.slice(e+1)),zk(Cv,Ii),o}finally{je=t,ep=!1}}return null}var Ka=[],qa=0,bd=null,wd=0,or=[],ir=0,la=null,go=1,vo="";function Bi(e,t){Ka[qa++]=wd,Ka[qa++]=bd,bd=e,wd=t}function gC(e,t,n){or[ir++]=go,or[ir++]=vo,or[ir++]=la,la=e;var r=go;e=vo;var o=32-Sr(r)-1;r&=~(1<<o),n+=1;var i=32-Sr(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,go=1<<32-Sr(t)+o|n<<o|r,vo=i+e}else go=1<<i|n<<o|r,vo=e}function Av(e){e.return!==null&&(Bi(e,1),gC(e,1,0))}function Dv(e){for(;e===bd;)bd=Ka[--qa],Ka[qa]=null,wd=Ka[--qa],Ka[qa]=null;for(;e===la;)la=or[--ir],or[ir]=null,vo=or[--ir],or[ir]=null,go=or[--ir],or[ir]=null}var Hn=null,Vn=null,tt=!1,kr=null;function vC(e,t){var n=lr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function fb(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hn=e,Vn=ci(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hn=e,Vn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=la!==null?{id:go,overflow:vo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=lr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Hn=e,Vn=null,!0):!1;default:return!1}}function Wm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $m(e){if(tt){var t=Vn;if(t){var n=t;if(!fb(e,t)){if(Wm(e))throw Error(J(418));t=ci(n.nextSibling);var r=Hn;t&&fb(e,t)?vC(r,n):(e.flags=e.flags&-4097|2,tt=!1,Hn=e)}}else{if(Wm(e))throw Error(J(418));e.flags=e.flags&-4097|2,tt=!1,Hn=e}}}function hb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hn=e}function pc(e){if(e!==Hn)return!1;if(!tt)return hb(e),tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bm(e.type,e.memoizedProps)),t&&(t=Vn)){if(Wm(e))throw yC(),Error(J(418));for(;t;)vC(e,t),t=ci(t.nextSibling)}if(hb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vn=ci(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vn=null}}else Vn=Hn?ci(e.stateNode.nextSibling):null;return!0}function yC(){for(var e=Vn;e;)e=ci(e.nextSibling)}function Rs(){Vn=Hn=null,tt=!1}function Mv(e){kr===null?kr=[e]:kr.push(e)}var KA=Fo.ReactCurrentBatchConfig;function ll(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var s=o.refs;a===null?delete s[i]:s[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function mc(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pb(e){var t=e._init;return t(e._payload)}function xC(e){function t(g,v){if(e){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function o(g,v){return g=pi(g,v),g.index=0,g.sibling=null,g}function i(g,v,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function s(g,v,x,b){return v===null||v.tag!==6?(v=sp(x,g.mode,b),v.return=g,v):(v=o(v,x),v.return=g,v)}function l(g,v,x,b){var k=x.type;return k===Va?c(g,v,x.props.children,b,x.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xo&&pb(k)===v.type)?(b=o(v,x.props),b.ref=ll(g,v,x),b.return=g,b):(b=nd(x.type,x.key,x.props,null,g.mode,b),b.ref=ll(g,v,x),b.return=g,b)}function u(g,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=lp(x,g.mode,b),v.return=g,v):(v=o(v,x.children||[]),v.return=g,v)}function c(g,v,x,b,k){return v===null||v.tag!==7?(v=ta(x,g.mode,b,k),v.return=g,v):(v=o(v,x),v.return=g,v)}function d(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=sp(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case oc:return x=nd(v.type,v.key,v.props,null,g.mode,x),x.ref=ll(g,null,v),x.return=g,x;case za:return v=lp(v,g.mode,x),v.return=g,v;case Xo:var b=v._init;return d(g,b(v._payload),x)}if(xl(v)||rl(v))return v=ta(v,g.mode,x,null),v.return=g,v;mc(g,v)}return null}function f(g,v,x,b){var k=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:s(g,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oc:return x.key===k?l(g,v,x,b):null;case za:return x.key===k?u(g,v,x,b):null;case Xo:return k=x._init,f(g,v,k(x._payload),b)}if(xl(x)||rl(x))return k!==null?null:c(g,v,x,b,null);mc(g,x)}return null}function h(g,v,x,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(x)||null,s(v,g,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case oc:return g=g.get(b.key===null?x:b.key)||null,l(v,g,b,k);case za:return g=g.get(b.key===null?x:b.key)||null,u(v,g,b,k);case Xo:var E=b._init;return h(g,v,x,E(b._payload),k)}if(xl(b)||rl(b))return g=g.get(x)||null,c(v,g,b,k,null);mc(v,b)}return null}function p(g,v,x,b){for(var k=null,E=null,T=v,R=v=0,_=null;T!==null&&R<x.length;R++){T.index>R?(_=T,T=null):_=T.sibling;var S=f(g,T,x[R],b);if(S===null){T===null&&(T=_);break}e&&T&&S.alternate===null&&t(g,T),v=i(S,v,R),E===null?k=S:E.sibling=S,E=S,T=_}if(R===x.length)return n(g,T),tt&&Bi(g,R),k;if(T===null){for(;R<x.length;R++)T=d(g,x[R],b),T!==null&&(v=i(T,v,R),E===null?k=T:E.sibling=T,E=T);return tt&&Bi(g,R),k}for(T=r(g,T);R<x.length;R++)_=h(T,g,R,x[R],b),_!==null&&(e&&_.alternate!==null&&T.delete(_.key===null?R:_.key),v=i(_,v,R),E===null?k=_:E.sibling=_,E=_);return e&&T.forEach(function(A){return t(g,A)}),tt&&Bi(g,R),k}function m(g,v,x,b){var k=rl(x);if(typeof k!="function")throw Error(J(150));if(x=k.call(x),x==null)throw Error(J(151));for(var E=k=null,T=v,R=v=0,_=null,S=x.next();T!==null&&!S.done;R++,S=x.next()){T.index>R?(_=T,T=null):_=T.sibling;var A=f(g,T,S.value,b);if(A===null){T===null&&(T=_);break}e&&T&&A.alternate===null&&t(g,T),v=i(A,v,R),E===null?k=A:E.sibling=A,E=A,T=_}if(S.done)return n(g,T),tt&&Bi(g,R),k;if(T===null){for(;!S.done;R++,S=x.next())S=d(g,S.value,b),S!==null&&(v=i(S,v,R),E===null?k=S:E.sibling=S,E=S);return tt&&Bi(g,R),k}for(T=r(g,T);!S.done;R++,S=x.next())S=h(T,g,R,S.value,b),S!==null&&(e&&S.alternate!==null&&T.delete(S.key===null?R:S.key),v=i(S,v,R),E===null?k=S:E.sibling=S,E=S);return e&&T.forEach(function(N){return t(g,N)}),tt&&Bi(g,R),k}function y(g,v,x,b){if(typeof x=="object"&&x!==null&&x.type===Va&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case oc:e:{for(var k=x.key,E=v;E!==null;){if(E.key===k){if(k=x.type,k===Va){if(E.tag===7){n(g,E.sibling),v=o(E,x.props.children),v.return=g,g=v;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xo&&pb(k)===E.type){n(g,E.sibling),v=o(E,x.props),v.ref=ll(g,E,x),v.return=g,g=v;break e}n(g,E);break}else t(g,E);E=E.sibling}x.type===Va?(v=ta(x.props.children,g.mode,b,x.key),v.return=g,g=v):(b=nd(x.type,x.key,x.props,null,g.mode,b),b.ref=ll(g,v,x),b.return=g,g=b)}return a(g);case za:e:{for(E=x.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=o(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else t(g,v);v=v.sibling}v=lp(x,g.mode,b),v.return=g,g=v}return a(g);case Xo:return E=x._init,y(g,v,E(x._payload),b)}if(xl(x))return p(g,v,x,b);if(rl(x))return m(g,v,x,b);mc(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=o(v,x),v.return=g,g=v):(n(g,v),v=sp(x,g.mode,b),v.return=g,g=v),a(g)):n(g,v)}return y}var Ts=xC(!0),bC=xC(!1),kd=_i(null),Cd=null,Xa=null,Fv=null;function Ov(){Fv=Xa=Cd=null}function Lv(e){var t=kd.current;et(kd),e._currentValue=t}function Um(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ds(e,t){Cd=e,Fv=Xa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tn=!0),e.firstContext=null)}function dr(e){var t=e._currentValue;if(Fv!==e)if(e={context:e,memoizedValue:t,next:null},Xa===null){if(Cd===null)throw Error(J(308));Xa=e,Cd.dependencies={lanes:0,firstContext:e}}else Xa=Xa.next=e;return t}var qi=null;function Bv(e){qi===null?qi=[e]:qi.push(e)}function wC(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Bv(t)):(n.next=o.next,o.next=n),t.interleaved=n,_o(e,r)}function _o(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yo=!1;function jv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function di(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,_o(e,n)}return o=r.interleaved,o===null?(t.next=t,Bv(r)):(t.next=o.next,o.next=t),r.interleaved=t,_o(e,n)}function Yc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ev(e,n)}}function mb(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ed(e,t,n,r){var o=e.updateQueue;Yo=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;a=0,c=u=l=null,s=i;do{var f=s.lane,h=s.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(f=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=st({},d,f);break e;case 2:Yo=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=o.effects,f===null?o.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,a|=f;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;f=s,s=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(c===null&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);ca|=a,e.lanes=a,e.memoizedState=d}}function gb(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(J(191,o));o.call(r)}}}var Iu={},Hr=_i(Iu),ru=_i(Iu),ou=_i(Iu);function Xi(e){if(e===Iu)throw Error(J(174));return e}function zv(e,t){switch(Ge(ou,t),Ge(ru,e),Ge(Hr,Iu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Em(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Em(t,e)}et(Hr),Ge(Hr,t)}function _s(){et(Hr),et(ru),et(ou)}function CC(e){Xi(ou.current);var t=Xi(Hr.current),n=Em(t,e.type);t!==n&&(Ge(ru,e),Ge(Hr,n))}function Vv(e){ru.current===e&&(et(Hr),et(ru))}var nt=_i(0);function Sd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tp=[];function Wv(){for(var e=0;e<tp.length;e++)tp[e]._workInProgressVersionPrimary=null;tp.length=0}var Qc=Fo.ReactCurrentDispatcher,np=Fo.ReactCurrentBatchConfig,ua=0,at=null,St=null,Ot=null,Rd=!1,Il=!1,iu=0,qA=0;function Zt(){throw Error(J(321))}function $v(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_r(e[n],t[n]))return!1;return!0}function Uv(e,t,n,r,o,i){if(ua=i,at=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qc.current=e===null||e.memoizedState===null?JA:ZA,e=n(r,o),Il){i=0;do{if(Il=!1,iu=0,25<=i)throw Error(J(301));i+=1,Ot=St=null,t.updateQueue=null,Qc.current=e3,e=n(r,o)}while(Il)}if(Qc.current=Td,t=St!==null&&St.next!==null,ua=0,Ot=St=at=null,Rd=!1,t)throw Error(J(300));return e}function Hv(){var e=iu!==0;return iu=0,e}function Dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?at.memoizedState=Ot=e:Ot=Ot.next=e,Ot}function fr(){if(St===null){var e=at.alternate;e=e!==null?e.memoizedState:null}else e=St.next;var t=Ot===null?at.memoizedState:Ot.next;if(t!==null)Ot=t,St=e;else{if(e===null)throw Error(J(310));St=e,e={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Ot===null?at.memoizedState=Ot=e:Ot=Ot.next=e}return Ot}function au(e,t){return typeof t=="function"?t(e):t}function rp(e){var t=fr(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=St,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var s=a=null,l=null,u=i;do{var c=u.lane;if((ua&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,at.lanes|=c,ca|=c}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=s,_r(r,t.memoizedState)||(Tn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,at.lanes|=i,ca|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function op(e){var t=fr(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);_r(i,t.memoizedState)||(Tn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function EC(){}function SC(e,t){var n=at,r=fr(),o=t(),i=!_r(r.memoizedState,o);if(i&&(r.memoizedState=o,Tn=!0),r=r.queue,Gv(_C.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,su(9,TC.bind(null,n,r,o,t),void 0,null),Lt===null)throw Error(J(349));ua&30||RC(n,t,o)}return o}function RC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function TC(e,t,n,r){t.value=n,t.getSnapshot=r,IC(t)&&NC(e)}function _C(e,t,n){return n(function(){IC(t)&&NC(e)})}function IC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_r(e,n)}catch{return!0}}function NC(e){var t=_o(e,1);t!==null&&Rr(t,e,1,-1)}function vb(e){var t=Dr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:au,lastRenderedState:e},t.queue=e,e=e.dispatch=QA.bind(null,at,e),[t.memoizedState,e]}function su(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function PC(){return fr().memoizedState}function Jc(e,t,n,r){var o=Dr();at.flags|=e,o.memoizedState=su(1|t,n,void 0,r===void 0?null:r)}function Bf(e,t,n,r){var o=fr();r=r===void 0?null:r;var i=void 0;if(St!==null){var a=St.memoizedState;if(i=a.destroy,r!==null&&$v(r,a.deps)){o.memoizedState=su(t,n,i,r);return}}at.flags|=e,o.memoizedState=su(1|t,n,i,r)}function yb(e,t){return Jc(8390656,8,e,t)}function Gv(e,t){return Bf(2048,8,e,t)}function AC(e,t){return Bf(4,2,e,t)}function DC(e,t){return Bf(4,4,e,t)}function MC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function FC(e,t,n){return n=n!=null?n.concat([e]):null,Bf(4,4,MC.bind(null,t,e),n)}function Kv(){}function OC(e,t){var n=fr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$v(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function LC(e,t){var n=fr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$v(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function BC(e,t,n){return ua&21?(_r(n,t)||(n=$k(),at.lanes|=n,ca|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tn=!0),e.memoizedState=n)}function XA(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var r=np.transition;np.transition={};try{e(!1),t()}finally{je=n,np.transition=r}}function jC(){return fr().memoizedState}function YA(e,t,n){var r=hi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zC(e))VC(t,n);else if(n=wC(e,t,n,r),n!==null){var o=yn();Rr(n,e,r,o),WC(n,t,r)}}function QA(e,t,n){var r=hi(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zC(e))VC(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,_r(s,a)){var l=t.interleaved;l===null?(o.next=o,Bv(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=wC(e,t,o,r),n!==null&&(o=yn(),Rr(n,e,r,o),WC(n,t,r))}}function zC(e){var t=e.alternate;return e===at||t!==null&&t===at}function VC(e,t){Il=Rd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function WC(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ev(e,n)}}var Td={readContext:dr,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useInsertionEffect:Zt,useLayoutEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useMutableSource:Zt,useSyncExternalStore:Zt,useId:Zt,unstable_isNewReconciler:!1},JA={readContext:dr,useCallback:function(e,t){return Dr().memoizedState=[e,t===void 0?null:t],e},useContext:dr,useEffect:yb,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Jc(4194308,4,MC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jc(4,2,e,t)},useMemo:function(e,t){var n=Dr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=YA.bind(null,at,e),[r.memoizedState,e]},useRef:function(e){var t=Dr();return e={current:e},t.memoizedState=e},useState:vb,useDebugValue:Kv,useDeferredValue:function(e){return Dr().memoizedState=e},useTransition:function(){var e=vb(!1),t=e[0];return e=XA.bind(null,e[1]),Dr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=at,o=Dr();if(tt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Lt===null)throw Error(J(349));ua&30||RC(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,yb(_C.bind(null,r,i,e),[e]),r.flags|=2048,su(9,TC.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Dr(),t=Lt.identifierPrefix;if(tt){var n=vo,r=go;n=(r&~(1<<32-Sr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=iu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=qA++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ZA={readContext:dr,useCallback:OC,useContext:dr,useEffect:Gv,useImperativeHandle:FC,useInsertionEffect:AC,useLayoutEffect:DC,useMemo:LC,useReducer:rp,useRef:PC,useState:function(){return rp(au)},useDebugValue:Kv,useDeferredValue:function(e){var t=fr();return BC(t,St.memoizedState,e)},useTransition:function(){var e=rp(au)[0],t=fr().memoizedState;return[e,t]},useMutableSource:EC,useSyncExternalStore:SC,useId:jC,unstable_isNewReconciler:!1},e3={readContext:dr,useCallback:OC,useContext:dr,useEffect:Gv,useImperativeHandle:FC,useInsertionEffect:AC,useLayoutEffect:DC,useMemo:LC,useReducer:op,useRef:PC,useState:function(){return op(au)},useDebugValue:Kv,useDeferredValue:function(e){var t=fr();return St===null?t.memoizedState=e:BC(t,St.memoizedState,e)},useTransition:function(){var e=op(au)[0],t=fr().memoizedState;return[e,t]},useMutableSource:EC,useSyncExternalStore:SC,useId:jC,unstable_isNewReconciler:!1};function br(e,t){if(e&&e.defaultProps){t=st({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Hm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:st({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jf={isMounted:function(e){return(e=e._reactInternals)?ya(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=yn(),o=hi(e),i=xo(r,o);i.payload=t,n!=null&&(i.callback=n),t=di(e,i,o),t!==null&&(Rr(t,e,o,r),Yc(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=yn(),o=hi(e),i=xo(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=di(e,i,o),t!==null&&(Rr(t,e,o,r),Yc(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yn(),r=hi(e),o=xo(n,r);o.tag=2,t!=null&&(o.callback=t),t=di(e,o,r),t!==null&&(Rr(t,e,r,n),Yc(t,e,r))}};function xb(e,t,n,r,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Zl(n,r)||!Zl(o,i):!0}function $C(e,t,n){var r=!1,o=wi,i=t.contextType;return typeof i=="object"&&i!==null?i=dr(i):(o=In(t)?sa:fn.current,r=t.contextTypes,i=(r=r!=null)?Ss(e,o):wi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function bb(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jf.enqueueReplaceState(t,t.state,null)}function Gm(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},jv(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=dr(i):(i=In(t)?sa:fn.current,o.context=Ss(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Hm(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&jf.enqueueReplaceState(o,o.state,null),Ed(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Is(e,t){try{var n="",r=t;do n+=_P(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function ip(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Km(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var t3=typeof WeakMap=="function"?WeakMap:Map;function UC(e,t,n){n=xo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Id||(Id=!0,rg=r),Km(e,t)},n}function HC(e,t,n){n=xo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Km(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Km(e,t),typeof r!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function wb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new t3;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=m3.bind(null,e,t,n),t.then(e,e))}function kb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Cb(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=xo(-1,1),t.tag=2,di(n,t,1))),n.lanes|=1),e)}var n3=Fo.ReactCurrentOwner,Tn=!1;function mn(e,t,n,r){t.child=e===null?bC(t,null,n,r):Ts(t,e.child,n,r)}function Eb(e,t,n,r,o){n=n.render;var i=t.ref;return ds(t,o),r=Uv(e,t,n,r,i,o),n=Hv(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Io(e,t,o)):(tt&&n&&Av(t),t.flags|=1,mn(e,t,r,o),t.child)}function Sb(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!t0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,GC(e,t,i,r,o)):(e=nd(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Zl,n(a,r)&&e.ref===t.ref)return Io(e,t,o)}return t.flags|=1,e=pi(i,r),e.ref=t.ref,e.return=t,t.child=e}function GC(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(Zl(i,r)&&e.ref===t.ref)if(Tn=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(Tn=!0);else return t.lanes=e.lanes,Io(e,t,o)}return qm(e,t,n,r,o)}function KC(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Qa,Bn),Bn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(Qa,Bn),Bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ge(Qa,Bn),Bn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ge(Qa,Bn),Bn|=r;return mn(e,t,o,n),t.child}function qC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function qm(e,t,n,r,o){var i=In(n)?sa:fn.current;return i=Ss(t,i),ds(t,o),n=Uv(e,t,n,r,i,o),r=Hv(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Io(e,t,o)):(tt&&r&&Av(t),t.flags|=1,mn(e,t,n,o),t.child)}function Rb(e,t,n,r,o){if(In(n)){var i=!0;xd(t)}else i=!1;if(ds(t,o),t.stateNode===null)Zc(e,t),$C(t,n,r),Gm(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=dr(u):(u=In(n)?sa:fn.current,u=Ss(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==u)&&bb(t,a,r,u),Yo=!1;var f=t.memoizedState;a.state=f,Ed(t,r,a,o),l=t.memoizedState,s!==r||f!==l||_n.current||Yo?(typeof c=="function"&&(Hm(t,n,c,r),l=t.memoizedState),(s=Yo||xb(t,n,s,r,f,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,kC(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:br(t.type,s),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=dr(l):(l=In(n)?sa:fn.current,l=Ss(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==l)&&bb(t,a,r,l),Yo=!1,f=t.memoizedState,a.state=f,Ed(t,r,a,o);var p=t.memoizedState;s!==d||f!==p||_n.current||Yo?(typeof h=="function"&&(Hm(t,n,h,r),p=t.memoizedState),(u=Yo||xb(t,n,u,r,f,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Xm(e,t,n,r,i,o)}function Xm(e,t,n,r,o,i){qC(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&db(t,n,!1),Io(e,t,i);r=t.stateNode,n3.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ts(t,e.child,null,i),t.child=Ts(t,null,s,i)):mn(e,t,s,i),t.memoizedState=r.state,o&&db(t,n,!0),t.child}function XC(e){var t=e.stateNode;t.pendingContext?cb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cb(e,t.context,!1),zv(e,t.containerInfo)}function Tb(e,t,n,r,o){return Rs(),Mv(o),t.flags|=256,mn(e,t,n,r),t.child}var Ym={dehydrated:null,treeContext:null,retryLane:0};function Qm(e){return{baseLanes:e,cachePool:null,transitions:null}}function YC(e,t,n){var r=t.pendingProps,o=nt.current,i=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ge(nt,o&1),e===null)return $m(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Wf(a,r,0,null),e=ta(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Qm(n),t.memoizedState=Ym,e):qv(t,a));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return r3(e,t,a,r,s,o,n);if(i){i=r.fallback,a=t.mode,o=e.child,s=o.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=pi(o,l),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?i=pi(s,i):(i=ta(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Qm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Ym,r}return i=e.child,e=i.sibling,r=pi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function qv(e,t){return t=Wf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gc(e,t,n,r){return r!==null&&Mv(r),Ts(t,e.child,null,n),e=qv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function r3(e,t,n,r,o,i,a){if(n)return t.flags&256?(t.flags&=-257,r=ip(Error(J(422))),gc(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Wf({mode:"visible",children:r.children},o,0,null),i=ta(i,o,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ts(t,e.child,null,a),t.child.memoizedState=Qm(a),t.memoizedState=Ym,i);if(!(t.mode&1))return gc(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(J(419)),r=ip(i,r,void 0),gc(e,t,a,r)}if(s=(a&e.childLanes)!==0,Tn||s){if(r=Lt,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,_o(e,o),Rr(r,e,o,-1))}return e0(),r=ip(Error(J(421))),gc(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=g3.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,Vn=ci(o.nextSibling),Hn=t,tt=!0,kr=null,e!==null&&(or[ir++]=go,or[ir++]=vo,or[ir++]=la,go=e.id,vo=e.overflow,la=t),t=qv(t,r.children),t.flags|=4096,t)}function _b(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Um(e.return,t,n)}function ap(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function QC(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(mn(e,t,r.children,n),r=nt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_b(e,n,t);else if(e.tag===19)_b(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ge(nt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Sd(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ap(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Sd(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ap(t,!0,n,null,i);break;case"together":ap(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Io(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ca|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=pi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function o3(e,t,n){switch(t.tag){case 3:XC(t),Rs();break;case 5:CC(t);break;case 1:In(t.type)&&xd(t);break;case 4:zv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ge(kd,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ge(nt,nt.current&1),t.flags|=128,null):n&t.child.childLanes?YC(e,t,n):(Ge(nt,nt.current&1),e=Io(e,t,n),e!==null?e.sibling:null);Ge(nt,nt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return QC(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ge(nt,nt.current),r)break;return null;case 22:case 23:return t.lanes=0,KC(e,t,n)}return Io(e,t,n)}var JC,Jm,ZC,eE;JC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jm=function(){};ZC=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Xi(Hr.current);var i=null;switch(n){case"input":o=bm(e,o),r=bm(e,r),i=[];break;case"select":o=st({},o,{value:void 0}),r=st({},r,{value:void 0}),i=[];break;case"textarea":o=Cm(e,o),r=Cm(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=vd)}Sm(n,r);var a;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var s=o[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Qe("scroll",e),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};eE=function(e,t,n,r){n!==r&&(t.flags|=4)};function ul(e,t){if(!tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function en(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function i3(e,t,n){var r=t.pendingProps;switch(Dv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(t),null;case 1:return In(t.type)&&yd(),en(t),null;case 3:return r=t.stateNode,_s(),et(_n),et(fn),Wv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(pc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kr!==null&&(ag(kr),kr=null))),Jm(e,t),en(t),null;case 5:Vv(t);var o=Xi(ou.current);if(n=t.type,e!==null&&t.stateNode!=null)ZC(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return en(t),null}if(e=Xi(Hr.current),pc(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Lr]=t,r[nu]=i,e=(t.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(o=0;o<wl.length;o++)Qe(wl[o],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Lx(r,i),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Qe("invalid",r);break;case"textarea":jx(r,i),Qe("invalid",r)}Sm(n,i),o=null;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];a==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&hc(r.textContent,s,e),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&hc(r.textContent,s,e),o=["children",""+s]):Gl.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Qe("scroll",r)}switch(n){case"input":ic(r),Bx(r,i,!0);break;case"textarea":ic(r),zx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=vd)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_k(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Lr]=t,e[nu]=r,JC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Rm(n,r),n){case"dialog":Qe("cancel",e),Qe("close",e),o=r;break;case"iframe":case"object":case"embed":Qe("load",e),o=r;break;case"video":case"audio":for(o=0;o<wl.length;o++)Qe(wl[o],e);o=r;break;case"source":Qe("error",e),o=r;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),o=r;break;case"details":Qe("toggle",e),o=r;break;case"input":Lx(e,r),o=bm(e,r),Qe("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=st({},r,{value:void 0}),Qe("invalid",e);break;case"textarea":jx(e,r),o=Cm(e,r),Qe("invalid",e);break;default:o=r}Sm(n,o),s=o;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?Pk(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ik(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Kl(e,l):typeof l=="number"&&Kl(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Gl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Qe("scroll",e):l!=null&&yv(e,i,l,a))}switch(n){case"input":ic(e),Bx(e,r,!1);break;case"textarea":ic(e),zx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+bi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ss(e,!!r.multiple,i,!1):r.defaultValue!=null&&ss(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=vd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return en(t),null;case 6:if(e&&t.stateNode!=null)eE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=Xi(ou.current),Xi(Hr.current),pc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Lr]=t,(i=r.nodeValue!==n)&&(e=Hn,e!==null))switch(e.tag){case 3:hc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hc(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lr]=t,t.stateNode=r}return en(t),null;case 13:if(et(nt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tt&&Vn!==null&&t.mode&1&&!(t.flags&128))yC(),Rs(),t.flags|=98560,i=!1;else if(i=pc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(J(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[Lr]=t}else Rs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;en(t),i=!1}else kr!==null&&(ag(kr),kr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||nt.current&1?Rt===0&&(Rt=3):e0())),t.updateQueue!==null&&(t.flags|=4),en(t),null);case 4:return _s(),Jm(e,t),e===null&&eu(t.stateNode.containerInfo),en(t),null;case 10:return Lv(t.type._context),en(t),null;case 17:return In(t.type)&&yd(),en(t),null;case 19:if(et(nt),i=t.memoizedState,i===null)return en(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)ul(i,!1);else{if(Rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Sd(e),a!==null){for(t.flags|=128,ul(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ge(nt,nt.current&1|2),t.child}e=e.sibling}i.tail!==null&&vt()>Ns&&(t.flags|=128,r=!0,ul(i,!1),t.lanes=4194304)}else{if(!r)if(e=Sd(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ul(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!tt)return en(t),null}else 2*vt()-i.renderingStartTime>Ns&&n!==1073741824&&(t.flags|=128,r=!0,ul(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=vt(),t.sibling=null,n=nt.current,Ge(nt,r?n&1|2:n&1),t):(en(t),null);case 22:case 23:return Zv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bn&1073741824&&(en(t),t.subtreeFlags&6&&(t.flags|=8192)):en(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function a3(e,t){switch(Dv(t),t.tag){case 1:return In(t.type)&&yd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _s(),et(_n),et(fn),Wv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vv(t),null;case 13:if(et(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Rs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(nt),null;case 4:return _s(),null;case 10:return Lv(t.type._context),null;case 22:case 23:return Zv(),null;case 24:return null;default:return null}}var vc=!1,on=!1,s3=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ya(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(e,t,r)}else n.current=null}function Zm(e,t,n){try{n()}catch(r){dt(e,t,r)}}var Ib=!1;function l3(e,t){if(Om=pd,e=iC(),Pv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var h;d!==n||o!==0&&d.nodeType!==3||(s=a+o),d!==i||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++u===o&&(s=a),f===i&&++c===r&&(l=a),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lm={focusedElem:e,selectionRange:n},pd=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:br(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(b){dt(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return p=Ib,Ib=!1,p}function Nl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&Zm(t,n,i)}o=o.next}while(o!==r)}}function zf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function eg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function tE(e){var t=e.alternate;t!==null&&(e.alternate=null,tE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lr],delete t[nu],delete t[zm],delete t[UA],delete t[HA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nE(e){return e.tag===5||e.tag===3||e.tag===4}function Nb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=vd));else if(r!==4&&(e=e.child,e!==null))for(tg(e,t,n),e=e.sibling;e!==null;)tg(e,t,n),e=e.sibling}function ng(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ng(e,t,n),e=e.sibling;e!==null;)ng(e,t,n),e=e.sibling}var Wt=null,wr=!1;function $o(e,t,n){for(n=n.child;n!==null;)rE(e,t,n),n=n.sibling}function rE(e,t,n){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(Af,n)}catch{}switch(n.tag){case 5:on||Ya(n,t);case 6:var r=Wt,o=wr;Wt=null,$o(e,t,n),Wt=r,wr=o,Wt!==null&&(wr?(e=Wt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(wr?(e=Wt,n=n.stateNode,e.nodeType===8?Zh(e.parentNode,n):e.nodeType===1&&Zh(e,n),Ql(e)):Zh(Wt,n.stateNode));break;case 4:r=Wt,o=wr,Wt=n.stateNode.containerInfo,wr=!0,$o(e,t,n),Wt=r,wr=o;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Zm(n,t,a),o=o.next}while(o!==r)}$o(e,t,n);break;case 1:if(!on&&(Ya(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){dt(n,t,s)}$o(e,t,n);break;case 21:$o(e,t,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,$o(e,t,n),on=r):$o(e,t,n);break;default:$o(e,t,n)}}function Pb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new s3),t.forEach(function(r){var o=v3.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function xr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Wt=s.stateNode,wr=!1;break e;case 3:Wt=s.stateNode.containerInfo,wr=!0;break e;case 4:Wt=s.stateNode.containerInfo,wr=!0;break e}s=s.return}if(Wt===null)throw Error(J(160));rE(i,a,o),Wt=null,wr=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){dt(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oE(t,e),t=t.sibling}function oE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xr(t,e),Pr(e),r&4){try{Nl(3,e,e.return),zf(3,e)}catch(m){dt(e,e.return,m)}try{Nl(5,e,e.return)}catch(m){dt(e,e.return,m)}}break;case 1:xr(t,e),Pr(e),r&512&&n!==null&&Ya(n,n.return);break;case 5:if(xr(t,e),Pr(e),r&512&&n!==null&&Ya(n,n.return),e.flags&32){var o=e.stateNode;try{Kl(o,"")}catch(m){dt(e,e.return,m)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&Rk(o,i),Rm(s,a);var u=Rm(s,i);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?Pk(o,d):c==="dangerouslySetInnerHTML"?Ik(o,d):c==="children"?Kl(o,d):yv(o,c,d,u)}switch(s){case"input":wm(o,i);break;case"textarea":Tk(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?ss(o,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?ss(o,!!i.multiple,i.defaultValue,!0):ss(o,!!i.multiple,i.multiple?[]:"",!1))}o[nu]=i}catch(m){dt(e,e.return,m)}}break;case 6:if(xr(t,e),Pr(e),r&4){if(e.stateNode===null)throw Error(J(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(m){dt(e,e.return,m)}}break;case 3:if(xr(t,e),Pr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ql(t.containerInfo)}catch(m){dt(e,e.return,m)}break;case 4:xr(t,e),Pr(e);break;case 13:xr(t,e),Pr(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Qv=vt())),r&4&&Pb(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(on=(u=on)||c,xr(t,e),on=u):xr(t,e),Pr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(ie=e,c=e.child;c!==null;){for(d=ie=c;ie!==null;){switch(f=ie,h=f.child,f.tag){case 0:case 11:case 14:case 15:Nl(4,f,f.return);break;case 1:Ya(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){dt(r,n,m)}}break;case 5:Ya(f,f.return);break;case 22:if(f.memoizedState!==null){Db(d);continue}}h!==null?(h.return=f,ie=h):Db(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{o=d.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=Nk("display",a))}catch(m){dt(e,e.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){dt(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xr(t,e),Pr(e),r&4&&Pb(e);break;case 21:break;default:xr(t,e),Pr(e)}}function Pr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(nE(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Kl(o,""),r.flags&=-33);var i=Nb(e);ng(e,i,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=Nb(e);tg(e,s,a);break;default:throw Error(J(161))}}catch(l){dt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function u3(e,t,n){ie=e,iE(e)}function iE(e,t,n){for(var r=(e.mode&1)!==0;ie!==null;){var o=ie,i=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||vc;if(!a){var s=o.alternate,l=s!==null&&s.memoizedState!==null||on;s=vc;var u=on;if(vc=a,(on=l)&&!u)for(ie=o;ie!==null;)a=ie,l=a.child,a.tag===22&&a.memoizedState!==null?Mb(o):l!==null?(l.return=a,ie=l):Mb(o);for(;i!==null;)ie=i,iE(i),i=i.sibling;ie=o,vc=s,on=u}Ab(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ie=i):Ab(e)}}function Ab(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:on||zf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!on)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:br(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&gb(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}gb(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ql(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}on||t.flags&512&&eg(t)}catch(f){dt(t,t.return,f)}}if(t===e){ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Db(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Mb(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zf(4,t)}catch(l){dt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){dt(t,o,l)}}var i=t.return;try{eg(t)}catch(l){dt(t,i,l)}break;case 5:var a=t.return;try{eg(t)}catch(l){dt(t,a,l)}}}catch(l){dt(t,t.return,l)}if(t===e){ie=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ie=s;break}ie=t.return}}var c3=Math.ceil,_d=Fo.ReactCurrentDispatcher,Xv=Fo.ReactCurrentOwner,cr=Fo.ReactCurrentBatchConfig,Me=0,Lt=null,wt=null,qt=0,Bn=0,Qa=_i(0),Rt=0,lu=null,ca=0,Vf=0,Yv=0,Pl=null,En=null,Qv=0,Ns=1/0,fo=null,Id=!1,rg=null,fi=null,yc=!1,ti=null,Nd=0,Al=0,og=null,ed=-1,td=0;function yn(){return Me&6?vt():ed!==-1?ed:ed=vt()}function hi(e){return e.mode&1?Me&2&&qt!==0?qt&-qt:KA.transition!==null?(td===0&&(td=$k()),td):(e=je,e!==0||(e=window.event,e=e===void 0?16:Yk(e.type)),e):1}function Rr(e,t,n,r){if(50<Al)throw Al=0,og=null,Error(J(185));Ru(e,n,r),(!(Me&2)||e!==Lt)&&(e===Lt&&(!(Me&2)&&(Vf|=n),Rt===4&&Jo(e,qt)),Nn(e,r),n===1&&Me===0&&!(t.mode&1)&&(Ns=vt()+500,Lf&&Ii()))}function Nn(e,t){var n=e.callbackNode;KP(e,t);var r=hd(e,e===Lt?qt:0);if(r===0)n!==null&&$x(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$x(n),t===1)e.tag===0?GA(Fb.bind(null,e)):mC(Fb.bind(null,e)),WA(function(){!(Me&6)&&Ii()}),n=null;else{switch(Uk(r)){case 1:n=Cv;break;case 4:n=Vk;break;case 16:n=fd;break;case 536870912:n=Wk;break;default:n=fd}n=hE(n,aE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function aE(e,t){if(ed=-1,td=0,Me&6)throw Error(J(327));var n=e.callbackNode;if(fs()&&e.callbackNode!==n)return null;var r=hd(e,e===Lt?qt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Pd(e,r);else{t=r;var o=Me;Me|=2;var i=lE();(Lt!==e||qt!==t)&&(fo=null,Ns=vt()+500,ea(e,t));do try{h3();break}catch(s){sE(e,s)}while(!0);Ov(),_d.current=i,Me=o,wt!==null?t=0:(Lt=null,qt=0,t=Rt)}if(t!==0){if(t===2&&(o=Pm(e),o!==0&&(r=o,t=ig(e,o))),t===1)throw n=lu,ea(e,0),Jo(e,r),Nn(e,vt()),n;if(t===6)Jo(e,r);else{if(o=e.current.alternate,!(r&30)&&!d3(o)&&(t=Pd(e,r),t===2&&(i=Pm(e),i!==0&&(r=i,t=ig(e,i))),t===1))throw n=lu,ea(e,0),Jo(e,r),Nn(e,vt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:ji(e,En,fo);break;case 3:if(Jo(e,r),(r&130023424)===r&&(t=Qv+500-vt(),10<t)){if(hd(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){yn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=jm(ji.bind(null,e,En,fo),t);break}ji(e,En,fo);break;case 4:if(Jo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-Sr(r);i=1<<a,a=t[a],a>o&&(o=a),r&=~i}if(r=o,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*c3(r/1960))-r,10<r){e.timeoutHandle=jm(ji.bind(null,e,En,fo),r);break}ji(e,En,fo);break;case 5:ji(e,En,fo);break;default:throw Error(J(329))}}}return Nn(e,vt()),e.callbackNode===n?aE.bind(null,e):null}function ig(e,t){var n=Pl;return e.current.memoizedState.isDehydrated&&(ea(e,t).flags|=256),e=Pd(e,t),e!==2&&(t=En,En=n,t!==null&&ag(t)),e}function ag(e){En===null?En=e:En.push.apply(En,e)}function d3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!_r(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jo(e,t){for(t&=~Yv,t&=~Vf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sr(t),r=1<<n;e[n]=-1,t&=~r}}function Fb(e){if(Me&6)throw Error(J(327));fs();var t=hd(e,0);if(!(t&1))return Nn(e,vt()),null;var n=Pd(e,t);if(e.tag!==0&&n===2){var r=Pm(e);r!==0&&(t=r,n=ig(e,r))}if(n===1)throw n=lu,ea(e,0),Jo(e,t),Nn(e,vt()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ji(e,En,fo),Nn(e,vt()),null}function Jv(e,t){var n=Me;Me|=1;try{return e(t)}finally{Me=n,Me===0&&(Ns=vt()+500,Lf&&Ii())}}function da(e){ti!==null&&ti.tag===0&&!(Me&6)&&fs();var t=Me;Me|=1;var n=cr.transition,r=je;try{if(cr.transition=null,je=1,e)return e()}finally{je=r,cr.transition=n,Me=t,!(Me&6)&&Ii()}}function Zv(){Bn=Qa.current,et(Qa)}function ea(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,VA(n)),wt!==null)for(n=wt.return;n!==null;){var r=n;switch(Dv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yd();break;case 3:_s(),et(_n),et(fn),Wv();break;case 5:Vv(r);break;case 4:_s();break;case 13:et(nt);break;case 19:et(nt);break;case 10:Lv(r.type._context);break;case 22:case 23:Zv()}n=n.return}if(Lt=e,wt=e=pi(e.current,null),qt=Bn=t,Rt=0,lu=null,Yv=Vf=ca=0,En=Pl=null,qi!==null){for(t=0;t<qi.length;t++)if(n=qi[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=o,r.next=a}n.pending=r}qi=null}return e}function sE(e,t){do{var n=wt;try{if(Ov(),Qc.current=Td,Rd){for(var r=at.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Rd=!1}if(ua=0,Ot=St=at=null,Il=!1,iu=0,Xv.current=null,n===null||n.return===null){Rt=1,lu=t,wt=null;break}e:{var i=e,a=n.return,s=n,l=t;if(t=qt,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=kb(a);if(h!==null){h.flags&=-257,Cb(h,a,s,i,t),h.mode&1&&wb(i,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}else{if(!(t&1)){wb(i,u,t),e0();break e}l=Error(J(426))}}else if(tt&&s.mode&1){var y=kb(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Cb(y,a,s,i,t),Mv(Is(l,s));break e}}i=l=Is(l,s),Rt!==4&&(Rt=2),Pl===null?Pl=[i]:Pl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=UC(i,l,t);mb(i,g);break e;case 1:s=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(fi===null||!fi.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=HC(i,s,t);mb(i,b);break e}}i=i.return}while(i!==null)}cE(n)}catch(k){t=k,wt===n&&n!==null&&(wt=n=n.return);continue}break}while(!0)}function lE(){var e=_d.current;return _d.current=Td,e===null?Td:e}function e0(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Lt===null||!(ca&268435455)&&!(Vf&268435455)||Jo(Lt,qt)}function Pd(e,t){var n=Me;Me|=2;var r=lE();(Lt!==e||qt!==t)&&(fo=null,ea(e,t));do try{f3();break}catch(o){sE(e,o)}while(!0);if(Ov(),Me=n,_d.current=r,wt!==null)throw Error(J(261));return Lt=null,qt=0,Rt}function f3(){for(;wt!==null;)uE(wt)}function h3(){for(;wt!==null&&!BP();)uE(wt)}function uE(e){var t=fE(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?cE(e):wt=t,Xv.current=null}function cE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=a3(n,t),n!==null){n.flags&=32767,wt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rt=6,wt=null;return}}else if(n=i3(n,t,Bn),n!==null){wt=n;return}if(t=t.sibling,t!==null){wt=t;return}wt=t=e}while(t!==null);Rt===0&&(Rt=5)}function ji(e,t,n){var r=je,o=cr.transition;try{cr.transition=null,je=1,p3(e,t,n,r)}finally{cr.transition=o,je=r}return null}function p3(e,t,n,r){do fs();while(ti!==null);if(Me&6)throw Error(J(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(qP(e,i),e===Lt&&(wt=Lt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yc||(yc=!0,hE(fd,function(){return fs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=cr.transition,cr.transition=null;var a=je;je=1;var s=Me;Me|=4,Xv.current=null,l3(e,n),oE(n,e),MA(Lm),pd=!!Om,Lm=Om=null,e.current=n,u3(n),jP(),Me=s,je=a,cr.transition=i}else e.current=n;if(yc&&(yc=!1,ti=e,Nd=o),i=e.pendingLanes,i===0&&(fi=null),WP(n.stateNode),Nn(e,vt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Id)throw Id=!1,e=rg,rg=null,e;return Nd&1&&e.tag!==0&&fs(),i=e.pendingLanes,i&1?e===og?Al++:(Al=0,og=e):Al=0,Ii(),null}function fs(){if(ti!==null){var e=Uk(Nd),t=cr.transition,n=je;try{if(cr.transition=null,je=16>e?16:e,ti===null)var r=!1;else{if(e=ti,ti=null,Nd=0,Me&6)throw Error(J(331));var o=Me;for(Me|=4,ie=e.current;ie!==null;){var i=ie,a=i.child;if(ie.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ie=u;ie!==null;){var c=ie;switch(c.tag){case 0:case 11:case 15:Nl(8,c,i)}var d=c.child;if(d!==null)d.return=c,ie=d;else for(;ie!==null;){c=ie;var f=c.sibling,h=c.return;if(tE(c),c===u){ie=null;break}if(f!==null){f.return=h,ie=f;break}ie=h}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}ie=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ie=a;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Nl(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ie=g;break e}ie=i.return}}var v=e.current;for(ie=v;ie!==null;){a=ie;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ie=x;else e:for(a=v;ie!==null;){if(s=ie,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:zf(9,s)}}catch(k){dt(s,s.return,k)}if(s===a){ie=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,ie=b;break e}ie=s.return}}if(Me=o,Ii(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(Af,e)}catch{}r=!0}return r}finally{je=n,cr.transition=t}}return!1}function Ob(e,t,n){t=Is(n,t),t=UC(e,t,1),e=di(e,t,1),t=yn(),e!==null&&(Ru(e,1,t),Nn(e,t))}function dt(e,t,n){if(e.tag===3)Ob(e,e,n);else for(;t!==null;){if(t.tag===3){Ob(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fi===null||!fi.has(r))){e=Is(n,e),e=HC(t,e,1),t=di(t,e,1),e=yn(),t!==null&&(Ru(t,1,e),Nn(t,e));break}}t=t.return}}function m3(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=yn(),e.pingedLanes|=e.suspendedLanes&n,Lt===e&&(qt&n)===n&&(Rt===4||Rt===3&&(qt&130023424)===qt&&500>vt()-Qv?ea(e,0):Yv|=n),Nn(e,t)}function dE(e,t){t===0&&(e.mode&1?(t=lc,lc<<=1,!(lc&130023424)&&(lc=4194304)):t=1);var n=yn();e=_o(e,t),e!==null&&(Ru(e,t,n),Nn(e,n))}function g3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dE(e,n)}function v3(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),dE(e,n)}var fE;fE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_n.current)Tn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tn=!1,o3(e,t,n);Tn=!!(e.flags&131072)}else Tn=!1,tt&&t.flags&1048576&&gC(t,wd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zc(e,t),e=t.pendingProps;var o=Ss(t,fn.current);ds(t,n),o=Uv(null,t,r,e,o,n);var i=Hv();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(r)?(i=!0,xd(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,jv(t),o.updater=jf,t.stateNode=o,o._reactInternals=t,Gm(t,r,e,n),t=Xm(null,t,r,!0,i,n)):(t.tag=0,tt&&i&&Av(t),mn(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zc(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=x3(r),e=br(r,e),o){case 0:t=qm(null,t,r,e,n);break e;case 1:t=Rb(null,t,r,e,n);break e;case 11:t=Eb(null,t,r,e,n);break e;case 14:t=Sb(null,t,r,br(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:br(r,o),qm(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:br(r,o),Rb(e,t,r,o,n);case 3:e:{if(XC(t),e===null)throw Error(J(387));r=t.pendingProps,i=t.memoizedState,o=i.element,kC(e,t),Ed(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=Is(Error(J(423)),t),t=Tb(e,t,r,n,o);break e}else if(r!==o){o=Is(Error(J(424)),t),t=Tb(e,t,r,n,o);break e}else for(Vn=ci(t.stateNode.containerInfo.firstChild),Hn=t,tt=!0,kr=null,n=bC(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rs(),r===o){t=Io(e,t,n);break e}mn(e,t,r,n)}t=t.child}return t;case 5:return CC(t),e===null&&$m(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,Bm(r,o)?a=null:i!==null&&Bm(r,i)&&(t.flags|=32),qC(e,t),mn(e,t,a,n),t.child;case 6:return e===null&&$m(t),null;case 13:return YC(e,t,n);case 4:return zv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ts(t,null,r,n):mn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:br(r,o),Eb(e,t,r,o,n);case 7:return mn(e,t,t.pendingProps,n),t.child;case 8:return mn(e,t,t.pendingProps.children,n),t.child;case 12:return mn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,a=o.value,Ge(kd,r._currentValue),r._currentValue=a,i!==null)if(_r(i.value,a)){if(i.children===o.children&&!_n.current){t=Io(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){a=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=xo(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Um(i.return,n,t),s.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(J(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Um(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}mn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ds(t,n),o=dr(o),r=r(o),t.flags|=1,mn(e,t,r,n),t.child;case 14:return r=t.type,o=br(r,t.pendingProps),o=br(r.type,o),Sb(e,t,r,o,n);case 15:return GC(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:br(r,o),Zc(e,t),t.tag=1,In(r)?(e=!0,xd(t)):e=!1,ds(t,n),$C(t,r,o),Gm(t,r,o,n),Xm(null,t,r,!0,e,n);case 19:return QC(e,t,n);case 22:return KC(e,t,n)}throw Error(J(156,t.tag))};function hE(e,t){return zk(e,t)}function y3(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(e,t,n,r){return new y3(e,t,n,r)}function t0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function x3(e){if(typeof e=="function")return t0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bv)return 11;if(e===wv)return 14}return 2}function pi(e,t){var n=e.alternate;return n===null?(n=lr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function nd(e,t,n,r,o,i){var a=2;if(r=e,typeof e=="function")t0(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Va:return ta(n.children,o,i,t);case xv:a=8,o|=8;break;case gm:return e=lr(12,n,t,o|2),e.elementType=gm,e.lanes=i,e;case vm:return e=lr(13,n,t,o),e.elementType=vm,e.lanes=i,e;case ym:return e=lr(19,n,t,o),e.elementType=ym,e.lanes=i,e;case Ck:return Wf(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wk:a=10;break e;case kk:a=9;break e;case bv:a=11;break e;case wv:a=14;break e;case Xo:a=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=lr(a,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function ta(e,t,n,r){return e=lr(7,e,r,t),e.lanes=n,e}function Wf(e,t,n,r){return e=lr(22,e,r,t),e.elementType=Ck,e.lanes=n,e.stateNode={isHidden:!1},e}function sp(e,t,n){return e=lr(6,e,null,t),e.lanes=n,e}function lp(e,t,n){return t=lr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function b3(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wh(0),this.expirationTimes=Wh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wh(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function n0(e,t,n,r,o,i,a,s,l){return e=new b3(e,t,n,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=lr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jv(i),e}function w3(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:za,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function pE(e){if(!e)return wi;e=e._reactInternals;e:{if(ya(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(In(n))return pC(e,n,t)}return t}function mE(e,t,n,r,o,i,a,s,l){return e=n0(n,r,!0,e,o,i,a,s,l),e.context=pE(null),n=e.current,r=yn(),o=hi(n),i=xo(r,o),i.callback=t??null,di(n,i,o),e.current.lanes=o,Ru(e,o,r),Nn(e,r),e}function $f(e,t,n,r){var o=t.current,i=yn(),a=hi(o);return n=pE(n),t.context===null?t.context=n:t.pendingContext=n,t=xo(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=di(o,t,a),e!==null&&(Rr(e,o,a,i),Yc(e,o,a)),a}function Ad(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function r0(e,t){Lb(e,t),(e=e.alternate)&&Lb(e,t)}function k3(){return null}var gE=typeof reportError=="function"?reportError:function(e){console.error(e)};function o0(e){this._internalRoot=e}Uf.prototype.render=o0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));$f(e,t,null,null)};Uf.prototype.unmount=o0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;da(function(){$f(null,e,null,null)}),t[To]=null}};function Uf(e){this._internalRoot=e}Uf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kk();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qo.length&&t!==0&&t<Qo[n].priority;n++);Qo.splice(n,0,e),n===0&&Xk(e)}};function i0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bb(){}function C3(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=Ad(a);i.call(u)}}var a=mE(t,r,e,0,null,!1,!1,"",Bb);return e._reactRootContainer=a,e[To]=a.current,eu(e.nodeType===8?e.parentNode:e),da(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var u=Ad(l);s.call(u)}}var l=n0(e,0,!1,null,null,!1,!1,"",Bb);return e._reactRootContainer=l,e[To]=l.current,eu(e.nodeType===8?e.parentNode:e),da(function(){$f(t,l,n,r)}),l}function Gf(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if(typeof o=="function"){var s=o;o=function(){var l=Ad(a);s.call(l)}}$f(t,a,e,o)}else a=C3(n,t,e,o,r);return Ad(a)}Hk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bl(t.pendingLanes);n!==0&&(Ev(t,n|1),Nn(t,vt()),!(Me&6)&&(Ns=vt()+500,Ii()))}break;case 13:da(function(){var r=_o(e,1);if(r!==null){var o=yn();Rr(r,e,1,o)}}),r0(e,1)}};Sv=function(e){if(e.tag===13){var t=_o(e,134217728);if(t!==null){var n=yn();Rr(t,e,134217728,n)}r0(e,134217728)}};Gk=function(e){if(e.tag===13){var t=hi(e),n=_o(e,t);if(n!==null){var r=yn();Rr(n,e,t,r)}r0(e,t)}};Kk=function(){return je};qk=function(e,t){var n=je;try{return je=e,t()}finally{je=n}};_m=function(e,t,n){switch(t){case"input":if(wm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Of(r);if(!o)throw Error(J(90));Sk(r),wm(r,o)}}}break;case"textarea":Tk(e,n);break;case"select":t=n.value,t!=null&&ss(e,!!n.multiple,t,!1)}};Mk=Jv;Fk=da;var E3={usingClientEntryPoint:!1,Events:[_u,Ha,Of,Ak,Dk,Jv]},cl={findFiberByHostInstance:Ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S3={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bk(e),e===null?null:e.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||k3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{Af=xc.inject(S3),Ur=xc}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E3;Qn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!i0(t))throw Error(J(200));return w3(e,t,null,n)};Qn.createRoot=function(e,t){if(!i0(e))throw Error(J(299));var n=!1,r="",o=gE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=n0(e,1,!1,null,null,n,!1,r,o),e[To]=t.current,eu(e.nodeType===8?e.parentNode:e),new o0(t)};Qn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=Bk(t),e=e===null?null:e.stateNode,e};Qn.flushSync=function(e){return da(e)};Qn.hydrate=function(e,t,n){if(!Hf(t))throw Error(J(200));return Gf(null,e,t,!0,n)};Qn.hydrateRoot=function(e,t,n){if(!i0(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",a=gE;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=mE(t,null,e,1,n??null,o,!1,i,a),e[To]=t.current,eu(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Uf(t)};Qn.render=function(e,t,n){if(!Hf(t))throw Error(J(200));return Gf(null,e,t,!1,n)};Qn.unmountComponentAtNode=function(e){if(!Hf(e))throw Error(J(40));return e._reactRootContainer?(da(function(){Gf(null,null,e,!1,function(){e._reactRootContainer=null,e[To]=null})}),!0):!1};Qn.unstable_batchedUpdates=Jv;Qn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Hf(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Gf(e,t,n,!1,r)};Qn.version="18.3.1-next-f1338f8080-20240426";function vE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vE)}catch(e){console.error(e)}}vE(),vk.exports=Qn;var a0=vk.exports,jb=a0;pm.createRoot=jb.createRoot,pm.hydrateRoot=jb.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uu.apply(this,arguments)}var ni;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ni||(ni={}));const zb="popstate";function R3(e){e===void 0&&(e={});function t(r,o){let{pathname:i,search:a,hash:s}=r.location;return sg("",{pathname:i,search:a,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Dd(o)}return _3(t,n,null,e)}function Ct(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function T3(){return Math.random().toString(36).substr(2,8)}function Vb(e,t){return{usr:e.state,key:e.key,idx:t}}function sg(e,t,n,r){return n===void 0&&(n=null),uu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Gs(t):t,{state:n,key:t&&t.key||r||T3()})}function Dd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Gs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function _3(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,a=o.history,s=ni.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(uu({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function d(){s=ni.Pop;let y=c(),g=y==null?null:y-u;u=y,l&&l({action:s,location:m.location,delta:g})}function f(y,g){s=ni.Push;let v=sg(m.location,y,g);u=c()+1;let x=Vb(v,u),b=m.createHref(v);try{a.pushState(x,"",b)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;o.location.assign(b)}i&&l&&l({action:s,location:m.location,delta:1})}function h(y,g){s=ni.Replace;let v=sg(m.location,y,g);u=c();let x=Vb(v,u),b=m.createHref(v);a.replaceState(x,"",b),i&&l&&l({action:s,location:m.location,delta:0})}function p(y){let g=o.location.origin!=="null"?o.location.origin:o.location.href,v=typeof y=="string"?y:Dd(y);return v=v.replace(/ $/,"%20"),Ct(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let m={get action(){return s},get location(){return e(o,a)},listen(y){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(zb,d),l=y,()=>{o.removeEventListener(zb,d),l=null}},createHref(y){return t(o,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(y){return a.go(y)}};return m}var Wb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Wb||(Wb={}));function I3(e,t,n){return n===void 0&&(n="/"),N3(e,t,n,!1)}function N3(e,t,n,r){let o=typeof t=="string"?Gs(t):t,i=s0(o.pathname||"/",n);if(i==null)return null;let a=xE(e);P3(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let u=W3(i);s=z3(a[l],u,r)}return s}function xE(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(i,a,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(Ct(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=mi([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(Ct(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xE(i.children,t,c,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:B3(u,i.index),routesMeta:c})};return e.forEach((i,a)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))o(i,a);else for(let l of bE(i.path))o(i,a,l)}),t}function bE(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let a=bE(r.join("/")),s=[];return s.push(...a.map(l=>l===""?i:[i,l].join("/"))),o&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function P3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:j3(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const A3=/^:[\w-]+$/,D3=3,M3=2,F3=1,O3=10,L3=-2,$b=e=>e==="*";function B3(e,t){let n=e.split("/"),r=n.length;return n.some($b)&&(r+=L3),t&&(r+=M3),n.filter(o=>!$b(o)).reduce((o,i)=>o+(A3.test(i)?D3:i===""?F3:O3),r)}function j3(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function z3(e,t,n){let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let l=r[s],u=s===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",d=Ub({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Ub({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(o,d.params),a.push({params:o,pathname:mi([i,d.pathname]),pathnameBase:G3(mi([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=mi([i,d.pathnameBase]))}return a}function Ub(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=V3(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=s[d]||"";a=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=s[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function V3(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),yE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function W3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function s0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function $3(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?Gs(e):e;return{pathname:n?n.startsWith("/")?n:U3(n,t):t,search:K3(r),hash:q3(o)}}function U3(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function up(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function H3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function wE(e,t){let n=H3(e);return t?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function kE(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=Gs(e):(o=uu({},e),Ct(!o.pathname||!o.pathname.includes("?"),up("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),up("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),up("#","search","hash",o)));let i=e===""||o.pathname==="",a=i?"/":o.pathname,s;if(a==null)s=n;else{let d=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;o.pathname=f.join("/")}s=d>=0?t[d]:"/"}let l=$3(o,s),u=a&&a!=="/"&&a.endsWith("/"),c=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const mi=e=>e.join("/").replace(/\/\/+/g,"/"),G3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,q3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function X3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const CE=["post","put","patch","delete"];new Set(CE);const Y3=["get",...CE];new Set(Y3);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cu.apply(this,arguments)}const l0=C.createContext(null),Q3=C.createContext(null),xa=C.createContext(null),Kf=C.createContext(null),ba=C.createContext({outlet:null,matches:[],isDataRoute:!1}),EE=C.createContext(null);function J3(e,t){let{relative:n}=t===void 0?{}:t;Nu()||Ct(!1);let{basename:r,navigator:o}=C.useContext(xa),{hash:i,pathname:a,search:s}=RE(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:mi([r,a])),o.createHref({pathname:l,search:s,hash:i})}function Nu(){return C.useContext(Kf)!=null}function Ni(){return Nu()||Ct(!1),C.useContext(Kf).location}function SE(e){C.useContext(xa).static||C.useLayoutEffect(e)}function qf(){let{isDataRoute:e}=C.useContext(ba);return e?dD():Z3()}function Z3(){Nu()||Ct(!1);let e=C.useContext(l0),{basename:t,future:n,navigator:r}=C.useContext(xa),{matches:o}=C.useContext(ba),{pathname:i}=Ni(),a=JSON.stringify(wE(o,n.v7_relativeSplatPath)),s=C.useRef(!1);return SE(()=>{s.current=!0}),C.useCallback(function(u,c){if(c===void 0&&(c={}),!s.current)return;if(typeof u=="number"){r.go(u);return}let d=kE(u,JSON.parse(a),i,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:mi([t,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[t,r,a,i,e])}function RE(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=C.useContext(xa),{matches:o}=C.useContext(ba),{pathname:i}=Ni(),a=JSON.stringify(wE(o,r.v7_relativeSplatPath));return C.useMemo(()=>kE(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function eD(e,t){return tD(e,t)}function tD(e,t,n,r){Nu()||Ct(!1);let{navigator:o}=C.useContext(xa),{matches:i}=C.useContext(ba),a=i[i.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Ni(),c;if(t){var d;let y=typeof t=="string"?Gs(t):t;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||Ct(!1),c=y}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=I3(e,{pathname:h}),m=aD(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:mi([l,o.encodeLocation?o.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:mi([l,o.encodeLocation?o.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return t&&m?C.createElement(Kf.Provider,{value:{location:cu({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ni.Pop}},m):m}function nD(){let e=cD(),t=X3(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:o},n):null,null)}const rD=C.createElement(nD,null);class oD extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?C.createElement(ba.Provider,{value:this.props.routeContext},C.createElement(EE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iD(e){let{routeContext:t,match:n,children:r}=e,o=C.useContext(l0);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(ba.Provider,{value:t},r)}function aD(e,t,n,r){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=(o=n)==null?void 0:o.errors;if(s!=null){let c=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);c>=0||Ct(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,d,f)=>{let h,p=!1,m=null,y=null;n&&(h=s&&d.route.id?s[d.route.id]:void 0,m=d.route.errorElement||rD,l&&(u<0&&f===0?(p=!0,y=null):u===f&&(p=!0,y=d.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,f+1)),v=()=>{let x;return h?x=m:p?x=y:d.route.Component?x=C.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,C.createElement(iD,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?C.createElement(oD,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var TE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(TE||{}),Md=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Md||{});function sD(e){let t=C.useContext(l0);return t||Ct(!1),t}function lD(e){let t=C.useContext(Q3);return t||Ct(!1),t}function uD(e){let t=C.useContext(ba);return t||Ct(!1),t}function _E(e){let t=uD(),n=t.matches[t.matches.length-1];return n.route.id||Ct(!1),n.route.id}function cD(){var e;let t=C.useContext(EE),n=lD(Md.UseRouteError),r=_E(Md.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function dD(){let{router:e}=sD(TE.UseNavigateStable),t=_E(Md.UseNavigateStable),n=C.useRef(!1);return SE(()=>{n.current=!0}),C.useCallback(function(o,i){i===void 0&&(i={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,cu({fromRouteId:t},i)))},[e,t])}const Hb={};function fD(e,t){Hb[t]||(Hb[t]=!0,console.warn(t))}const Gb=(e,t,n)=>fD(e," React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function hD(e,t){e!=null&&e.v7_startTransition||Gb("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&Gb("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function lg(e){Ct(!1)}function pD(e){let{basename:t="/",children:n=null,location:r,navigationType:o=ni.Pop,navigator:i,static:a=!1,future:s}=e;Nu()&&Ct(!1);let l=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:l,navigator:i,static:a,future:cu({v7_relativeSplatPath:!1},s)}),[l,s,i,a]);typeof r=="string"&&(r=Gs(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=C.useMemo(()=>{let y=s0(c,l);return y==null?null:{location:{pathname:y,search:d,hash:f,state:h,key:p},navigationType:o}},[l,c,d,f,h,p,o]);return m==null?null:C.createElement(xa.Provider,{value:u},C.createElement(Kf.Provider,{children:n,value:m}))}function mD(e){let{children:t,location:n}=e;return eD(ug(t),n)}new Promise(()=>{});function ug(e,t){t===void 0&&(t=[]);let n=[];return C.Children.forEach(e,(r,o)=>{if(!C.isValidElement(r))return;let i=[...t,o];if(r.type===C.Fragment){n.push.apply(n,ug(r.props.children,i));return}r.type!==lg&&Ct(!1),!r.props.index||!r.props.children||Ct(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=ug(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cg(){return cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cg.apply(this,arguments)}function gD(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function vD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function yD(e,t){return e.button===0&&(!t||t==="_self")&&!vD(e)}const xD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],bD="6";try{window.__reactRouterVersion=bD}catch{}const wD="startTransition",Kb=Hl[wD];function kD(e){let{basename:t,children:n,future:r,window:o}=e,i=C.useRef();i.current==null&&(i.current=R3({window:o,v5Compat:!0}));let a=i.current,[s,l]=C.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},c=C.useCallback(d=>{u&&Kb?Kb(()=>l(d)):l(d)},[l,u]);return C.useLayoutEffect(()=>a.listen(c),[a,c]),C.useEffect(()=>hD(r),[r]),C.createElement(pD,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}const CD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ED=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=C.forwardRef(function(t,n){let{onClick:r,relative:o,reloadDocument:i,replace:a,state:s,target:l,to:u,preventScrollReset:c,viewTransition:d}=t,f=gD(t,xD),{basename:h}=C.useContext(xa),p,m=!1;if(typeof u=="string"&&ED.test(u)&&(p=u,CD))try{let x=new URL(window.location.href),b=u.startsWith("//")?new URL(x.protocol+u):new URL(u),k=s0(b.pathname,h);b.origin===x.origin&&k!=null?u=k+b.search+b.hash:m=!0}catch{}let y=J3(u,{relative:o}),g=SD(u,{replace:a,state:s,target:l,preventScrollReset:c,relative:o,viewTransition:d});function v(x){r&&r(x),x.defaultPrevented||g(x)}return C.createElement("a",cg({},f,{href:p||y,onClick:m||i?r:v,ref:n,target:l}))});var qb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(qb||(qb={}));var Xb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Xb||(Xb={}));function SD(e,t){let{target:n,replace:r,state:o,preventScrollReset:i,relative:a,viewTransition:s}=t===void 0?{}:t,l=qf(),u=Ni(),c=RE(e,{relative:a});return C.useCallback(d=>{if(yD(d,n)){d.preventDefault();let f=r!==void 0?r:Dd(u)===Dd(c);l(e,{replace:f,state:o,preventScrollReset:i,relative:a,viewTransition:s})}},[u,l,c,r,o,n,e,i,a,s])}/*!
* sweetalert2 v11.14.5
* Released under the MIT License.
*/function IE(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function RD(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yb(e,t){return e.get(IE(e,t))}function TD(e,t,n){RD(e,t),t.set(e,n)}function _D(e,t,n){return e.set(IE(e,t),n),n}const ID=100,ve={},ND=()=>{ve.previousActiveElement instanceof HTMLElement?(ve.previousActiveElement.focus(),ve.previousActiveElement=null):document.body&&document.body.focus()},PD=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;ve.restoreFocusTimeout=setTimeout(()=>{ND(),t()},ID),window.scrollTo(n,r)}),NE="swal2-",AD=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],G=AD.reduce((e,t)=>(e[t]=NE+t,e),{}),DD=["success","warning","info","question","error"],Fd=DD.reduce((e,t)=>(e[t]=NE+t,e),{}),PE="SweetAlert2:",u0=e=>e.charAt(0).toUpperCase()+e.slice(1),On=e=>{console.warn(`${PE} ${typeof e=="object"?e.join(" "):e}`)},wa=e=>{console.error(`${PE} ${e}`)},Qb=[],MD=e=>{Qb.includes(e)||(Qb.push(e),On(e))},AE=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;MD(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},Xf=e=>typeof e=="function"?e():e,c0=e=>e&&typeof e.toPromise=="function",Pu=e=>c0(e)?e.toPromise():Promise.resolve(e),d0=e=>e&&Promise.resolve(e)===e,Ln=()=>document.body.querySelector(`.${G.container}`),Au=e=>{const t=Ln();return t?t.querySelector(e):null},Zn=e=>Au(`.${e}`),ze=()=>Zn(G.popup),Du=()=>Zn(G.icon),FD=()=>Zn(G["icon-content"]),DE=()=>Zn(G.title),f0=()=>Zn(G["html-container"]),ME=()=>Zn(G.image),h0=()=>Zn(G["progress-steps"]),Yf=()=>Zn(G["validation-message"]),eo=()=>Au(`.${G.actions} .${G.confirm}`),Ks=()=>Au(`.${G.actions} .${G.cancel}`),ka=()=>Au(`.${G.actions} .${G.deny}`),OD=()=>Zn(G["input-label"]),qs=()=>Au(`.${G.loader}`),Mu=()=>Zn(G.actions),FE=()=>Zn(G.footer),Qf=()=>Zn(G["timer-progress-bar"]),p0=()=>Zn(G.close),LD=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,m0=()=>{const e=ze();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((i,a)=>{const s=parseInt(i.getAttribute("tabindex")||"0"),l=parseInt(a.getAttribute("tabindex")||"0");return s>l?1:s<l?-1:0}),r=e.querySelectorAll(LD),o=Array.from(r).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(o))].filter(i=>Pn(i))},g0=()=>bo(document.body,G.shown)&&!bo(document.body,G["toast-shown"])&&!bo(document.body,G["no-backdrop"]),Jf=()=>{const e=ze();return e?bo(e,G.toast):!1},BD=()=>{const e=ze();return e?e.hasAttribute("data-loading"):!1},er=(e,t)=>{if(e.textContent="",t){const r=new DOMParser().parseFromString(t,"text/html"),o=r.querySelector("head");o&&Array.from(o.childNodes).forEach(a=>{e.appendChild(a)});const i=r.querySelector("body");i&&Array.from(i.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?e.appendChild(a.cloneNode(!0)):e.appendChild(a)})}},bo=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},jD=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(G).includes(n)&&!Object.values(Fd).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},qn=(e,t,n)=>{if(jD(e,t),!t.customClass)return;const r=t.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){On(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Oe(e,r)}},Zf=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${G.popup} > .${G[t]}`);case"checkbox":return e.querySelector(`.${G.popup} > .${G.checkbox} input`);case"radio":return e.querySelector(`.${G.popup} > .${G.radio} input:checked`)||e.querySelector(`.${G.popup} > .${G.radio} input:first-child`);case"range":return e.querySelector(`.${G.popup} > .${G.range} input`);default:return e.querySelector(`.${G.popup} > .${G.input}`)}},OE=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},LE=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(r=>{Array.isArray(e)?e.forEach(o=>{n?o.classList.add(r):o.classList.remove(r)}):n?e.classList.add(r):e.classList.remove(r)}))},Oe=(e,t)=>{LE(e,t,!0)},to=(e,t)=>{LE(e,t,!1)},ri=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const o=n[r];if(o instanceof HTMLElement&&bo(o,t))return o}},na=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},jt=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},hn=e=>{e&&(e.style.display="none")},v0=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{Fu(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},Jb=(e,t,n,r)=>{const o=e.querySelector(t);o&&o.style.setProperty(n,r)},Fu=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?jt(e,n):hn(e)},Pn=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),zD=()=>!Pn(eo())&&!Pn(ka())&&!Pn(Ks()),Zb=e=>e.scrollHeight>e.clientHeight,BE=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},y0=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=Qf();n&&Pn(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},VD=()=>{const e=Qf();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),r=t/n*100;e.style.width=`${r}%`},WD=()=>typeof window>"u"||typeof document>"u",$D=`
 <div aria-labelledby="${G.title}" aria-describedby="${G["html-container"]}" class="${G.popup}" tabindex="-1">
   <button type="button" class="${G.close}"></button>
   <ul class="${G["progress-steps"]}"></ul>
   <div class="${G.icon}"></div>
   <img class="${G.image}" />
   <h2 class="${G.title}" id="${G.title}"></h2>
   <div class="${G["html-container"]}" id="${G["html-container"]}"></div>
   <input class="${G.input}" id="${G.input}" />
   <input type="file" class="${G.file}" />
   <div class="${G.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${G.select}" id="${G.select}"></select>
   <div class="${G.radio}"></div>
   <label class="${G.checkbox}">
     <input type="checkbox" id="${G.checkbox}" />
     <span class="${G.label}"></span>
   </label>
   <textarea class="${G.textarea}" id="${G.textarea}"></textarea>
   <div class="${G["validation-message"]}" id="${G["validation-message"]}"></div>
   <div class="${G.actions}">
     <div class="${G.loader}"></div>
     <button type="button" class="${G.confirm}"></button>
     <button type="button" class="${G.deny}"></button>
     <button type="button" class="${G.cancel}"></button>
   </div>
   <div class="${G.footer}"></div>
   <div class="${G["timer-progress-bar-container"]}">
     <div class="${G["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),UD=()=>{const e=Ln();return e?(e.remove(),to([document.documentElement,document.body],[G["no-backdrop"],G["toast-shown"],G["has-column"]]),!0):!1},Fi=()=>{ve.currentInstance.resetValidationMessage()},HD=()=>{const e=ze(),t=ri(e,G.input),n=ri(e,G.file),r=e.querySelector(`.${G.range} input`),o=e.querySelector(`.${G.range} output`),i=ri(e,G.select),a=e.querySelector(`.${G.checkbox} input`),s=ri(e,G.textarea);t.oninput=Fi,n.onchange=Fi,i.onchange=Fi,a.onchange=Fi,s.oninput=Fi,r.oninput=()=>{Fi(),o.value=r.value},r.onchange=()=>{Fi(),o.value=r.value}},GD=e=>typeof e=="string"?document.querySelector(e):e,KD=e=>{const t=ze();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},qD=e=>{window.getComputedStyle(e).direction==="rtl"&&Oe(Ln(),G.rtl)},XD=e=>{const t=UD();if(WD()){wa("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=G.container,t&&Oe(n,G["no-transition"]),er(n,$D);const r=GD(e.target);r.appendChild(n),KD(e),qD(r),HD()},x0=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?YD(e,t):e&&er(t,e)},YD=(e,t)=>{e.jquery?QD(t,e):er(t,e.toString())},QD=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},JD=(e,t)=>{const n=Mu(),r=qs();!n||!r||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?hn(n):jt(n),qn(n,t,"actions"),ZD(n,r,t),er(r,t.loaderHtml||""),qn(r,t,"loader"))};function ZD(e,t,n){const r=eo(),o=ka(),i=Ks();!r||!o||!i||(cp(r,"confirm",n),cp(o,"deny",n),cp(i,"cancel",n),e5(r,o,i,n),n.reverseButtons&&(n.toast?(e.insertBefore(i,r),e.insertBefore(o,r)):(e.insertBefore(i,t),e.insertBefore(o,t),e.insertBefore(r,t))))}function e5(e,t,n,r){if(!r.buttonsStyling){to([e,t,n],G.styled);return}Oe([e,t,n],G.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,Oe(e,G["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,Oe(t,G["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,Oe(n,G["default-outline"]))}function cp(e,t,n){const r=u0(t);Fu(e,n[`show${r}Button`],"inline-block"),er(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=G[t],qn(e,n,`${t}Button`)}const t5=(e,t)=>{const n=p0();n&&(er(n,t.closeButtonHtml||""),qn(n,t,"closeButton"),Fu(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},n5=(e,t)=>{const n=Ln();n&&(r5(n,t.backdrop),o5(n,t.position),i5(n,t.grow),qn(n,t,"container"))};function r5(e,t){typeof t=="string"?e.style.background=t:t||Oe([document.documentElement,document.body],G["no-backdrop"])}function o5(e,t){t&&(t in G?Oe(e,G[t]):(On('The "position" parameter is not valid, defaulting to "center"'),Oe(e,G.center)))}function i5(e,t){t&&Oe(e,G[`grow-${t}`])}var Ke={innerParams:new WeakMap,domCache:new WeakMap};const a5=["input","file","range","select","radio","checkbox","textarea"],s5=(e,t)=>{const n=ze();if(!n)return;const r=Ke.innerParams.get(e),o=!r||t.input!==r.input;a5.forEach(i=>{const a=ri(n,G[i]);a&&(c5(i,t.inputAttributes),a.className=G[i],o&&hn(a))}),t.input&&(o&&l5(t),d5(t))},l5=e=>{if(!e.input)return;if(!gt[e.input]){wa(`Unexpected type of input! Expected ${Object.keys(gt).join(" | ")}, got "${e.input}"`);return}const t=jE(e.input);if(!t)return;const n=gt[e.input](t,e);jt(t),e.inputAutoFocus&&setTimeout(()=>{OE(n)})},u5=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},c5=(e,t)=>{const n=ze();if(!n)return;const r=Zf(n,e);if(r){u5(r);for(const o in t)r.setAttribute(o,t[o])}},d5=e=>{if(!e.input)return;const t=jE(e.input);t&&qn(t,e,"input")},b0=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Ou=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),o=G["input-label"];r.setAttribute("for",e.id),r.className=o,typeof n.customClass=="object"&&Oe(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},jE=e=>{const t=ze();if(t)return ri(t,G[e]||G.input)},Od=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:d0(t)||On(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},gt={};gt.text=gt.email=gt.password=gt.number=gt.tel=gt.url=gt.search=gt.date=gt["datetime-local"]=gt.time=gt.week=gt.month=(e,t)=>(Od(e,t.inputValue),Ou(e,e,t),b0(e,t),e.type=t.input,e);gt.file=(e,t)=>(Ou(e,e,t),b0(e,t),e);gt.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return Od(n,t.inputValue),n.type=t.input,Od(r,t.inputValue),Ou(n,e,t),e};gt.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");er(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Ou(e,e,t),e};gt.radio=e=>(e.textContent="",e);gt.checkbox=(e,t)=>{const n=Zf(ze(),"checkbox");n.value="1",n.checked=!!t.inputValue;const r=e.querySelector("span");return er(r,t.inputPlaceholder||t.inputLabel),n};gt.textarea=(e,t)=>{Od(e,t.inputValue),b0(e,t),Ou(e,e,t);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(ze()).width),o=()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?ze().style.width=`${i}px`:na(ze(),"width",t.width)};new MutationObserver(o).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const f5=(e,t)=>{const n=f0();n&&(v0(n),qn(n,t,"htmlContainer"),t.html?(x0(t.html,n),jt(n,"block")):t.text?(n.textContent=t.text,jt(n,"block")):hn(n),s5(e,t))},h5=(e,t)=>{const n=FE();n&&(v0(n),Fu(n,t.footer,"block"),t.footer&&x0(t.footer,n),qn(n,t,"footer"))},p5=(e,t)=>{const n=Ke.innerParams.get(e),r=Du();if(r){if(n&&t.icon===n.icon){tw(r,t),ew(r,t);return}if(!t.icon&&!t.iconHtml){hn(r);return}if(t.icon&&Object.keys(Fd).indexOf(t.icon)===-1){wa(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),hn(r);return}jt(r),tw(r,t),ew(r,t),Oe(r,t.showClass&&t.showClass.icon)}},ew=(e,t)=>{for(const[n,r]of Object.entries(Fd))t.icon!==n&&to(e,r);Oe(e,t.icon&&Fd[t.icon]),y5(e,t),m5(),qn(e,t,"icon")},m5=()=>{const e=ze();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},g5=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,v5=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,tw=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=nw(t.iconHtml):t.icon==="success"?(r=g5,n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?r=v5:t.icon&&(r=nw({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&er(e,r)},y5=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Jb(e,n,"background-color",t.iconColor);Jb(e,".swal2-success-ring","border-color",t.iconColor)}},nw=e=>`<div class="${G["icon-content"]}">${e}</div>`,x5=(e,t)=>{const n=ME();if(n){if(!t.imageUrl){hn(n);return}jt(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),na(n,"width",t.imageWidth),na(n,"height",t.imageHeight),n.className=G.image,qn(n,t,"image")}},b5=(e,t)=>{const n=Ln(),r=ze();if(!(!n||!r)){if(t.toast){na(n,"width",t.width),r.style.width="100%";const o=qs();o&&r.insertBefore(o,Du())}else na(r,"width",t.width);na(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),hn(Yf()),w5(r,t)}},w5=(e,t)=>{const n=t.showClass||{};e.className=`${G.popup} ${Pn(e)?n.popup:""}`,t.toast?(Oe([document.documentElement,document.body],G["toast-shown"]),Oe(e,G.toast)):Oe(e,G.modal),qn(e,t,"popup"),typeof t.customClass=="string"&&Oe(e,t.customClass),t.icon&&Oe(e,G[`icon-${t.icon}`])},k5=(e,t)=>{const n=h0();if(!n)return;const{progressSteps:r,currentProgressStep:o}=t;if(!r||r.length===0||o===void 0){hn(n);return}jt(n),n.textContent="",o>=r.length&&On("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((i,a)=>{const s=C5(i);if(n.appendChild(s),a===o&&Oe(s,G["active-progress-step"]),a!==r.length-1){const l=E5(t);n.appendChild(l)}})},C5=e=>{const t=document.createElement("li");return Oe(t,G["progress-step"]),er(t,e),t},E5=e=>{const t=document.createElement("li");return Oe(t,G["progress-step-line"]),e.progressStepsDistance&&na(t,"width",e.progressStepsDistance),t},S5=(e,t)=>{const n=DE();n&&(v0(n),Fu(n,t.title||t.titleText,"block"),t.title&&x0(t.title,n),t.titleText&&(n.innerText=t.titleText),qn(n,t,"title"))},zE=(e,t)=>{b5(e,t),n5(e,t),k5(e,t),p5(e,t),x5(e,t),S5(e,t),t5(e,t),f5(e,t),JD(e,t),h5(e,t);const n=ze();typeof t.didRender=="function"&&n&&t.didRender(n),ve.eventEmitter.emit("didRender",n)},R5=()=>Pn(ze()),VE=()=>{var e;return(e=eo())===null||e===void 0?void 0:e.click()},T5=()=>{var e;return(e=ka())===null||e===void 0?void 0:e.click()},_5=()=>{var e;return(e=Ks())===null||e===void 0?void 0:e.click()},Xs=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),WE=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},I5=(e,t,n)=>{WE(e),t.toast||(e.keydownHandler=r=>P5(t,r,n),e.keydownTarget=t.keydownListenerCapture?window:ze(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},dg=(e,t)=>{var n;const r=m0();if(r.length){e=e+t,e===r.length?e=0:e===-1&&(e=r.length-1),r[e].focus();return}(n=ze())===null||n===void 0||n.focus()},$E=["ArrowRight","ArrowDown"],N5=["ArrowLeft","ArrowUp"],P5=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?A5(t,e):t.key==="Tab"?D5(t):[...$E,...N5].includes(t.key)?M5(t.key):t.key==="Escape"&&F5(t,e,n)))},A5=(e,t)=>{if(!Xf(t.allowEnterKey))return;const n=Zf(ze(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;VE(),e.preventDefault()}},D5=e=>{const t=e.target,n=m0();let r=-1;for(let o=0;o<n.length;o++)if(t===n[o]){r=o;break}e.shiftKey?dg(r,-1):dg(r,1),e.stopPropagation(),e.preventDefault()},M5=e=>{const t=Mu(),n=eo(),r=ka(),o=Ks();if(!t||!n||!r||!o)return;const i=[n,r,o];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const a=$E.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let l=0;l<t.children.length;l++){if(s=s[a],!s)return;if(s instanceof HTMLButtonElement&&Pn(s))break}s instanceof HTMLButtonElement&&s.focus()}},F5=(e,t,n)=>{Xf(t.allowEscapeKey)&&(e.preventDefault(),n(Xs.esc))};var Ps={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const O5=()=>{const e=Ln();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},UE=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},HE=typeof window<"u"&&!!window.GestureEvent,L5=()=>{if(HE&&!bo(document.body,G.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,Oe(document.body,G.iosfix),B5()}},B5=()=>{const e=Ln();if(!e)return;let t;e.ontouchstart=n=>{t=j5(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},j5=e=>{const t=e.target,n=Ln(),r=f0();return!n||!r||z5(e)||V5(e)?!1:t===n||!Zb(n)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Zb(r)&&r.contains(t))},z5=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",V5=e=>e.touches&&e.touches.length>1,W5=()=>{if(bo(document.body,G.iosfix)){const e=parseInt(document.body.style.top,10);to(document.body,G.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},$5=()=>{const e=document.createElement("div");e.className=G["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let hs=null;const U5=e=>{hs===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(hs=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${hs+$5()}px`)},H5=()=>{hs!==null&&(document.body.style.paddingRight=`${hs}px`,hs=null)};function GE(e,t,n,r){Jf()?rw(e,r):(PD(n).then(()=>rw(e,r)),WE(ve)),HE?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),g0()&&(H5(),W5(),UE()),G5()}function G5(){to([document.documentElement,document.body],[G.shown,G["height-auto"],G["no-backdrop"],G["toast-shown"]])}function oi(e){e=q5(e);const t=Ps.swalPromiseResolve.get(this),n=K5(this);this.isAwaitingPromise?e.isDismissed||(Lu(this),t(e)):n&&t(e)}const K5=e=>{const t=ze();if(!t)return!1;const n=Ke.innerParams.get(e);if(!n||bo(t,n.hideClass.popup))return!1;to(t,n.showClass.popup),Oe(t,n.hideClass.popup);const r=Ln();return to(r,n.showClass.backdrop),Oe(r,n.hideClass.backdrop),X5(e,t,n),!0};function KE(e){const t=Ps.swalPromiseReject.get(this);Lu(this),t&&t(e)}const Lu=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Ke.innerParams.get(e)||e._destroy())},q5=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),X5=(e,t,n)=>{var r;const o=Ln(),i=BE(t);typeof n.willClose=="function"&&n.willClose(t),(r=ve.eventEmitter)===null||r===void 0||r.emit("willClose",t),i?Y5(e,t,o,n.returnFocus,n.didClose):GE(e,o,n.returnFocus,n.didClose)},Y5=(e,t,n,r,o)=>{ve.swalCloseEventFinishedCallback=GE.bind(null,e,n,r,o);const i=function(a){if(a.target===t){var s;(s=ve.swalCloseEventFinishedCallback)===null||s===void 0||s.call(ve),delete ve.swalCloseEventFinishedCallback,t.removeEventListener("animationend",i),t.removeEventListener("transitionend",i)}};t.addEventListener("animationend",i),t.addEventListener("transitionend",i)},rw=(e,t)=>{setTimeout(()=>{var n;typeof t=="function"&&t.bind(e.params)(),(n=ve.eventEmitter)===null||n===void 0||n.emit("didClose"),e._destroy&&e._destroy()})},As=e=>{let t=ze();if(t||new hr,t=ze(),!t)return;const n=qs();Jf()?hn(Du()):Q5(t,e),jt(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},Q5=(e,t)=>{const n=Mu(),r=qs();!n||!r||(!t&&Pn(eo())&&(t=eo()),jt(n),t&&(hn(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),Oe([e,n],G.loading))},J5=(e,t)=>{t.input==="select"||t.input==="radio"?rM(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(c0(t.inputValue)||d0(t.inputValue))&&(As(eo()),oM(e,t))},Z5=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return eM(n);case"radio":return tM(n);case"file":return nM(n);default:return t.inputAutoTrim?n.value.trim():n.value}},eM=e=>e.checked?1:0,tM=e=>e.checked?e.value:null,nM=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,rM=(e,t)=>{const n=ze();if(!n)return;const r=o=>{t.input==="select"?iM(n,Ld(o),t):t.input==="radio"&&aM(n,Ld(o),t)};c0(t.inputOptions)||d0(t.inputOptions)?(As(eo()),Pu(t.inputOptions).then(o=>{e.hideLoading(),r(o)})):typeof t.inputOptions=="object"?r(t.inputOptions):wa(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},oM=(e,t)=>{const n=e.getInput();n&&(hn(n),Pu(t.inputValue).then(r=>{n.value=t.input==="number"?`${parseFloat(r)||0}`:`${r}`,jt(n),n.focus(),e.hideLoading()}).catch(r=>{wa(`Error in inputValue promise: ${r}`),n.value="",jt(n),n.focus(),e.hideLoading()}))};function iM(e,t,n){const r=ri(e,G.select);if(!r)return;const o=(i,a,s)=>{const l=document.createElement("option");l.value=s,er(l,a),l.selected=qE(s,n.inputValue),i.appendChild(l)};t.forEach(i=>{const a=i[0],s=i[1];if(Array.isArray(s)){const l=document.createElement("optgroup");l.label=a,l.disabled=!1,r.appendChild(l),s.forEach(u=>o(l,u[1],u[0]))}else o(r,s,a)}),r.focus()}function aM(e,t,n){const r=ri(e,G.radio);if(!r)return;t.forEach(i=>{const a=i[0],s=i[1],l=document.createElement("input"),u=document.createElement("label");l.type="radio",l.name=G.radio,l.value=a,qE(a,n.inputValue)&&(l.checked=!0);const c=document.createElement("span");er(c,s),c.className=G.label,u.appendChild(l),u.appendChild(c),r.appendChild(u)});const o=r.querySelectorAll("input");o.length&&o[0].focus()}const Ld=e=>{const t=[];return e instanceof Map?e.forEach((n,r)=>{let o=n;typeof o=="object"&&(o=Ld(o)),t.push([r,o])}):Object.keys(e).forEach(n=>{let r=e[n];typeof r=="object"&&(r=Ld(r)),t.push([n,r])}),t},qE=(e,t)=>!!t&&t.toString()===e.toString(),sM=e=>{const t=Ke.innerParams.get(e);e.disableButtons(),t.input?XE(e,"confirm"):k0(e,!0)},lM=e=>{const t=Ke.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?XE(e,"deny"):w0(e,!1)},uM=(e,t)=>{e.disableButtons(),t(Xs.cancel)},XE=(e,t)=>{const n=Ke.innerParams.get(e);if(!n.input){wa(`The "input" parameter is needed to be set when using returnInputValueOn${u0(t)}`);return}const r=e.getInput(),o=Z5(e,n);n.inputValidator?cM(e,o,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):t==="deny"?w0(e,o):k0(e,o)},cM=(e,t,n)=>{const r=Ke.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>Pu(r.inputValidator(t,r.validationMessage))).then(i=>{e.enableButtons(),e.enableInput(),i?e.showValidationMessage(i):n==="deny"?w0(e,t):k0(e,t)})},w0=(e,t)=>{const n=Ke.innerParams.get(e||void 0);n.showLoaderOnDeny&&As(ka()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>Pu(n.preDeny(t,n.validationMessage))).then(o=>{o===!1?(e.hideLoading(),Lu(e)):e.close({isDenied:!0,value:typeof o>"u"?t:o})}).catch(o=>YE(e||void 0,o))):e.close({isDenied:!0,value:t})},ow=(e,t)=>{e.close({isConfirmed:!0,value:t})},YE=(e,t)=>{e.rejectPromise(t)},k0=(e,t)=>{const n=Ke.innerParams.get(e||void 0);n.showLoaderOnConfirm&&As(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>Pu(n.preConfirm(t,n.validationMessage))).then(o=>{Pn(Yf())||o===!1?(e.hideLoading(),Lu(e)):ow(e,typeof o>"u"?t:o)}).catch(o=>YE(e||void 0,o))):ow(e,t)};function Bd(){const e=Ke.innerParams.get(this);if(!e)return;const t=Ke.domCache.get(this);hn(t.loader),Jf()?e.icon&&jt(Du()):dM(t),to([t.popup,t.actions],G.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const dM=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?jt(t[0],"inline-block"):zD()&&hn(e.actions)};function QE(){const e=Ke.innerParams.get(this),t=Ke.domCache.get(this);return t?Zf(t.popup,e.input):null}function JE(e,t,n){const r=Ke.domCache.get(e);t.forEach(o=>{r[o].disabled=n})}function ZE(e,t){const n=ze();if(!(!n||!e))if(e.type==="radio"){const r=n.querySelectorAll(`[name="${G.radio}"]`);for(let o=0;o<r.length;o++)r[o].disabled=t}else e.disabled=t}function eS(){JE(this,["confirmButton","denyButton","cancelButton"],!1)}function tS(){JE(this,["confirmButton","denyButton","cancelButton"],!0)}function nS(){ZE(this.getInput(),!1)}function rS(){ZE(this.getInput(),!0)}function oS(e){const t=Ke.domCache.get(this),n=Ke.innerParams.get(this);er(t.validationMessage,e),t.validationMessage.className=G["validation-message"],n.customClass&&n.customClass.validationMessage&&Oe(t.validationMessage,n.customClass.validationMessage),jt(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",G["validation-message"]),OE(r),Oe(r,G.inputerror))}function iS(){const e=Ke.domCache.get(this);e.validationMessage&&hn(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),to(t,G.inputerror))}const ps={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},fM=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],hM={allowEnterKey:void 0},pM=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],aS=e=>Object.prototype.hasOwnProperty.call(ps,e),sS=e=>fM.indexOf(e)!==-1,lS=e=>hM[e],mM=e=>{aS(e)||On(`Unknown parameter "${e}"`)},gM=e=>{pM.includes(e)&&On(`The parameter "${e}" is incompatible with toasts`)},vM=e=>{const t=lS(e);t&&AE(e,t)},yM=e=>{e.backdrop===!1&&e.allowOutsideClick&&On('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)mM(t),e.toast&&gM(t),vM(t)};function uS(e){const t=ze(),n=Ke.innerParams.get(this);if(!t||bo(t,n.hideClass.popup)){On("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const r=xM(e),o=Object.assign({},n,r);zE(this,o),Ke.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const xM=e=>{const t={};return Object.keys(e).forEach(n=>{sS(n)?t[n]=e[n]:On(`Invalid parameter to update: ${n}`)}),t};function cS(){const e=Ke.domCache.get(this),t=Ke.innerParams.get(this);if(!t){dS(this);return}e.popup&&ve.swalCloseEventFinishedCallback&&(ve.swalCloseEventFinishedCallback(),delete ve.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),ve.eventEmitter.emit("didDestroy"),bM(this)}const bM=e=>{dS(e),delete e.params,delete ve.keydownHandler,delete ve.keydownTarget,delete ve.currentInstance},dS=e=>{e.isAwaitingPromise?(dp(Ke,e),e.isAwaitingPromise=!0):(dp(Ps,e),dp(Ke,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},dp=(e,t)=>{for(const n in e)e[n].delete(t)};var wM=Object.freeze({__proto__:null,_destroy:cS,close:oi,closeModal:oi,closePopup:oi,closeToast:oi,disableButtons:tS,disableInput:rS,disableLoading:Bd,enableButtons:eS,enableInput:nS,getInput:QE,handleAwaitingPromise:Lu,hideLoading:Bd,rejectPromise:KE,resetValidationMessage:iS,showValidationMessage:oS,update:uS});const kM=(e,t,n)=>{e.toast?CM(e,t,n):(SM(t),RM(t),TM(e,t,n))},CM=(e,t,n)=>{t.popup.onclick=()=>{e&&(EM(e)||e.timer||e.input)||n(Xs.close)}},EM=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let jd=!1;const SM=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(jd=!0)}}},RM=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(jd=!0)}}},TM=(e,t,n)=>{t.container.onclick=r=>{if(jd){jd=!1;return}r.target===t.container&&Xf(e.allowOutsideClick)&&n(Xs.backdrop)}},_M=e=>typeof e=="object"&&e.jquery,iw=e=>e instanceof Element||_M(e),IM=e=>{const t={};return typeof e[0]=="object"&&!iw(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,r)=>{const o=e[r];typeof o=="string"||iw(o)?t[n]=o:o!==void 0&&wa(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof o}`)}),t};function NM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}function PM(e){class t extends this{_main(r,o){return super._main(r,Object.assign({},e,o))}}return t}const AM=()=>ve.timeout&&ve.timeout.getTimerLeft(),fS=()=>{if(ve.timeout)return VD(),ve.timeout.stop()},hS=()=>{if(ve.timeout){const e=ve.timeout.start();return y0(e),e}},DM=()=>{const e=ve.timeout;return e&&(e.running?fS():hS())},MM=e=>{if(ve.timeout){const t=ve.timeout.increase(e);return y0(t,!0),t}},FM=()=>!!(ve.timeout&&ve.timeout.isRunning());let aw=!1;const fg={};function OM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";fg[e]=this,aw||(document.body.addEventListener("click",LM),aw=!0)}const LM=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in fg){const r=t.getAttribute(n);if(r){fg[n].fire({template:r});return}}};class BM{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const r=this._getHandlersByEventName(t);r.includes(n)||r.push(n)}once(t,n){var r=this;const o=function(){r.removeListener(t,o);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];n.apply(r,a)};this.on(t,o)}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this._getHandlersByEventName(t).forEach(i=>{try{i.apply(this,r)}catch(a){console.error(a)}})}removeListener(t,n){const r=this._getHandlersByEventName(t),o=r.indexOf(n);o>-1&&r.splice(o,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}ve.eventEmitter=new BM;const jM=(e,t)=>{ve.eventEmitter.on(e,t)},zM=(e,t)=>{ve.eventEmitter.once(e,t)},VM=(e,t)=>{if(!e){ve.eventEmitter.reset();return}t?ve.eventEmitter.removeListener(e,t):ve.eventEmitter.removeAllListeners(e)};var WM=Object.freeze({__proto__:null,argsToParams:IM,bindClickHandler:OM,clickCancel:_5,clickConfirm:VE,clickDeny:T5,enableLoading:As,fire:NM,getActions:Mu,getCancelButton:Ks,getCloseButton:p0,getConfirmButton:eo,getContainer:Ln,getDenyButton:ka,getFocusableElements:m0,getFooter:FE,getHtmlContainer:f0,getIcon:Du,getIconContent:FD,getImage:ME,getInputLabel:OD,getLoader:qs,getPopup:ze,getProgressSteps:h0,getTimerLeft:AM,getTimerProgressBar:Qf,getTitle:DE,getValidationMessage:Yf,increaseTimer:MM,isDeprecatedParameter:lS,isLoading:BD,isTimerRunning:FM,isUpdatableParameter:sS,isValidParameter:aS,isVisible:R5,mixin:PM,off:VM,on:jM,once:zM,resumeTimer:hS,showLoading:As,stopTimer:fS,toggleTimer:DM});class $M{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const pS=["swal-title","swal-html","swal-footer"],UM=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return JM(n),Object.assign(HM(n),GM(n),KM(n),qM(n),XM(n),YM(n),QM(n,pS))},HM=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(r=>{fa(r,["name","value"]);const o=r.getAttribute("name"),i=r.getAttribute("value");!o||!i||(typeof ps[o]=="boolean"?t[o]=i!=="false":typeof ps[o]=="object"?t[o]=JSON.parse(i):t[o]=i)}),t},GM=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(r=>{const o=r.getAttribute("name"),i=r.getAttribute("value");!o||!i||(t[o]=new Function(`return ${i}`)())}),t},KM=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(r=>{fa(r,["type","color","aria-label"]);const o=r.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(t[`${o}ButtonText`]=r.innerHTML,t[`show${u0(o)}Button`]=!0,r.hasAttribute("color")&&(t[`${o}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(t[`${o}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),t},qM=e=>{const t={},n=e.querySelector("swal-image");return n&&(fa(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},XM=e=>{const t={},n=e.querySelector("swal-icon");return n&&(fa(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},YM=e=>{const t={},n=e.querySelector("swal-input");n&&(fa(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach(o=>{fa(o,["value"]);const i=o.getAttribute("value");if(!i)return;const a=o.innerHTML;t.inputOptions[i]=a})),t},QM=(e,t)=>{const n={};for(const r in t){const o=t[r],i=e.querySelector(o);i&&(fa(i,[]),n[o.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},JM=e=>{const t=pS.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const r=n.tagName.toLowerCase();t.includes(r)||On(`Unrecognized element <${r}>`)})},fa=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&On([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},mS=10,ZM=e=>{const t=Ln(),n=ze();typeof e.willOpen=="function"&&e.willOpen(n),ve.eventEmitter.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;nF(t,n,e),setTimeout(()=>{eF(t,n)},mS),g0()&&(tF(t,e.scrollbarPadding,o),O5()),!Jf()&&!ve.previousActiveElement&&(ve.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),ve.eventEmitter.emit("didOpen",n),to(t,G["no-transition"])},zd=e=>{const t=ze();if(e.target!==t)return;const n=Ln();t.removeEventListener("animationend",zd),t.removeEventListener("transitionend",zd),n.style.overflowY="auto"},eF=(e,t)=>{BE(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",zd),t.addEventListener("transitionend",zd)):e.style.overflowY="auto"},tF=(e,t,n)=>{L5(),t&&n!=="hidden"&&U5(n),setTimeout(()=>{e.scrollTop=0})},nF=(e,t,n)=>{Oe(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),jt(t,"grid"),setTimeout(()=>{Oe(t,n.showClass.popup),t.style.removeProperty("opacity")},mS)):jt(t,"grid"),Oe([document.documentElement,document.body],G.shown),n.heightAuto&&n.backdrop&&!n.toast&&Oe([document.documentElement,document.body],G["height-auto"])};var sw={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function rF(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=sw.email),e.input==="url"&&(e.inputValidator=sw.url))}function oF(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(On('Target parameter is not valid, defaulting to "body"'),e.target="body")}function iF(e){rF(e),e.showLoaderOnConfirm&&!e.preConfirm&&On(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),oF(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),XD(e)}let Fr;var bc=new WeakMap;class xt{constructor(){if(TD(this,bc,void 0),typeof window>"u")return;Fr=this;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=Object.freeze(this.constructor.argsToParams(n));this.params=o,this.isAwaitingPromise=!1,_D(bc,this,this._main(Fr.params))}_main(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(yM(Object.assign({},n,t)),ve.currentInstance){const i=Ps.swalPromiseResolve.get(ve.currentInstance),{isAwaitingPromise:a}=ve.currentInstance;ve.currentInstance._destroy(),a||i({isDismissed:!0}),g0()&&UE()}ve.currentInstance=Fr;const r=sF(t,n);iF(r),Object.freeze(r),ve.timeout&&(ve.timeout.stop(),delete ve.timeout),clearTimeout(ve.restoreFocusTimeout);const o=lF(Fr);return zE(Fr,r),Ke.innerParams.set(Fr,r),aF(Fr,o,r)}then(t){return Yb(bc,this).then(t)}finally(t){return Yb(bc,this).finally(t)}}const aF=(e,t,n)=>new Promise((r,o)=>{const i=a=>{e.close({isDismissed:!0,dismiss:a})};Ps.swalPromiseResolve.set(e,r),Ps.swalPromiseReject.set(e,o),t.confirmButton.onclick=()=>{sM(e)},t.denyButton.onclick=()=>{lM(e)},t.cancelButton.onclick=()=>{uM(e,i)},t.closeButton.onclick=()=>{i(Xs.close)},kM(n,t,i),I5(ve,n,i),J5(e,n),ZM(n),uF(ve,n,i),cF(t,n),setTimeout(()=>{t.container.scrollTop=0})}),sF=(e,t)=>{const n=UM(e),r=Object.assign({},ps,t,n,e);return r.showClass=Object.assign({},ps.showClass,r.showClass),r.hideClass=Object.assign({},ps.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},lF=e=>{const t={popup:ze(),container:Ln(),actions:Mu(),confirmButton:eo(),denyButton:ka(),cancelButton:Ks(),loader:qs(),closeButton:p0(),validationMessage:Yf(),progressSteps:h0()};return Ke.domCache.set(e,t),t},uF=(e,t,n)=>{const r=Qf();hn(r),t.timer&&(e.timeout=new $M(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(jt(r),qn(r,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&y0(t.timer)})))},cF=(e,t)=>{if(!t.toast){if(!Xf(t.allowEnterKey)){AE("allowEnterKey"),hF();return}dF(e)||fF(e,t)||dg(-1,1)}},dF=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&Pn(n))return n.focus(),!0;return!1},fF=(e,t)=>t.focusDeny&&Pn(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&Pn(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&Pn(e.confirmButton)?(e.confirmButton.focus(),!0):!1,hF=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}xt.prototype.disableButtons=tS;xt.prototype.enableButtons=eS;xt.prototype.getInput=QE;xt.prototype.disableInput=rS;xt.prototype.enableInput=nS;xt.prototype.hideLoading=Bd;xt.prototype.disableLoading=Bd;xt.prototype.showValidationMessage=oS;xt.prototype.resetValidationMessage=iS;xt.prototype.close=oi;xt.prototype.closePopup=oi;xt.prototype.closeModal=oi;xt.prototype.closeToast=oi;xt.prototype.rejectPromise=KE;xt.prototype.update=uS;xt.prototype._destroy=cS;Object.assign(xt,WM);Object.keys(wM).forEach(e=>{xt[e]=function(){return Fr&&Fr[e]?Fr[e](...arguments):null}});xt.DismissReason=Xs;xt.version="11.14.5";const hr=xt;hr.default=hr;typeof document<"u"&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');/*! js-cookie v3.0.5 | MIT */function wc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var pF={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function hg(e,t){function n(o,i,a){if(!(typeof document>"u")){a=wc({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var l in a)a[l]&&(s+="; "+l,a[l]!==!0&&(s+="="+a[l].split(";")[0]));return document.cookie=o+"="+e.write(i,o)+s}}function r(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var i=document.cookie?document.cookie.split("; "):[],a={},s=0;s<i.length;s++){var l=i[s].split("="),u=l.slice(1).join("=");try{var c=decodeURIComponent(l[0]);if(a[c]=e.read(u,c),o===c)break}catch{}}return o?a[o]:a}}return Object.create({set:n,get:r,remove:function(o,i){n(o,"",wc({},i,{expires:-1}))},withAttributes:function(o){return hg(this.converter,wc({},this.attributes,o))},withConverter:function(o){return hg(wc({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Ue=hg(pF,{path:"/"});function mF(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,o)=>o==="create"?e:(t.has(o)||t.set(o,e(o)),t.get(o))})}function eh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const pg=e=>Array.isArray(e);function gS(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function du(e){return typeof e=="string"||Array.isArray(e)}function lw(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function C0(e,t,n,r){if(typeof t=="function"){const[o,i]=lw(r);t=t(n!==void 0?n:e.custom,o,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,i]=lw(r);t=t(n!==void 0?n:e.custom,o,i)}return t}function th(e,t,n){const r=e.getProps();return C0(r,t,n!==void 0?n:r.custom,e)}const E0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],S0=["initial",...E0],Bu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ca=new Set(Bu),wo=e=>e*1e3,ko=e=>e/1e3,gF={type:"spring",stiffness:500,damping:25,restSpeed:10},vF=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),yF={type:"keyframes",duration:.8},xF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bF=(e,{keyframes:t})=>t.length>2?yF:Ca.has(e)?e.startsWith("scale")?vF(t[1]):gF:xF;function R0(e,t){return e?e[t]||e.default||e:void 0}const wF={skipAnimations:!1,useManualTiming:!1},kF=e=>e!==null;function nh(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(kF),i=t&&n!=="loop"&&t%2===1?0:o.length-1;return!i||r===void 0?o[i]:r}const dn=e=>e;function CF(e){let t=new Set,n=new Set,r=!1,o=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function s(u){i.has(u)&&(l.schedule(u),e()),u(a)}const l={schedule:(u,c=!1,d=!1)=>{const h=d&&r?t:n;return c&&i.add(u),h.has(u)||h.add(u),u},cancel:u=>{n.delete(u),i.delete(u)},process:u=>{if(a=u,r){o=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(s),r=!1,o&&(o=!1,l.process(u))}};return l}const kc=["read","resolveKeyframes","update","preRender","render","postRender"],EF=40;function vS(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=kc.reduce((g,v)=>(g[v]=CF(i),g),{}),{read:s,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=a,h=()=>{const g=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(g-o.timestamp,EF),1),o.timestamp=g,o.isProcessing=!0,s.process(o),l.process(o),u.process(o),c.process(o),d.process(o),f.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(h))},p=()=>{n=!0,r=!0,o.isProcessing||e(h)};return{schedule:kc.reduce((g,v)=>{const x=a[v];return g[v]=(b,k=!1,E=!1)=>(n||p(),x.schedule(b,k,E)),g},{}),cancel:g=>{for(let v=0;v<kc.length;v++)a[kc[v]].cancel(g)},state:o,steps:a}}const{schedule:We,cancel:ki,state:$t,steps:fp}=vS(typeof requestAnimationFrame<"u"?requestAnimationFrame:dn,!0),yS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,SF=1e-7,RF=12;function TF(e,t,n,r,o){let i,a,s=0;do a=t+(n-t)/2,i=yS(a,r,o)-e,i>0?n=a:t=a;while(Math.abs(i)>SF&&++s<RF);return a}function ju(e,t,n,r){if(e===t&&n===r)return dn;const o=i=>TF(i,0,1,e,n);return i=>i===0||i===1?i:yS(o(i),t,r)}const xS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,bS=e=>t=>1-e(1-t),wS=ju(.33,1.53,.69,.99),T0=bS(wS),kS=xS(T0),CS=e=>(e*=2)<1?.5*T0(e):.5*(2-Math.pow(2,-10*(e-1))),_0=e=>1-Math.sin(Math.acos(e)),ES=bS(_0),SS=xS(_0),RS=e=>/^0[^.\s]+$/u.test(e);function _F(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||RS(e):!0}let mg=dn;const TS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),_S=e=>t=>typeof t=="string"&&t.startsWith(e),IS=_S("--"),IF=_S("var(--"),I0=e=>IF(e)?NF.test(e.split("/*")[0].trim()):!1,NF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,PF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AF(e){const t=PF.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function NS(e,t,n=1){const[r,o]=AF(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return TS(a)?parseFloat(a):a}return I0(o)?NS(o,t,n+1):o}const No=(e,t,n)=>n>t?t:n<e?e:n,Ys={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},fu={...Ys,transform:e=>No(0,1,e)},Cc={...Ys,default:1},zu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),qo=zu("deg"),Gr=zu("%"),xe=zu("px"),DF=zu("vh"),MF=zu("vw"),uw={...Gr,parse:e=>Gr.parse(e)/100,transform:e=>Gr.transform(e*100)},FF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),cw=e=>e===Ys||e===xe,dw=(e,t)=>parseFloat(e.split(", ")[t]),fw=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/u);if(o)return dw(o[1],t);{const i=r.match(/^matrix\((.+)\)$/u);return i?dw(i[1],e):0}},OF=new Set(["x","y","z"]),LF=Bu.filter(e=>!OF.has(e));function BF(e){const t=[];return LF.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ds={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:fw(4,13),y:fw(5,14)};Ds.translateX=Ds.x;Ds.translateY=Ds.y;const PS=e=>t=>t.test(e),jF={test:e=>e==="auto",parse:e=>e},AS=[Ys,xe,Gr,qo,MF,DF,jF],hw=e=>AS.find(PS(e)),ra=new Set;let gg=!1,vg=!1;function DS(){if(vg){const e=Array.from(ra).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=BF(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([i,a])=>{var s;(s=r.getValue(i))===null||s===void 0||s.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vg=!1,gg=!1,ra.forEach(e=>e.complete()),ra.clear()}function MS(){ra.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(vg=!0)})}function zF(){MS(),DS()}class N0{constructor(t,n,r,o,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ra.add(this),gg||(gg=!0,We.read(MS),We.resolveKeyframes(DS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const a=o==null?void 0:o.get(),s=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,s);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=s),o&&a===void 0&&o.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ra.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ra.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Dl=e=>Math.round(e*1e5)/1e5,P0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function VF(e){return e==null}const WF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,A0=(e,t)=>n=>!!(typeof n=="string"&&WF.test(n)&&n.startsWith(e)||t&&!VF(n)&&Object.prototype.hasOwnProperty.call(n,t)),FS=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,i,a,s]=r.match(P0);return{[e]:parseFloat(o),[t]:parseFloat(i),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},$F=e=>No(0,255,e),hp={...Ys,transform:e=>Math.round($F(e))},Yi={test:A0("rgb","red"),parse:FS("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+hp.transform(e)+", "+hp.transform(t)+", "+hp.transform(n)+", "+Dl(fu.transform(r))+")"};function UF(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const yg={test:A0("#"),parse:UF,transform:Yi.transform},Ja={test:A0("hsl","hue"),parse:FS("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gr.transform(Dl(t))+", "+Gr.transform(Dl(n))+", "+Dl(fu.transform(r))+")"},tn={test:e=>Yi.test(e)||yg.test(e)||Ja.test(e),parse:e=>Yi.test(e)?Yi.parse(e):Ja.test(e)?Ja.parse(e):yg.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Yi.transform(e):Ja.transform(e)},HF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function GF(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(P0))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(HF))===null||n===void 0?void 0:n.length)||0)>0}const OS="number",LS="color",KF="var",qF="var(",pw="${}",XF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let i=0;const s=t.replace(XF,l=>(tn.test(l)?(r.color.push(i),o.push(LS),n.push(tn.parse(l))):l.startsWith(qF)?(r.var.push(i),o.push(KF),n.push(l)):(r.number.push(i),o.push(OS),n.push(parseFloat(l))),++i,pw)).split(pw);return{values:n,split:s,indexes:r,types:o}}function BS(e){return hu(e).values}function jS(e){const{split:t,types:n}=hu(e),r=t.length;return o=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],o[a]!==void 0){const s=n[a];s===OS?i+=Dl(o[a]):s===LS?i+=tn.transform(o[a]):i+=o[a]}return i}}const YF=e=>typeof e=="number"?0:e;function QF(e){const t=BS(e);return jS(e)(t.map(YF))}const Ci={test:GF,parse:BS,createTransformer:jS,getAnimatableNone:QF},JF=new Set(["brightness","contrast","saturate","opacity"]);function ZF(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(P0)||[];if(!r)return e;const o=n.replace(r,"");let i=JF.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+o+")"}const eO=/\b([a-z-]*)\(.*?\)/gu,xg={...Ci,getAnimatableNone:e=>{const t=e.match(eO);return t?t.map(ZF).join(" "):e}},tO={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,backgroundPositionX:xe,backgroundPositionY:xe},nO={rotate:qo,rotateX:qo,rotateY:qo,rotateZ:qo,scale:Cc,scaleX:Cc,scaleY:Cc,scaleZ:Cc,skew:qo,skewX:qo,skewY:qo,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:fu,originX:uw,originY:uw,originZ:xe},mw={...Ys,transform:Math.round},D0={...tO,...nO,zIndex:mw,size:xe,fillOpacity:fu,strokeOpacity:fu,numOctaves:mw},rO={...D0,color:tn,backgroundColor:tn,outlineColor:tn,fill:tn,stroke:tn,borderColor:tn,borderTopColor:tn,borderRightColor:tn,borderBottomColor:tn,borderLeftColor:tn,filter:xg,WebkitFilter:xg},M0=e=>rO[e];function zS(e,t){let n=M0(e);return n!==xg&&(n=Ci),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const oO=new Set(["auto","none","0"]);function iO(e,t,n){let r=0,o;for(;r<e.length&&!o;){const i=e[r];typeof i=="string"&&!oO.has(i)&&hu(i).values.length&&(o=e[r]),r++}if(o&&n)for(const i of t)e[i]=zS(n,o)}class VS extends N0{constructor(t,n,r,o,i){super(t,n,r,o,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),I0(u))){const c=NS(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!FF.has(r)||t.length!==2)return;const[o,i]=t,a=hw(o),s=hw(i);if(a!==s)if(cw(a)&&cw(s))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)_F(t[o])&&r.push(o);r.length&&iO(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ds[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const a=o.length-1,s=o[a];o[a]=Ds[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function F0(e){return typeof e=="function"}let rd;function aO(){rd=void 0}const Kr={now:()=>(rd===void 0&&Kr.set($t.isProcessing||wF.useManualTiming?$t.timestamp:performance.now()),rd),set:e=>{rd=e,queueMicrotask(aO)}},gw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ci.test(e)||e==="0")&&!e.startsWith("url("));function sO(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function lO(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=gw(o,t),s=gw(i,t);return!a||!s?!1:sO(e)||(n==="spring"||F0(n))&&r}const uO=40;class WS{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:a="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Kr.now(),this.options={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:i,repeatType:a,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>uO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&zF(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Kr.now(),this.hasAttemptedResolve=!0;const{name:r,type:o,velocity:i,delay:a,onComplete:s,onUpdate:l,isGenerator:u}=this.options;if(!u&&!lO(t,r,o,i))if(a)this.options.duration=0;else{l==null||l(nh(t,this.options,n)),s==null||s(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Ms=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},$S=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let i=0;i<o;i++)r+=e(Ms(0,o-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function US(e,t){return t?e*(1e3/t):0}const cO=5;function HS(e,t,n){const r=Math.max(t-cO,0);return US(n-e(r),t-r)}const ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pp=.001;function dO({duration:e=ct.duration,bounce:t=ct.bounce,velocity:n=ct.velocity,mass:r=ct.mass}){let o,i,a=1-t;a=No(ct.minDamping,ct.maxDamping,a),e=No(ct.minDuration,ct.maxDuration,ko(e)),a<1?(o=u=>{const c=u*a,d=c*e,f=c-n,h=bg(u,a),p=Math.exp(-d);return pp-f/h*p},i=u=>{const d=u*a*e,f=d*n+n,h=Math.pow(a,2)*Math.pow(u,2)*e,p=Math.exp(-d),m=bg(Math.pow(u,2),a);return(-o(u)+pp>0?-1:1)*((f-h)*p)/m}):(o=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-pp+c*d},i=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const s=5/e,l=hO(o,i,s);if(e=wo(e),isNaN(l))return{stiffness:ct.stiffness,damping:ct.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const fO=12;function hO(e,t,n){let r=n;for(let o=1;o<fO;o++)r=r-e(r)/t(r);return r}function bg(e,t){return e*Math.sqrt(1-t*t)}const wg=2e4;function GS(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<wg;)t+=n,r=e.next(t);return t>=wg?1/0:t}const pO=["duration","bounce"],mO=["stiffness","damping","mass"];function vw(e,t){return t.some(n=>e[n]!==void 0)}function gO(e){let t={velocity:ct.velocity,stiffness:ct.stiffness,damping:ct.damping,mass:ct.mass,isResolvedFromDuration:!1,...e};if(!vw(e,mO)&&vw(e,pO))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,i=2*No(.05,1,1-e.bounce)*Math.sqrt(o);t={...t,mass:ct.mass,stiffness:o,damping:i}}else{const n=dO(e);t={...t,...n,mass:ct.mass},t.isResolvedFromDuration=!0}return t}function KS(e=ct.visualDuration,t=ct.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:i},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:h}=gO({...n,velocity:-ko(n.velocity||0)}),p=f||0,m=u/(2*Math.sqrt(l*c)),y=a-i,g=ko(Math.sqrt(l/c)),v=Math.abs(y)<5;r||(r=v?ct.restSpeed.granular:ct.restSpeed.default),o||(o=v?ct.restDelta.granular:ct.restDelta.default);let x;if(m<1){const k=bg(g,m);x=E=>{const T=Math.exp(-m*g*E);return a-T*((p+m*g*y)/k*Math.sin(k*E)+y*Math.cos(k*E))}}else if(m===1)x=k=>a-Math.exp(-g*k)*(y+(p+g*y)*k);else{const k=g*Math.sqrt(m*m-1);x=E=>{const T=Math.exp(-m*g*E),R=Math.min(k*E,300);return a-T*((p+m*g*y)*Math.sinh(R)+k*y*Math.cosh(R))/k}}const b={calculatedDuration:h&&d||null,next:k=>{const E=x(k);if(h)s.done=k>=d;else{let T=0;m<1&&(T=k===0?wo(p):HS(x,k,E));const R=Math.abs(T)<=r,_=Math.abs(a-E)<=o;s.done=R&&_}return s.value=s.done?a:E,s},toString:()=>{const k=Math.min(GS(b),wg),E=$S(T=>b.next(k*T).value,k,30);return k+"ms "+E}};return b}function yw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:a,min:s,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],f={done:!1,value:d},h=R=>s!==void 0&&R<s||l!==void 0&&R>l,p=R=>s===void 0?l:l===void 0||Math.abs(s-R)<Math.abs(l-R)?s:l;let m=n*t;const y=d+m,g=a===void 0?y:a(y);g!==y&&(m=g-d);const v=R=>-m*Math.exp(-R/r),x=R=>g+v(R),b=R=>{const _=v(R),S=x(R);f.done=Math.abs(_)<=u,f.value=f.done?g:S};let k,E;const T=R=>{h(f.value)&&(k=R,E=KS({keyframes:[f.value,p(f.value)],velocity:HS(x,R,f.value),damping:o,stiffness:i,restDelta:u,restSpeed:c}))};return T(0),{calculatedDuration:null,next:R=>{let _=!1;return!E&&k===void 0&&(_=!0,b(R),T(R)),k!==void 0&&R>=k?E.next(R-k):(!_&&b(R),f)}}}const vO=ju(.42,0,1,1),yO=ju(0,0,.58,1),qS=ju(.42,0,.58,1),xO=e=>Array.isArray(e)&&typeof e[0]!="number",O0=e=>Array.isArray(e)&&typeof e[0]=="number",xw={linear:dn,easeIn:vO,easeInOut:qS,easeOut:yO,circIn:_0,circInOut:SS,circOut:ES,backIn:T0,backInOut:kS,backOut:wS,anticipate:CS},bw=e=>{if(O0(e)){mg(e.length===4);const[t,n,r,o]=e;return ju(t,n,r,o)}else if(typeof e=="string")return mg(xw[e]!==void 0),xw[e];return e},bO=(e,t)=>n=>t(e(n)),Co=(...e)=>e.reduce(bO),ot=(e,t,n)=>e+(t-e)*n;function mp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function wO({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,i=0,a=0;if(!t)o=i=a=n;else{const s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;o=mp(l,s,e+1/3),i=mp(l,s,e),a=mp(l,s,e-1/3)}return{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Vd(e,t){return n=>n>0?t:e}const gp=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},kO=[yg,Yi,Ja],CO=e=>kO.find(t=>t.test(e));function ww(e){const t=CO(e);if(!t)return!1;let n=t.parse(e);return t===Ja&&(n=wO(n)),n}const kw=(e,t)=>{const n=ww(e),r=ww(t);if(!n||!r)return Vd(e,t);const o={...n};return i=>(o.red=gp(n.red,r.red,i),o.green=gp(n.green,r.green,i),o.blue=gp(n.blue,r.blue,i),o.alpha=ot(n.alpha,r.alpha,i),Yi.transform(o))},kg=new Set(["none","hidden"]);function EO(e,t){return kg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function SO(e,t){return n=>ot(e,t,n)}function L0(e){return typeof e=="number"?SO:typeof e=="string"?I0(e)?Vd:tn.test(e)?kw:_O:Array.isArray(e)?XS:typeof e=="object"?tn.test(e)?kw:RO:Vd}function XS(e,t){const n=[...e],r=n.length,o=e.map((i,a)=>L0(i)(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=o[a](i);return n}}function RO(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=L0(e[o])(e[o],t[o]));return o=>{for(const i in r)n[i]=r[i](o);return n}}function TO(e,t){var n;const r=[],o={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],s=e.indexes[a][o[a]],l=(n=e.values[s])!==null&&n!==void 0?n:0;r[i]=l,o[a]++}return r}const _O=(e,t)=>{const n=Ci.createTransformer(t),r=hu(e),o=hu(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?kg.has(e)&&!o.values.length||kg.has(t)&&!r.values.length?EO(e,t):Co(XS(TO(r,o),o.values),n):Vd(e,t)};function YS(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ot(e,t,n):L0(e)(e,t)}function IO(e,t,n){const r=[],o=n||YS,i=e.length-1;for(let a=0;a<i;a++){let s=o(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||dn:t;s=Co(l,s)}r.push(s)}return r}function NO(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const i=e.length;if(mg(i===t.length),i===1)return()=>t[0];if(i===2&&e[0]===e[1])return()=>t[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=IO(t,r,o),s=a.length,l=u=>{let c=0;if(s>1)for(;c<e.length-2&&!(u<e[c+1]);c++);const d=Ms(e[c],e[c+1],u);return a[c](d)};return n?u=>l(No(e[0],e[i-1],u)):l}function PO(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Ms(0,t,r);e.push(ot(n,1,o))}}function AO(e){const t=[0];return PO(t,e.length-1),t}function DO(e,t){return e.map(n=>n*t)}function MO(e,t){return e.map(()=>t||qS).splice(0,e.length-1)}function Wd({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=xO(r)?r.map(bw):bw(r),i={done:!1,value:t[0]},a=DO(n&&n.length===t.length?n:AO(t),e),s=NO(a,t,{ease:Array.isArray(o)?o:MO(t,o)});return{calculatedDuration:e,next:l=>(i.value=s(l),i.done=l>=e,i)}}const FO=e=>{const t=({timestamp:n})=>e(n);return{start:()=>We.update(t,!0),stop:()=>ki(t),now:()=>$t.isProcessing?$t.timestamp:Kr.now()}},OO={decay:yw,inertia:yw,tween:Wd,keyframes:Wd,spring:KS},LO=e=>e/100;class B0 extends WS{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:o,keyframes:i}=this.options,a=(o==null?void 0:o.KeyframeResolver)||N0,s=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(i,s,n,r,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:i,velocity:a=0}=this.options,s=F0(n)?n:OO[n]||Wd;let l,u;s!==Wd&&typeof t[0]!="number"&&(l=Co(LO,YS(t[0],t[1])),t=[0,100]);const c=s({...this.options,keyframes:t});i==="mirror"&&(u=s({...this.options,keyframes:[...t].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=GS(c));const{calculatedDuration:d}=c,f=d+o,h=f*(r+1)-o;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:h}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:o,generator:i,mirroredGenerator:a,mapPercentToKeyframes:s,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return i.next(0);const{delay:f,repeat:h,repeatType:p,repeatDelay:m,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const g=this.currentTime-f*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let x=this.currentTime,b=i;if(h){const R=Math.min(this.currentTime,c)/d;let _=Math.floor(R),S=R%1;!S&&R>=1&&(S=1),S===1&&_--,_=Math.min(_,h+1),!!(_%2)&&(p==="reverse"?(S=1-S,m&&(S-=m/d)):p==="mirror"&&(b=a)),x=No(0,1,S)*d}const k=v?{done:!1,value:l[0]}:b.next(x);s&&(k.value=s(k.value));let{done:E}=k;!v&&u!==null&&(E=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return T&&o!==void 0&&(k.value=nh(l,this.options,o)),y&&y(k.value),T&&this.finish(),k}get duration(){const{resolved:t}=this;return t?ko(t.calculatedDuration):0}get time(){return ko(this.currentTime)}set time(t){t=wo(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ko(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=FO,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const BO=new Set(["opacity","clipPath","filter","transform"]);function j0(e){let t;return()=>(t===void 0&&(t=e()),t)}const jO={linearEasing:void 0};function zO(e,t){const n=j0(e);return()=>{var r;return(r=jO[t])!==null&&r!==void 0?r:n()}}const $d=zO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function QS(e){return!!(typeof e=="function"&&$d()||!e||typeof e=="string"&&(e in Cg||$d())||O0(e)||Array.isArray(e)&&e.every(QS))}const kl=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Cg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:kl([0,.65,.55,1]),circOut:kl([.55,0,1,.45]),backIn:kl([.31,.01,.66,-.59]),backOut:kl([.33,1.53,.69,.99])};function JS(e,t){if(e)return typeof e=="function"&&$d()?$S(e,t):O0(e)?kl(e):Array.isArray(e)?e.map(n=>JS(n,t)||Cg.easeOut):Cg[e]}function VO(e,t,n,{delay:r=0,duration:o=300,repeat:i=0,repeatType:a="loop",ease:s="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=JS(s,o);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:o,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function Cw(e,t){e.timeline=t,e.onfinish=null}const WO=j0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ud=10,$O=2e4;function UO(e){return F0(e.type)||e.type==="spring"||!QS(e.ease)}function HO(e,t){const n=new B0({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const o=[];let i=0;for(;!r.done&&i<$O;)r=n.sample(i),o.push(r.value),i+=Ud;return{times:void 0,keyframes:o,duration:i-Ud,ease:"linear"}}const ZS={anticipate:CS,backInOut:kS,circInOut:SS};function GO(e){return e in ZS}class Ew extends WS{constructor(t){super(t);const{name:n,motionValue:r,element:o,keyframes:i}=this.options;this.resolver=new VS(i,(a,s)=>this.onKeyframesResolved(a,s),n,r,o),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:o=300,times:i,ease:a,type:s,motionValue:l,name:u,startTime:c}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&$d()&&GO(a)&&(a=ZS[a]),UO(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:m,...y}=this.options,g=HO(t,y);t=g.keyframes,t.length===1&&(t[1]=t[0]),o=g.duration,i=g.times,a=g.ease,s="keyframes"}const d=VO(l.owner.current,u,t,{...this.options,duration:o,times:i,ease:a});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(Cw(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(nh(t,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:o,times:i,type:s,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return ko(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return ko(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=wo(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return dn;const{animation:r}=n;Cw(r,t)}return dn}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:o,type:i,ease:a,times:s}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...h}=this.options,p=new B0({...h,keyframes:r,duration:o,type:i,ease:a,times:s,isGenerator:!0}),m=wo(this.time);u.setWithVelocity(p.sample(m-Ud).value,p.sample(m).value,Ud)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:o,repeatType:i,damping:a,type:s}=t;return WO()&&r&&BO.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!o&&i!=="mirror"&&a!==0&&s!=="inertia"}}const KO=j0(()=>window.ScrollTimeline!==void 0);class qO{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(o=>KO()&&o.attachTimeline?o.attachTimeline(t):n(o));return()=>{r.forEach((o,i)=>{o&&o(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function XO({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:i,repeatType:a,repeatDelay:s,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const z0=(e,t,n,r={},o,i)=>a=>{const s=R0(r,e)||{},l=s.delay||r.delay||0;let{elapsed:u=0}=r;u=u-wo(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-u,onUpdate:f=>{t.set(f),s.onUpdate&&s.onUpdate(f)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:i?void 0:o};XO(s)||(c={...c,...bF(e,c)}),c.duration&&(c.duration=wo(c.duration)),c.repeatDelay&&(c.repeatDelay=wo(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!i&&t.get()!==void 0){const f=nh(c.keyframes,s);if(f!==void 0)return We.update(()=>{c.onUpdate(f),c.onComplete()}),new qO([])}return!i&&Ew.supports(c)?new Ew(c):new B0(c)},YO=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),QO=e=>pg(e)?e[e.length-1]||0:e;function V0(e,t){e.indexOf(t)===-1&&e.push(t)}function W0(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class $0{constructor(){this.subscriptions=[]}add(t){return V0(this.subscriptions,t),()=>W0(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let i=0;i<o;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Sw=30,JO=e=>!isNaN(parseFloat(e));class ZO{constructor(t,n={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{const i=Kr.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Kr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=JO(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new $0);const r=this.events[t].add(n);return t==="change"?()=>{r(),We.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Kr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Sw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Sw);return US(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pu(e,t){return new ZO(e,t)}function eL(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,pu(n))}function tL(e,t){const n=th(e,t);let{transitionEnd:r={},transition:o={},...i}=n||{};i={...i,...r};for(const a in i){const s=QO(i[a]);eL(e,a,s)}}const U0=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nL="framerAppearId",eR="data-"+U0(nL);function tR(e){return e.props[eR]}const un=e=>!!(e&&e.getVelocity);function rL(e){return!!(un(e)&&e.add)}function Eg(e,t){const n=e.getValue("willChange");if(rL(n))return n.add(t)}function oL({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function nR(e,t,{delay:n=0,transitionOverride:r,type:o}={}){var i;let{transition:a=e.getDefaultTransition(),transitionEnd:s,...l}=t;r&&(a=r);const u=[],c=o&&e.animationState&&e.animationState.getState()[o];for(const d in l){const f=e.getValue(d,(i=e.latestValues[d])!==null&&i!==void 0?i:null),h=l[d];if(h===void 0||c&&oL(c,d))continue;const p={delay:n,...R0(a||{},d)};let m=!1;if(window.MotionHandoffAnimation){const g=tR(e);if(g){const v=window.MotionHandoffAnimation(g,d,We);v!==null&&(p.startTime=v,m=!0)}}Eg(e,d),f.start(z0(d,f,h,e.shouldReduceMotion&&Ca.has(d)?{type:!1}:p,e,m));const y=f.animation;y&&u.push(y)}return s&&Promise.all(u).then(()=>{We.update(()=>{s&&tL(e,s)})}),u}function Sg(e,t,n={}){var r;const o=th(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(i=n.transitionOverride);const a=o?()=>Promise.all(nR(e,o,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=i;return iL(e,t,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,c]=l==="beforeChildren"?[a,s]:[s,a];return u().then(()=>c())}else return Promise.all([a(),s(n.delay)])}function iL(e,t,n=0,r=0,o=1,i){const a=[],s=(e.variantChildren.size-1)*r,l=o===1?(u=0)=>u*r:(u=0)=>s-u*r;return Array.from(e.variantChildren).sort(aL).forEach((u,c)=>{u.notify("AnimationStart",t),a.push(Sg(u,t,{...i,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function aL(e,t){return e.sortNodePosition(t)}function sL(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(i=>Sg(e,i,n));r=Promise.all(o)}else if(typeof t=="string")r=Sg(e,t,n);else{const o=typeof t=="function"?th(e,t,n.custom):t;r=Promise.all(nR(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const lL=S0.length;function rR(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?rR(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<lL;n++){const r=S0[n],o=e.props[r];(du(o)||o===!1)&&(t[r]=o)}return t}const uL=[...E0].reverse(),cL=E0.length;function dL(e){return t=>Promise.all(t.map(({animation:n,options:r})=>sL(e,n,r)))}function fL(e){let t=dL(e),n=Rw(),r=!0;const o=l=>(u,c)=>{var d;const f=th(e,c,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:p,...m}=f;u={...u,...m,...p}}return u};function i(l){t=l(e)}function a(l){const{props:u}=e,c=rR(e.parent)||{},d=[],f=new Set;let h={},p=1/0;for(let y=0;y<cL;y++){const g=uL[y],v=n[g],x=u[g]!==void 0?u[g]:c[g],b=du(x),k=g===l?v.isActive:null;k===!1&&(p=y);let E=x===c[g]&&x!==u[g]&&b;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),v.protectedKeys={...h},!v.isActive&&k===null||!x&&!v.prevProp||eh(x)||typeof x=="boolean")continue;const T=hL(v.prevProp,x);let R=T||g===l&&v.isActive&&!E&&b||y>p&&b,_=!1;const S=Array.isArray(x)?x:[x];let A=S.reduce(o(g),{});k===!1&&(A={});const{prevResolvedValues:N={}}=v,O={...N,...A},M=z=>{R=!0,f.has(z)&&(_=!0,f.delete(z)),v.needsAnimating[z]=!0;const P=e.getValue(z);P&&(P.liveStyle=!1)};for(const z in O){const P=A[z],B=N[z];if(h.hasOwnProperty(z))continue;let L=!1;pg(P)&&pg(B)?L=!gS(P,B):L=P!==B,L?P!=null?M(z):f.add(z):P!==void 0&&f.has(z)?M(z):v.protectedKeys[z]=!0}v.prevProp=x,v.prevResolvedValues=A,v.isActive&&(h={...h,...A}),r&&e.blockInitialAnimation&&(R=!1),R&&(!(E&&T)||_)&&d.push(...S.map(z=>({animation:z,options:{type:g}})))}if(f.size){const y={};f.forEach(g=>{const v=e.getBaseTarget(g),x=e.getValue(g);x&&(x.liveStyle=!0),y[g]=v??null}),d.push({animation:y})}let m=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(d):Promise.resolve()}function s(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(f=>{var h;return(h=f.animationState)===null||h===void 0?void 0:h.setActive(l,u)}),n[l].isActive=u;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:s,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Rw(),r=!0}}}function hL(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gS(t,e):!1}function Oi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Rw(){return{animate:Oi(!0),whileInView:Oi(),whileHover:Oi(),whileTap:Oi(),whileDrag:Oi(),whileFocus:Oi(),exit:Oi()}}class Pi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class pL extends Pi{constructor(t){super(t),t.animationState||(t.animationState=fL(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();eh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let mL=0;class gL extends Pi{constructor(){super(...arguments),this.id=mL++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const vL={animation:{Feature:pL},exit:{Feature:gL}},oR=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function rh(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const yL=e=>t=>oR(t)&&e(t,rh(t));function yo(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Eo(e,t,n,r){return yo(e,t,yL(n),r)}const Tw=(e,t)=>Math.abs(e-t);function xL(e,t){const n=Tw(e.x,t.x),r=Tw(e.y,t.y);return Math.sqrt(n**2+r**2)}class iR{constructor(t,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=yp(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=xL(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:m}=$t;this.history.push({...p,timestamp:m});const{onStart:y,onMove:g}=this.handlers;f||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=vp(f,this.transformPagePoint),We.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=yp(d.type==="pointercancel"?this.lastMoveEventInfo:vp(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,y),p&&p(d,y)},!oR(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const a=rh(t),s=vp(a,this.transformPagePoint),{point:l}=s,{timestamp:u}=$t;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,yp(s,this.history)),this.removeListeners=Co(Eo(this.contextWindow,"pointermove",this.handlePointerMove),Eo(this.contextWindow,"pointerup",this.handlePointerUp),Eo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ki(this.updatePoint)}}function vp(e,t){return t?{point:t(e.point)}:e}function _w(e,t){return{x:e.x-t.x,y:e.y-t.y}}function yp({point:e},t){return{point:e,delta:_w(e,aR(t)),offset:_w(e,bL(t)),velocity:wL(t,.1)}}function bL(e){return e[0]}function aR(e){return e[e.length-1]}function wL(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=aR(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>wo(t)));)n--;if(!r)return{x:0,y:0};const i=ko(o.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(o.x-r.x)/i,y:(o.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function sR(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Iw=sR("dragHorizontal"),Nw=sR("dragVertical");function lR(e){let t=!1;if(e==="y")t=Nw();else if(e==="x")t=Iw();else{const n=Iw(),r=Nw();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function uR(){const e=lR(!0);return e?(e(),!1):!0}function Za(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const cR=1e-4,kL=1-cR,CL=1+cR,dR=.01,EL=0-dR,SL=0+dR;function Xn(e){return e.max-e.min}function RL(e,t,n){return Math.abs(e-t)<=n}function Pw(e,t,n,r=.5){e.origin=r,e.originPoint=ot(t.min,t.max,e.origin),e.scale=Xn(n)/Xn(t),e.translate=ot(n.min,n.max,e.origin)-e.originPoint,(e.scale>=kL&&e.scale<=CL||isNaN(e.scale))&&(e.scale=1),(e.translate>=EL&&e.translate<=SL||isNaN(e.translate))&&(e.translate=0)}function Ml(e,t,n,r){Pw(e.x,t.x,n.x,r?r.originX:void 0),Pw(e.y,t.y,n.y,r?r.originY:void 0)}function Aw(e,t,n){e.min=n.min+t.min,e.max=e.min+Xn(t)}function TL(e,t,n){Aw(e.x,t.x,n.x),Aw(e.y,t.y,n.y)}function Dw(e,t,n){e.min=t.min-n.min,e.max=e.min+Xn(t)}function Fl(e,t,n){Dw(e.x,t.x,n.x),Dw(e.y,t.y,n.y)}function _L(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ot(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ot(n,e,r.max):Math.min(e,n)),e}function Mw(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function IL(e,{top:t,left:n,bottom:r,right:o}){return{x:Mw(e.x,n,o),y:Mw(e.y,t,r)}}function Fw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function NL(e,t){return{x:Fw(e.x,t.x),y:Fw(e.y,t.y)}}function PL(e,t){let n=.5;const r=Xn(e),o=Xn(t);return o>r?n=Ms(t.min,t.max-r,e.min):r>o&&(n=Ms(e.min,e.max-o,t.min)),No(0,1,n)}function AL(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Rg=.35;function DL(e=Rg){return e===!1?e=0:e===!0&&(e=Rg),{x:Ow(e,"left","right"),y:Ow(e,"top","bottom")}}function Ow(e,t,n){return{min:Lw(e,t),max:Lw(e,n)}}function Lw(e,t){return typeof e=="number"?e:e[t]||0}const Bw=()=>({translate:0,scale:1,origin:0,originPoint:0}),es=()=>({x:Bw(),y:Bw()}),jw=()=>({min:0,max:0}),mt=()=>({x:jw(),y:jw()});function rr(e){return[e("x"),e("y")]}function fR({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function ML({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function FL(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xp(e){return e===void 0||e===1}function Tg({scale:e,scaleX:t,scaleY:n}){return!xp(e)||!xp(t)||!xp(n)}function zi(e){return Tg(e)||hR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function hR(e){return zw(e.x)||zw(e.y)}function zw(e){return e&&e!=="0%"}function Hd(e,t,n){const r=e-n,o=t*r;return n+o}function Vw(e,t,n,r,o){return o!==void 0&&(e=Hd(e,o,r)),Hd(e,n,r)+t}function _g(e,t=0,n=1,r,o){e.min=Vw(e.min,t,n,r,o),e.max=Vw(e.max,t,n,r,o)}function pR(e,{x:t,y:n}){_g(e.x,t.translate,t.scale,t.originPoint),_g(e.y,n.translate,n.scale,n.originPoint)}const Ww=.999999999999,$w=1.0000000000001;function OL(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let i,a;for(let s=0;s<o;s++){i=n[s],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ns(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,pR(e,a)),r&&zi(i.latestValues)&&ns(e,i.latestValues))}t.x<$w&&t.x>Ww&&(t.x=1),t.y<$w&&t.y>Ww&&(t.y=1)}function ts(e,t){e.min=e.min+t,e.max=e.max+t}function Uw(e,t,n,r,o=.5){const i=ot(e.min,e.max,o);_g(e,t,n,i,r)}function ns(e,t){Uw(e.x,t.x,t.scaleX,t.scale,t.originX),Uw(e.y,t.y,t.scaleY,t.scale,t.originY)}function mR(e,t){return fR(FL(e.getBoundingClientRect(),t))}function LL(e,t,n){const r=mR(e,n),{scroll:o}=t;return o&&(ts(r.x,o.offset.x),ts(r.y,o.offset.y)),r}const gR=({current:e})=>e?e.ownerDocument.defaultView:null,BL=new WeakMap;class jL{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rh(c,"page").point)},i=(c,d)=>{const{drag:f,dragPropagation:h,onDragStart:p}=this.getProps();if(f&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=lR(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rr(y=>{let g=this.getAxisMotionValue(y).get()||0;if(Gr.test(g)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[y];x&&(g=Xn(x)*(parseFloat(g)/100))}}this.originPoint[y]=g}),p&&We.postRender(()=>p(c,d)),Eg(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},a=(c,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:y}=d;if(h&&this.currentDirection===null){this.currentDirection=zL(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),m&&m(c,d)},s=(c,d)=>this.stop(c,d),l=()=>rr(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new iR(t,{onSessionStart:o,onStart:i,onMove:a,onSessionEnd:s,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:gR(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:i}=this.getProps();i&&We.postRender(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!Ec(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=_L(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&Za(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=IL(o.layoutBox,n):this.constraints=!1,this.elastic=DL(r),i!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&rr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=AL(o.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Za(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=LL(r,o.root,this.visualElement.getTransformPagePoint());let a=NL(o.layout.layoutBox,i);if(n){const s=n(ML(a));this.hasMutatedConstraints=!!s,s&&(a=fR(s))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},u=rr(c=>{if(!Ec(c,n,this.currentDirection))return;let d=l&&l[c]||{};a&&(d={min:0,max:0});const f=o?200:1e6,h=o?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(s)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Eg(this.visualElement,t),r.start(z0(t,r,0,n,this.visualElement,!1))}stopAnimation(){rr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){rr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){rr(n=>{const{drag:r}=this.getProps();if(!Ec(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:a,max:s}=o.layout.layoutBox[n];i.set(t[n]-ot(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Za(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};rr(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const l=s.get();o[a]=PL({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),rr(a=>{if(!Ec(a,t,null))return;const s=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];s.set(ot(l,u,o[a]))})}addListeners(){if(!this.visualElement.current)return;BL.set(this.visualElement,this);const t=this.visualElement.current,n=Eo(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Za(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,i=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),We.read(r);const a=yo(window,"resize",()=>this.scalePositionWithinConstraints()),s=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(rr(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:a=Rg,dragMomentum:s=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:i,dragElastic:a,dragMomentum:s}}}function Ec(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function zL(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class VL extends Pi{constructor(t){super(t),this.removeGroupControls=dn,this.removeListeners=dn,this.controls=new jL(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Hw=e=>(t,n)=>{e&&We.postRender(()=>e(t,n))};class WL extends Pi{constructor(){super(...arguments),this.removePointerDownListener=dn}onPointerDown(t){this.session=new iR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:Hw(t),onStart:Hw(n),onMove:r,onEnd:(i,a)=>{delete this.session,o&&We.postRender(()=>o(i,a))}}}mount(){this.removePointerDownListener=Eo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const H0=C.createContext(null);function $L(){const e=C.useContext(H0);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,o=C.useId();C.useEffect(()=>r(o),[]);const i=C.useCallback(()=>n&&n(o),[o,n]);return!t&&n?[!1,i]:[!0]}const vR=C.createContext({}),yR=C.createContext({}),od={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Gw(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const dl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(xe.test(e))e=parseFloat(e);else return e;const n=Gw(e,t.target.x),r=Gw(e,t.target.y);return`${n}% ${r}%`}},UL={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=Ci.parse(e);if(o.length>5)return r;const i=Ci.createTransformer(e),a=typeof o[0]!="number"?1:0,s=n.x.scale*t.x,l=n.y.scale*t.y;o[0+a]/=s,o[1+a]/=l;const u=ot(s,l,.5);return typeof o[2+a]=="number"&&(o[2+a]/=u),typeof o[3+a]=="number"&&(o[3+a]/=u),i(o)}},Gd={};function HL(e){Object.assign(Gd,e)}const{schedule:G0,cancel:gY}=vS(queueMicrotask,!1);class GL extends C.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:i}=t;HL(KL),i&&(n.group&&n.group.add(i),r&&r.register&&o&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),od.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:i}=this.props,a=r.projection;return a&&(a.isPresent=i,o||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||We.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),G0.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function xR(e){const[t,n]=$L(),r=C.useContext(vR);return w.jsx(GL,{...e,layoutGroup:r,switchLayoutGroup:C.useContext(yR),isPresent:t,safeToRemove:n})}const KL={borderRadius:{...dl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dl,borderTopRightRadius:dl,borderBottomLeftRadius:dl,borderBottomRightRadius:dl,boxShadow:UL},bR=["TopLeft","TopRight","BottomLeft","BottomRight"],qL=bR.length,Kw=e=>typeof e=="string"?parseFloat(e):e,qw=e=>typeof e=="number"||xe.test(e);function XL(e,t,n,r,o,i){o?(e.opacity=ot(0,n.opacity!==void 0?n.opacity:1,YL(r)),e.opacityExit=ot(t.opacity!==void 0?t.opacity:1,0,QL(r))):i&&(e.opacity=ot(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<qL;a++){const s=`border${bR[a]}Radius`;let l=Xw(t,s),u=Xw(n,s);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||qw(l)===qw(u)?(e[s]=Math.max(ot(Kw(l),Kw(u),r),0),(Gr.test(u)||Gr.test(l))&&(e[s]+="%")):e[s]=u}(t.rotate||n.rotate)&&(e.rotate=ot(t.rotate||0,n.rotate||0,r))}function Xw(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const YL=wR(0,.5,ES),QL=wR(.5,.95,dn);function wR(e,t,n){return r=>r<e?0:r>t?1:n(Ms(e,t,r))}function Yw(e,t){e.min=t.min,e.max=t.max}function nr(e,t){Yw(e.x,t.x),Yw(e.y,t.y)}function Qw(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Jw(e,t,n,r,o){return e-=t,e=Hd(e,1/n,r),o!==void 0&&(e=Hd(e,1/o,r)),e}function JL(e,t=0,n=1,r=.5,o,i=e,a=e){if(Gr.test(t)&&(t=parseFloat(t),t=ot(a.min,a.max,t/100)-a.min),typeof t!="number")return;let s=ot(i.min,i.max,r);e===i&&(s-=t),e.min=Jw(e.min,t,n,s,o),e.max=Jw(e.max,t,n,s,o)}function Zw(e,t,[n,r,o],i,a){JL(e,t[n],t[r],t[o],t.scale,i,a)}const ZL=["x","scaleX","originX"],eB=["y","scaleY","originY"];function e1(e,t,n,r){Zw(e.x,t,ZL,n?n.x:void 0,r?r.x:void 0),Zw(e.y,t,eB,n?n.y:void 0,r?r.y:void 0)}function t1(e){return e.translate===0&&e.scale===1}function kR(e){return t1(e.x)&&t1(e.y)}function n1(e,t){return e.min===t.min&&e.max===t.max}function tB(e,t){return n1(e.x,t.x)&&n1(e.y,t.y)}function r1(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function CR(e,t){return r1(e.x,t.x)&&r1(e.y,t.y)}function o1(e){return Xn(e.x)/Xn(e.y)}function i1(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class nB{constructor(){this.members=[]}add(t){V0(this.members,t),t.scheduleRender()}remove(t){if(W0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const i=this.members[o];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function rB(e,t,n){let r="";const o=e.x.translate/t.x,i=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((o||i||a)&&(r=`translate3d(${o}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:h,skewY:p}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),h&&(r+=`skewX(${h}deg) `),p&&(r+=`skewY(${p}deg) `)}const s=e.x.scale*t.x,l=e.y.scale*t.y;return(s!==1||l!==1)&&(r+=`scale(${s}, ${l})`),r||"none"}const oB=(e,t)=>e.depth-t.depth;class iB{constructor(){this.children=[],this.isDirty=!1}add(t){V0(this.children,t),this.isDirty=!0}remove(t){W0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(oB),this.isDirty=!1,this.children.forEach(t)}}function id(e){const t=un(e)?e.get():e;return YO(t)?t.toValue():t}function aB(e,t){const n=Kr.now(),r=({timestamp:o})=>{const i=o-n;i>=t&&(ki(r),e(i-t))};return We.read(r,!0),()=>ki(r)}function sB(e){return e instanceof SVGElement&&e.tagName!=="svg"}function lB(e,t,n){const r=un(e)?e:pu(e);return r.start(z0("",r,t,n)),r.animation}const Vi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Cl=typeof window<"u"&&window.MotionDebug!==void 0,bp=["","X","Y","Z"],uB={visibility:"hidden"},a1=1e3;let cB=0;function wp(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ER(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=tR(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",We,!(o||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ER(r)}function SR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(a={},s=t==null?void 0:t()){this.id=cB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Cl&&(Vi.totalNodes=Vi.resolvedTargetDeltas=Vi.recalculatedProjection=0),this.nodes.forEach(hB),this.nodes.forEach(yB),this.nodes.forEach(xB),this.nodes.forEach(pB),Cl&&window.MotionDebug.record(Vi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new iB)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new $0),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const l=this.eventHandlers.get(a);l&&l.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sB(a),this.instance=a;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=aB(f,250),od.hasAnimatedSinceResize&&(od.hasAnimatedSinceResize=!1,this.nodes.forEach(l1))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||EB,{onLayoutAnimationStart:y,onLayoutAnimationComplete:g}=c.getProps(),v=!this.targetLayout||!CR(this.targetLayout,p)||h,x=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const b={...R0(m,"layout"),onPlay:y,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||l1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ki(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bB),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ER(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(s1);return}this.isUpdating||this.nodes.forEach(gB),this.isUpdating=!1,this.nodes.forEach(vB),this.nodes.forEach(dB),this.nodes.forEach(fB),this.clearAllSnapshots();const s=Kr.now();$t.delta=No(0,1e3/60,s-$t.timestamp),$t.timestamp=s,$t.isProcessing=!0,fp.update.process($t),fp.preRender.process($t),fp.render.process($t),$t.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,G0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mB),this.sharedNodes.forEach(wB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,We.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){We.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!kR(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&(s||zi(this.latestValues)||c)&&(o(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return a&&(l=this.removeTransform(l)),SB(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:s}=this.options;if(!s)return mt();const l=s.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(RB))){const{scroll:c}=this.root;c&&(ts(l.x,c.offset.x),ts(l.y,c.offset.y))}return l}removeElementScroll(a){var s;const l=mt();if(nr(l,a),!((s=this.scroll)===null||s===void 0)&&s.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&nr(l,a),ts(l.x,d.offset.x),ts(l.y,d.offset.y))}return l}applyTransform(a,s=!1){const l=mt();nr(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!s&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ns(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),zi(c.latestValues)&&ns(l,c.latestValues)}return zi(this.latestValues)&&ns(l,this.latestValues),l}removeTransform(a){const s=mt();nr(s,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!zi(u.latestValues))continue;Tg(u.latestValues)&&u.updateSnapshot();const c=mt(),d=u.measurePageBox();nr(c,d),e1(s,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return zi(this.latestValues)&&e1(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$t.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var s;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=$t.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),Fl(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=mt(),this.targetWithTransforms=mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nr(this.target,this.layout.layoutBox),pR(this.target,this.targetDelta)):nr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),Fl(this.relativeTargetOrigin,this.target,h.target),nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Cl&&Vi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Tg(this.parent.latestValues)||hR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const s=this.getLead(),l=!!this.resumingFrom||this!==s;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===$t.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;nr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;OL(this.layoutCorrected,this.treeScale,this.path,l),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=mt());const{target:p}=s;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Qw(this.prevProjectionDelta.x,this.projectionDelta.x),Qw(this.prevProjectionDelta.y,this.projectionDelta.y)),Ml(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!i1(this.projectionDelta.x,this.prevProjectionDelta.x)||!i1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Cl&&Vi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)===null||s===void 0||s.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=es(),this.projectionDelta=es(),this.projectionDeltaWithTransform=es()}setAnimationOrigin(a,s=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=es();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const f=mt(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,y=this.getStack(),g=!y||y.members.length<=1,v=!!(m&&!g&&this.options.crossfade===!0&&!this.path.some(CB));this.animationProgress=0;let x;this.mixTargetDelta=b=>{const k=b/1e3;u1(d.x,a.x,k),u1(d.y,a.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kB(this.relativeTarget,this.relativeTargetOrigin,f,k),x&&tB(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=mt()),nr(x,this.relativeTarget)),m&&(this.animationValues=c,XL(c,u,this.latestValues,k,v,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ki(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=We.update(()=>{od.hasAnimatedSinceResize=!0,this.currentAnimation=lB(0,a1,{...a,onUpdate:s=>{this.mixTargetDelta(s),a.onUpdate&&a.onUpdate(s)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(a1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:l,layout:u,latestValues:c}=a;if(!(!s||!l||!u)){if(this!==a&&this.layout&&u&&RR(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||mt();const d=Xn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=Xn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}nr(s,l),ns(s,c),Ml(this.projectionDeltaWithTransform,this.layoutCorrected,s,c)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new nB),this.sharedNodes.get(a).add(s);const u=s.options.initialPromotionConfig;s.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const u={};l.z&&wp("z",a,u,this.animationValues);for(let c=0;c<bp.length;c++)wp(`rotate${bp[c]}`,a,u,this.animationValues),wp(`skew${bp[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}getProjectionStyles(a){var s,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return uB;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=id(a==null?void 0:a.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=id(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!zi(this.latestValues)&&(m.transform=c?c({},""):"none",this.hasProjected=!1),m}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=rB(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(s=f.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in Gd){if(f[m]===void 0)continue;const{correct:y,applyTo:g}=Gd[m],v=u.transform==="none"?f[m]:y(f[m],d);if(g){const x=g.length;for(let b=0;b<x;b++)u[g[b]]=v}else u[m]=v}return this.options.layoutId&&(u.pointerEvents=d===this?id(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(s1),this.root.sharedNodes.clear()}}}function dB(e){e.updateLayout()}function fB(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?rr(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=Xn(f);f.min=r[d].min,f.max=f.min+h}):RR(i,n.layoutBox,r)&&rr(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=Xn(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const s=es();Ml(s,r,n.layoutBox);const l=es();a?Ml(l,e.applyTransform(o,!0),n.measuredBox):Ml(l,r,n.layoutBox);const u=!kR(s);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=mt();Fl(p,n.layoutBox,f.layoutBox);const m=mt();Fl(m,r,h.layoutBox),CR(p,m)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:s,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function hB(e){Cl&&Vi.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function pB(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function mB(e){e.clearSnapshot()}function s1(e){e.clearMeasurements()}function gB(e){e.isLayoutDirty=!1}function vB(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function l1(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function yB(e){e.resolveTargetDelta()}function xB(e){e.calcProjection()}function bB(e){e.resetSkewAndRotation()}function wB(e){e.removeLeadSnapshot()}function u1(e,t,n){e.translate=ot(t.translate,0,n),e.scale=ot(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function c1(e,t,n,r){e.min=ot(t.min,n.min,r),e.max=ot(t.max,n.max,r)}function kB(e,t,n,r){c1(e.x,t.x,n.x,r),c1(e.y,t.y,n.y,r)}function CB(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const EB={duration:.45,ease:[.4,0,.1,1]},d1=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),f1=d1("applewebkit/")&&!d1("chrome/")?Math.round:dn;function h1(e){e.min=f1(e.min),e.max=f1(e.max)}function SB(e){h1(e.x),h1(e.y)}function RR(e,t,n){return e==="position"||e==="preserve-aspect"&&!RL(o1(t),o1(n),.2)}function RB(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const TB=SR({attachResizeListener:(e,t)=>yo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kp={current:void 0},TR=SR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!kp.current){const e=new TB({});e.mount(window),e.setOptions({layoutScroll:!0}),kp.current=e}return kp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),_B={pan:{Feature:WL},drag:{Feature:VL,ProjectionNode:TR,MeasureLayout:xR}};function p1(e,t){const n=t?"pointerenter":"pointerleave",r=t?"onHoverStart":"onHoverEnd",o=(i,a)=>{if(i.pointerType==="touch"||uR())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t);const l=s[r];l&&We.postRender(()=>l(i,a))};return Eo(e.current,n,o,{passive:!e.getProps()[r]})}class IB extends Pi{mount(){this.unmount=Co(p1(this.node,!0),p1(this.node,!1))}unmount(){}}class NB extends Pi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Co(yo(this.node.current,"focus",()=>this.onFocus()),yo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _R=(e,t)=>t?e===t?!0:_R(e,t.parentElement):!1;function Cp(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,rh(n))}class PB extends Pi{constructor(){super(...arguments),this.removeStartListeners=dn,this.removeEndListeners=dn,this.removeAccessibleListeners=dn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Eo(window,"pointerup",(s,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:d}=this.node.getProps(),f=!d&&!_R(this.node.current,s.target)?c:u;f&&We.update(()=>f(s,l))},{passive:!(r.onTap||r.onPointerUp)}),a=Eo(window,"pointercancel",(s,l)=>this.cancelPress(s,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Co(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=s=>{s.key!=="Enter"||!this.checkPressEnd()||Cp("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&We.postRender(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=yo(this.node.current,"keyup",a),Cp("down",(s,l)=>{this.startPress(s,l)})},n=yo(this.node.current,"keydown",t),r=()=>{this.isPressing&&Cp("cancel",(i,a)=>this.cancelPress(i,a))},o=yo(this.node.current,"blur",r);this.removeAccessibleListeners=Co(n,o)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&We.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!uR()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&We.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Eo(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=yo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Co(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ig=new WeakMap,Ep=new WeakMap,AB=e=>{const t=Ig.get(e.target);t&&t(e)},DB=e=>{e.forEach(AB)};function MB({root:e,...t}){const n=e||document;Ep.has(n)||Ep.set(n,{});const r=Ep.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(DB,{root:e,...t})),r[o]}function FB(e,t,n){const r=MB(t);return Ig.set(e,n),r.observe(e),()=>{Ig.delete(e),r.unobserve(e)}}const OB={some:0,all:1};class LB extends Pi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:OB[o]},s=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return FB(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(BB(t,n))&&this.startObserver()}unmount(){}}function BB({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const jB={inView:{Feature:LB},tap:{Feature:PB},focus:{Feature:NB},hover:{Feature:IB}},zB={layout:{ProjectionNode:TR,MeasureLayout:xR}},IR=C.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),oh=C.createContext({}),K0=typeof window<"u",VB=K0?C.useLayoutEffect:C.useEffect,NR=C.createContext({strict:!1});function WB(e,t,n,r,o){var i,a;const{visualElement:s}=C.useContext(oh),l=C.useContext(NR),u=C.useContext(H0),c=C.useContext(IR).reducedMotion,d=C.useRef();r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,h=C.useContext(yR);f&&!f.projection&&o&&(f.type==="html"||f.type==="svg")&&$B(d.current,n,o,h);const p=C.useRef(!1);C.useInsertionEffect(()=>{f&&p.current&&f.update(n,u)});const m=n[eR],y=C.useRef(!!m&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,m))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,m)));return VB(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),G0.render(f.render),y.current&&f.animationState&&f.animationState.animateChanges())}),C.useEffect(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,m)}),y.current=!1))}),f}function $B(e,t,n,r){const{layoutId:o,layout:i,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:PR(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!a||s&&Za(s),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function PR(e){if(e)return e.options.allowProjection!==!1?e.projection:PR(e.parent)}function UB(e,t,n){return C.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Za(n)&&(n.current=r))},[t])}function ih(e){return eh(e.animate)||S0.some(t=>du(e[t]))}function AR(e){return!!(ih(e)||e.variants)}function HB(e,t){if(ih(e)){const{initial:n,animate:r}=e;return{initial:n===!1||du(n)?n:void 0,animate:du(r)?r:void 0}}return e.inherit!==!1?t:{}}function GB(e){const{initial:t,animate:n}=HB(e,C.useContext(oh));return C.useMemo(()=>({initial:t,animate:n}),[m1(t),m1(n)])}function m1(e){return Array.isArray(e)?e.join(" "):e}const g1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fs={};for(const e in g1)Fs[e]={isEnabled:t=>g1[e].some(n=>!!t[n])};function KB(e){for(const t in e)Fs[t]={...Fs[t],...e[t]}}const qB=Symbol.for("motionComponentSymbol");function XB({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:o}){e&&KB(e);function i(s,l){let u;const c={...C.useContext(IR),...s,layoutId:YB(s)},{isStatic:d}=c,f=GB(s),h=r(s,d);if(!d&&K0){QB();const p=JB(c);u=p.MeasureLayout,f.visualElement=WB(o,h,c,t,p.ProjectionNode)}return w.jsxs(oh.Provider,{value:f,children:[u&&f.visualElement?w.jsx(u,{visualElement:f.visualElement,...c}):null,n(o,s,UB(h,f.visualElement,l),h,d,f.visualElement)]})}const a=C.forwardRef(i);return a[qB]=o,a}function YB({layoutId:e}){const t=C.useContext(vR).id;return t&&e!==void 0?t+"-"+e:e}function QB(e,t){C.useContext(NR).strict}function JB(e){const{drag:t,layout:n}=Fs;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ZB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function q0(e){return typeof e!="string"||e.includes("-")?!1:!!(ZB.indexOf(e)>-1||/[A-Z]/u.test(e))}function DR(e,{style:t,vars:n},r,o){Object.assign(e.style,t,o&&o.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const MR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function FR(e,t,n,r){DR(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(MR.has(o)?o:U0(o),t.attrs[o])}function OR(e,{layout:t,layoutId:n}){return Ca.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Gd[e]||e==="opacity")}function X0(e,t,n){var r;const{style:o}=e,i={};for(const a in o)(un(o[a])||t.style&&un(t.style[a])||OR(a,e)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[a]=o[a]);return i}function LR(e,t,n){const r=X0(e,t,n);for(const o in e)if(un(e[o])||un(t[o])){const i=Bu.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[i]=e[o]}return r}function ej(e){const t=C.useRef(null);return t.current===null&&(t.current=e()),t.current}function tj({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,o,i){const a={latestValues:nj(r,o,i,e),renderState:t()};return n&&(a.mount=s=>n(r,s,a)),a}const BR=e=>(t,n)=>{const r=C.useContext(oh),o=C.useContext(H0),i=()=>tj(e,t,r,o);return n?i():ej(i)};function nj(e,t,n,r){const o={},i=r(e,{});for(const f in i)o[f]=id(i[f]);let{initial:a,animate:s}=e;const l=ih(e),u=AR(e);t&&u&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),s===void 0&&(s=t.animate));let c=n?n.initial===!1:!1;c=c||a===!1;const d=c?s:a;if(d&&typeof d!="boolean"&&!eh(d)){const f=Array.isArray(d)?d:[d];for(let h=0;h<f.length;h++){const p=C0(e,f[h]);if(p){const{transitionEnd:m,transition:y,...g}=p;for(const v in g){let x=g[v];if(Array.isArray(x)){const b=c?x.length-1:0;x=x[b]}x!==null&&(o[v]=x)}for(const v in m)o[v]=m[v]}}}return o}const Y0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),jR=()=>({...Y0(),attrs:{}}),zR=(e,t)=>t&&typeof e=="number"?t.transform(e):e,rj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oj=Bu.length;function ij(e,t,n){let r="",o=!0;for(let i=0;i<oj;i++){const a=Bu[i],s=e[a];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(a.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||n){const u=zR(s,D0[a]);if(!l){o=!1;const c=rj[a]||a;r+=`${c}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function Q0(e,t,n){const{style:r,vars:o,transformOrigin:i}=e;let a=!1,s=!1;for(const l in t){const u=t[l];if(Ca.has(l)){a=!0;continue}else if(IS(l)){o[l]=u;continue}else{const c=zR(u,D0[l]);l.startsWith("origin")?(s=!0,i[l]=c):r[l]=c}}if(t.transform||(a||n?r.transform=ij(t,e.transform,n):r.transform&&(r.transform="none")),s){const{originX:l="50%",originY:u="50%",originZ:c=0}=i;r.transformOrigin=`${l} ${u} ${c}`}}function v1(e,t,n){return typeof e=="string"?e:xe.transform(t+n*e)}function aj(e,t,n){const r=v1(t,e.x,e.width),o=v1(n,e.y,e.height);return`${r} ${o}`}const sj={offset:"stroke-dashoffset",array:"stroke-dasharray"},lj={offset:"strokeDashoffset",array:"strokeDasharray"};function uj(e,t,n=1,r=0,o=!0){e.pathLength=1;const i=o?sj:lj;e[i.offset]=xe.transform(-r);const a=xe.transform(t),s=xe.transform(n);e[i.array]=`${a} ${s}`}function J0(e,{attrX:t,attrY:n,attrScale:r,originX:o,originY:i,pathLength:a,pathSpacing:s=1,pathOffset:l=0,...u},c,d){if(Q0(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h,dimensions:p}=e;f.transform&&(p&&(h.transform=f.transform),delete f.transform),p&&(o!==void 0||i!==void 0||h.transform)&&(h.transformOrigin=aj(p,o!==void 0?o:.5,i!==void 0?i:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),a!==void 0&&uj(f,a,s,l,!1)}const Z0=e=>typeof e=="string"&&e.toLowerCase()==="svg",cj={useVisualState:BR({scrapeMotionValuesFromProps:LR,createRenderState:jR,onMount:(e,t,{renderState:n,latestValues:r})=>{We.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),We.render(()=>{J0(n,r,Z0(t.tagName),e.transformTemplate),FR(t,n)})}})},dj={useVisualState:BR({scrapeMotionValuesFromProps:X0,createRenderState:Y0})};function VR(e,t,n){for(const r in t)!un(t[r])&&!OR(r,n)&&(e[r]=t[r])}function fj({transformTemplate:e},t){return C.useMemo(()=>{const n=Y0();return Q0(n,t,e),Object.assign({},n.vars,n.style)},[t])}function hj(e,t){const n=e.style||{},r={};return VR(r,n,e),Object.assign(r,fj(e,t)),r}function pj(e,t){const n={},r=hj(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const mj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Kd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||mj.has(e)}let WR=e=>!Kd(e);function gj(e){e&&(WR=t=>t.startsWith("on")?!Kd(t):e(t))}try{gj(require("@emotion/is-prop-valid").default)}catch{}function vj(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(WR(o)||n===!0&&Kd(o)||!t&&!Kd(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}function yj(e,t,n,r){const o=C.useMemo(()=>{const i=jR();return J0(i,t,Z0(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};VR(i,e.style,e),o.style={...i,...o.style}}return o}function xj(e=!1){return(n,r,o,{latestValues:i},a)=>{const l=(q0(n)?yj:pj)(r,i,a,n),u=vj(r,typeof n=="string",e),c=n!==C.Fragment?{...u,...l,ref:o}:{},{children:d}=r,f=C.useMemo(()=>un(d)?d.get():d,[d]);return C.createElement(n,{...c,children:f})}}function bj(e,t){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const a={...q0(r)?cj:dj,preloadedFeatures:e,useRender:xj(o),createVisualElement:t,Component:r};return XB(a)}}const Ng={current:null},$R={current:!1};function wj(){if($R.current=!0,!!K0)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ng.current=e.matches;e.addListener(t),t()}else Ng.current=!1}function kj(e,t,n){for(const r in t){const o=t[r],i=n[r];if(un(o))e.addValue(r,o);else if(un(i))e.addValue(r,pu(o,{owner:e}));else if(i!==o)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(o):a.hasAnimated||a.set(o)}else{const a=e.getStaticValue(r);e.addValue(r,pu(a!==void 0?a:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const y1=new WeakMap,Cj=[...AS,tn,Ci],Ej=e=>Cj.find(PS(e)),x1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Sj{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:i,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=N0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Kr.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,We.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=s,this.blockInitialAnimation=!!i,this.isControllingVariants=ih(n),this.isVariantNode=AR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const h=d[f];l[f]!==void 0&&un(h)&&h.set(l[f],!1)}}mount(t){this.current=t,y1.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),$R.current||wj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ng.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){y1.delete(this.current),this.projection&&this.projection.unmount(),ki(this.notifyUpdate),ki(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ca.has(t),o=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&We.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Fs){const n=Fs[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<x1.length;r++){const o=x1[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const i="on"+o,a=t[i];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=kj(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=pu(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let o=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return o!=null&&(typeof o=="string"&&(TS(o)||RS(o))?o=parseFloat(o):!Ej(o)&&Ci.test(n)&&(o=zS(t,n)),this.setBaseTarget(t,un(o)?o.get():o)),un(o)?o.get():o}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let o;if(typeof r=="string"||typeof r=="object"){const a=C0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(o=a[t])}if(r&&o!==void 0)return o;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!un(i)?i:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new $0),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class UR extends Sj{constructor(){super(...arguments),this.KeyframeResolver=VS}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}}function Rj(e){return window.getComputedStyle(e)}class Tj extends UR{constructor(){super(...arguments),this.type="html",this.renderInstance=DR}readValueFromInstance(t,n){if(Ca.has(n)){const r=M0(n);return r&&r.default||0}else{const r=Rj(t),o=(IS(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return mR(t,n)}build(t,n,r){Q0(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return X0(t,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;un(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class _j extends UR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ca.has(n)){const r=M0(n);return r&&r.default||0}return n=MR.has(n)?n:U0(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return LR(t,n,r)}build(t,n,r){J0(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,o){FR(t,n,r,o)}mount(t){this.isSVGTag=Z0(t.tagName),super.mount(t)}}const Ij=(e,t)=>q0(e)?new _j(t):new Tj(t,{allowProjection:e!==C.Fragment}),Nj=bj({...vL,...jB,..._B,...zB},Ij),Sc=mF(Nj),Pj={width:"4rem",height:"4rem",display:"flex",justifyContent:"space-around"},Sp={display:"block",width:"1rem",height:"1rem",backgroundColor:"#1976D2",borderRadius:"0.5rem"},Aj={start:{transition:{staggerChildren:.15}},end:{transition:{staggerChildren:.15}}},Rp={start:{y:"0%"},end:{y:"50%"}},Tp={duration:1,repeat:1/0,ease:"easeInOut"},Dj=()=>w.jsx("div",{children:w.jsx("div",{className:"fixed w-full min-h-screen z-50 bg-white",children:w.jsx("div",{className:"flex fixed w-full justify-center items-center h-screen",children:w.jsxs(Sc.div,{style:Pj,variants:Aj,initial:"start",animate:"end",children:[w.jsx(Sc.span,{style:Sp,variants:Rp,transition:Tp}),w.jsx(Sc.span,{style:Sp,variants:Rp,transition:Tp}),w.jsx(Sc.span,{style:Sp,variants:Rp,transition:Tp})]})})})}),b1="https://devop-sso.smalabschoolunesa1.sch.id",Mj=e=>e.toString();class Yt{static async getCsrf(){if(this.csrfToken)return this.csrfToken;try{const t=await fetch(`${b1}/view/tokenGetCsrf`,{method:"GET",credentials:"include"});if(!t.ok)throw new Error(`Failed to fetch CSRF token: ${t.status}`);const n=await t.json();return this.csrfToken=n.csrfHash,Ue.set("csrf",n.csrfHash),this.csrfToken}catch(t){throw console.error("Error fetching CSRF token:",t),t}}static async post(t,n,r=null,o=1e4){const i=new AbortController,a=setTimeout(()=>i.abort(),o),s={"Content-Type":"application/x-www-form-urlencoded",...r&&{Authorization:`Basic ${r}`}};try{const l=await fetch(`${b1}${t}`,{method:"POST",headers:s,credentials:"include",body:Mj(n),signal:i.signal});if(clearTimeout(a),!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.text()}catch(l){throw console.error("Error or timeout in POST request:",l),l}}static async authPost(t,n,r){return this.post(`/api/client/auth/${t}`,r,n)}static async usersPost(t,n,r){return this.post(`/api/client/users/${t}`,r,n)}static async presensiPost(t,n,r){return this.post(`/api/client/presensi/${t}`,r,n)}static async notificationsPost(t,n,r){return this.post(`/api/client/notifications/${t}`,r,n)}static async postInput(t,n){return this.post(`/input/${t}`,n)}}pt(Yt,"csrfToken",null);const HR=e=>{const t=CryptoJS.enc.Hex.parse(CryptoJS.SHA1(btoa(e)).toString()),n=CryptoJS.enc.Hex.parse(CryptoJS.SHA1(e).toString());return CryptoJS.AES.encrypt(e,t,{iv:n}).toString().replace(/[^\w\s]/gi,"")},Fj=(e,t)=>{const n=btoa(e+":"+t),r=CryptoJS.SHA1(n).toString();return[n,r]},Oj=(e,t)=>{const n=new FileReader;n.onload=function(r){t(r.target.result)},n.readAsDataURL(e)},Lj=["devop-sso","csrf_token"],Po=e=>[...e,...Lj],Yn=(e,t)=>e.map((n,r)=>`${encodeURIComponent(n)}=${encodeURIComponent(t[r])}`).join("&");function So(e){var t=e.split(".")[1],n=t.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(n).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""));return e==localStorage.getItem("login_token")?w1(JSON.parse(r),"fromToken"):w1(JSON.parse(r),"fromData")}function w1(e,t){let n,r;if(t=="fromToken")n="devop-sso",r="devop-sso";else if(t=="fromData"){var o=So(localStorage.getItem("login_token"));n=o.apikey,r=o.session_hash}const i=CryptoJS.SHA256(n).toString().substring(0,32),a=CryptoJS.SHA256(r).toString().substring(0,16),s=CryptoJS.enc.Utf8.parse(i),l=CryptoJS.enc.Utf8.parse(a);var c=CryptoJS.AES.decrypt(atob(e.data),s,{iv:l,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8);return JSON.parse(c)}const ft=(e,t,n,r)=>{hr.close(),hr.fire({titleText:t,html:n,icon:e,allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}).then(()=>{r()})},Ao=(e,t)=>{hr.fire({titleText:e,html:t,icon:"info",allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1,didOpen:()=>{hr.showLoading()}})},k1=e=>{const t=new Date(e),n=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],r=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],o=n[t.getDay()],i=t.getDate(),a=r[t.getMonth()],s=t.getFullYear();return`${o}, ${i} ${a} ${s}`},GR=(e,t,n)=>{const r=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];C.useEffect(()=>{const o=setInterval(()=>{const i=new Date,a=i.toLocaleTimeString("en-US",{hour12:!1}).split(".").join(":"),s=i.toLocaleDateString("en-GB"),l=r[i.getDay()];e.current&&t.current&&n.current&&(e.current.innerText=`${a} WIB`,t.current.innerText=`${s}`,n.current.innerText=`${l},`)},1e3);return()=>clearInterval(o)},[e,t,n])};function KR(){localStorage.clear();var e=Ue.get();Object.keys(e).forEach(function(t){var n=Ue.get(t);n||(Ue.remove(t),console.log('Cookie "'+t+'" sudah dihapus karena sudah kedaluwarsa.'))})}const pr=(e,t)=>{KR();let n=JSON.parse(e.responseText);e.status==403||e.status==502?n.data?ad(n.data.info,n.data.title,n.data.message,()=>window.location.replace(t)):ad("error","Password atau Username Salah","Periksa kembali password dan username.",()=>window.location.replace(t)):ad("error","Input Error","Something went wrong. Please try again later.",()=>window.location.replace(t))},Bj=e=>{KR(),ad("error",e.title,e.message,()=>{window.location.replace("/login")})};function ad(e,t,n,r){hr.fire({titleText:t,html:n,icon:e,allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}).then(()=>{r()})}var qR={exports:{}},jj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zj=jj,Vj=zj;function XR(){}function YR(){}YR.resetWarningCache=XR;var Wj=function(){function e(r,o,i,a,s,l){if(l!==Vj){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:YR,resetWarningCache:XR};return n.PropTypes=n,n};qR.exports=Wj();var $j=qR.exports;const rs=Nf($j),QR=({role:e,setRole:t})=>{const n=[{id:"siswa",value:"4",icon:"/Icons/student.svg",label:"Siswa"},{id:"guru",value:"5",icon:"/Icons/teacher.svg",label:"Guru"},{id:"karyawan",value:"6",icon:"/Icons/employee.svg",label:"Karyawan"}];return w.jsx("div",{className:"w-full flex justify-between gap-8",children:n.map(r=>w.jsxs("label",{className:"flex flex-col items-center",children:[w.jsx("input",{type:"radio",name:"sebagai",onChange:()=>t(r.value),checked:e===r.value,id:r.id,value:r.value,className:"hidden peer"}),w.jsx("img",{src:r.icon,alt:`${r.label}-icon`,className:"size-[80px] bg-white rounded-[20px] peer-checked:ring-4 peer-checked:ring-blue-400"}),w.jsx("label",{htmlFor:r.id,className:"text-base",children:r.label})]},r.id))})};QR.propTypes={role:rs.string.isRequired,setRole:rs.func.isRequired};const Ol=C.forwardRef(({id:e,name:t,placeholder:n,type:r="text"},o)=>w.jsx("input",{id:e,name:t,ref:o,type:r,className:"bg-primary-md border-white border-[1px] placeholder-white text-white text-xs rounded-lg focus:bg-white focus:border-0 focus:text-black block w-full py-3 px-4",placeholder:n,required:!0}));Ol.displayName="InputField";Ol.propTypes={id:rs.string.isRequired,name:rs.string.isRequired,placeholder:rs.string.isRequired,type:rs.string};function Uj(){const[e,t]=C.useState(""),[n,r]=C.useState(!1),o=C.useRef(),i=C.useRef(),a=C.useRef(),s=qf(),l=()=>{const c=a.current.value,d=i.current.value;if(!o.current.value||!d||!c)return ft("error","Input Error","Semua field harus diisi."),!1;const h=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,p=/^[0-9]{10,13}$/;return h.test(c)?p.test(d)?e?!0:(ft("error","Role Error","Harap pilih salah satu role."),!1):(ft("error","Nomor Telepon Invalid","Harap masukkan nomor telepon yang valid (10-13 digit)."),!1):(ft("error","Email Invalid","Harap masukkan email yang valid."),!1)},u=async c=>{if(c.preventDefault(),!l())return;r(!0),Ao("Loading","Registering...");const d=["username","phone","namaLengkap","sebagai","csrf_token"],f=[a.current.value,i.current.value,o.current.value,e,Ue.get("csrf")];try{const h=await Yt.postInput("register",Yn(d,f)),p=JSON.parse(h);ft(p.data.info,p.data.title,p.data.message,()=>s(p.data.location==="register"?"/":`/${p.data.location}`))}catch(h){pr(h,"/")}finally{r(!1)}};return w.jsxs("div",{className:"bg-primary-low font-primary text-white flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] relative",children:[w.jsx("h1",{className:"text-center mt-16 text-4xl font-bold text-white",children:"Register"}),w.jsx("small",{className:"text-center text-xs font-medium text-white mt-1",children:"Selamat datang!"}),w.jsxs("div",{className:"w-full h-fit bg-primary-md rounded-t-[2rem] absolute bottom-0 left-0 p-4 pb-8",children:[w.jsxs("form",{onSubmit:u,className:"w-full p-6 flex flex-col gap-2",children:[w.jsx(QR,{role:e,setRole:t}),w.jsxs("div",{className:"space-y-4 md:space-y-6 flex flex-col gap-2",children:[w.jsx(Ol,{id:"name",name:"namaLengkap",placeholder:"Nama Lengkap",ref:o}),w.jsx(Ol,{id:"number",name:"phone",placeholder:"No. Telepon",ref:i}),w.jsx(Ol,{id:"username",type:"email",name:"username",placeholder:"Email",ref:a}),w.jsx("button",{type:"submit",disabled:n,className:`btn border-none w-full text-primary-md font-semibold bg-white hover:bg-primary-300 focus:ring-4 focus:outline-none focus:ring-primary-300 rounded-xl text-sm px-4 py-2 text-center ${n?"opacity-50 cursor-not-allowed":""}`,children:n?w.jsxs("div",{className:"flex justify-center items-center gap-2",children:[w.jsx("p",{className:"text-white",children:"Loading"}),w.jsx("span",{className:"loading loading-spinner text-white"})]}):"Create my account"})]}),w.jsx("div",{id:"line",className:"w-full border-t-[0.25px] border-white h-0 relative top-4",children:w.jsx("p",{className:"absolute text-center left-[calc(50%-1.25rem)] top-[-0.85rem] z-10 text-white bg-primary-md w-10",children:"or"})})]}),w.jsxs("p",{className:"text-center text-sm font-light text-white mt-5",children:["Sudah memiliki akun?"," ",w.jsx(Ve,{to:"/login",className:"font-medium underline text-white hover:underline",children:"Login"})]})]})]})}function Hj({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const gr=C.forwardRef(Hj);function Gj({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Kj=C.forwardRef(Gj);function qj({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Xj=C.forwardRef(qj);function Yj({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Ll=C.forwardRef(Yj);function Qj({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const Jj=C.forwardRef(Qj);function Zj({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const e6=C.forwardRef(Zj);function t6({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const n6=C.forwardRef(t6);function r6({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const o6=C.forwardRef(r6);function i6({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const a6=C.forwardRef(i6);function s6({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const l6=C.forwardRef(s6);function u6({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const c6=C.forwardRef(u6);function d6({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const f6=C.forwardRef(d6);function h6(){const[e,t]=C.useState(new Array(4).fill("")),[n,r]=C.useState(!1),o=C.useRef([]),i=C.useRef();C.useEffect(()=>{o.current[0]&&o.current[0].focus()},[]);const a=()=>{r(!0);const d=[...new Array(4).fill("digit-input[]"),"csrf_token"],f=[...e,Ue.get("csrf")];Ao("Loading","Processing OTP Data..."),Yt.postInput("verify",Yn(d,f)).then(h=>{h=JSON.parse(h),console.log(h.data.data.token),r(!1),localStorage.setItem("regist_token",h.data.data.token),h.data.info=="error"?ft(h.data.info,h.data.title,h.data.message):ft(h.data.info,h.data.title,h.data.message,()=>window.location.replace("/facereg"))}).catch(h=>{pr(h,"/verify")})},s=(d,f)=>{const h=f.target.value;if(isNaN(h))return;const p=[...e];p[d]=h.substring(h.length-1),t(p),h&&d<3&&o.current[d+1]&&o.current[d+1].focus()},l=d=>{o.current[d].setSelectionRange(1,1);for(let f=0;f<4;f++)if(o.current[f].value===""){o.current[f].focus();break}},u=(d,f)=>{f.key==="Backspace"&&!e[d]&&d>0&&o.current[d-1]&&o.current[d-1].focus()},c=()=>{const d=["email","csrf_token"],f=[localStorage.getItem("email"),Ue.get("csrf")];Ao("Loading","Processing Send OTP Data..."),Yt.postInput("sendOTP",Yn(d,f)).then(h=>{h=JSON.parse(h),ft(h.data.info,h.data.title,h.data.message,()=>window.location.replace("/"+h.data.location))}).catch(h=>{pr(h,"/verify")})};return w.jsxs("div",{className:"bg-primary-low font-primary text-white flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] relative",children:[w.jsx(Ve,{to:"/",children:w.jsx(gr,{className:"size-7 absolute top-8 left-6"})}),w.jsx("img",{src:"/Icons/splash.svg",alt:"labschool-unesa-logo",className:"size-[241px] m-auto mt-24"}),w.jsxs("div",{className:"w-full h-1/2 mt-auto bottom-0 bg-primary-md rounded-t-[2rem] p-6 sm:p-8",children:[w.jsx("h2",{className:"font-bold text-4xl",children:"Email Verification"}),w.jsx("p",{className:"text-xs",children:"Enter the verification code that was sended to your email addreas"}),w.jsxs("form",{ref:i,children:[w.jsx("div",{className:"flex justify-between my-8",children:e.map((d,f)=>w.jsx("input",{name:"digit-input[]",type:"number",ref:h=>o.current[f]=h,value:d,onChange:h=>s(f,h),onClick:()=>l(f),onKeyDown:h=>u(f,h),className:"size-16 bg-white text-black font-semibold text-lg text-center rounded-lg focus:border-black focus:border-3"},f))}),w.jsxs("p",{className:"text-center font-thin text-xs",children:["Didn't receive the verification code?"," ",w.jsx("span",{className:"text-center font-bold",onClick:c,children:"Click Here"})]}),w.jsx("button",{onClick:a,disabled:n,className:"btn border-none w-full text-primary-md font-semibold bg-white hover:bg-primary-300 focus:ring-4 focus:outline-none focus:ring-primary-300 rounded-xl text-sm px-4 py-2 text-center disabled:text-white mt-24",children:n?w.jsxs("div",{className:"flex justify-center items-center gap-2",children:[w.jsx("p",{children:"Loading"}),w.jsx("span",{className:"loading loading-spinner text-white"})]}):"Verifikasi"})]})]})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var JR=function(e,t){return(JR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(e,t)};function Ir(e,t){function n(){this.constructor=e}JR(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function le(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(u){try{l(r.next(u))}catch(c){i(c)}}function s(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){u.done?o(u.value):new n(function(c){c(u.value)}).then(a,s)}l((r=r.apply(e,[])).next())})}function ue(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(c[0]===6&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(d){c=[6,d],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var p6=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var o=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+o+"."),this.set(t,o)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,o=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return m6(r,a[0],a[1]),a.join("=")}),r);"tfjsflags"in o&&o.tfjsflags.split(",").forEach(function(i){var a=i.split(":"),s=a[0],l=a[1];t.urlFlags[s]=function(u,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+u+".")}(s,l)})}},e}();function m6(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function X(){return ZR}var ZR=null,qd=new Map,Pg=new Map;function eT(e,t){var n=nT(e,t);return qd.get(n)}function g6(e){return Pg.get(e)}function C1(e){for(var t=qd.entries(),n=[];;){var r=t.next(),o=r.done,i=r.value;if(o)break;var a=i[0],s=i[1];a.split("_")[0]===e&&n.push(s)}return n}function tT(e){var t=e.kernelName,n=e.backendName,r=nT(t,n);if(qd.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");qd.set(r,e)}function v6(e){var t=e.kernelName;Pg.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),Pg.set(t,e)}function nT(e,t){return t+"_"+e}function Ag(e,t,n){return Math.max(e,Math.min(t,n))}function rT(e){return e%2==0?e:e+1}function y6(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function D(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Be(e,t,n){n===void 0&&(n=""),D(Bt(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function Qs(e){D(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Os(e,t,n){if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),Array.isArray(e)||qr(e)&&!n)for(var r=0;r<e.length;++r)Os(e[r],t,n);else t.push(e);return t}function de(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Bt(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function yt(e){return e%1==0}function x6(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Dg(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function ms(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function E1(e,t,n){return t===void 0&&(t=function(r){return 0}),new Promise(function(r,o){var i=0,a=function(){if(e())r();else{i++;var s=t(i);n!=null&&i>=n?o():setTimeout(a,s)}};a()})}function b6(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(e[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(n===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function Pt(e,t){var n=t.length;return D((e=e==null?t.map(function(r,o){return o}):[].concat(e)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),D(e.every(function(r){return yt(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?n+r:r})}function Gi(e,t){for(var n=[],r=[],o=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||o?null:Pt(t,e).sort(),a=0,s=0;s<e.length;++s){if(i!=null){if(i[a]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(i[a]==null||i[a]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),i[a]<=s&&a++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function mu(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Xd(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);n=new Array(t)}return n}function w6(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function k6(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function C6(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function qr(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function oT(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function E6(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function ey(e){return typeof e=="string"||e instanceof String}function S6(e){return typeof e=="boolean"}function R6(e){return typeof e=="number"}function Vu(e){return Array.isArray(e)?Vu(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":R6(e)?"float32":ey(e)?"string":S6(e)?"bool":"float32"}function Mg(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Fg(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Xr(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function iT(e,t,n){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Os(e)),n&&w6(e,t),function(i,a){return i instanceof Float32Array&&a==="float32"||i instanceof Int32Array&&a==="int32"||i instanceof Uint8Array&&a==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)Math.round(e[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function S1(e,t){if(e.length===0)return t[0];var n=e.reduce(function(r,o){return r*o});if(n===0)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function r(o,i,a){var s=new Array;if(i.length===1)for(var l=i[0],u=0;u<l;u++)s[u]=a[o+u];else{l=i[0];var c=i.slice(1),d=c.reduce(function(f,h){return f*h});for(u=0;u<l;u++)s[u]=r(o+u*d,c,a)}return s}(0,e,t)}function aT(e,t){for(var n=Wu(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Wu(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Or(){return X().platform.now()}function sT(e){e.forEach(function(t){D(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function T6(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",X().platform.encode(e,t)}function Yd(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",X().platform.decode(e,t)}function R1(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function _6(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}var I6=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new N6)}return e.prototype.profileKernel=function(t,n,r){var o,i=this,a=this.backendTimer.time(function(){o=r()});return o.forEach(function(s){s.data().then(function(l){(function(u,c,d){if(c!=="float32")return!1;for(var f=0;f<u.length;f++){var h=u[f];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+d+"'"),!0}})(l,s.dtype,t),a.then(function(u){var c="";u.getExtraProfileInfo!=null&&(c=u.getExtraProfileInfo()),i.logger.logKernelProfile(t,s,l,u.kernelMs,n,c)})})}),o},e}(),N6=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,o,i,a){var s=typeof o=="number"?ms(o+"ms",9):o.error,l=ms(t,25),u=n.rank,c=n.size,d=ms(n.shape.toString(),14),f="";for(var h in i){var p=i[h].shape||n.shape,m=p.length;f+=h+": "+m+"D "+(m>0?p:"")+" "}console.log("%c"+l+"	%c"+s+"	%c"+u+"D "+d+"	%c"+c+"	%c"+f+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),T1=20,fl=3,_p=7;function P6(e,t,n,r){var o=Xr(t),i=function(u,c,d,f){var h=de(c),p=f[f.length-1],m=new Array(p).fill(0),y=c.length,g=d==="complex64"?pl(u):u;if(y>1)for(var v=0;v<h/p;v++)for(var x=v*p,b=0;b<p;b++)m[b]=Math.max(m[b],hl(g[x+b],0,d).length);return m}(e,t,n,o),a=t.length,s=function u(c,d,f,h,p,m){m===void 0&&(m=!0);var y=f==="complex64"?2:1,g=d[0],v=d.length;if(v===0)return f==="complex64"?[hl(pl(c)[0],0,f)]:f==="bool"?[lT(c[0])]:[c[0].toString()];if(v===1){if(g>T1){var x=fl*y,b=Array.from(c.slice(0,x)),k=Array.from(c.slice((g-fl)*y,g*y));return f==="complex64"&&(b=pl(b),k=pl(k)),["["+b.map(function(F,V){return hl(F,p[V],f)}).join(", ")+", ..., "+k.map(function(F,V){return hl(F,p[g-fl+V],f)}).join(", ")+"]"]}return["["+(f==="complex64"?pl(c):Array.from(c)).map(function(F,V){return hl(F,p[V],f)}).join(", ")+"]"]}var E=d.slice(1),T=h.slice(1),R=h[0]*y,_=[];if(g>T1){for(var S=0;S<fl;S++){var A=(N=S*R)+R;_.push.apply(_,u(c.slice(N,A),E,f,T,p,!1))}for(_.push("..."),S=g-fl;S<g;S++)A=(N=S*R)+R,_.push.apply(_,u(c.slice(N,A),E,f,T,p,S===g-1))}else for(S=0;S<g;S++){var N;A=(N=S*R)+R,_.push.apply(_,u(c.slice(N,A),E,f,T,p,S===g-1))}var O=v===2?",":"";for(_[0]="["+_[0]+O,S=1;S<_.length-1;S++)_[S]=" "+_[S]+O;var M=`,
`;for(S=2;S<v;S++)M+=`
`;return _[_.length-1]=" "+_[_.length-1]+"]"+(m?"":M),_}(e,t,n,o,i),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+a),l.push("  shape: ["+t+"]"),l.push("  values:")),l.push(s.map(function(u){return"    "+u}).join(`
`)),l.join(`
`)}function hl(e,t,n){return ms(Array.isArray(e)?parseFloat(e[0].toFixed(_p))+" + "+parseFloat(e[1].toFixed(_p))+"j":ey(e)?"'"+e+"'":n==="bool"?lT(e):parseFloat(e.toFixed(_p)).toString(),t)}function lT(e){return e===0?"false":"true"}function pl(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var gu=function(){function e(t,n,r){var o=this;if(this.dtype=n,this.shape=t.slice(),this.size=de(t),r!=null){var i=r.length;D(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+o.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Xd(n,this.size),this.strides=Xr(t)}return e.prototype.set=function(t){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),D(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var i=this.locToIndex(r);this.values[i]=t},e.prototype.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length===0&&(t=[0]);for(var r=0,o=0,i=t;o<i.length;o++){var a=i[o];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var l=t[t.length-1],u=0;u<t.length-1;++u)l+=this.strides[u]*t[u];return this.values[l]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Br().makeTensor(this.values,this.shape,this.dtype)},e}(),Br=null,H=null,uT=null,rt=function(){function e(t,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=de(t),this.strides=Xr(t),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),D(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,n){return this.throwIfDisposed(),this.reshape([t,n])},e.prototype.as3D=function(t,n,r){return this.throwIfDisposed(),this.reshape([t,n,r])},e.prototype.as4D=function(t,n,r,o){return this.throwIfDisposed(),this.reshape([t,n,r,o])},e.prototype.as5D=function(t,n,r,o,i){return this.throwIfDisposed(),this.reshape([t,n,r,o,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),H.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return le(this,void 0,void 0,function(){var t;return ue(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,H.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return H.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return le(this,void 0,void 0,function(){var t;return ue(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,S1(this.shape,t)]}})})},e.prototype.arraySync=function(){return S1(this.shape,this.dataSync())},e.prototype.data=function(){return le(this,void 0,void 0,function(){var t,n;return ue(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=Br().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(o){return Yd(o)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Br().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return Yd(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return le(this,void 0,void 0,function(){var t;return ue(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Br().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Br().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),H.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),H.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),H.expandDims(this,t)},e.prototype.cumsum=function(t,n,r){return t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1),H.cumsum(this,t,n,r)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),H.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),H.clone(this)},e.prototype.oneHot=function(t,n,r){return this.throwIfDisposed(),H.oneHot(this,t,n,r)},e.prototype.toString=function(t){return t===void 0&&(t=!1),P6(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),H.tile(this,t)},e.prototype.gather=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),H.gather(this,t,n)},e.prototype.matMul=function(t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),H.matMul(this,t,n,r)},e.prototype.dot=function(t){return this.throwIfDisposed(),H.dot(this,t)},e.prototype.norm=function(t,n,r){return t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),H.norm(this,t,n,r)},e.prototype.slice=function(t,n){return this.throwIfDisposed(),H.slice(this,t,n)},e.prototype.reverse=function(t){return this.throwIfDisposed(),H.reverse(this,t)},e.prototype.concat=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),H.concat([this].concat(t),n)},e.prototype.split=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),H.split(this,t,n)},e.prototype.stack=function(t,n){return n===void 0&&(n=0),H.stack([this,t],n)},e.prototype.unstack=function(t){return t===void 0&&(t=0),H.unstack(this,t)},e.prototype.pad=function(t,n){return n===void 0&&(n=0),H.pad(this,t,n)},e.prototype.batchNormalization=function(t,n,r,o,i){return r===void 0&&(r=.001),uT("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,n,i,o,r)},e.prototype.batchNorm=function(t,n,r,o,i){return i===void 0&&(i=.001),this.throwIfDisposed(),H.batchNorm(this,t,n,r,o,i)},e.prototype.all=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),H.all(this,t,n)},e.prototype.any=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),H.any(this,t,n)},e.prototype.logSumExp=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),H.logSumExp(this,t,n)},e.prototype.sum=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),H.sum(this,t,n)},e.prototype.prod=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),H.prod(this,t,n)},e.prototype.mean=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),H.mean(this,t,n)},e.prototype.min=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),H.min(this,t,n)},e.prototype.max=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),H.max(this,t,n)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),H.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),H.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),H.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),H.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),H.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),H.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),H.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),H.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),H.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),H.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),H.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),H.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),H.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),H.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),H.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),H.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),H.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),H.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),H.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),H.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),H.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),H.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),H.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),H.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),H.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),H.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),H.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),H.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),H.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),H.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),H.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),H.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),H.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),H.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),H.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),H.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),H.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),H.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),H.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),H.logicalXor(this,t)},e.prototype.where=function(t,n){return this.throwIfDisposed(),H.where(t,this,n)},e.prototype.neg=function(){return this.throwIfDisposed(),H.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),H.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),H.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),H.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),H.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),H.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),H.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),H.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),H.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),H.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),H.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),H.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),H.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),H.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),H.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),H.abs(this)},e.prototype.clipByValue=function(t,n){return this.throwIfDisposed(),H.clipByValue(this,t,n)},e.prototype.relu=function(){return this.throwIfDisposed(),H.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),H.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),H.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),H.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),H.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),H.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),H.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),H.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),H.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),H.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),H.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),H.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),H.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),H.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),H.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),H.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),H.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),H.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),H.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),H.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),H.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),H.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),H.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),H.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),H.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),H.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),H.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),H.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),H.image.resizeBilinear(this,t,n)},e.prototype.resizeNearestNeighbor=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),H.image.resizeNearestNeighbor(this,t,n)},e.prototype.conv1d=function(t,n,r,o,i,a){return o===void 0&&(o="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),H.conv1d(this,t,n,r,o,i,a)},e.prototype.conv2d=function(t,n,r,o,i,a){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),H.conv2d(this,t,n,r,o,i,a)},e.prototype.conv2dTranspose=function(t,n,r,o,i){return this.throwIfDisposed(),H.conv2dTranspose(this,t,n,r,o,i)},e.prototype.depthwiseConv2D=function(t,n,r,o,i,a){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),H.depthwiseConv2d(this,t,n,r,o,i,a)},e.prototype.separableConv2d=function(t,n,r,o,i,a){return i===void 0&&(i=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),H.separableConv2d(this,t,n,r,o,i,a)},e.prototype.avgPool=function(t,n,r,o){return this.throwIfDisposed(),H.avgPool(this,t,n,r,o)},e.prototype.maxPool=function(t,n,r,o){return this.throwIfDisposed(),H.maxPool(this,t,n,r,o)},e.prototype.localResponseNormalization=function(t,n,r,o){return t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),H.localResponseNormalization(this,t,n,r,o)},e.prototype.pool=function(t,n,r,o,i){return this.throwIfDisposed(),H.pool(this,t,n,r,o,i)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),Br().makeVariable(this,t,n,r)},e.prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),H.unsortedSegmentSum(this,t,n)},e.prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),H.batchToSpaceND(this,t,n)},e.prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),H.spaceToBatchND(this,t,n)},e.prototype.topk=function(t,n){return t===void 0&&(t=1),n===void 0&&(n=!0),this.throwIfDisposed(),H.topk(this,t,n)},e.prototype.stridedSlice=function(t,n,r,o,i,a,s,l){return o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=0),this.throwIfDisposed(),H.stridedSlice(this,t,n,r,o,i,a,s,l)},e.prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),H.depthToSpace(this,t,n)},e.prototype.fft=function(){return this.throwIfDisposed(),H.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),H.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),H.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),H.spectral.irfft(this)},e}();Object.defineProperty(rt,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var _1,Og,Lg,Bg,jg,Ls=function(e){function t(n,r,o,i){var a=e.call(this,n.shape,n.dtype,n.dataId,i)||this;return a.trainable=r,a.name=o,a}return Ir(t,e),t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Bt(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Br().disposeTensor(this),this.dataId=n.dataId,Br().incRef(this,null)},t.prototype.dispose=function(){Br().disposeVariable(this),this.isDisposedInternal=!0},t}(rt);Object.defineProperty(Ls,Symbol.hasInstance,{value:function(e){return e instanceof rt&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(_1||(_1={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Og||(Og={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Lg||(Lg={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Bg||(Bg={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(jg||(jg={}));var A6={float32:Bg,int32:Og,bool:Lg,complex64:jg};function Ht(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return A6[e][t]}function Ip(e){return Ht(e,"int32")}function lt(e,t){if(e.dtype===t.dtype)return[e,t];var n=Ht(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function D6(e,t){D(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function cT(e){var t=[];return function n(r,o,i){if(r!=null){if(r instanceof rt)return void o.push(r);if(a=r,!(!Array.isArray(a)&&typeof a!="object")){var a,s=r;for(var l in s){var u=s[l];i.has(u)||(i.add(u),n(u,o,i))}}}}(e,t,new Set),t}var Np,I1=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),M6=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new I1}return e.prototype.ready=function(){return le(this,void 0,void 0,function(){var t,n,r;return ue(this,function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,o.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(r)]:[3,4];case 3:return o.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return le(this,void 0,void 0,function(){var n,r,o;return ue(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return o=i.sent(),[3,3];case 2:o=r,i.label=3;case 3:if(!o)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new I6(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;C1(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this;C1(t).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var o=r.factory();if(Promise.resolve(o)===o){var i=++this.pendingBackendInitId,a=o.then(function(s){return!(i<n.pendingBackendInitId)&&(n.registry[t]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(i<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[t]=o,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],o=this.initializeBackend(r),i=o.success,a=o.asyncInit;if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),o=r.backend,i=this.readSync(n);o.disposeData(n),r.backend=t,t.move(n,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r,o=this,i=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return o.startScope(i)},function(){return o.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(t,n,r){t();try{var o=r();return n(),o}catch(i){throw n(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[n],function(o){return{x:function(){return o.toFloat()}}},[]),n},e.prototype.runKernel=function(t,n,r,o,i){return this.runKernelFunc(null,n,null,t,r,o,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var o=this.backend.numDataIds(),i=0;r.forEach(function(l){i+=l.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=o-n-i-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,n,r,o,i,a,s){var l,u=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var c=[],d=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var f,h=function(v){d&&(c=v.map(function(x){return u.keep(u.clone(x))}))},p=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var y,g=eT(o,this.backendName);return f=g!=null?function(){var v=u.backend.numDataIds();y=g.kernelFunc({inputs:n,attrs:i,backend:u.backend});var x=Array.isArray(y)?y:[y];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(o,v,x);var b=x.map(function(E){var T=E.dataId,R=E.shape,_=E.dtype;return u.makeTensorFromDataId(T,R,_)}),k=b.filter(function(E,T){return s[T]});return h((a||[]).slice().concat(k)),b}:function(){var v=u.backend.numDataIds();y=u.tidy(function(){return t(u.backend,h)});var x=Array.isArray(y)?y:[y];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(o,v,x),x},this.scopedRun(function(){return u.state.kernelDepth++},function(){return u.state.kernelDepth--},function(){l=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(o,n,function(){return f()}):f()}),d&&this.addTapeNode(o,n,l,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(v){return n[v].shape}),outputShapes:l.map(function(v){return v.shape})}),Array.isArray(y)?l:l[0]},e.prototype.makeTensor=function(t,n,r,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;var i=t;r==="string"&&ey(t[0])&&(i=t.map(function(c){return T6(c)}));var a=o.write(i,n,r),s=new rt(n,r,a,this.nextTensorId());if(this.incRef(s,o),r==="string"){var l=this.state.tensorInfo.get(a),u=E6(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return s},e.prototype.makeTensorFromDataId=function(t,n,r,o){var i=new rt(n,r=r||"float32",t,this.nextTensorId());return this.incRef(i,o),i},e.prototype.makeVariable=function(t,n,r,o){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.asType(o));var i=new Ls(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,n){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var o=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(o=t.size*oT(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof Ls||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(t.dataId);n.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return le(this,void 0,void 0,function(){var n,r;return ue(this,function(o){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,o,i){var a=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},l=g6(t);l!=null&&(o=l.gradFunc),o!=null&&(s.gradient=function(u){return u=u.map(function(c,d){if(c==null){var f=r[d],h=Wu(f.size,f.dtype);return a.makeTensor(h,f.shape,f.dtype)}return c}),o(u.length>1?u:u[0],i)}),this.state.activeTape.push(s)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=cT(t),o=new Set(r.map(function(l){return l.id})),i=0;i<this.state.activeScope.track.length;i++){var a=this.state.activeScope.track[i];a.kept||o.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(l){l.kept||l.scopeId!==s.id||n.track(l)})},e.prototype.gradients=function(t,n,r,o){var i=this;if(o===void 0&&(o=!1),D(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});D(a instanceof rt,function(){return"The result y returned by f() must be a tensor."});var s=function(l,u,c){for(var d={},f={},h=0;h<u.length;h++)d[u[h].id]=!0;for(h=0;h<l.length;h++){var p=(E=l[h]).inputs;for(var m in p){for(var y=p[m],g=!1,v=0;v<u.length;v++)if(d[y.id]){E.outputs.forEach(function(S){return d[S.id]=!0}),g=!0,f[E.id]=!0;break}if(g)break}}var x={};x[c.id]=!0;var b={};for(h=l.length-1;h>=0;h--)for(p=(E=l[h]).inputs,v=0;v<E.outputs.length;v++)if(x[E.outputs[v].id]){for(var m in p)x[p[m].id]=!0,b[E.id]=!0;break}var k=[];for(h=0;h<l.length;h++){var E;if(f[(E=l[h]).id]&&b[E.id]){var T={};for(var m in E.inputs){var R=E.inputs[m];d[R.id]&&(T[m]=R)}var _=Object.assign({},E);_.inputs=T,_.outputs=E.outputs,k.push(_)}}return k}(this.state.activeTape,n,a);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var l,u,c={};c[a.id]=r??(l=a.shape,u=aT(de(l),"float32"),W.makeTensor(u,l,"float32")),function(f,h,p){for(var m=function(g){var v=h[g],x=[];if(v.outputs.forEach(function(T){var R=f[T.id];R!=null?x.push(R):x.push(null)}),v.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+v.kernelName+".");var b=v.gradient(x),k=function(T){if(!(T in b))throw new Error("Cannot backprop through input "+T+". Available gradients found: "+Object.keys(b)+".");var R=p(function(){return b[T]()});if(R.dtype!=="float32")throw new Error("Error in gradient for op "+v.kernelName+". The gradient of input "+T+" must have 'float32' dtype, but has '"+R.dtype+"'");var _=v.inputs[T];if(!Bt(R.shape,_.shape))throw new Error("Error in gradient for op "+v.kernelName+". The gradient of input '"+T+"' has shape '"+R.shape+"', which does not match the shape of the input '"+_.shape+"'");if(f[_.id]==null)f[_.id]=R;else{var S=f[_.id];f[_.id]=S.add(R),S.dispose()}};for(var E in v.inputs)k(E)},y=h.length-1;y>=0;y--)m(y)}(c,s,function(f){return i.tidy(f)});var d=n.map(function(f){return c[f.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(f){for(var h=0,p=f.saved;h<p.length;h++)p[h].dispose()}),i.state.activeTape=null),{value:a,grads:d}})},e.prototype.customGrad=function(t){var n=this;return D(Mg(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];D(o.every(function(s){return s instanceof rt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return o.forEach(function(s,l){a[l]=s}),n.runKernelFunc(function(s,l){return D((r=t.apply(void 0,o.concat([l]))).value instanceof rt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),D(Mg(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,l){var u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];D(c.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),D(c.every(function(f){return f instanceof rt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var d={};return c.forEach(function(f,h){d[h]=function(){return f}}),d})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return le(this,void 0,void 0,function(){var n,r;return ue(this,function(o){switch(o.label){case 0:return n=Or(),[4,this.backend.time(t)];case 1:return(r=o.sent()).wallMs=Or()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new I1,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),W=function(){var e=function(){if(Np==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}Np=n}return Np}();if(e._tfengine==null){var t=new p6(e);e._tfengine=new M6(t)}return function(n){ZR=n}(e._tfengine.ENV),Br=function(){return e._tfengine},e._tfengine}();function dT(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var lo=X();lo.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),lo.registerFlag("IS_BROWSER",function(){return dT()}),lo.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),lo.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),lo.registerFlag("PROD",function(){return!1}),lo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return lo.getBool("DEBUG")}),lo.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),lo.registerFlag("IS_TEST",function(){return!1});var vu,Wn,zn,Wi={},Pp={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function F6(e,t){Wi[e]=t}function ro(e){e in Wi||(Wi[e]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(o){if(typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(o){o.preventDefault(),delete Wi[n]},!1),n===1?r.getContext("webgl",Pp)||r.getContext("experimental-webgl",Pp):r.getContext("webgl2",Pp)}(e));var t=Wi[e];return t.isContextLost()?(delete Wi[e],ro(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Wi[e])}function ah(e,t){return[t,e]}function Bl(e){var t=de(e);return Dg(Math.ceil(t/4))}function $u(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ty(e,t){var n,r,o,i,a,s,l,u,c,d=e;return X().getNumber("WEBGL_VERSION")===2?(n=d.R32F,r=d.R16F,o=d.RGBA16F,i=d.RGBA32F,a=d.RED,s=4,l=1,u=d.HALF_FLOAT,c=d.FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,i=d.RGBA,a=e.RGBA,s=4,l=4,u=t!=null?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:u,textureTypeFloat:c}}function fe(e,t,n){var r=n();return t&&function(o){var i=o.getError();if(i!==o.NO_ERROR)throw new Error("WebGL Error: "+j6(o,i))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(vu||(vu={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Wn||(Wn={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(zn||(zn={}));var O6=596e-10,L6=65504;function B6(e){return!!(X().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||O6<Math.abs(e)&&Math.abs(e)<L6)}function j6(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Rc(e,t,n){return Oo(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function z6(e,t,n){var r=Oo(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(fe(e,t,function(){return e.shaderSource(r,n)}),fe(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function V6(e,t,n){var r=Oo(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(fe(e,t,function(){return e.shaderSource(r,n)}),fe(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(o,i){var a=W6.exec(i);if(a==null)return console.log("Couldn't parse line number in error: "+i),void console.log(o);for(var s=+a[1],l=o.split(`
`),u=l.length.toString().length+2,c=l.map(function(y,g){return ms((g+1).toString(),u)+y}),d=0,f=0;f<c.length;f++)d=Math.max(c[f].length,d);var h=c.slice(0,s-1),p=c.slice(s-1,s),m=c.slice(s);console.log(h.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+ms(p[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Ap,Dp,W6=/ERROR: [0-9]+:([0-9]+):/g;function $6(e,t){return Oo(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function U6(e,t,n){if(fe(e,t,function(){return e.linkProgram(n)}),e.getProgramParameter(n,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Mp(e,t,n){if(fe(e,t,function(){return e.validateProgram(n)}),e.getProgramParameter(n,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function H6(e,t,n){var r=Oo(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return fe(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),fe(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function G6(e,t,n){var r=Oo(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return fe(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),fe(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function K6(e,t){return Oo(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function q6(e,t){var n=X().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function X6(e,t){return Oo(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function N1(e,t,n,r,o,i,a,s){var l=e.getAttribLocation(n,r);return l!==-1&&(fe(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,o)}),fe(e,t,function(){return e.vertexAttribPointer(l,i,e.FLOAT,!1,a,s)}),fe(e,t,function(){return e.enableVertexAttribArray(l)}),!0)}function Y6(e,t,n,r){t7(e,r),fe(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function Q6(e,t,n,r){return Oo(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function J6(e,t,n){return e.getUniformLocation(t,n)}function Z6(e,t,n,r,o,i){fe(e,t,function(){return Y6(e,t,r,i)}),fe(e,t,function(){return e.uniform1i(o,i)})}function Fp(e,t,n,r){fe(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),fe(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function P1(e,t,n){fe(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),fe(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Tc(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+e7(e,t))}function e7(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Oo(e,t,n,r){var o=fe(e,t,function(){return n()});if(o==null)throw new Error(r);return o}function t7(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function Qd(e,t){return t===void 0&&(t=2),de(e.slice(0,e.length-t))}function Jd(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Op(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Qd(e)].concat(Jd(e))),t}function n7(e,t){var n;t===void 0&&(t=!1);var r=X().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(e=e.map(function(u,c){return c>=e.length-2?rT(e[c]):e[c]})).length===1&&(e=[2,e[0]])),e.length!==2){var o=Gi(e);e=o.newShape}var i=de(e);if(e.length<=1&&i<=r)return[1,i];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var a=Qd(e),s=2,l=2;return e.length&&(s=(n=Jd(e))[0],l=n[1]),Dg(i=a*(s/2)*(l/2)).map(function(u){return 2*u})}return Dg(i)}function _c(e){return e%2==0}function Ic(e,t){if(Bt(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||_c(n)&&_c(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&_c(e[0])&&_c(t[0])}function r7(e){if(Ap==null){var t=ro(e);Ap=t.getParameter(t.MAX_TEXTURE_SIZE)}return Ap}function o7(e){if(Dp==null){var t=ro(e);Dp=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Dp)}function i7(e){if(e===0)return 0;var t=ro(e);return ur(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:ur(t,"EXT_disjoint_timer_query")?1:0}function ur(e,t){return e.getExtension(t)!=null}function A1(e){try{if(ro(e)!=null)return!0}catch{return!1}return!1}function a7(e){if(e===0)return!1;var t=ro(e);if(e===1){if(!ur(t,"OES_texture_float"))return!1}else if(!ur(t,"EXT_color_buffer_float"))return!1;return zg(t)}function s7(e){if(e===0)return!1;var t=ro(e);if(e!==1){if(ur(t,"EXT_color_buffer_float"))return zg(t);if(ur(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(r,o){var i=ty(r,o),a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var l=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(a),r.deleteFramebuffer(s),l}(t,n)}return!1}return!!ur(t,"OES_texture_float")&&!!ur(t,"WEBGL_color_buffer_float")&&zg(t)}function zg(e){var t=ty(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function l7(e){return e===2&&ro(e).fenceSync!=null}var ke=X();function fT(e){X().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function oe(e,t){return W.tidy(e,t)}function An(e){cT(e).forEach(function(t){return t.dispose()})}function u7(e){return W.keep(e)}function Zd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];X().getBool("IS_TEST")||console.warn.apply(console,e)}function Ai(e,t){var n=e;if(qr(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||qr(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&X().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function o(i,a,s){if(s=s||[],!Array.isArray(i)&&!qr(i))return void D(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});D(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),D(i.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+i.length+" elements"});for(var l=a.slice(1),u=0;u<i.length;++u)o(i[u],l,s.concat(u))}(e,r,[]),r}function D1(e,t,n,r){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function I(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof rt)return D1(r,e.dtype,t,n),e;var o=Vu(e);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),D1(r,o,t,n),e==null||!qr(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var a=Ai(e,o);qr(e)||Array.isArray(e)||(e=[e]);var s=o!=="string"?iT(e,o,X().getBool("DEBUG")):Os(e,[],!0);return W.makeTensor(s,a,o)}function ef(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(o,i){return I(o,t+"["+i+"]",n)},r)}function hT(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function c7(e,t,n){for(var r=e.length+t.length,o=[],i=0,a=0,s=0;s<r;s++)n.indexOf(s)===-1?o.push(e[i++]):o.push(t[a++]);return o}function rn(e,t){for(var n=[],r=e.length,o=0;o<r;o++)t.indexOf(o)===-1&&n.push(e[o]);return[n,t.map(function(i){return e[i]})]}function Mn(e,t){return c7(e,t.map(function(n){return 1}),t)}function jn(e,t,n){D(hT(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function oo(e,t){if(hT(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(function(o){return n.push(o)}),n}function ny(e){return e.map(function(t,n){return[n,t]}).sort(function(t,n){return t[1]-n[1]}).map(function(t){return t[0]})}function io(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function d7(e,t){var n=e[0].length;e.forEach(function(o,i){D(o.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+n+")"})}),D(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(o,i){for(var a=0;a<n;a++)D(a===t||o[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Bs(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function j(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];W.startScope(n);try{var s=r.apply(void 0,i);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),W.endScope(s),s}catch(l){throw W.endScope(null),l}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}ke.registerFlag("HAS_WEBGL",function(){return ke.getNumber("WEBGL_VERSION")>0}),ke.registerFlag("WEBGL_VERSION",function(){return A1(2)?2:A1(1)?1:0}),ke.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return ke.get("WEBGL_VERSION")===2}),ke.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),ke.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),ke.registerFlag("WEBGL_PACK",function(){return ke.getBool("HAS_WEBGL")}),ke.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return ke.getBool("WEBGL_PACK")}),ke.registerFlag("WEBGL_PACK_CLIP",function(){return ke.getBool("WEBGL_PACK")}),ke.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),ke.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return ke.getBool("WEBGL_PACK")}),ke.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return ke.getBool("WEBGL_PACK")}),ke.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return ke.getBool("WEBGL_PACK")}),ke.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return ke.getBool("WEBGL_PACK")}),ke.registerFlag("WEBGL_PACK_REDUCE",function(){return ke.getBool("WEBGL_PACK")}),ke.registerFlag("WEBGL_LAZILY_UNPACK",function(){return ke.getBool("WEBGL_PACK")}),ke.registerFlag("WEBGL_CONV_IM2COL",function(){return ke.getBool("WEBGL_PACK")}),ke.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return r7(ke.getNumber("WEBGL_VERSION"))}),ke.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return o7(ke.getNumber("WEBGL_VERSION"))}),ke.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=ke.getNumber("WEBGL_VERSION");return e===0?0:i7(e)}),ke.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return ke.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),ke.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return a7(ke.getNumber("WEBGL_VERSION"))}),ke.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!ke.getBool("WEBGL_FORCE_F16_TEXTURES")&&ke.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),ke.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return s7(ke.getNumber("WEBGL_VERSION"))}),ke.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return l7(ke.getNumber("WEBGL_VERSION"))}),ke.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return ke.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),uT=fT;var Ut=j({complex_:function(e,t){var n=I(e,"real","complex"),r=I(t,"imag","complex");return Be(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),W.runKernelFunc(function(o){return o.complex(n,r)},{$real:n,$imag:r})}}),sr=j({real_:function(e){var t=I(e,"input","real");return W.runKernelFunc(function(n){return n.real(t)},{$input:t})}}),jr=j({imag_:function(e){var t=I(e,"input","imag");return W.runKernelFunc(function(n){return n.imag(t)},{$input:t})}});function Kt(e,t,n){return Di(e,t,Ai(e,n),n)}function Di(e,t,n,r){if(r==null&&(r=Vu(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!qr(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){sT(t);var o=de(t),i=de(n);D(o===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+i});for(var a=0;a<n.length;++a){var s=n[a],l=a!==n.length-1||s!==de(t.slice(a));D(n[a]===t[a]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return qr(e)||Array.isArray(e)||(e=[e]),t=t||n,e=r!=="string"?iT(e,r,X().getBool("DEBUG")):Os(e,[],!0),W.makeTensor(e,t,r)}function ne(e,t){if((qr(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&qr(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Di(e,[],[],t)}function kt(e,t){Qs(e);var n=Ai(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Di(e,null,n,t)}function gi(e,t,n){if(Qs(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Ai(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Di(e,t,r,n)}function ry(e,t,n){if(Qs(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Ai(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Di(e,t,r,n)}function Sn(e,t,n){if(Qs(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Ai(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Di(e,t,r,n)}function f7(e,t,n){if(Qs(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Ai(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Di(e,t,r,n)}function h7(e,t,n){if(Qs(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Ai(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Di(e,t=t||r,r,n)}function p7(e,t,n,r){return t===void 0&&(t=!0),W.makeVariable(e,t,n,r)}function Js(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Js(e,"float32"),r=Ze(e,"float32");return Ut(n,r)}var o=aT(de(e),t);return W.makeTensor(o,e,t)}function Ze(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Ze(e,"float32"),r=Ze(e,"float32");return Ut(n,r)}var o=Wu(de(e),t);return W.makeTensor(o,e,t)}function Yr(e,t,n){return W.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function m7(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return W.runKernelFunc(function(r){return r.linspace(e,t,n)},{})}function tf(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Ze([0],r);var o=Wu(Math.abs(Math.ceil((t-e)/n)),r);t<e&&n===1&&(n=-1),o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return kt(o,r)}var pT=j({onesLike_:function(e){var t=I(e,"x","onesLike");if(t.dtype==="complex64"){var n=pT(sr(t)),r=De(jr(t));return Ut(n,r)}return W.runKernelFunc(function(o){return o.onesLike(t)},{$x:t},function(o,i){return{$x:function(){return De(o)}}})}}),De=j({zerosLike_:function(e){var t=I(e,"x","zerosLike");return W.runKernelFunc(function(n){return n.zerosLike(t)},{$x:t},function(n,r){return{$x:function(){return De(n)}}})}}),Tt=j({concat_:function(e,t){t===void 0&&(t=0),D(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=ef(e,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),t=Pt(t,n[0].shape)[0];var r=Bs(n.map(function(s){return s.shape}),t);if(de(r)===0)return Kt([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var o=n.map(function(s){return s.shape});d7(o,t);var i=n,a={axis:t};return W.runKernelFunc(function(s){return s.concat(n,t)},i,function(s){var l=o.map(function(u){return u[t]});return oy(s,l,t).map(function(u){return function(){return u}})},"Concat",a)}}),g7=j({concat1d_:function(e){return Tt(e,0)}}),v7=j({concat2d_:function(e,t){return Tt(e,t)}}),y7=j({concat3d_:function(e,t){return Tt(e,t)}}),x7=j({concat4d_:function(e,t){return Tt(e,t)}}),oy=j({split_:function(e,t,n){n===void 0&&(n=0);var r,o=I(e,"x","split");return n=Pt(n,o.shape)[0],typeof t=="number"?(D(o.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(o.shape[n]/t)):(D(o.shape[n]===t.reduce(function(i,a){return i+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),W.runKernelFunc(function(i){return i.split(o,r,n)},{$x:o},function(i){return{$x:function(){return Tt(i,n)}}})}});function Ea(e,t){return e(t={exports:{}},t.exports),t.exports}var b7=Ea(function(e){(function(t,n,r){function o(s){var l,u=this,c=(l=4022871197,function(d){d=d.toString();for(var f=0;f<d.length;f++){var h=.02519603282416938*(l+=d.charCodeAt(f));h-=l=h>>>0,l=(h*=l)>>>0,l+=4294967296*(h-=l)}return 23283064365386963e-26*(l>>>0)});u.next=function(){var d=2091639*u.s0+23283064365386963e-26*u.c;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=0|d)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(s),u.s0<0&&(u.s0+=1),u.s1-=c(s),u.s1<0&&(u.s1+=1),u.s2-=c(s),u.s2<0&&(u.s2+=1),c=null}function i(s,l){return l.c=s.c,l.s0=s.s0,l.s1=s.s1,l.s2=s.s2,l}function a(s,l){var u=new o(s),c=l&&l.state,d=u.next;return d.int32=function(){return 4294967296*u.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=a:this.alea=a})(0,e)}),w7=Ea(function(e){(function(t,n,r){function o(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(0|s)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=0|u.charCodeAt(c),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function a(s,l){var u=new o(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=a:this.xor128=a})(0,e)}),k7=Ea(function(e){(function(t,n,r){function o(s){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^d^d<<1)|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(0|s)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=0|u.charCodeAt(c),c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function a(s,l){var u=new o(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=a:this.xorwow=a})(0,e)}),C7=Ea(function(e){(function(t,n,r){function o(s){var l=this;l.next=function(){var u,c,d=l.x,f=l.i;return u=d[f],c=(u^=u>>>7)^u<<24,c^=(u=d[f+1&7])^u>>>10,c^=(u=d[f+3&7])^u>>>3,c^=(u=d[f+4&7])^u<<7,u=d[f+7&7],c^=(u^=u<<13)^u<<9,d[f]=c,l.i=f+1&7,c},function(u,c){var d,f=[];if(c===(0|c))f[0]=c;else for(c=""+c,d=0;d<c.length;++d)f[7&d]=f[7&d]<<15^c.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],u.x=f,u.i=0,d=256;d>0;--d)u.next()}(l,s)}function i(s,l){return l.x=s.x.slice(),l.i=s.i,l}function a(s,l){s==null&&(s=+new Date);var u=new o(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,c&&(c.x&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=a:this.xorshift7=a})(0,e)}),E7=Ea(function(e){(function(t,n,r){function o(s){var l=this;l.next=function(){var u,c,d=l.w,f=l.X,h=l.i;return l.w=d=d+1640531527|0,c=f[h+34&127],u=f[h=h+1&127],c^=c<<13,u^=u<<17,c^=c>>>15,u^=u>>>12,c=f[h]=c^u,l.i=h,c+(d^d>>>16)|0},function(u,c){var d,f,h,p,m,y=[],g=128;for(c===(0|c)?(f=c,c=null):(c+="\0",f=0,g=Math.max(g,c.length)),h=0,p=-32;p<g;++p)c&&(f^=c.charCodeAt((p+32)%c.length)),p===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(m=m+1640531527|0,h=(d=y[127&p]^=f+m)==0?h+1:0);for(h>=128&&(y[127&(c&&c.length||0)]=-1),h=127,p=512;p>0;--p)f=y[h+34&127],d=y[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,y[h]=f^d;u.w=m,u.X=y,u.i=h}(l,s)}function i(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function a(s,l){s==null&&(s=+new Date);var u=new o(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,c&&(c.X&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=a:this.xor4096=a})(0,e)}),S7=Ea(function(e){(function(t,n,r){function o(s){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=0|s):u+=s;for(var c=0;c<u.length+20;c++)l.b^=0|u.charCodeAt(c),l.next()}function i(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function a(s,l){var u=new o(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=a:this.tychei=a})(0,e)}),$i=Ea(function(e){(function(t,n){var r,o=this,i=256,a=6,s="random",l=n.pow(i,a),u=n.pow(2,52),c=2*u,d=i-1;function f(g,v,x){var b=[],k=m(function R(_,S){var A,N=[],O=typeof _;if(S&&O=="object")for(A in _)try{N.push(R(_[A],S-1))}catch{}return N.length?N:O=="string"?_:_+"\0"}((v=v==1?{entropy:!0}:v||{}).entropy?[g,y(t)]:g??function(){try{var R;return r&&(R=r.randomBytes)?R=R(i):(R=new Uint8Array(i),(o.crypto||o.msCrypto).getRandomValues(R)),y(R)}catch{var _=o.navigator,S=_&&_.plugins;return[+new Date,o,S,o.screen,y(t)]}}(),3),b),E=new h(b),T=function(){for(var R=E.g(a),_=l,S=0;R<u;)R=(R+S)*i,_*=i,S=E.g(1);for(;R>=c;)R/=2,_/=2,S>>>=1;return(R+S)/_};return T.int32=function(){return 0|E.g(4)},T.quick=function(){return E.g(4)/4294967296},T.double=T,m(y(E.S),t),(v.pass||x||function(R,_,S,A){return A&&(A.S&&p(A,E),R.state=function(){return p(E,{})}),S?(n[s]=R,_):R})(T,k,"global"in v?v.global:this==n,v.state)}function h(g){var v,x=g.length,b=this,k=0,E=b.i=b.j=0,T=b.S=[];for(x||(g=[x++]);k<i;)T[k]=k++;for(k=0;k<i;k++)T[k]=T[E=d&E+g[k%x]+(v=T[k])],T[E]=v;(b.g=function(R){for(var _,S=0,A=b.i,N=b.j,O=b.S;R--;)_=O[A=d&A+1],S=S*i+O[d&(O[A]=O[N=d&N+_])+(O[N]=_)];return b.i=A,b.j=N,S})(i)}function p(g,v){return v.i=g.i,v.j=g.j,v.S=g.S.slice(),v}function m(g,v){for(var x,b=g+"",k=0;k<b.length;)v[d&k]=d&(x^=19*v[d&k])+b.charCodeAt(k++);return y(v)}function y(g){return String.fromCharCode.apply(0,g)}if(n["seed"+s]=f,m(n.random(),t),e.exports){e.exports=f;try{r=require("crypto")}catch{}}})([],Math)});$i.alea=b7,$i.xor128=w7,$i.xorwow=k7,$i.xorshift7=C7,$i.xor4096=E7,$i.tychei=S7;var sh=$i.alea,iy=function(){function e(t,n,r,o,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=sh(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,o=!1;!o;){var i=void 0,a=void 0,s=void 0;do s=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a;while(s>=1||s===0);var l=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*i*l,r=this.mean+this.stdDev*a*l,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),R7=function(){function e(t,n,r,o){this.alpha=t,this.beta=1/n,this.dtype=r;var i=o||Math.random();this.randu=sh(i.toString()),this.randn=new iy(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,o,i,a;;){do o=this.randn.nextValue(),a=1+this.c*o;while(a<=0);if(a*=a*a,n=1-.331*(t=o*o)*t,r=.5*t+this.d*(1-a+Math.log(a)),(i=this.randu())<n||Math.log(i)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),T7=function(){function e(t,n,r,o){var i=this;if(t===void 0&&(t=0),n===void 0&&(n=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+n+" <= 1 and dtype is not float");this.random=sh(o)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Se(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",sT(e),new gu(e,t,n)}function _7(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var mT=j({batchToSpaceND_:function(e,t,n){var r=I(e,"x","batchToSpaceND"),o=t.reduce(function(i,a){return i*a});return D(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),D(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),D(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o}),W.runKernelFunc(function(i){return i.batchToSpaceND(r,t,n)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(t,n)}}})}}),I7=j({broadcastTo_:function(e,t){var n=I(e,"broadcastTo","x"),r=n.shape;if(t.some(function(l){return!(l>0)||l%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var o=n.shape.slice();o.length<t.length;)o.unshift(1);n=n.reshape(o)}for(var i=Array.from(t),a=t.length-1;a>=0;a--)if(n.shape[a]===t[a])i[a]=1;else if(n.shape[a]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map(function(l,u){return l>1?u:-1}).filter(function(l){return l>=0});return s.length===0?n.clone():W.runKernelFunc(function(l){return l.tile(n,i)},{input:n},function(l){return{input:function(){return l.sum(s,!0)}}})}}),N7=j({cast_:function(e,t){var n=I(e,"x","cast");if(!k6(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return W.runKernelFunc(function(o){return o.cast(n,t)},{x:n},function(o){return{x:function(){return o.clone()}}},"Cast",r)}}),P7=j({clone_:function(e){var t=I(e,"x","clone",null);return W.runKernelFunc(function(){return W.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(n){return{$x:function(){return n.toFloat()}}})}}),A7=j({cumsum_:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=I(e,"x","cumsum"),i=oo([t|=0],o.rank),a=o;i!=null&&(a=o.transpose(i));var s=io(1,o.rank)[0],l=W.runKernelFunc(function(u){return u.cumsum(a,s,n,r)},{permutedX:a},function(u){return{permutedX:function(){return u.cumsum(t,n,!r)}}});return i!=null&&(l=l.transpose(i)),l}}),D7=j({depthToSpace_:function(e,t,n){n===void 0&&(n="NHWC");var r=I(e,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];return D(o*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+t+`  for depthToSpace with input shape
      `+r.shape}),D(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+r.shape}),D(a%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape}),W.runKernelFunc(function(s){return s.depthToSpace(r,t,n)},{$x:r})}}),ar=j({expandDims_:function(e,t){t===void 0&&(t=0);var n=I(e,"x","expandDims",null);D(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(D(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),Er(n,r)}}),gT=j({eye_:function(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var o=Se([e,t],r),i=e<=t?e:t,a=0;a<i;++a)o.set(1,a,a);var s=o.toTensor().as2D(e,t);if(n==null)return s;if(n.length===1)return gs(ar(s,0),[n[0],1,1]);if(n.length===2)return gs(ar(ar(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return gs(ar(ar(ar(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),M7=j({multinomial_:function(e,t,n,r){r===void 0&&(r=!1);var o=I(e,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=a===1?o.as2D(1,-1):o,l=W.runKernelFunc(function(u){return u.multinomial(s,r,t,n)},{logits2D:s});return a===1?l.as1D():l}}),Vg=j({oneHot_:function(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=I(e,"indices","oneHot","int32"),i=o.shape.concat([t]);return o=o.flatten(),W.runKernelFunc(function(a){return a.oneHot(o,t,n,r)},{$indices:o},function(a){return{$indices:function(){return Ze(o.shape,"float32")}}}).reshape(i)}}),Sa=j({pad_:function(e,t,n){n===void 0&&(n=0);var r=I(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:t,constantValue:n};return W.runKernelFunc(function(i){return i.pad(r,t,n)},{x:r},function(i){var a=t.map(function(s){return s[0]});return{x:function(){return i.slice(a,r.shape)}}},"PadV2",o)}}),F7=j({pad1d_:function(e,t,n){return n===void 0&&(n=0),D(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Sa(e,[t],n)}}),O7=j({pad2d_:function(e,t,n){return n===void 0&&(n=0),D(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Sa(e,t,n)}}),L7=j({pad3d_:function(e,t,n){return n===void 0&&(n=0),D(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Sa(e,t,n)}}),B7=j({pad4d_:function(e,t,n){return n===void 0&&(n=0),D(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Sa(e,t,n)}}),j7=j({rand_:function(e,t,n){var r=de(e),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=t();return W.makeTensor(o,e,n)}}),z7=j({randomNormal_:function(e,t,n,r,o){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new iy(t,n,r,!1,o),a=Se(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),V7=j({randomGamma_:function(e,t,n,r,o){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new R7(t,n,r,o),a=Se(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),vT=j({randomUniform_:function(e,t,n,r,o){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var i=Se(e,r),a=new T7(t,n,null,o),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Er=j({reshape_:function(e,t){var n=I(e,"x","reshape",null);t=b6(t,n.size),D(n.size===de(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return W.runKernelFunc(function(o){return o.reshape(n,t)},{x:n},function(o){return{x:function(){return o.reshape(n.shape)}}},"Reshape",r)}}),yT=j({spaceToBatchND_:function(e,t,n){var r=I(e,"x","spaceToBatchND");return D(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),D(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),D(r.shape.reduce(function(o,i,a){return a>0&&a<=t.length?o&&(i+n[a-1][0]+n[a-1][1])%t[a-1]==0:o},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),W.runKernelFunc(function(o){return o.spaceToBatchND(r,t,n)},{$x:r},function(o){return{$x:function(){return o.batchToSpaceND(t,n)}}})}}),xT=j({squeeze_:function(e,t){var n=I(e,"x","squeeze");return Er(n,Gi(n.shape,t).newShape)}}),Gn=j({stack_:function(e,t){t===void 0&&(t=0);var n=ef(e,"tensors","stack");if(D(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,i=n[0].dtype;D(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){Be(o,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){D(i===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=n.map(function(s){return s.expandDims(t)});return Tt(a,t)}}),gs=j({tile_:function(e,t){var n=I(e,"x","tile",null);D(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],o={reps:t};return W.runKernelFunc(function(i,a){var s=i.tile(n,t);return a([n]),s},{x:n},function(i,a){var s=a[0];return{x:function(){var l=De(s);if(s.rank===1)for(var u=0;u<t[0];++u)l=l.add(i.slice([u*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(u=0;u<t[0];++u)for(var c=0;c<t[1];++c)l=l.add(i.slice([u*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(u=0;u<t[0];++u)for(c=0;c<t[1];++c)for(var d=0;d<t[2];++d)l=l.add(i.slice([u*s.shape[0],c*s.shape[1],d*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(u=0;u<t[0];++u)for(c=0;c<t[1];++c)for(d=0;d<t[2];++d)for(var f=0;f<t[3];++f)l=l.add(i.slice([u*s.shape[0],c*s.shape[1],d*s.shape[2],f*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return l}}},"Tile",o,r)}}),W7=j({truncatedNormal_:function(e,t,n,r,o){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new iy(t,n,r,!0,o),a=Se(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),_t=j({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var n=I(e,"x","unstack");D(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return W.runKernelFunc(function(o){return o.unstack(n,t)},{x:n},function(o){return{x:function(){return Gn(o,t)}}},"Unpack",r)}}),$7=function(e,t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s,l,u,c,d;return ue(this,function(f){switch(f.label){case 0:return n=I(e,"x","setdiff1d"),r=I(t,"y","setdiff1d"),D(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),D(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),D(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=f.sent(),[4,r.data()];case 2:for(i=f.sent(),a=new Set(i),s=0,c=0;c<o.length;c++)a.has(o[c])||s++;for(l=new gu([s],n.dtype),u=new gu([s],"int32"),c=0,d=0;c<o.length;c++)a.has(o[c])||(l.values[d]=o[c],u.values[d]=c,d++);return[2,[l.toTensor(),u.toTensor()]]}})})};function nf(e,t,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var i=t.length,a=0;a<i;++a)o=o.concat([e[a+1]/t[a],t[a]]);o=o.concat(e.slice(i+1))}return o}function rf(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var i=[],a=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function of(e,t,n,r){r===void 0&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function bT(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function wT(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function kT(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,i=0;i<n.length-1;++i)o*=n[i];var a=e.shape,s=n.slice();s.pop();var l=1;for(i=r;i<e.rank;++i)l*=a[i],s.push(a[i]);var u=Xr(e.shape).map(function(c){return c/l}).concat([1]).slice(0,r);return[s,o,l,u]}var CT=30;function Lp(e){return e<=CT?e:Fg(e,Math.floor(Math.sqrt(e)))}function U7(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(i+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(i+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(i+" update.rank != "+(o+e.length-r));for(var a=0;a<o;++a)if(n.shape[a]!==t.shape[a])throw new Error(i+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").");for(a=0;a<n.rank-o;++a)if(n.shape[a+o]!==e[a+r])throw new Error(i+" updates.shape["+(a+o)+"] ("+n.shape[a+o]+") != shape["+(a+o)+"] ("+e[a+o]+")")}function H7(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}U7(n,t,e)}function af(e,t,n){for(var r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length,a=1,s=o;s<i;++s)a*=n[s];var l=o<1?1:o;return{sliceRank:o,numUpdates:de(t.shape)/l,sliceSize:a,strides:Xr(n.slice(0,o)).concat([1]),outputSize:de(n)}}function G7(e,t,n){D(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),D(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(i){D(t[i]+n[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+n[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},o=0;o<e.rank;++o)r(o)}function M1(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function ay(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function K7(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||i==null)&&(i=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),i=Ag(0,i,s-1)}function q7(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||i==null)&&(i=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),i=a>0?Ag(0,i,s):Ag(-1,i,s-1)}function ET(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function ST(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function X7(e,t){D(Mg(e),function(){return"The f passed in variableGrads(f) must be a function"}),D(t==null||Array.isArray(t)&&t.every(function(c){return c instanceof Ls}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=t!=null;if(!n)for(var r in t=[],W.registeredVariables)t.push(W.registeredVariables[r]);var o=n?t.filter(function(c){return!c.trainable}):null,i=t.length;D((t=t.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var a=W.gradients(e,t,null,!0),s=a.value,l=a.grads;D(l.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),D(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var u={};return t.forEach(function(c,d){l[d]!=null&&(u[c.name]=l[d])}),o!=null&&o.forEach(function(c){return u[c.name]=null}),{value:s,grads:u}}function lh(e){return W.customGrad(e)}var Lo=j({softmax_:function(e,t){t===void 0&&(t=-1);var n=I(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return W.runKernelFunc(function(r,o){var i=r.softmax(n,t);return o([i]),i},{logits:n},function(r,o){var i=o[0],a=r.mul(i);return{logits:function(){return a.sub(a.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),Y7=j({logSoftmax_:function(e,t){t===void 0&&(t=-1);var n=I(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return lh(function(r,o){var i=r.max(t,!0),a=r.sub(i),s=a.toFloat().sub(a.exp().sum(t,!0).log());return o([s]),{value:s,gradFunc:function(l,u){var c=u[0].exp();return l.sub(l.sum(t,!0).mul(c))}}})(n)}}),RT=function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),TT=function(){function e(){}return e.prototype.time=function(t){return U("time")},e.prototype.read=function(t){return U("read")},e.prototype.readSync=function(t){return U("readSync")},e.prototype.numDataIds=function(){return U("numDataIds")},e.prototype.disposeData=function(t){return U("disposeData")},e.prototype.write=function(t,n,r){return U("write")},e.prototype.move=function(t,n,r,o){return U("move")},e.prototype.memory=function(){return U("memory")},e.prototype.floatPrecision=function(){return U("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,n,r,o){return U("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,U("fusedBatchMatMul")},e.prototype.slice=function(t,n,r){return U("slice")},e.prototype.stridedSlice=function(t,n,r,o){return U("stridedSlice")},e.prototype.unstack=function(t,n){return U("unstack")},e.prototype.reverse=function(t,n){return U("reverse")},e.prototype.concat=function(t,n){return U("concat")},e.prototype.neg=function(t){return U("neg")},e.prototype.add=function(t,n){return U("add")},e.prototype.addN=function(t){return U("addN")},e.prototype.subtract=function(t,n){return U("subtract")},e.prototype.multiply=function(t,n){return U("multiply")},e.prototype.realDivide=function(t,n){return U("realDivide")},e.prototype.floorDiv=function(t,n){return U("floorDiv")},e.prototype.sum=function(t,n){return U("sum")},e.prototype.prod=function(t,n){return U("prod")},e.prototype.unsortedSegmentSum=function(t,n,r){return U("unsortedSegmentSum")},e.prototype.argMin=function(t,n){return U("argMin")},e.prototype.argMax=function(t,n){return U("argMax")},e.prototype.equal=function(t,n){return U("equal")},e.prototype.notEqual=function(t,n){return U("notEqual")},e.prototype.less=function(t,n){return U("less")},e.prototype.lessEqual=function(t,n){return U("lessEqual")},e.prototype.greater=function(t,n){return U("greater")},e.prototype.greaterEqual=function(t,n){return U("greaterEqual")},e.prototype.logicalNot=function(t){return U("logicalNot")},e.prototype.logicalAnd=function(t,n){return U("logicalAnd")},e.prototype.logicalOr=function(t,n){return U("logicalOr")},e.prototype.where=function(t){return U("where")},e.prototype.select=function(t,n,r){return U("select")},e.prototype.topk=function(t,n,r){return U("topk")},e.prototype.min=function(t,n){return U("min")},e.prototype.minimum=function(t,n){return U("minimum")},e.prototype.mod=function(t,n){return U("mod")},e.prototype.max=function(t,n){return U("max")},e.prototype.maximum=function(t,n){return U("maximum")},e.prototype.all=function(t,n){return U("all")},e.prototype.any=function(t,n){return U("any")},e.prototype.squaredDifference=function(t,n){return U("squaredDifference")},e.prototype.ceil=function(t){return U("ceil")},e.prototype.floor=function(t){return U("floor")},e.prototype.round=function(t){return U("round")},e.prototype.sign=function(t){return U("sign")},e.prototype.isNaN=function(t){return U("isNaN")},e.prototype.isInf=function(t){return U("isInf")},e.prototype.isFinite=function(t){return U("isFinite")},e.prototype.pow=function(t,n){return U("pow")},e.prototype.exp=function(t){return U("exp")},e.prototype.expm1=function(t){return U("expm1")},e.prototype.softmax=function(t,n){return U("softmax")},e.prototype.log=function(t){return U("log")},e.prototype.log1p=function(t){return U("log1p")},e.prototype.sqrt=function(t){return U("sqrt")},e.prototype.rsqrt=function(t){return U("rsqrt")},e.prototype.square=function(t){return U("square")},e.prototype.reciprocal=function(t){return U("reciprocal")},e.prototype.relu=function(t){return U("relu")},e.prototype.relu6=function(t){return U("relu6")},e.prototype.prelu=function(t,n){return U("prelu")},e.prototype.elu=function(t){return U("elu")},e.prototype.eluDer=function(t,n){return U("eluDer")},e.prototype.selu=function(t){return U("selu")},e.prototype.int=function(t){return U("int")},e.prototype.clip=function(t,n,r){return U("clip")},e.prototype.abs=function(t){return U("abs")},e.prototype.complexAbs=function(t){return U("complexAbs")},e.prototype.sigmoid=function(t){return U("sigmoid")},e.prototype.softplus=function(t){return U("softplus")},e.prototype.sin=function(t){return U("sin")},e.prototype.cos=function(t){return U("cos")},e.prototype.tan=function(t){return U("tan")},e.prototype.asin=function(t){return U("asin")},e.prototype.acos=function(t){return U("acos")},e.prototype.atan=function(t){return U("atan")},e.prototype.atan2=function(t,n){return U("atan2")},e.prototype.sinh=function(t){return U("sinh")},e.prototype.cosh=function(t){return U("cosh")},e.prototype.tanh=function(t){return U("tanh")},e.prototype.asinh=function(t){return U("asinh")},e.prototype.acosh=function(t){return U("acosh")},e.prototype.atanh=function(t){return U("atanh")},e.prototype.erf=function(t){return U("erf")},e.prototype.step=function(t,n){return U("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,U("fusedConv2d")},e.prototype.conv2d=function(t,n,r){return U("conv2d")},e.prototype.conv2dDerInput=function(t,n,r){return U("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,n,r){return U("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,U("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,n,r){return U("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,n,r){return U("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){return U("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,n,r){return U("conv3d")},e.prototype.conv3dDerInput=function(t,n,r){return U("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,n,r){return U("conv3dDerFilter")},e.prototype.maxPool=function(t,n){return U("maxPool")},e.prototype.maxPoolBackprop=function(t,n,r,o){return U("maxPoolBackprop")},e.prototype.avgPool=function(t,n){return U("avgPool")},e.prototype.avgPoolBackprop=function(t,n,r){return U("avgPoolBackprop")},e.prototype.avgPool3d=function(t,n){return U("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,n,r){return U("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,n){return U("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,n,r,o){return U("maxPool3dBackprop")},e.prototype.reshape=function(t,n){return U("reshape")},e.prototype.cast=function(t,n){return U("cast")},e.prototype.tile=function(t,n){return U("tile")},e.prototype.pad=function(t,n,r){return U("pad")},e.prototype.transpose=function(t,n){return U("transpose")},e.prototype.gather=function(t,n,r){return U("gather")},e.prototype.gatherND=function(t,n){return U("gatherND")},e.prototype.scatterND=function(t,n,r){return U("scatterND")},e.prototype.batchToSpaceND=function(t,n,r){return U("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,n,r){return U("spaceToBatchND")},e.prototype.resizeBilinear=function(t,n,r,o){return U("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,n,r){return U("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,n,r,o){return U("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){return U("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,n,r,o,i,a){return U("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,n,r,o,i){return U("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,n,r,o,i,a,s){return U("LRNGrad")},e.prototype.multinomial=function(t,n,r,o){return U("multinomial")},e.prototype.oneHot=function(t,n,r,o){return U("oneHot")},e.prototype.cumsum=function(t,n,r,o){return U("cumsum")},e.prototype.nonMaxSuppression=function(t,n,r,o,i){return U("nonMaxSuppression")},e.prototype.fft=function(t){return U("fft")},e.prototype.ifft=function(t){return U("ifft")},e.prototype.complex=function(t,n){return U("complex")},e.prototype.real=function(t){return U("real")},e.prototype.imag=function(t){return U("imag")},e.prototype.cropAndResize=function(t,n,r,o,i,a){return U("cropAndResize")},e.prototype.depthToSpace=function(t,n,r){return U("depthToSpace")},e.prototype.split=function(t,n,r){return U("split")},e.prototype.sparseToDense=function(t,n,r,o){return U("sparseToDense")},e.prototype.diag=function(t){return U("diag")},e.prototype.fill=function(t,n,r){return U("fill")},e.prototype.onesLike=function(t){return U("onesLike")},e.prototype.zerosLike=function(t){return U("zerosLike")},e.prototype.linspace=function(t,n,r){return U("linspace")},e.prototype.dispose=function(){return U("dispose")},e}();function U(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function ii(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var i=n-1-o,a=e[i]||1;(t[t.length-1-o]||1)>1&&a===1&&r.unshift(i)}return r}function It(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],i=t.length-r-1,a=t[i];(o==null||o===1&&a>1)&&n.unshift(i)}return n}function Ne(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var i=e[e.length-o-1];i==null&&(i=1);var a=t[t.length-o-1];if(a==null&&(a=1),i===1)n.unshift(a);else if(a===1)n.unshift(i);else{if(i!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function yu(e,t,n,r,o,i,a){a===void 0&&(a="channelsLast");var s,l=uf(t),u=l[0],c=l[1];if(a==="channelsLast")s=[u,c,e[3],e[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[u,c,e[1],e[1]]}return Ra(e,s,n,r,o,i,!1,a)}function sf(e,t,n,r,o,i,a){a===void 0&&(a="NDHWC");var s,l,u=Wg(t),c=u[0],d=u[1],f=u[2];if(a==="NDHWC")l="channelsLast",s=[c,d,f,e[4],e[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);l="channelsFirst",s=[c,d,f,e[1],e[1]]}return lf(e,s,n,r,o,!1,l,i)}function Ra(e,t,n,r,o,i,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var l=[-1,-1,-1,-1],u=l[0],c=l[1],d=l[2],f=l[3];if(s==="channelsLast")u=e[0],c=e[1],d=e[2],f=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);u=e[0],f=e[1],c=e[2],d=e[3]}var h,p=t[0],m=t[1],y=t[3],g=uf(n),v=g[0],x=g[1],b=uf(r),k=b[0],E=b[1],T=vs(p,k),R=vs(m,E),_=function(M,F,V,z,P,B,L,$){var q,Q,ee;if(typeof M=="number"){q={top:M,bottom:M,left:M,right:M,type:M===0?"VALID":"NUMBER"};var te=function(Ce,se,be,Re,we){Re==null&&(Re=_T(Ce,se,be));var Fe=Ce[0],At=Ce[1],ge=jl((Fe-se+2*Re)/be+1,we);D(yt(ge),function(){return"The output # of rows ("+ge+") must be an integer. Change the stride and/or zero pad parameters"});var Xe=jl((At-se+2*Re)/be+1,we);return D(yt(Xe),function(){return"The output # of columns ("+Xe+") must be an integer. Change the stride and/or zero pad parameters"}),[ge,Xe]}([F,V],B,z,M,$);Q=te[0],ee=te[1]}else if(M==="same"){Q=Math.ceil(F/z),ee=Math.ceil(V/P);var re=Math.max(0,(Q-1)*z+B-F),ce=Math.max(0,(ee-1)*P+L-V),ae=Math.floor(re/2),me=re-ae,Ae=Math.floor(ce/2);q={top:ae,bottom:me,left:Ae,right:ce-Ae,type:"SAME"}}else{if(M!=="valid")throw Error("Unknown padding parameter: "+M);q={top:0,bottom:0,left:0,right:0,type:"VALID"},Q=Math.ceil((F-B+1)/z),ee=Math.ceil((V-L+1)/P)}return{padInfo:q,outHeight:Q,outWidth:ee}}(o,c,d,v,x,T,R,i),S=_.padInfo,A=_.outHeight,N=_.outWidth,O=a?y*f:y;return s==="channelsFirst"?h=[u,O,A,N]:s==="channelsLast"&&(h=[u,A,N,O]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:d,inChannels:f,outHeight:A,outWidth:N,outChannels:O,padInfo:S,strideHeight:v,strideWidth:x,filterHeight:p,filterWidth:m,effectiveFilterHeight:T,effectiveFilterWidth:R,dilationHeight:k,dilationWidth:E,inShape:e,outShape:h,filterShape:t}}function lf(e,t,n,r,o,i,a,s){i===void 0&&(i=!1),a===void 0&&(a="channelsLast");var l=[-1,-1,-1,-1,-1],u=l[0],c=l[1],d=l[2],f=l[3],h=l[4];if(a==="channelsLast")u=e[0],c=e[1],d=e[2],f=e[3],h=e[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);u=e[0],h=e[1],c=e[2],d=e[3],f=e[4]}var p,m=t[0],y=t[1],g=t[2],v=t[4],x=Wg(n),b=x[0],k=x[1],E=x[2],T=Wg(r),R=T[0],_=T[1],S=T[2],A=vs(m,R),N=vs(y,_),O=vs(g,S),M=function(L,$,q,Q,ee,te,re,ce,ae,me,Ae){var Ce,se,be,Re;if(typeof L=="number"){Ce={top:L,bottom:L,left:L,right:L,front:L,back:L,type:L===0?"VALID":"NUMBER"};var we=function(yr,kn,Cn,tr,ht,Wo){ht==null&&(ht=_T(yr,kn,tr));var Dh=yr[0],nc=yr[1],Y4=yr[2],Mh=jl((Dh-kn+2*ht)/tr+1,Wo);D(yt(Mh),function(){return"The output # of depths ("+Mh+") must be an integer. Change the stride and/or zero pad parameters"});var Fh=jl((nc-kn+2*ht)/tr+1,Wo);D(yt(Fh),function(){return"The output # of rows ("+Fh+") must be an integer. Change the stride and/or zero pad parameters"});var Oh=jl((Y4-kn+2*ht)/tr+1,Wo);return D(yt(Oh),function(){return"The output # of columns ("+Oh+") must be an integer. Change the stride and/or zero pad parameters"}),[Mh,Fh,Oh,Cn]}([$,q,Q,1],ce,1,ee,L,Ae);se=we[0],be=we[1],Re=we[2]}else if(L==="same"){se=Math.ceil($/ee),be=Math.ceil(q/te),Re=Math.ceil(Q/re);var Fe=(se-1)*ee+ce-$,At=(be-1)*te+ae-q,ge=(Re-1)*re+me-Q,Xe=Math.floor(Fe/2),Vt=Fe-Xe,Dt=Math.floor(At/2),Jt=At-Dt,Mt=Math.floor(ge/2);Ce={top:Dt,bottom:Jt,left:Mt,right:ge-Mt,front:Xe,back:Vt,type:"SAME"}}else{if(L!=="valid")throw Error("Unknown padding parameter: "+L);Ce={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},se=Math.ceil(($-ce+1)/ee),be=Math.ceil((q-ae+1)/te),Re=Math.ceil((Q-me+1)/re)}return{padInfo:Ce,outDepth:se,outHeight:be,outWidth:Re}}(o,c,d,f,b,k,E,A,N,O,s),F=M.padInfo,V=M.outDepth,z=M.outHeight,P=M.outWidth,B=i?v*h:v;return a==="channelsFirst"?p=[u,B,V,z,P]:a==="channelsLast"&&(p=[u,V,z,P,B]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:d,inWidth:f,inChannels:h,outDepth:V,outHeight:z,outWidth:P,outChannels:B,padInfo:F,strideDepth:b,strideHeight:k,strideWidth:E,filterDepth:m,filterHeight:y,filterWidth:g,effectiveFilterDepth:A,effectiveFilterHeight:N,effectiveFilterWidth:O,dilationDepth:R,dilationHeight:_,dilationWidth:S,inShape:e,outShape:p,filterShape:t}}function _T(e,t,n,r){r===void 0&&(r=1);var o=vs(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function uf(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Wg(e){return typeof e=="number"?[e,e,e]:e}function vs(e,t){return t<=1?e:e+(e-1)*(t-1)}function jl(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function js(e){var t=uf(e),n=t[0],r=t[1],o=t[2];return n===1&&r===1&&o===1}function Fn(e,t){return js(e)||js(t)}function sy(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function IT(e,t,n){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var r=Ze(e.shape),o=e.toFloat(),i=n.complex(o,r);return r.dispose(),o.dispose(),i}if(!C6(e.dtype,t))return W.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var a=n.real(e);return i=a.cast(t),a.dispose(),i}if(t==="int32")return n.int(e);if(t==="bool"){var s=ne(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function $g(e,t){return W.makeTensorFromDataId(e.dataId,t,e.dtype)}function NT(e,t,n){var r=(t-e)/(n-1),o=Wu(n,"float32");o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return kt(o,"float32")}function Ug(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function F1(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Q7(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function J7(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Z7(e,t,n){var r=function(i,a,s){return function(l,u,c){for(var d=0,f=l.length,h=0,p=!1;d<f;){var m=c(u,l[h=d+(f-d>>>1)]);m>0?d=h+1:(f=h,p=!m)}return p?d:-d-1}(i,a,s||ez)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function ez(e,t){return e>t?1:e<t?-1:0}function ly(e,t,n,r,o){return PT(e,t,n,r,o,0).selectedIndices}function uy(e,t,n,r,o,i){var a=PT(e,t,n,r,o,i);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function PT(e,t,n,r,o,i,a,s){s===void 0&&(s=!1);for(var l=Array.from(t).map(function(b,k){return{score:b,boxIndex:k,suppressBeginIndex:0}}).filter(function(b){return b.score>o}).sort(O1),u=i>0?-.5/i:0,c=[],d=[];c.length<n&&l.length>0;){var f=l.pop(),h=f.score,p=f.boxIndex,m=f.suppressBeginIndex;if(h<o)break;for(var y=!1,g=c.length-1;g>=m;--g){var v=tz(e,p,c[g]);if(v>=r){y=!0;break}if(f.score=f.score*nz(r,u,v),f.score<=o)break}f.suppressBeginIndex=c.length,y||(f.score===h?(c.push(p),d.push(f.score)):f.score>o&&Z7(l,f,O1))}var x=c.length;return s&&(c.fill(0,x),d.fill(0,x)),{selectedIndices:kt(c,"int32"),selectedScores:kt(d,"float32"),numValidOutputs:ne(x,"int32")}}function tz(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(s-i)*(l-a),p=(d-u)*(f-c);if(h<=0||p<=0)return 0;var m=Math.max(i,u),y=Math.max(a,c),g=Math.min(s,d),v=Math.min(l,f),x=Math.max(g-m,0)*Math.max(v-y,0);return x/(h+p-x)}function nz(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function O1(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function AT(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map(function(i){o[n]=i;var a=e.slice(r,o);return r[n]+=i,a})}function DT(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=Se(n,e.dtype);for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),a=new Array(e.rank),s=0;s<a.length;s++)a[s]=i[s]%e.shape[s];var l=e.locToIndex(a);o.values[r]=e.values[l]}return o.toTensor()}function MT(e,t,n,r,o){for(var i=t[t.length-1],a=[e.length/i,i],s=a[0],l=a[1],u=mu(n,s*r),c=mu("int32",s*r),d=0;d<s;d++){for(var f=d*l,h=e.subarray(f,f+l),p=[],m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort(function(b,k){return k.value-b.value});var y=d*r,g=u.subarray(y,y+r),v=c.subarray(y,y+r);for(m=0;m<r;m++)g[m]=p[m].value,v[m]=p[m].index}var x=t.slice();return x[x.length-1]=r,[Kt(u,x,n),Kt(c,x,"int32")]}function cy(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=Se(e,"int32"),i=Se([n.length,e.length],"int32");for(r=0;r<n.length;r++){var a=o.indexToLoc(n[r]),s=r*e.length;i.values.set(a,s)}return i.toTensor()}var rz=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("float v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},oz=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("vec4 v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},iz=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,i=e.inSize,a=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];var s=t==="max"?">":"<",l=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+l+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function FT(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(n){return e+"."+n})}function Rn(e,t){return t===1?[e]:FT(e,t)}function sn(){var e,t,n,r,o,i,a,s,l,u;return X().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function Qi(e,t,n){n===void 0&&(n="index");var r=Xr(t);return r.map(function(o,i){return"int "+e[i]+" = "+n+" / "+o+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+o:"index -= "+e[i]+" * "+o)+";"}).join("")}function dy(e){var t=Xr(e).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var OT=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function az(e,t,n,r){var o=[];e.forEach(function(h){var p=de(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?o.push("uniform float "+h.name+(p>1?"["+p+"]":"")+";"):(o.push("uniform sampler2D "+h.name+";"),o.push("uniform int offset"+h.name+";"))});var i,a,s=o.join(`
`),l=e.map(function(h){return function(p,m,y){y===void 0&&(y=!1);var g="";g+=y?LT(p):Oa(p);var v=p.shapeInfo.logicalShape,x=m.logicalShape;return v.length<=x.length&&(g+=y?function(b,k){var E,T=b.name,R=T.charAt(0).toUpperCase()+T.slice(1),_="get"+R+"AtOutCoords",S=b.shapeInfo.logicalShape.length,A=k.logicalShape.length,N=ii(b.shapeInfo.logicalShape,k.logicalShape),O=qe(A),M=A-S,F=["x","y","z","w","u","v"];E=S===0?"":A<2&&N.length>=1?"coords = 0;":N.map(function(q){return"coords."+F[q+M]+" = 0;"}).join(`
`);var V="";V=A<2&&S>0?"coords":b.shapeInfo.logicalShape.map(function(q,Q){return"coords."+F[Q+M]}).join(", ");var z="return outputValue;",P=de(b.shapeInfo.logicalShape)===1,B=de(k.logicalShape)===1;if(S!==1||P||B){if(P&&!B)z=A===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(N.length){var L=S-2,$=S-1;N.indexOf(L)>-1&&N.indexOf($)>-1?z="return vec4(outputValue.x);":N.indexOf(L)>-1?z="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":N.indexOf($)>-1&&(z="return vec4(outputValue.xx, outputValue.zz);")}}else z=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+_+`() {
      `+O+` coords = getOutputCoords();
      `+E+`
      vec4 outputValue = get`+R+"("+V+`);
      `+z+`
    }
  `}(p,m):function(b,k){var E=b.name,T=E.charAt(0).toUpperCase()+E.slice(1),R="get"+T+"AtOutCoords",_=k.texShape,S=b.shapeInfo.texShape,A=b.shapeInfo.logicalShape.length,N=k.logicalShape.length;if(!b.shapeInfo.isUniform&&A===N&&b.shapeInfo.flatOffset==null&&Bt(S,_))return`
      float `+R+`() {
        return sampleTexture(`+E+`, resultUV);
      }
    `;var O,M=qe(N),F=ii(b.shapeInfo.logicalShape,k.logicalShape),V=N-A,z=["x","y","z","w","u","v"];O=A===0?"":N<2&&F.length>=1?"coords = 0;":F.map(function(B){return"coords."+z[B+V]+" = 0;"}).join(`
`);var P="";return P=N<2&&A>0?"coords":b.shapeInfo.logicalShape.map(function(B,L){return"coords."+z[L+V]}).join(", "),`
    float `+R+`() {
      `+M+` coords = getOutputCoords();
      `+O+`
      return get`+T+"("+P+`);
    }
  `}(p,m)),g}(h,t,r)}).join(`
`),u=t.texShape,c=sn(),d=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(c),f=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+sz+`
    `+lz+`
    `+uz+`
  `}(c);return t.isPacked?(i=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(b,k){var E=[Math.ceil(k[0]/2),Math.ceil(k[1]/2)];return E[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+E[1]+`.0);
      }
    `:E[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+E[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      return 2 * (resTexRC.x * `+E[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(b,k){var E=[Math.ceil(k[0]/2),Math.ceil(k[1]/2)];if(Bt(b,k))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+E[0]+", "+E[1]+`));
      }
    `;var T=Math.ceil(b[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));

      int index = resTexRC.x * `+E[1]+` + resTexRC.y;
      int r = 2 * (index / `+T+`);
      int c = imod(index, `+T+`) * 2;

      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=h,y=p,g=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],v=Math.ceil(m[2]/2),x=v*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      int b = index / `+x+`;
      index -= b * `+x+`;

      int r = 2 * (index / `+v+`);
      int c = imod(index, `+v+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(b,k){for(var E=[Math.ceil(k[0]/2),Math.ceil(k[1]/2)],T=Math.ceil(b[b.length-1]/2),R=T*Math.ceil(b[b.length-2]/2),_=R,S="",A="b, r, c",N=2;N<b.length-1;N++)_*=b[b.length-N-1],S=`
      int b`+N+" = index / "+_+`;
      index -= b`+N+" * "+_+`;
    `+S,A="b"+N+", "+A;return`
    ivec`+b.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;

      `+S+`

      int b = index / `+R+`;
      index -= b * `+R+`;

      int r = 2 * (index / `+T+`);
      int c = imod(index, `+T+`) * 2;

      return ivec`+b.length+"("+A+`);
    }
  `}(h,p)}var m,y,g,v,x}(t.logicalShape,u),a=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(c)):(i=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(g,v){return v[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+v[1]+`.0);
      }
    `:v[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+v[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      return resTexRC.x * `+v[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(g,v){return Bt(g,v)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+v[0]+", "+v[1]+`));
      }
    `:g[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+v[0]+", "+v[1]+`));
        int index = resTexRC.x * `+v[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:g[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+v[0]+", "+v[1]+`));
        int index = resTexRC.x * `+v[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      int r = index / `+g[1]+`;
      int c = index - r * `+g[1]+`;
      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=p,y=Qi(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+y+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(g,v){var x=Qi(["r","c","d","d2"],g);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+x+`
      return ivec4(r, c, d, d2);
    }
  `}(h,p);case 5:return function(g,v){var x=Qi(["r","c","d","d2","d3"],g);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+v[0]+`,
                             `+v[1]+`));

      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      `+x+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,p);case 6:return function(g,v){var x=Qi(["r","c","d","d2","d3","d4"],g);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      `+x+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,p);default:throw new Error(h.length+"-D output sampling is not yet supported")}var m,y}(t.logicalShape,u),a=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(f+=cz),[f,d,a,s,i,l,n].join(`
`)}function Oa(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+o+"() {return "+r+";}";var i=n.shapeInfo.texShape,a=i[0],s=i[1];if(a===1&&s===1)return`
      float `+o+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=n.shapeInfo.texShape,u=l[0],c=l[1],d=Li(r);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+u+", "+c+", "+d+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+Pa(n)+`
      }
    `;var i=n.shapeInfo.texShape,a=i[0],s=i[1];if(s===1&&a===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var l=Li(r);return s===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+l+") + 0.5) / "+a+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:a===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+l+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+l+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=n.shapeInfo.texShape;if(a!=null&&Bt(r,a)){var s=a[0],l=a[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+l+".0, "+s+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var u=Gi(r),c=u.newShape,d=u.keptDims,f=c;if(f.length<r.length){var h=La(n,f);return`
      `+Oa(h)+`
      float `+i+`(int row, int col) {
        return `+i+"("+Ba(["row","col"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Pa(n)+`
      }
    `;var p=a[0],m=a[1],y=Li(o);return m===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:p===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+y+`;
    vec2 uv = uvFromFlat(`+p+", "+m+`, index);
    return sampleTexture(`+o+`, uv);
  }
`}(e);case 3:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[1]*r[2],s=r[2],l=Gi(r),u=l.newShape,c=l.keptDims,d=u;if(d.length<r.length){var f=La(n,d);return`
        `+Oa(f)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+Ba(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+Pa(n)+`
      }
    `;var h=n.shapeInfo.texShape,p=h[0],m=h[1],y=n.shapeInfo.flatOffset;if(m===a&&y==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+p+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(m===s&&y==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var g=Li(o);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+g+`;
        vec2 uv = uvFromFlat(`+p+", "+m+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `}(e);case 4:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[3],s=r[2]*a,l=r[1]*s,u=Gi(r),c=u.newShape,d=u.keptDims;if(c.length<r.length){var f=La(n,c);return`
      `+Oa(f)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+Ba(["row","col","depth","depth2"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+l+", "+s+", "+a+`, 1)));
        `+Pa(n)+`
      }
    `;var h=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,m=p[0],y=p[1];if(y===l&&h==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(y===a&&h==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var g=Li(o);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+y+", index + "+g+`);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 5:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[4],s=r[3]*a,l=r[2]*s,u=r[1]*l,c=Gi(r),d=c.newShape,f=c.keptDims;if(d.length<r.length){var h=La(n,d);return`
      `+Oa(h)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+Ba(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+u+", "+l+", "+s+", "+a+`)) +
          depth3;
        `+Pa(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,y=m[0],g=m[1];if(g===u&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+l+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(g===a&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var v=Li(o);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+l+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+v+`;
      vec2 uv = uvFromFlat(`+y+", "+g+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 6:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=Gi(r),s=a.newShape,l=a.keptDims;if(s.length<r.length){var u=La(n,s);return`
      `+Oa(u)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+Ba(["row","col","depth","depth2","depth3","depth4"],l)+`);
      }
    `}var c=r[5],d=r[4]*c,f=r[3]*d,h=r[2]*f,p=r[1]*h;if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+h+", "+f+", "+d+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+Pa(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,g=y[0],v=y[1];if(v===p&&m==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+f+", "+d+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(v===c&&m==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var x=Li(o);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+h+" + depth * "+f+` +
          depth2 * `+d+" + depth3 * "+c+" + depth4 + "+x+`;
      vec2 uv = uvFromFlat(`+g+", "+v+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function LT(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=sn(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(o){var i=o.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),s=o.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=sn();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+l[0]+", "+l[1]+`, index);
      return `+u.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(o){var i=o.shapeInfo.logicalShape,a=o.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),l=o.shapeInfo.texShape,u=l[0],c=l[1],d=sn();if(l!=null&&Bt(i,l))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+u+`.0);

        return `+d.texture2D+"("+a+`, uv);
      }
    `;var f=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],h=Math.ceil(i[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+f[0]+", "+f[1]+`, row, col);
      return `+d.texture2D+"("+a+`, uv);
    }
  `}(e);case 3:return function(o){var i=o.shapeInfo.logicalShape,a=o.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),l=o.shapeInfo.texShape,u=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];if(i[0]===1){var c=i.slice(1),d=La(o,c);return`
        `+LT(d)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Ba(["b","row","col"],[1,2])+`);
        }
      `}var f=u[0],h=u[1],p=Math.ceil(i[2]/2),m=p*Math.ceil(i[1]/2),y=sn();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+h+", "+m+", "+p+`, b, row, col);
      return `+y.texture2D+"("+a+`, uv);
    }
  `}(e);default:return function(o){for(var i=o.shapeInfo.logicalShape,a=i.length,s=o.name,l="get"+s.charAt(0).toUpperCase()+s.slice(1),u=o.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],d=c[0],f=c[1],h=Math.ceil(i[a-1]/2),p=h*Math.ceil(i[a-2]/2),m="int b, int row, int col",y="b * "+p+" + (row / 2) * "+h+" + (col / 2)",g=2;g<a-1;g++)m="int b"+g+", "+m,p*=i[a-g-1],y="b"+g+" * "+p+" + "+y;var v=sn();return`
    vec4 `+l+"("+m+`) {
      int index = `+y+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+d+`);
      return `+v.texture2D+"("+s+`, uv);
    }
  `}(e)}}var sz=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,lz=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,uz=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,cz=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Li(e){return"offset"+e}function Pa(e){var t=e.name,n=de(e.shapeInfo.logicalShape);return n<2?"return "+t+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function qe(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function La(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Ba(e,t){return t.map(function(n){return e[n]}).join(", ")}var dz=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,D(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=e[e.length-1],i=Math.ceil(o/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var a,s,l=this.outputShape,u=l.length,c=qe(u),d=Rn("coords",u);if(i===1){var f=qe(s=u+1);a=`
        `+f+" sourceLocR = "+f+"("+d.join()+`, 0);
        ++`+d[u-1]+`;
        `+f+" sourceLocG = "+f+"("+d.join()+`, 0);
        ++`+d[u-2]+`;
        `+f+" sourceLocA = "+f+"("+d.join()+`, 0);
        --`+d[u-1]+`;
        `+f+" sourceLocB = "+f+"("+d.join()+`, 0);
        --`+d[u-2]+";"}else s=u,a=`
        `+c+` sourceLocR = coords;
        ++`+d[u-1]+`;
        `+c+` sourceLocG = coords;
        ++`+d[u-2]+`;
        `+c+` sourceLocA = coords;
        --`+d[u-1]+`;
        `+c+` sourceLocB = coords;
        --`+d[u-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],m=h.map(function(R){return"int "+R}),y=Rn("sourceLocR",s-1).concat("inIdx.r"),g=Rn("sourceLocG",s-1).concat("inIdx.g"),v=Rn("sourceLocB",s-1).concat("inIdx.b"),x=Rn("sourceLocA",s-1).concat("inIdx.a"),b=n==="max"?"greaterThan":"lessThan",k=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+x.join()+")));",E=`vec4(
            getAChannel(`+y.join()+`),
            hasNextCol ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+x.join()+") : 0.)",T=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+T+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+d[u-1]+" < "+(l[u-1]-1)+`;
        bool hasNextRow = `+d[u-2]+" < "+(l[u-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+E+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+k+`
          vec4 candidate = `+E+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+b+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},fz=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left,d=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+c+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+l+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},hz=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=c-1-e.padInfo.front,p=d-1-e.padInfo.top,m=f-1-e.padInfo.left,y=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float avgMultiplier = float(`+y+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+d+`;
              wR += `+l+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+u+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},pz=function(e,t,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Ne(e,t),Ne(e,n);var a="0.0";r!=null&&(Ne(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";o!=null&&(Ne(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},mz=function(e,t,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ne(e,t),Ne(e,n);var a="vec4(0.0)";r!=null&&(Ne(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&(Ne(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},gz="return areal * breal - aimag * bimag;",vz="return areal * bimag + aimag * breal;",L1=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ne(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Bp="return a + b;",jp="return a - b;",B1="return a * b;",BT="return (a < 0.) ? b * a : a;",ut=function(e,t,n){this.variableNames=["A","B"],this.outputShape=Ne(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},jT=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,co=function(e,t,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ne(t,n);var o=this.outputShape.length,i="";if(r)if(o===0||de(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+qe(o)+` coords = getOutputCoords();
        `,o===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=Rn("coords",o);i+=`
            bool nextRowOutOfBounds =
              (`+a[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+a[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},yz=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(o,i){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(r.minLoc,t),o.gl.uniform1f(r.maxLoc,n)}},e}(),xz=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(o,i){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(r.minLoc,t),o.gl.uniform1f(r.maxLoc,n)}},e}(),bz=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},wz=function(e){this.outputShape=[],this.outputShape=Bs(e,1),this.variableNames=e.map(function(s,l){return"T"+l});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var i=t.length,a=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},kz=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Bs(e,t);var n=this.outputShape,r=n.length,o=qe(r),i=Rn("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(y,g){return"T"+g});var s=new Array(e.length-1);s[0]=e[0][t];for(var l=1;l<s.length;l++)s[l]=s[l-1]+e[l][t];var u=a[t],c=a.slice(-2),d=a.join(),f="if ("+u+" < "+s[0]+`) {
        return getChannel(
            getT0(`+d+"), vec2("+c.join()+`));
        }`;for(l=1;l<s.length;l++){var h=s[l-1];f+=`
        if (`+u+" < "+s[l]+"  && "+u+" >= "+s[l-1]+`) {
          return getChannel(
            getT`+l+"("+Nc(a,u,h)+`),
            vec2(`+Nc(c,u,h)+`));
        }`}var p=s.length,m=s[s.length-1];f+=`
        return getChannel(
          getT`+p+"("+Nc(a,u,m)+`),
          vec2(`+Nc(c,u,m)+"));",this.userCode=`
      float getValue(`+a.map(function(y){return"int "+y})+`) {
        `+f+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+n[r-2]+` &&
            `+i[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function Nc(e,t,n){var r=e.indexOf(t);return e.map(function(o,i){return i===r?o+" - "+n:o}).join()}var Cz=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Ez=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dataFormat==="channelsLast",a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=i?1:2,u=i?2:3,c=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+l+"], coords["+u+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Sz=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+o+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Rz=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+l+", "+u+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Tz=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},_z=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},j1=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,i=e.padInfo.left,a=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=4*Math.floor(e.inChannels/4),h=e.inChannels%4,p=e.dataFormat==="channelsLast",m=p?1:2,y=p?2:3,g=p?3:1,v="",x="";n&&(v=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,x="result = activation(result);");var b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+o+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+g+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+y+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+l+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+u+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+b+`
        `+x+`
        setOutput(result);
      }
    `},Iz=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+i+", "+a+`);
      const ivec3 pads = ivec3(`+t+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+l+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+u+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},z1=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=e.outChannels/e.inChannels,m="",y="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,y="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+l+", "+u+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+g+`
        `+y+`
        setOutput(result);
      }
    `},V1=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=h,m="int xR; int xC; int xCOffset;",y=0;y<f;y++)for(var g=0;g<h;g++)m+=`
          vec4 xTexelR`+y+"C"+2*g+` = vec4(0.);
          vec4 wR`+y+"C"+g+` = vec4(0.);
          vec4 xR`+y+"C"+g+" = vec4(0.);";for(y=0;y<f;y++)for(var v=0;v<p;v++){if(m+=`
          xR = xRCorner + `+y*c+`;
          xC = xCCorner + `+(g=2*v)*d+`;
        `,u===1){if(g<h&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+y+"C"+g+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+y+"C"+g+" = vec4(previous.zw, xTexelR"+y+"C"+g+`.xy);
                } else {
                  xR`+y+"C"+g+" = vec4(0, 0, xTexelR"+y+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                xR`+y+"C"+g+" = xTexelR"+y+"C"+g+`;
              `,g+1<h)){var x=s%2==0?rT(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+x+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,d>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+y+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+y+"C"+g+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+y+"C"+(g+1)+` = vec4(
                    xTexelR`+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+x+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+y+"C"+(g+1)+" = xTexelR"+y+"C"+(g+2)+`;
                `}}else g<h&&(m+=`
              if(xR >= 0 && xR < `+o+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+u+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+y+"C"+(g+2)+` = vec4(0.);
                }

                xR`+y+"C"+g+` = vec4(
                  xTexelR`+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+`.zw);
              `,g+1<h&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+u+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+y+"C"+(g+1)+" = vec4(xTexelR"+y+"C"+(g+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+y+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+u+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+(g+2)+` = vec4(0.);
                }

                xR`+y+"C"+g+` = vec4(
                  xTexelR`+y+"C"+g+".xy, xTexelR"+y+"C"+(g+2)+`.xy);
              `,g+1<h&&(m+=`
                  xR`+y+"C"+(g+1)+` = vec4(
                    xTexelR`+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+`.zw);
                `)),m+="}");g<h&&(m+=`
            vec4 wTexelR`+y+"C"+g+" = getW("+y+", "+g+`, d1, q);
            wR`+y+"C"+g+" = vec4(wTexelR"+y+"C"+g+".xz, wTexelR"+y+"C"+g+`.xz);
          `,g+1<h&&(m+=`
              vec4 wTexelR`+y+"C"+(g+1)+" = getW("+y+", "+(g+1)+`, d1, q);
              wR`+y+"C"+(g+1)+` =
                vec4(wTexelR`+y+"C"+(g+1)+".xz, wTexelR"+y+"C"+(g+1)+".xz);"))}for(y=0;y<f;y++)for(g=0;g<h;g++)m+="dotProd += xR"+y+"C"+g+" * wR"+y+"C"+g+";";var b="",k="";n&&(b=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,k="result = activation(result);");var E=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+l+", "+u+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+E+`
        `+k+`
        setOutput(result);
      }
    `},Nz=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],a=e[1],s=e[2],l=e[3],u=t[0],c=n[0],d=n[1];this.outputShape=[u,c,d,l];var f=r==="bilinear"?1:0,h=[a-1+".0",s-1+".0"],p=h[0],m=h[1],y=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=y[0],v=y[1],x=y[2],b=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],k=b[0],E=b[1],T=b[2];this.userCode=`
      const float height_ratio = float(`+g+`);
      const float width_ratio = float(`+k+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+v+`;
        float width_scale = `+E+`;

        float in_y = `+x+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+T+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},Pz=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],i=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+qe(r)+` coords = getOutputCoords();
        int end = `+W1(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+W1(r,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function W1(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Az=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=vu.DENSE;var t=Bl(e),n=sn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Qi(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},Dz=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=vu.DENSE;var t=Bl(e),n=sn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Qi(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},Mz=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Fz=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},Oz=function(e){this.variableNames=["A"],this.outTexUsage=Wn.DOWNLOAD;var t=sn();this.outputShape=e,this.userCode=`
      `+OT+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},Lz=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Wn.DOWNLOAD;var t=sn();this.outputShape=e,this.userCode=`
      `+OT+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},Bz=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=sn(),o=t[0],i=t[1];this.outputShape=e;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+dy(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `},jz=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=sn(),o=t[0],i=t[1];this.outputShape=e;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var u=0;u<=1;u++){var c=2*l+u;a+=`
          localCoords = coords;
          if(localCoords[2] + `+u+" < "+e[2]+`) {
            localCoords[2] += `+u+`;
            if(localCoords[1] + `+l+" < "+e[1]+`) {
              localCoords[1] += `+l+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+dy(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+r.output+" = "+s+`;
      }
    `},zz="return real * expR - imag * expI;",Vz="return real * expI + imag * expR;",$1=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},Wz=function(){function e(t,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,t)}},e}(),$z=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=qe(this.rank),i=function(a,s){var l=a.length;if(l>4)throw Error("Gather for rank "+l+" is not yet supported");if(l===1)return"int(getIndices(resRC))";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],d=0;d<a.length;d++)d===s?c.push("int(getIndices("+u[d]+"))"):c.push(""+u[d]);return c.join()}(e,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},Uz=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=qe(t.length),o=qe(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Hz(e,t){var n=sn();return z6(e,t,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Gz(e,t){return H6(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Kz(e,t){return G6(e,t,new Uint16Array([0,1,2,2,1,3]))}function Uu(e,t,n,r,o,i,a){q6(n,r);var s=K6(e,t),l=e.TEXTURE_2D;return fe(e,t,function(){return e.bindTexture(l,s)}),fe(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),fe(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),fe(e,t,function(){return e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)}),fe(e,t,function(){return e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)}),fe(e,t,function(){return e.texImage2D(l,0,o,n,r,0,i,a,null)}),fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function qz(e,t,n,r,o){var i=ah(n,r);return Uu(e,t,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function Xz(e,t,n,r,o){var i=ah(n,r);return Uu(e,t,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function Yz(e,t,n,r,o){var i=ah(n,r);return Uu(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function Qz(e,t,n,r,o){var i=$u(n,r);return Uu(e,t,i[0],i[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function Jz(e,t,n,r,o){var i=$u(n,r);return Uu(e,t,i[0],i[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function Zz(e,t,n,r){return fe(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),N1(e,t,n,"clipSpacePos",r,3,20,0)&&N1(e,t,n,"uv",r,2,20,12)}function eV(e,t,n,r,o,i,a){var s,l,u;fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),i instanceof Uint8Array?(s=new Uint8Array(r*o*4),l=e.UNSIGNED_BYTE,u=e.RGBA):(s=new Float32Array(r*o*4),l=e.FLOAT,u=a.internalFormatPackedFloat),s.set(i),fe(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,u,r,o,0,e.RGBA,l,s)}),fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function tV(e,t,n,r){fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?fe(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):fe(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function nV(e,t,n,r,o){var i=e.createBuffer();fe(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var a=16*n*r;return fe(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)}),fe(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),fe(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function rV(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function oV(e,t,n,r,o){var i=ah(n,r),a=i[0],s=i[1],l=new Uint8Array(n*r*4);return fe(e,t,function(){return e.readPixels(0,0,a,s,o.downloadTextureFormat,e.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function iV(e,t,n,r,o,i,a,s){var l=e,u=new Float32Array(function(c,d){var f=$u(c,d);return f[0]*f[1]*4}(i,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function aV(e,t,n,r){var o=new Float32Array(n*r*4);return fe(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)}),o}var sV=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=X().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,F6(n,t)):this.gl=ro(n);var r="WEBGL_color_buffer_float";if(X().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Rc(this.gl,this.debug,"OES_texture_float"),ur(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Rc(this.gl,this.debug,"OES_texture_half_float");else if(X().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ur(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Rc(this.gl,this.debug,"EXT_color_buffer_half_float");else if(X().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ur(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ur(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Gz(this.gl,this.debug),this.indexBuffer=Kz(this.gl,this.debug),this.framebuffer=X6(this.gl,this.debug),this.textureConfig=ty(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return X().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;fe(n,this.debug,function(){return n.finish()}),fe(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),fe(n,this.debug,function(){return n.deleteFramebuffer(t.framebuffer)}),fe(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),fe(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),fe(n,this.debug,function(){return n.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),qz(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),Xz(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),Yz(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),tV(this.gl,this.debug,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,o){this.throwIfDisposed(),eV(this.gl,this.debug,t,n,r,o,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),Jz(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),Qz(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(P1(this.gl,this.debug,this.framebuffer),this.outputTexture=null),fe(this.gl,this.debug,function(){return n.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return oV(o.gl,o.debug,n,r,o.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,o,i,a){return iV(this.gl,t,0,0,0,i,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return rV(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var o=nV(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n,r,o=this;if(X().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var s=i.clientWaitSync(a,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},n=a}else X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return aV(o.gl,o.debug,n,r)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var n=this.gl,r=V6(n,this.debug,t),o=Hz(n,this.debug),i=$6(n,this.debug);return fe(n,this.debug,function(){return n.attachShader(i,o)}),fe(n,this.debug,function(){return n.attachShader(i,r)}),U6(n,this.debug,i),this.debug&&Mp(n,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=Zz(n,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&fe(this.gl,this.debug,function(){return n.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Mp(this.gl,this.debug,this.program),fe(this.gl,this.debug,function(){return n.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?Q6(this.gl,this.debug,t,n):J6(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),fe(this.gl,this.debug,function(){return r.gl.getAttribLocation(t,n)})},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Z6(this.gl,this.debug,this.program,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var o=$u(n,r),i=o[0],a=o[1];this.setOutputMatrixTextureDriver(t,i,a)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,o){this.setOutputMatrixWriteRegionDriver(r,t,o,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&Mp(this.gl,this.debug,this.program),Tc(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),fe(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),fe(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Rc(this.gl,this.debug,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),i=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return le(this,void 0,void 0,function(){var n=this;return ue(this,function(r){switch(r.label){case 0:return[4,E1(function(){return n.disposed||n.isQueryAvailable(t,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(t,o.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var t=function(r){for(var o=0;o<r.length&&r[o]();++o);return o-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=t;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1||E1(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Fp(this.gl,this.debug,t,this.framebuffer),this.debug&&Tc(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Fp(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Tc(this.gl)):P1(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var o=this.gl;Fp(o,this.debug,t,this.framebuffer),this.debug&&Tc(o),this.outputTexture=t,fe(o,this.debug,function(){return o.viewport(0,0,n,r)}),fe(o,this.debug,function(){return o.scissor(0,0,n,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,o){var i=this;this.throwIfDisposed(),fe(this.gl,this.debug,function(){return i.gl.scissor(t,n,r,o)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function U1(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(n,r){var o=n.logicalShape,i=t[r],a=i.shape;if(!Bt(o,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+a+" must match");if(!n.isUniform||!i.isUniform){var s=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!Bt(s,l))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+l+" must match")}})}var lV=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,o=n.inChannels,i=n.strideWidth,a=n.strideHeight,s=n.padInfo,l=n.outWidth,u=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,f=s.left,h=s.top,p=o*r,m=sn(),y=d==="channelsLast",g=y?0:1,v=y?1:2,x="",b=0;b<=1;b++)for(var k=0;k<=1;k++)x+=`
          blockIndex = rc.y + `+k+`;
          pos = rc.x + `+b+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+l+")) * "+a+" - "+h+`;
            d0 = offsetY + `+c+" * (pos / "+p+`);

            if(d0 < `+t[g]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+l+".) * "+i+". - "+f+`.);
              d1 = offsetX + `+u+" * (int(mod(float(pos), "+p+".) / "+o+`.));

              if(d1 < `+t[v]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+y+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*b+k)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*b+k)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+x+`

        `+m.output+` = result;
      }
    `},uV=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var i,a=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";i=o===.5?"inversesqrt("+l+")":o===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},cV=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},dV=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,a=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";i=o===.5?"inversesqrt("+l+")":o===1?"1.0/("+l+")":"exp(log("+l+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},fV=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,s=i-1-e.padInfo.left,l=o*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+l+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},hV=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=l-1-e.padInfo.top,f=u-1-e.padInfo.left,h=s*l*u-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+d+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+l+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+u+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+l+" * "+u+` +
                  wR * `+u+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},zp=function(e,t,n,r,o,i,a){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),i===void 0&&(i=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],l=Math.ceil(s/2),u=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",p="";i&&(h=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,p="result = activation(result);");var m=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+l+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+l+`; i++) {
          vec4 a = getMatrixA(rc.x, `+u+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+d[0]+" * "+f[0]+`);
          result += (`+d[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+p+`

        setOutput(result);
      }
    `},pV=function(){function e(t,n,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,t)}},e}(),mV=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},gV=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=Rn("rc",t),r=qe(t),o=function(s,l,u){if(s===1)return"rc > "+l[0];for(var c="",d=s-2;d<s;d++)c+=u[d]+" >= "+l[d],d<s-1&&(c+="||");return c}(t,e,n),i=function(s,l,u,c){if(s===1)return"";var d=c.slice(-2);return`
    int r = `+d[0]+`;
    int c = `+d[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+l+`;
    bool rEdge = rp1 >= `+u+`;
  `}(t,e[e.length-1],e[e.length-2],n),a=function(s,l){var u=s.length,c=function(d,f){for(var h=[],p=0;p<=1;p++)for(var m=0;m<=1;m++){for(var y=(p===0?"r":"rp1")+", "+(m===0?"c":"cp1"),g=2;g<d;g++)y=f[f.length-1-g]+","+y;h.push(y)}return h}(u,l);return u===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(e,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+a+`));
          }
        }
      `}},vV=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(l,u){return l[0]+e[u]+l[1]});var r=e.length,o=qe(r),i=t.map(function(l){return l[0]}).join(","),a=t.map(function(l,u){return l[0]+e[u]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+i+`);
      `+o+" end = "+o+"("+a+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},yV=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(y,g){return y[0]+e[g]+y[1]});for(var r=e.length,o=qe(r),i=t.map(function(y){return y[0]}).join(","),a=t.map(function(y,g){return y[0]+e[g]}).join(","),s=Rn("rc",r),l=Rn("source",r),u=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+l.slice(-2).join()+")",d=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+u+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+u+") {"],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,m=r===1?2:4;p<m;p++)h+=`
        `+d[p]+`
        if (`+f+`) {
          result[`+p+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+p+"] = getChannel(getX("+l.join()+"), "+c+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+i+`);
      const `+o+" end = "+o+"("+a+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},Vp=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var f=t==="avg",h="0.0";if(f||(h="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+i+`);
        const ivec2 pads = ivec2(`+c+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+l+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+u+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+u+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(p="avgValue / count");var m=4*Math.floor(r/4),y=r%4,g=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+i+`);
      const ivec2 pads = ivec2(`+c+", "+d+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+l+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+g+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(y===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(y===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(y===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+g+`
          }
        }
        setOutput(`+p+`);
      }
    `}},Wp=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var y=t==="avg",g="0.0";if(y||(g="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+o+", "+i+", "+a+`);
        const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+d+`;
                wR += `+l+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+u+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+d+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(v="avgValue / count");var x=4*Math.floor(r/4),b=r%4,k=`
      if (`+y+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+o+", "+i+", "+a+`);
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`;
            wR += `+l+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+x+`; wC += 4) {
              int xC = xCCorner + wC * `+u+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+u+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+u+`, ch)
              );

              `+k+`
            }

            int xC = xCCorner + `+x+`;
            if (`+(b===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+k+`
            } else if (`+(b===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                initializationValue,
                initializationValue
              );

              `+k+`
            } else if (`+(b===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+u+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+u+`, ch),
                initializationValue
              );

              `+k+`
            }
          }
          setOutput(`+v+`);
        }
      }
    `}},xV=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",s="";t==="prod"?a="1.0":t==="min"?(a="1.0 / 1e-20",s="min"):t==="max"&&(a="-1.0 / 1e-20",s="max");var l=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?l="sumValue":t==="prod"?l="prodValue":t==="all"?l="allValue":t==="any"&&(l="anyValue");var u=4*Math.floor(n/4),c=n%4,d=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,f="vec4";t==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):t==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var h="";o%n>0&&(h=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(c===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+l+`);
      }
    `},bV=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Qi(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+dy(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+n+`

        setOutput(result);
      }
    `},wV=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],l=a[2],u=[n&&s>1?o-1:o,n&&l>1?i-1:i],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],d=u[0]/c[0],f=u[1]/c[1],h=1/d,p=1/f,m=2*Math.ceil(h)+2,y=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},kV=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var l=[r&&t>1?i-1:i,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},CV=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var l=[r&&t>1?i-1:i,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`,
          `+l[1]/u[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},EV=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],l=a[2],u=[n&&s>1?o-1:o,n&&l>1?i-1:i],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],d=u[0]/c[0],f=u[1]/c[1],h=1/d,p=1/f,m=2*Math.ceil(h)+2,y=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+l+`) {
              continue;
            }

            float sourceFracRow =
              float(`+u[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+u[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},SV=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var l=[r&&t>1?i-1:i,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+l[0]/u[0]+`,
          `+l[1]/u[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},RV=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,n!==1){var r=e.map(function(i,a){return function(s){return t.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),o=qe(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},TV=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Rn("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],a=qe(n);function s(l){var u=e.map(function(c,d){return function(f,h){return t.indexOf(f)!==-1&&e[f]!==1?e[f]+" - "+h[f]+" - 1":""+h[f]}(d,l)});return"getChannel(getX("+u.join(",")+"), vec2("+u.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(l){return s(l)}(r.slice())+`;
          if(`+o+`){
            result.g = `+function(l){return l[n-1]="("+l[n-1]+" + 1)",s(l)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(l){return l[n-2]="("+l[n-2]+" + 1)",s(l)}(r.slice())+`;
            if(`+o+`) {
              result.a = `+function(l){return l[n-1]="("+l[n-1]+" + 1)",l[n-2]="("+l[n-2]+" + 1)",s(l)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},H1=function(e,t,n,r,o,i,a){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=qe(o.length),l=qe(i.length),u="";n===1?u="i":n===2&&(u="i, j");var c="getIndices("+u+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var f="getUpdates("+d+")",h=t>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+l+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},_V=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),l=n%4,u=`
        sumValue += dot(values, segFilter);
    `,c="";o%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var d="";o%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+u+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(l===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+u+`
        } else if (`+(l===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+u+`
        } else if (`+(l===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+u+`
        }
        setOutput(sumValue);
      }
    `},IV=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],l=0;l<t.length;l++)s.push(""+i[l]),l<e&&a.push(""+i[l]);r=a.join(),o=s.join()}var u=qe(n);this.userCode=`
      void main() {
        `+u+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},NV=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=qe(this.rank),o="uniform int start["+this.rank+"];",i=function(a){if(a===1)return"sourceLoc";if(a<=6)return $p.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map(function(a,s){return"sourceLoc."+$p[s]+" = start["+s+"] + coords."+$p[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),$p=["x","y","z","w","u","v"],PV=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=qe(this.rank),r=Rn("coords",this.rank),o=Rn("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",a="getChannel(getSource("+o.join()+"), "+i+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+a+`;
        --`+o[this.rank-1]+`;
      }
    `,l=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            `+n+"("+t.map(function(c,d){return"start["+d+"]"}).join()+");":t.map(function(c,d){return o[d]+" = "+r[d]+" + start["+d+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+u+`
        vec4 result = vec4(0.);
        `+s+`
        `+l+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),AV=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=qe(n.length),i=qe(n.length),a="";if(r===1)a="coords * strides + begin";else{var s=0;a=n.map(function(l,u){return s++,n.length===1?"coords * strides["+u+"] + begin["+u+"]":"coords["+(s-1)+"] * strides["+u+"] + begin["+u+"]"}).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+e+`);
      `+o+" strides = "+o+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `},DV=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,n,r){var o,i=G1(n,r),a=K1(t,i,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),i===zn.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===zn.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===zn.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===zn.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===zn.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(o),o},e.prototype.releaseTexture=function(t,n,r,o){if(this.freeTextures!=null){var i=K1(n,G1(r,o),o);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[i],s=a.indexOf(t);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){t.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(o){t.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function G1(e,t){if(e===Wn.UPLOAD)return zn.PACKED_2X2_FLOAT32;if(e===Wn.RENDER||e==null)return function(n){return X().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?zn.PACKED_2X2_FLOAT32:zn.UNPACKED_FLOAT32:n?zn.PACKED_2X2_FLOAT16:zn.UNPACKED_FLOAT16}(t);if(e===Wn.DOWNLOAD||e===Wn.PIXELS)return zn.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function K1(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var MV=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=qe(this.rank),i=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],u=[],c=0;c<a.length;c++)u.push("imod("+l[c]+", "+a[c]+")");return u.join()}(e);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},FV=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=qe(this.rank),i=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var l=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],u=new Array(s),c=0;c<a.length;c++)u[a[c]]=l[c];return u.join()}(t);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},OV=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=qe(this.rank),i=FT("rc",this.rank),a=new Array(this.rank);for(r=0;r<t.length;r++)a[t[r]]=i[r];var s="vec2("+a.slice(-2).join()+")",l="++"+i[this.rank-1]+" < "+n[this.rank-1],u="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+u+`;
      if(`+l+`) {
        result[1] = `+u+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+u+`;
        if(`+l+`) {
          result[3] = `+u+`;
        }
      }
      setOutput(result);
    }
    `},fy=1.7580993408473768,hy=1.0507009873554805,_e=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Nr="if (isnan(x)) return x;",LV="return x;",q1="return abs(x);",zT=Nr+`
  return (x < 0.0) ? 0.0 : x;
`,VT=Nr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,WT="return (x >= 0.0) ? x : (exp(x) - 1.0);",BV=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+fy+`;
  float scale = `+hy+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,X1="return -x;",Y1="return ceil(x);",Q1="return floor(x);",J1="return exp(x);",Z1="return exp(x) - 1.0;",jV=Nr+`
  return sin(x);
`,zV=Nr+`
  return cos(x);
`,VV=Nr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,WV=Nr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,$V=Nr+`
  return atan(x);
`,UV=Nr+"return log(x + sqrt(x * x + 1.0));",HV=Nr+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,GV=Nr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Pc="return x;",KV="return x;",$T=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,UT=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,HT=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,ml=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},qV=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Rn("rc",t),r=qe(t),o=function(s,l){if(s===1)return"rc";for(var u="",c=0;c<s;c++)u+=l[c],c<s-1&&(u+=",");return u}(t,n),i=n.slice(-2),a=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `},Ac={};function Dc(e,t){if(t===void 0&&(t=!1),e==="linear")return t?KV:LV;if(e==="relu")return t?$T:zT;if(e==="elu")return t?HT:WT;if(e==="relu6")return t?UT:VT;if(e==="prelu")return t?jT:BT;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var XV=600,YV=function(e){function t(n){var r,o=e.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!X().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var i=ro(X().getNumber("WEBGL_VERSION"));o.binaryCache=((r=X().getNumber("WEBGL_VERSION"))in Ac||(Ac[r]={}),Ac[r]),o.gpgpu=new sV(i),o.canvas=i.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=n,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=n.gl.canvas;return o.textureManager=new DV(o.gpgpu),o.numMBBeforeWarning=X().global.screen==null?1024:X().global.screen.height*X().global.screen.width*window.devicePixelRatio*XV/1024/1024,o.texData=new RT(o,W),o}return Ir(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(n,r,o){if(X().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:o,values:n,usage:Wn.UPLOAD}),i},t.prototype.move=function(n,r,o,i){if(X().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:i,values:r,usage:Wn.UPLOAD})},t.prototype.readSync=function(n){var r=this.texData.get(n),o=r.values,i=r.dtype,a=r.complexTensors,s=r.slice,l=r.shape,u=r.isPacked;if(s!=null){var c=void 0;c=u?new ml(l,Pc):new _e(l,Pc);var d=this.runWebGLProgram(c,[{dataId:n,shape:l,dtype:i}],i),f=this.readSync(d.dataId);return this.disposeData(d.dataId),f}if(o!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return o;var h,p,m=this.activeTimers!=null;return m&&(h=Or()),i==="complex64"?p=Ug(a.real.dataSync(),a.imag.dataSync()):p=this.getValuesFromTexture(n),m&&(this.downloadWaitMs+=Or()-h),this.convertAndCacheOnCPU(n,p)},t.prototype.read=function(n){return le(this,void 0,void 0,function(){var r,o,i,a,s,l,u,c,d,f,h,p,m,y,g,v,x,b,k,E,T,R;return ue(this,function(_){switch(_.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(S){return r.push(S)})];if(o=this.texData.get(n),i=o.values,a=o.shape,s=o.slice,l=o.dtype,u=o.complexTensors,c=o.isPacked,s!=null)return d=void 0,d=c?new ml(a,Pc):new _e(a,Pc),f=this.runWebGLProgram(d,[{dataId:n,shape:a,dtype:l}],l),h=this.read(f.dataId),this.disposeData(f.dataId),[2,h];if(i!=null)return[2,this.convertAndCacheOnCPU(n)];if(!X().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&X().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,l!=="complex64"&&X().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),y=this.texData.get(m.dataId),p=(R=this.gpgpu).createBufferFromTexture.apply(R,[y.texture].concat(Bl(a)))),this.pendingRead.set(n,[]),l==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:_.sent(),_.label=2;case 2:return l!=="complex64"?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return v=_.sent(),x=v[0],b=v[1],g=Ug(x,b),[3,5];case 4:p==null?g=this.getValuesFromTexture(n):(k=de(a),g=this.gpgpu.downloadFloat32MatrixFromBuffer(p,k)),_.label=5;case 5:return m!=null&&this.disposeData(m.dataId),E=this.convertAndCacheOnCPU(n,g),T=this.pendingRead.get(n),this.pendingRead.delete(n),T.forEach(function(S){return S(E)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,E]}})})},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var o=n[r];if(!B6(o))throw X().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(n){var r,o=this.texData.get(n),i=o.shape,a=o.dtype,s=o.isPacked,l=de(i);if(X().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(n),c=this.texData.get(u.dataId),d=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(Bl(i))).subarray(0,l);return this.disposeData(u.dataId),d}var f=X().getBool("WEBGL_PACK")&&s===!0,h=f?Op(i):i,p=f?new Lz(h):new Oz(h),m=this.runWebGLProgram(p,[{shape:h,dtype:a,dataId:n}],"float32"),y=this.texData.get(m.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture,y.texShape[0],y.texShape[1]).subarray(0,l);return this.disposeData(m.dataId),g},t.prototype.time=function(n){return le(this,void 0,void 0,function(){var r,o,i,a,s,l,u;return ue(this,function(c){switch(c.label){case 0:return r=this.activeTimers,o=[],i=!1,this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,n(),a=Os(this.activeTimers.map(function(d){return d.query})).filter(function(d){return d!=null}),s=Os(this.activeTimers.map(function(d){return d.name})).filter(function(d){return d!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return u=c.sent(),l.kernelMs=y6(u),l.getExtraProfileInfo=function(){return u.map(function(d,f){return{name:s[f],ms:d}}).map(function(d){return d.name+": "+d.ms}).join(", ")},[3,3];case 2:l.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Or(),endMs:null}},t.prototype.endTimer=function(n){return X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=Or(),n)},t.prototype.getQueryTime=function(n){return le(this,void 0,void 0,function(){var r;return ue(this,function(o){return X().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),o=r.texture,i=r.dtype,a=r.texShape,s=r.usage,l=r.isPacked,u=r.slice,c=u&&u.origDataId||n,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),o!=null&&(this.numBytesInGPU-=this.computeBytes(a,i),this.textureManager.releaseTexture(o,a,s,l)));var f=this.texData.get(n);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.getCPUBackend=function(){return X().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=W.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,r){var o=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(i){return o.texData.get(i.dataId).texture==null&&i.size<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(n,r){var o=this.makeOutput(n.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:W.keep(n.clone()),imag:W.keep(r.clone())},o},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,o);if(de(o)===0)return Kt([],o,n.dtype);var i=this.texData.get(n.dataId).isPacked,a=ET(n.shape,r,o);if(i||!a){var s=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PV(o):new NV(o),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,l)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,o)},t.prototype.shallowSlice=function(n,r,o){var i=this.texData.get(n.dataId),a=this.makeOutput(o,n.dtype),s=this.texData.get(a.dataId);Object.assign(s,i),s.shape=o,s.dtype=n.dtype;var l=ST(r,n.strides);i.slice&&(l+=i.slice.flatOffset),s.slice={flatOffset:l,origDataId:i.slice&&i.slice.origDataId||n.dataId};var u=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,u+1),a},t.prototype.stridedSlice=function(n,r,o,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,o,i);var a=ay(r,o,i);if(a.some(function(l){return l===0}))return Kt([],a);var s=new AV(r,i,a);return this.compileAndRun(s,[n])},t.prototype.reverse=function(n,r){var o=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TV(n.shape,r):new RV(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var o=n.map(function(h){return sr(h)}),i=n.map(function(h){return jr(h)});return Ut(this.concat(o,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>X().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(n.length/2),s=this.concat(n.slice(0,a),r),l=this.concat(n.slice(a),r);return this.concat([s,l],r)}if(X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var u=new kz(n.map(function(h){return h.shape}),r);return this.compileAndRun(u,n)}var c=Bs(n.map(function(h){return h.shape}),r),d=n.map(function(h){return h.as2D(-1,de(h.shape.slice(r)))}),f=new wz(d.map(function(h){return h.shape}));return this.compileAndRun(f,d).reshape(c)},t.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,X1,n.dtype);var r=new _e(n.shape,X1);return this.compileAndRun(r,[n])},t.prototype.batchMatMul=function(n,r,o,i){var a=o?n.shape[2]:n.shape[1],s=i?r.shape[1]:r.shape[2],l=o?n.shape[1]:n.shape[2],u=n.shape[0];if((a===1||s===1)&&l>1e3){o&&(n=n.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(u,l,1),d=s===1?2:1,f=s===1?r.as3D(u,1,l):r;return this.multiply(c,f).sum(d,!0)}var h=Ht(n.dtype,r.dtype),p=new zp(n.shape,[u,a,s],o,i);return this.compileAndRun(p,[n,r],h)},t.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,i=n.transposeA,a=n.transposeB,s=n.bias,l=n.activation,u=n.preluActivationWeights,c=i?r.shape[2]:r.shape[1],d=a?o.shape[1]:o.shape[2],f=r.shape[0],h=Ht(r.dtype,o.dtype),p=s!=null,m=u!=null,y=l?Dc(l,!0):null,g=new zp(r.shape,[f,c,d],i,a,p,y,m),v=[r,o];return s&&v.push(s),u&&v.push(u),this.compileAndRun(g,v,h)},t.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var o=this.texData.get(n.dataId),i=this.texData.get(r.dataId),a=new L1(gz,n.shape,r.shape),s=new L1(vz,n.shape,r.shape),l=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],u=this.compileAndRun(a,l),c=this.compileAndRun(s,l),d=this.complex(u,c);return u.dispose(),c.dispose(),d}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,B1,n.dtype);var f=new ut(B1,n.shape,r.shape);return this.compileAndRun(f,[n,r],n.dtype)},t.prototype.batchNormalization=function(n,r,o,i,a,s){var l=[n,r,o],u=null;s!=null&&(u=s.shape,l.push(s));var c=null;if(a!=null&&(c=a.shape,l.push(a)),X().getBool("WEBGL_PACK_NORMALIZATION")){var d=new mz(n.shape,r.shape,o.shape,u,c,i);return this.compileAndRun(d,l)}var f=new pz(n.shape,r.shape,o.shape,u,c,i);return this.compileAndRun(f,l)},t.prototype.localResponseNormalization4D=function(n,r,o,i,a){var s=X().getBool("WEBGL_PACK_NORMALIZATION")?new dV(n.shape,r,o,i,a):new uV(n.shape,r,o,i,a);return this.compileAndRun(s,[n])},t.prototype.LRNGrad=function(n,r,o,i,a,s,l){var u=new cV(r.shape,i,a,s,l);return this.compileAndRun(u,[r,o,n])},t.prototype.tile=function(n,r){if(n.dtype==="string"){var o=this.readSync(n.dataId).map(function(a){return Yd(a)});return DT(Se(n.shape,n.dtype,o),r)}var i=new MV(n.shape,r);return this.compileAndRun(i,[n])},t.prototype.pad=function(n,r,o){var i=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yV(n.shape,r,o):new vV(n.shape,r,o);return this.compileAndRun(i,[n])},t.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var o=X().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OV(n.shape,r):new FV(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.gather=function(n,r,o){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,o);var i=new $z(n.shape,r.size,o);return this.compileAndRun(i,[n,r])},t.prototype.batchToSpaceND=function(n,r,o){D(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(d,f){return d*f}),a=nf(n.shape,r,i),s=rf(a.length,r.length),l=of(n.shape,r,i),u=bT(o,r.length),c=wT(l,o,r.length);return n.reshape(a).transpose(s).reshape(l).slice(u,c)},t.prototype.spaceToBatchND=function(n,r,o){D(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(f,h){return f*h}),a=[[0,0]];a.push.apply(a,o);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var l=n.pad(a),u=nf(l.shape,r,i,!1),c=rf(u.length,r.length,!1),d=of(l.shape,r,i,!1);return l.reshape(u).transpose(c).reshape(d)},t.prototype.reduce=function(n,r,o){var i=n.shape[0],a=n.shape[1],s=Lp(a),l=new xV({windowSize:s,inSize:a,batchSize:i},r),u=this.compileAndRun(l,[n],o);return u.shape[1]===1?u:this.reduce(u,r,o)},t.prototype.argReduce=function(n,r,o){o===void 0&&(o=null);var i=n.shape[0],a=n.shape[1];o!=null&&(i=o.shape[0],a=o.shape[1]);var s=Lp(a),l=new iz({windowSize:s,inSize:a,batchSize:i},r,o==null),u=[n];o!=null&&u.push(o);var c=this.compileAndRun(l,u,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},t.prototype.argReducePacked=function(n,r,o){o===void 0&&(o=null);var i=o!=null?o.shape:n.shape,a=Lp(i[i.length-1]),s=new dz(i,a,r,o==null),l=o==null?[n]:[n,o],u=this.compileAndRun(s,l,"int32");return u.rank===n.rank?this.argReducePacked(n,r,u):u},t.prototype.sum=function(n,r){jn("sum",r,n.rank);var o=rn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a),l=Ip(n.dtype);return this.reduce(s,"sum",l).reshape(i)},t.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var o=rn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a),l=Ip(n.dtype);return this.reduce(s,"prod",l).reshape(i)},t.prototype.unsortedSegmentSum=function(n,r,o){var i=0,a=oo([i],n.rank),s=n;a!=null&&(s=n.transpose(a),i=io(1,n.rank)[0]);var l=function(h,p,m){for(var y=[],g=h.length,v=0;v<g;v++)v!==p?y.push(h[v]):y.push(m);return y}(s.shape,i,o),u=de([s.shape[i]]),c=s.as2D(-1,u),d=Ip(n.dtype),f=this.segOpCompute(c,"unsortedSegmentSum",r,d,o).reshape(l);return a!=null&&(f=f.transpose(ny(a))),f},t.prototype.segOpCompute=function(n,r,o,i,a){var s=n.shape[0],l=n.shape[1],u=function(f,h){var p,m=!1;for(f<=CT?(p=f,m=!0):p=Fg(f,Math.floor(Math.sqrt(f)));!m;)p>h||p===f?m=!0:p=Fg(f,p+1);return p}(l,a),c=new _V({windowSize:u,inSize:l,batchSize:s,numSegments:a}),d=this.compileAndRun(c,[n,o],i);return d.shape[1]===a?d:(o=tf(0,a).tile([l/u]),this.segOpCompute(d,r,o,i,a))},t.prototype.argMinMaxReduce=function(n,r,o){var i=[r];if(jn("arg"+o.charAt(0).toUpperCase()+o.slice(1),i,n.rank),!X().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var a=rn(n.shape,i),s=a[0],l=de(a[1]),u=n.as2D(-1,l);return this.argReduce(u,o).reshape(s)}return this.argReducePacked(n,o)},t.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},t.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},t.prototype.cumsum=function(n,r,o,i){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var a=new Pz(n.shape,o,i);return this.compileAndRun(a,[n])},t.prototype.equal=function(n,r){if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var o=new ut("return float(a == b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.notEqual=function(n,r){if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var o=new ut("return float(a != b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var o=new ut("return float(a < b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.lessEqual=function(n,r){if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new ut("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new ut("return float(a > b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.greaterEqual=function(n,r){if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new ut("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.logicalNot=function(n){var r=new _e(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},t.prototype.logicalAnd=function(n,r){if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new ut("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.logicalOr=function(n,r){if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new ut("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.select=function(n,r,o){var i=new IV(n.rank,r.shape,r.rank);return this.compileAndRun(i,[n,r,o],Ht(r.dtype,o.dtype))},t.prototype.where=function(n){Zd("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return cy(n.shape,r)},t.prototype.topk=function(n,r,o){return MT(n.dataSync(),n.shape,n.dtype,r)},t.prototype.min=function(n,r){jn("min",r,n.rank);var o=rn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(i)},t.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var o=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new co(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ut(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.mod=function(n,r){var o=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new co(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ut(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);jn("max",r,n.rank);var o=rn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(i)},t.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var o=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new co(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ut(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.all=function(n,r){jn("all",r,n.rank);var o=rn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(i)},t.prototype.any=function(n,r){jn("any",r,n.rank);var o=rn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(i)},t.prototype.realDivide=function(n,r){if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var o=new ut(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"float32")},t.prototype.floorDiv=function(n,r){if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new ut(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"int32")},t.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Bp);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var o=Ht(n.dtype,r.dtype);if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Bp,o);var i=new ut(Bp,n.shape,r.shape);return this.compileAndRun(i,[n,r],o)},t.prototype.packedUnaryOp=function(n,r,o){var i=new ml(n.shape,r);return this.compileAndRun(i,[n],o)},t.prototype.packedBinaryOp=function(n,r,o,i,a){a===void 0&&(a=!1);var s=new co(o,n.shape,r.shape,a);return this.compileAndRun(s,[n,r],i)},t.prototype.complexSeparableBinaryOp=function(n,r,o){var i=this,a=this.texData.get(n.dataId),s=this.texData.get(r.dataId),l=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(f){var h=f[0],p=f[1],m=i.makeComplexComponentTensorInfo(n,h),y=i.makeComplexComponentTensorInfo(r,p),g=new ut(o,n.shape,r.shape);return i.compileAndRun(g,[m,y],Ht(h.dtype,p.dtype))}),u=l[0],c=l[1],d=this.complex(u,c);return u.dispose(),c.dispose(),d},t.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},t.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>X().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),o=this.addN(n.slice(0,r)),i=this.addN(n.slice(r));return this.addN([o,i])}var a=n.map(function(u){return u.dtype}).reduce(function(u,c){return Ht(u,c)}),s=n.map(function(u){return u.shape}),l=X().getBool("WEBGL_PACK")?new oz(n[0].shape,s):new rz(n[0].shape,s);return this.compileAndRun(l,n,a)},t.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,jp);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var o=Ht(n.dtype,r.dtype);if(X().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,jp,n.dtype);var i=new ut(jp,n.shape,r.shape);return this.compileAndRun(i,[n,r],o)},t.prototype.pow=function(n,r){var o=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new co(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ut(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),i=Ht(n.dtype,r.dtype);return this.compileAndRun(o,[n,r],i)},t.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Y1,n.dtype);var r=new _e(n.shape,Y1);return this.compileAndRun(r,[n])},t.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Q1,n.dtype);var r=new _e(n.shape,Q1);return this.compileAndRun(r,[n])},t.prototype.sign=function(n){var r=new _e(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},t.prototype.isNaN=function(n){var r=new _e(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isInf=function(n){var r=new _e(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isFinite=function(n){var r=new _e(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.round=function(n){var r=new _e(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},t.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,J1,n.dtype);var r=new _e(n.shape,J1);return this.compileAndRun(r,[n])},t.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Z1,n.dtype);var r=new _e(n.shape,Z1);return this.compileAndRun(r,[n])},t.prototype.softmax=function(n,r){var o=Pt([r],n.shape),i=this.max(n,o),a=Mn(i.shape,o),s=this.subtract(n,i.reshape(a)),l=this.exp(s),u=this.sum(l,o).reshape(a);return this.realDivide(l,u)},t.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new _e(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},t.prototype.log1p=function(n){var r=new _e(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},t.prototype.sqrt=function(n){var r=new _e(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new _e(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},t.prototype.reciprocal=function(n){var r=new _e(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},t.prototype.relu=function(n){var r;return r=X().getBool("WEBGL_PACK")?new ml(n.shape,$T):new _e(n.shape,zT),this.compileAndRun(r,[n])},t.prototype.relu6=function(n){var r;return r=X().getBool("WEBGL_PACK")?new ml(n.shape,UT):new _e(n.shape,VT),this.compileAndRun(r,[n])},t.prototype.prelu=function(n,r){var o=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new co(jT,n.shape,r.shape):new ut(BT,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.elu=function(n){if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,HT,n.dtype);var r=new _e(n.shape,WT);return this.compileAndRun(r,[n])},t.prototype.eluDer=function(n,r){var o=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new co(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new ut("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.selu=function(n){var r=new _e(n.shape,BV);return this.compileAndRun(r,[n])},t.prototype.int=function(n){var r=new _e(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},t.prototype.clip=function(n,r,o){var i,a=(i=X().getBool("WEBGL_PACK_CLIP")?new xz(n.shape):new yz(n.shape)).getCustomSetupFunc(r,o);return this.compileAndRun(i,[n],null,a)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(X().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,q1,n.dtype);var r=new _e(n.shape,q1);return this.compileAndRun(r,[n])},t.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),o=new bz(n.shape),i=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(o,i)},t.prototype.sigmoid=function(n){var r=new _e(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},t.prototype.softplus=function(n){var r=new _e(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},t.prototype.sin=function(n){var r=new _e(n.shape,jV);return this.compileAndRun(r,[n])},t.prototype.cos=function(n){var r=new _e(n.shape,zV);return this.compileAndRun(r,[n])},t.prototype.tan=function(n){var r=new _e(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},t.prototype.asin=function(n){var r=new _e(n.shape,VV);return this.compileAndRun(r,[n])},t.prototype.acos=function(n){var r=new _e(n.shape,WV);return this.compileAndRun(r,[n])},t.prototype.atan=function(n){var r=new _e(n.shape,$V);return this.compileAndRun(r,[n])},t.prototype.atan2=function(n,r){var o=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new co(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new ut(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.sinh=function(n){var r=new _e(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.cosh=function(n){var r=new _e(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.tanh=function(n){var r=new _e(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},t.prototype.asinh=function(n){var r=new _e(n.shape,UV);return this.compileAndRun(r,[n])},t.prototype.acosh=function(n){var r=new _e(n.shape,HV);return this.compileAndRun(r,[n])},t.prototype.atanh=function(n){var r=new _e(n.shape,GV);return this.compileAndRun(r,[n])},t.prototype.erf=function(n){var r=new _e(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},t.prototype.step=function(n,r){var o=new _e(n.shape,function(i){return i===void 0&&(i=0),Nr+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(o,[n])},t.prototype.conv2dByMatMul=function(n,r,o,i,a,s){var l=n.shape,u=this.texData.get(n.dataId),c=o.inChannels,d=l[0]*l[1]*l[2],f=o.outChannels,h=o.dataFormat==="channelsLast",p=(d===1||f===1)&&c>1e3,m=l[2]%2!=0&&!!u.isPacked;if(p||!X().getBool("WEBGL_LAZILY_UNPACK")||!X().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var y=h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],g=this.reshape(n,[1,y,o.inChannels]),v=this.reshape(r,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:g,b:v,transposeA:!1,transposeB:!1,bias:i,activation:a,preluActivationWeights:s}),o.outShape)}var x=h?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),b={dataId:n.dataId,shape:[1,x,o.inChannels],dtype:n.dtype},k=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,D(Ic(u.shape,b.shape),function(){return"packed reshape "+u.shape+" to "+b.shape+" isn't free"});var E=this.reshape(r,[1,o.inChannels,o.outChannels]),T=this.fusedBatchMatMul({a:b,b:E,transposeA:!1,transposeB:!1,bias:i,activation:a,preluActivationWeights:s}),R=this.texData.get(T.dataId);return D(R.isPacked,function(){return"batchMatMul result is expected to be packed"}),u.shape=k,R.shape=o.outShape,W.makeTensorFromDataId(T.dataId,o.outShape,T.dtype)},t.prototype.conv2dWithIm2Row=function(n,r,o,i,a,s){var l=o.filterWidth,u=o.filterHeight,c=o.inChannels,d=o.outWidth,f=o.outHeight,h=o.dataFormat==="channelsLast",p=l*u*c,m=f*d,y=[p,m],g=n.squeeze([0]),v=r.reshape([1,p,-1]),x=new lV(y,g.shape,o),b=this.compileAndRun(x,[g]).reshape([1,y[0],y[1]]),k=i!=null,E=s!=null,T=a?Dc(a,!0):null,R=new zp(b.shape,[1,m,o.outChannels],!0,!1,k,T,E),_=[b,v];i&&_.push(i),E&&_.push(s);var S=this.compileAndRun(R,_);return h?S.reshape([1,f,d,o.outChannels]):S.reshape([1,o.outChannels,f,d])},t.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,l=n.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,o,i,a,s,l);if(X().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,o,i,a,s,l);var u=a!=null,c=l!=null,d=s?Dc(s,!1):null,f=new j1(i,u,d,c),h=[r,o];return a&&h.push(a),l&&h.push(l),this.compileAndRun(f,h)},t.prototype.conv2d=function(n,r,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,o);if(X().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,o);var i=new j1(o);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerInput=function(n,r,o){var i=new Ez(o);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerFilter=function(n,r,o){var i=new Cz(o);return this.compileAndRun(i,[n,r])},t.prototype.fusedDepthwiseConv2D=function(n){var r,o=n.input,i=n.filter,a=n.convInfo,s=n.bias,l=n.activation,u=n.preluActivationWeights,c=X().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,d=l?Dc(l,c):null,f=[o,i],h=s!=null,p=u!=null;return h&&f.push(s),p&&f.push(u),c?(r=new V1(a,h,d,p),this.compileAndRun(r,f)):(r=new z1(a,h,d,p),this.compileAndRun(r,f))},t.prototype.depthwiseConv2D=function(n,r,o){var i;return X().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(i=new V1(o),this.compileAndRun(i,[n,r])):(i=new z1(o),this.compileAndRun(i,[n,r]))},t.prototype.depthwiseConv2DDerInput=function(n,r,o){var i=new _z(o);return this.compileAndRun(i,[n,r])},t.prototype.depthwiseConv2DDerFilter=function(n,r,o){var i=new Tz(o);return this.compileAndRun(i,[n,r])},t.prototype.conv3d=function(n,r,o){var i=new Iz(o);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerInput=function(n,r,o){var i=new Rz(o);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerFilter=function(n,r,o){var i=new Sz(o);return this.compileAndRun(i,[n,r])},t.prototype.maxPool=function(n,r){var o=new Vp(r,"max",!1);return this.compileAndRun(o,[n])},t.prototype.avgPool=function(n,r){var o=new Vp(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.maxPoolBackprop=function(n,r,o,i){var a=new Vp(i,"max",!0),s=this.compileAndRun(a,[r]),l=new fV(i),u=this.compileAndRun(l,[n,s],r.dtype);return s.dispose(),u},t.prototype.avgPoolBackprop=function(n,r,o){var i=new fz(o);return this.compileAndRun(i,[n],r.dtype)},t.prototype.cast=function(n,r){return IT(n,r,this)},t.prototype.unstack=function(n,r){for(var o=n.shape[r],i=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(i[a++]=n.shape[s]);var l=new Array(n.rank).fill(0),u=n.shape.slice();u[r]=1;var c=new Array(o);for(s=0;s<c.length;s++)l[r]=s,c[s]=this.slice(n,l,u).reshape(i);return c},t.prototype.avgPool3d=function(n,r){var o=new Wp(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.avgPool3dBackprop=function(n,r,o){var i=new hz(o);return this.compileAndRun(i,[n],r.dtype)},t.prototype.maxPool3d=function(n,r){var o=new Wp(r,"max",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.maxPool3dBackprop=function(n,r,o,i){var a=new Wp(i,"max",!0),s=this.compileAndRun(a,[r]),l=new hV(i),u=this.compileAndRun(l,[n,s],r.dtype);return s.dispose(),u},t.prototype.reshape=function(n,r){var o=this.texData.get(n.dataId);if(o.isPacked&&!Ic(n.shape,r)&&(o.texture===null||!Ic(o.shape,r))){var i=this.packedReshape(n,r);return W.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return $g(n,r)},t.prototype.resizeBilinear=function(n,r,o,i){var a=X().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new CV(n.shape,r,o,i):new kV(n.shape,r,o,i);return this.compileAndRun(a,[n],"float32")},t.prototype.resizeBilinearBackprop=function(n,r,o){var i=new wV(n,r,o);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighbor=function(n,r,o,i){var a=new SV(n.shape,r,o,i);return this.compileAndRun(a,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,r,o){var i=new EV(n,r,o);return this.compileAndRun(i,[n])},t.prototype.multinomial=function(n,r,o,i){var a=r?n:Lo(n),s=a.shape[0],l=a.shape[1],u=new pV(s,l,o),c=u.getCustomSetupFunc(i);return this.compileAndRun(u,[a],"int32",c)},t.prototype.oneHot=function(n,r,o,i){var a=new mV(n.size,r,o,i);return this.compileAndRun(a,[n])},t.prototype.diag=function(n){var r=new Fz(n.size);return this.compileAndRun(r,[n])},t.prototype.nonMaxSuppression=function(n,r,o,i,a){return Zd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),ly(n.dataSync(),r.dataSync(),o,i,a)},t.prototype.cropAndResize=function(n,r,o,i,a,s){var l=new Nz(n.shape,r.shape,i,a,s);return this.compileAndRun(l,[n,r,o],"float32")},t.prototype.depthToSpace=function(n,r,o){D(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=n.shape[0],a=o==="NHWC"?n.shape[1]:n.shape[2],s=o==="NHWC"?n.shape[2]:n.shape[3],l=o==="NHWC"?n.shape[3]:n.shape[1],u=a*r,c=s*r,d=l/(r*r),f=new Mz(o==="NHWC"?[i,u,c,d]:[i,d,u,c],r,o);return this.compileAndRun(f,[n])},t.prototype.split=function(n,r,o){return AT(n,r,o)},t.prototype.scatterND=function(n,r,o){var i=af(0,n,o),a=i.sliceRank,s=i.numUpdates,l=i.sliceSize,u=i.strides,c=i.outputSize,d=[c/l,l],f=n.reshape([s,a]),h=r.reshape([s,l]);if(c===0)return $g(Kt([]),o);var p=ne(0),m=new H1(s,a,f.rank,h.rank,u,d);return this.compileAndRun(m,[h,f,p]).reshape(o)},t.prototype.sparseToDense=function(n,r,o,i){var a=af(0,n,o),s=a.sliceRank,l=a.numUpdates,u=a.strides,c=a.outputSize,d=new H1(l,s,n.rank,r.rank,u,[c,1]);return this.compileAndRun(d,[r,n,i]).reshape(o)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,r){var o=this.texData.get(n.dataId),i=new $1(zz,n.shape,r),a=new $1(Vz,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag)],l=this.compileAndRun(i,s),u=this.compileAndRun(a,s),c=this.complex(l,u).as2D(n.shape[0],n.shape[1]);return l.dispose(),u.dispose(),c},t.prototype.gatherND=function(n,r){var o=r.shape,i=o[o.length-1],a=kT(n,r),s=a[0],l=a[1],u=a[2],c=a[3],d=r.reshape([l,i]),f=n.reshape([n.size/u,u]),h=new Uz(i,c,[l,u]);return this.compileAndRun(h,[f,d]).reshape(s)},t.prototype.fill=function(n,r,o){if((o=o||Vu(r))==="string"){var i=Xd(o,de(n));return i.fill(r),W.makeTensor(i,n,o,this)}var a=new Wz(n,r),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[],o,s)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.linspace=function(n,r,o){return NT(n,r,o)},t.prototype.makeTensorInfo=function(n,r){var o=this.write(null,n,r);return this.texData.get(o).usage=null,{dataId:o,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r){var o=this.makeTensorInfo(n,r).dataId;return W.makeTensorFromDataId(o,n,r,this)},t.prototype.unpackTensor=function(n){var r=new qV(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new gV(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},t.prototype.packedReshape=function(n,r){var o=[Qd(n.shape)].concat(Jd(n.shape)),i={dtype:n.dtype,shape:o,dataId:n.dataId},a=[Qd(r)].concat(Jd(r)),s=new bV(a,o),l=this.runWebGLProgram(s,[i],n.dtype,null,!0);return{dataId:l.dataId,shape:r,dtype:l.dtype}},t.prototype.decode=function(n){var r,o=this.texData.get(n),i=o.isPacked,a=o.shape,s=o.dtype,l=Op(a);return r=i?new Dz(l):new Az(l),{dtype:s,shape:a,dataId:this.runWebGLProgram(r,[{shape:l,dtype:s,dataId:n}],s,null,!0).dataId}},t.prototype.runWebGLProgram=function(n,r,o,i,a){var s=this;a===void 0&&(a=!1);var l=this.makeTensorInfo(n.outputShape,o),u=this.texData.get(l.dataId);if(n.packedOutput&&(u.isPacked=!0),n.outPackingScheme===vu.DENSE){var c=Bl(n.outputShape);u.texShape=c.map(function(x){return 2*x})}if(n.outTexUsage!=null&&(u.usage=n.outTexUsage),de(l.shape)===0)return u.values=mu(l.dtype,0),l;var d=[],f=r.map(function(x){if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var b=s.texData.get(x.dataId);if(b.texture==null){if(!n.packedInputs&&de(x.shape)<=X().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:b.values};n.packedInputs&&(b.isPacked=!0,b.shape=x.shape)}else if(!!b.isPacked!=!!n.packedInputs)x=b.isPacked?s.unpackTensor(x):s.packTensor(x),d.push(x),b=s.texData.get(x.dataId);else if(b.isPacked&&!Ic(b.shape,x.shape)){var k=x,E=x.shape;x.shape=b.shape,x=s.packedReshape(x,E),d.push(x),b=s.texData.get(x.dataId),k.shape=E}return s.uploadToGPU(x.dataId),{shape:x.shape,texData:b,isUniform:!1}});this.uploadToGPU(l.dataId);var h,p={shape:l.shape,texData:u,isUniform:!1},m=function(x,b,k){var E="";b.concat(k).forEach(function(_){var S=_.texData!=null&&_.texData.slice!=null&&_.texData.slice.flatOffset>0,A=_.isUniform?"uniform":_.texData.texShape;E+=_.shape+"_"+A+"_"+S});var T=x.userCode,R=x.constructor.name;return R+="_"+E+"_"+T}(n,f,p),y=this.getAndSaveBinary(m,function(){return function(x,b,k,E){var T=b.userCode,R=k.map(function(P,B){var L={logicalShape:P.shape,texShape:P.isUniform?null:P.texData.texShape,isUniform:P.isUniform,isPacked:!P.isUniform&&P.texData.isPacked,flatOffset:null};return P.texData!=null&&P.texData.slice!=null&&P.texData.slice.flatOffset>0&&(L.flatOffset=P.texData.slice.flatOffset),{name:b.variableNames[B],shapeInfo:L}}),_=R.map(function(P){return P.shapeInfo}),S={logicalShape:E.shape,texShape:E.texData.texShape,isUniform:!1,isPacked:E.texData.isPacked,flatOffset:null},A=az(R,S,T,b.packedInputs),N=x.createProgram(A),O=null,M=x.getUniformLocation(N,"NAN",!1);X().getNumber("WEBGL_VERSION")===1&&(O=x.getUniformLocation(N,"INFINITY",!1));for(var F={},V=0;V<b.variableNames.length;V++){var z=b.variableNames[V];F[z]=x.getUniformLocation(N,z,!1),F["offset"+z]=x.getUniformLocation(N,"offset"+z,!1)}return{program:b,source:A,webGLProgram:N,uniformLocations:F,inShapeInfos:_,outShapeInfo:S,infLoc:O,nanLoc:M}}(s.gpgpu,n,f,p)}),g=this.activeTimers!=null;if(g&&(h=this.startTimer()),function(x,b,k,E,T){U1(b.inShapeInfos,k),U1([b.outShapeInfo],[E]);var R=E.texData.texture,_=E.texData.texShape;E.texData.isPacked?x.setOutputPackedMatrixTexture(R,_[0],_[1]):x.setOutputMatrixTexture(R,_[0],_[1]),x.setProgram(b.webGLProgram),X().getNumber("WEBGL_VERSION")===1&&b.infLoc!==null&&x.gl.uniform1f(b.infLoc,1/0),b.nanLoc!==null&&x.gl.uniform1f(b.nanLoc,NaN),k.forEach(function(S,A){var N=b.program.variableNames[A],O=b.uniformLocations[N],M=b.uniformLocations["offset"+N];if(O!=null)if(S.isUniform)if(de(S.shape)<2)x.gl.uniform1f(O,S.uniformValues[0]);else{var F=S.uniformValues;F instanceof Float32Array||(F=new Float32Array(F)),x.gl.uniform1fv(O,F)}else S.texData.slice!=null&&M!=null&&x.gl.uniform1i(M,S.texData.slice.flatOffset),x.setInputMatrixTexture(S.texData.texture,O,A)}),T!=null&&T(x,b.webGLProgram),x.executeProgram()}(this.gpgpu,y,f,p,i),d.forEach(function(x){return s.disposeData(x.dataId)}),g&&(h=this.endTimer(h),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(h)})),!X().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&a===!1){var v=this.unpackTensor(l);return this.disposeData(l.dataId),v}return l},t.prototype.compileAndRun=function(n,r,o,i,a){a===void 0&&(a=!1),o=o||r[0].dtype;var s=this.runWebGLProgram(n,r,o,i,a);return W.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;this.disposed||(X().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=oe(function(){if(!X().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=X().getBool("DEBUG");X().set("DEBUG",!1);var o=n.abs(ne(1e-8)).dataSync()[0];if(X().set("DEBUG",r),o>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(n){var r,o=this.texData.get(n),i=o.shape,a=o.dtype,s=o.values,l=o.texture,u=o.usage,c=o.isPacked;if(l==null){var d,f=this.activeTimers!=null;f&&(d=Or());var h=o.texShape;if(h==null&&(h=n7(i,c),o.texShape=h),s!=null){var p=Op(i),m=void 0,y=h[1],g=h[0],v=s instanceof Uint8Array;c?(y=(r=$u(h[0],h[1]))[0],g=r[1],m=new jz(p,[g,y],v)):m=new Bz(p,[g,y],v);var x=this.makeTensorInfo([g,y],a);this.texData.get(x.dataId).usage=v?Wn.PIXELS:Wn.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),y,g,s);var b=this.runWebGLProgram(m,[x],a,null,!0),k=this.texData.get(b.dataId);o.texture=k.texture,o.texShape=k.texShape,o.isPacked=k.isPacked,o.usage=k.usage,this.disposeData(x.dataId),this.texData.delete(b.dataId),o.values=null,f&&(this.uploadWaitMs+=Or()-d)}else{var E=this.acquireTexture(h,u,a,c);o.texture=E}}},t.prototype.convertAndCacheOnCPU=function(n,r){var o=this.texData.get(n),i=o.dtype;return this.releaseGPUData(n),r!=null&&(o.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var l=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),u=0;u<l.length;++u)l[u]=Math.round(a[u]);return l}throw new Error("Unknown dtype "+s)}(r,i)),o.values},t.prototype.acquireTexture=function(n,r,o,i){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,i)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*oT(r)},t}(TT);dT()&&W.registerBackend("webgl",function(){return new YV},2);var QV=j({square_:function(e){var t=I(e,"x","square"),n=[t];return W.runKernelFunc(function(r,o){return o([t]),r.square(t)},{x:t},null,"Square",{},n,[])}}),xu="SquaredDifference",GT=j({squaredDifference_:function(e,t){var n,r=I(e,"a","squaredDifference"),o=I(t,"b","squaredDifference");n=lt(r,o),r=n[0],o=n[1],Ne(r.shape,o.shape);var i={a:r,b:o},a=[r,o];return W.runKernelFunc(function(s,l){var u=s.squaredDifference(r,o);return l([r,o]),u},i,function(s,l){var u=l[0],c=l[1],d=ne(2);return{a:function(){return s.mul(u.sub(c).mul(d))},b:function(){return s.mul(c.sub(u).mul(d))}}},xu,{},a,[])}}),JV=j({abs_:function(e){var t=I(e,"x","abs");return t.dtype==="complex64"?W.runKernelFunc(function(n){return n.complexAbs(t)},{$x:t}):W.runKernelFunc(function(n,r){var o=n.abs(t);return r([t]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mul(o.toFloat().step(-1))}}},"Abs")}}),ZV=j({acos_:function(e){var t=I(e,"x","acos");return W.runKernelFunc(function(n,r){var o=n.acos(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(ne(1).sub(o.toFloat().square()).sqrt()).neg()}}})}}),e8=j({acosh_:function(e){var t=I(e,"x","acosh");return W.runKernelFunc(function(n,r){var o=n.acosh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}})}}),t8=j({asin_:function(e){var t=I(e,"x","asin");return W.runKernelFunc(function(n,r){var o=n.asin(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(ne(1).sub(o.toFloat().square()).sqrt())}}})}}),n8=j({asinh_:function(e){var t=I(e,"x","asinh");return W.runKernelFunc(function(n,r){var o=n.asinh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(ne(1).add(o.toFloat().square()).sqrt())}}})}}),r8=j({atan_:function(e){var t=I(e,"x","atan");return W.runKernelFunc(function(n,r){var o=n.atan(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}})}}),o8=j({atanh_:function(e){var t=I(e,"x","atanh");return W.runKernelFunc(function(n,r){var o=n.atanh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(ne(1).sub(o.toFloat().square()))}}})}}),i8=j({ceil_:function(e){var t=I(e,"x","ceil");return W.runKernelFunc(function(n){return n.ceil(t)},{$x:t},function(n){return{$x:function(){return De(n)}}})}}),py=j({clipByValue_:function(e,t,n){var r=I(e,"x","clipByValue");D(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var o=[r],i={min:t,max:n};return W.runKernelFunc(function(a,s){var l=a.clip(r,t,n);return s([r]),l},{x:r},function(a,s){var l=s[0];return{x:function(){return a.where(l.greaterEqual(t).logicalAnd(l.lessEqual(n)),De(a))}}},"ClipByValue",i,o)}}),a8=j({cos_:function(e){var t=I(e,"x","cos"),n=[t];return W.runKernelFunc(function(r,o){var i=r.cos(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),s8=j({cosh_:function(e){var t=I(e,"x","cosh");return W.runKernelFunc(function(n,r){var o=n.cosh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}})}}),l8=j({erf_:function(e){var t=I(e,"x","erf");return D(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),W.runKernelFunc(function(n,r){var o=n.erf(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Hg=j({exp_:function(e){var t=I(e,"x","exp");return W.runKernelFunc(function(n,r){var o=n.exp(t);return r([o]),o},{x:t},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),u8=j({expm1_:function(e){var t=I(e,"x","expm1");return W.runKernelFunc(function(n,r){var o=n.expm1(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}})}}),c8=j({floor_:function(e){var t=I(e,"x","floor");return W.runKernelFunc(function(n){return n.floor(t)},{$x:t},function(n){return{$x:function(){return De(n)}}})}}),d8=j({log_:function(e){var t=I(e,"x","log"),n=[t];return W.runKernelFunc(function(r,o){var i=r.log(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},n)}}),f8=j({log1p_:function(e){var t=I(e,"x","log1p");return W.runKernelFunc(function(n,r){var o=n.log1p(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}})}}),h8=j({logSigmoid_:function(e){var t=I(e,"x","logSigmoid");return W.runKernelFunc(function(n,r){var o=n.softplus(t.neg()).neg();return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}})}}),cf=j({neg_:function(e){var t=I(e,"x","neg"),n=[t];return W.runKernelFunc(function(r){return r.neg(t)},{x:t},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),p8=j({reciprocal_:function(e){var t=I(e,"x","reciprocal");return W.runKernelFunc(function(n,r){var o=n.reciprocal(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}})}}),m8=j({round_:function(e){var t=I(e,"x","round");return W.runKernelFunc(function(n){return n.round(t)},{$x:t},function(n){return{$x:function(){return De(n)}}})}}),KT=j({rsqrt_:function(e){var t=I(e,"x","rsqrt"),n=[t];return W.runKernelFunc(function(r,o){var i=r.rsqrt(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),qT=j({sigmoid_:function(e){var t=I(e,"x","sigmoid");return W.runKernelFunc(function(n,r){var o=n.sigmoid(t);return r([o]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mul(o.mul(ne(1).sub(o)))}}},"Sigmoid")}}),g8=j({sign_:function(e){var t=I(e,"x","sign");return W.runKernelFunc(function(n){return n.sign(t)},{$x:t},function(n){return{$x:function(){return De(n)}}})}}),v8=j({isNaN_:function(e){var t=I(e,"x","isNaN");return W.runKernelFunc(function(n){return n.isNaN(t)},{$x:t},function(n){return{$x:function(){return De(n)}}})}}),y8=j({isInf_:function(e){var t=I(e,"x","isInf");return W.runKernelFunc(function(n){return n.isInf(t)},{$x:t},function(n){return{$x:function(){return De(n)}}})}}),x8=j({isFinite_:function(e){var t=I(e,"x","isFinite");return W.runKernelFunc(function(n){return n.isFinite(t)},{$x:t},function(n){return{$x:function(){return De(n)}}})}}),b8=j({sin_:function(e){var t=I(e,"x","sin"),n=[t];return W.runKernelFunc(function(r,o){var i=r.sin(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},n)}}),w8=j({sinh_:function(e){var t=I(e,"x","sinh");return W.runKernelFunc(function(n,r){var o=n.sinh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}})}}),k8=j({softplus_:function(e){var t=I(e,"x","softplus");return W.runKernelFunc(function(n,r){var o=n.softplus(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}})}}),C8=j({sqrt_:function(e){var t=I(e,"x","sqrt");return W.runKernelFunc(function(n,r){var o=n.sqrt(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}})}}),E8=j({step_:function(e,t){t===void 0&&(t=0);var n=I(e,"x","step");return W.runKernelFunc(function(r){return r.step(n,t)},{$x:n},function(r){return{$x:function(){return De(r)}}})}}),S8=j({tan_:function(e){var t=I(e,"x","tan");return W.runKernelFunc(function(n,r){var o=n.tan(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}})}}),R8=j({tanh_:function(e){var t=I(e,"x","tanh");return W.runKernelFunc(function(n,r){var o=n.tanh(t);return r([o]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return ne(1).sub(o.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function XT(e,t,n,r,o,i){var a,s,l=I(e,"x","batchNorm"),u=I(t,"mean","batchNorm"),c=I(n,"variance","batchNorm");return o!=null&&(a=I(o,"scale","batchNorm")),r!=null&&(s=I(r,"offset","batchNorm")),D(l.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),D(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+u.rank+"."}),D(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&D(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&D(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Hu(l,u,c,s,a,i)}function YT(e,t,n,r,o,i){var a,s,l=I(e,"x","batchNorm"),u=I(t,"mean","batchNorm"),c=I(n,"variance","batchNorm");return o!=null&&(a=I(o,"scale","batchNorm")),r!=null&&(s=I(r,"offset","batchNorm")),D(l.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),D(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+u.rank+"."}),D(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&D(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&D(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Hu(l,u,c,s,a,i)}function QT(e,t,n,r,o,i){var a,s,l=I(e,"x","batchNorm"),u=I(t,"mean","batchNorm"),c=I(n,"variance","batchNorm");return o!=null&&(a=I(o,"scale","batchNorm")),r!=null&&(s=I(r,"offset","batchNorm")),D(l.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),D(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+u.rank+"."}),D(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&D(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&D(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Hu(l,u,c,s,a,i)}function Hu(e,t,n,r,o,i){i==null&&(i=.001);var a,s,l,u=I(e,"x","batchNorm"),c=I(t,"mean","batchNorm"),d=I(n,"variance","batchNorm");o!=null&&(a=I(o,"scale","batchNorm")),r!=null&&(s=I(r,"offset","batchNorm")),D(c.rank===d.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),D(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),D(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),l=u.rank===0||u.rank===1?u.as4D(1,1,1,u.size):u.rank===2?u.as4D(1,1,u.shape[0],u.shape[1]):u.rank===3?u.as4D(1,u.shape[0],u.shape[1],u.shape[2]):u;var f=[u,c,d,a];return W.runKernelFunc(function(h,p){var m=h.batchNormalization(l,Mc(c),Mc(d),i,Mc(a),Mc(s));return p([u,c,d,a]),m},{x:u,mean:c,variance:d,scale:a,offset:s},function(h,p){var m=p,y=m[0],g=m[1],v=m[2],x=m[3],b=x??ne(1),k=It(g.shape,l.shape),E=[];if(g.rank===1){for(var T=0;T<l.shape.length-1;++T)E.push(l.shape[T]);E.push(1)}var R=y.sub(g),_=h.mul(b),S=KT(v.add(ne(i))),A=S.mul(S).mul(S).mul(ne(-.5));return{x:function(){return g.rank===1?h.mul(gs(S.as4D(1,1,1,g.shape[0]),E)).mul(b).reshape(y.shape):h.mul(S).mul(b).reshape(y.shape)},mean:function(){var N=S.mul(ne(-1)).mul(_);return g.rank===1&&(N=N.sum(k)),N.reshape(g.shape)},variance:function(){var N=A.mul(R).mul(_);return g.rank===1&&(N=N.sum(k)),N.reshape(g.shape)},scale:function(){var N=R.mul(S),O=h.mul(N);return g.rank===1&&(O=O.sum(k)),O.reshape(g.shape)},offset:function(){var N=h;return g.rank===1&&(N=N.sum(k)),N.reshape(g.shape)}}},"BatchNormalization",{varianceEpsilon:i},f).reshape(u.shape)}function Mc(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function uh(){fT("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var T8=j({batchNormalization2d_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),uh(),XT(e,t,n,i,o,r)}}),_8=j({batchNormalization3d_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),uh(),YT(e,t,n,i,o,r)}}),I8=j({batchNormalization4d_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),uh(),QT(e,t,n,i,o,r)}}),N8=j({batchNormalization_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),uh(),Hu(e,t,n,i,o,r)}}),JT=j({batchNorm_:Hu}),P8=j({batchNorm2d_:XT}),A8=j({batchNorm3d_:YT}),D8=j({batchNorm4d_:QT}),ch=j({logicalAnd_:function(e,t){var n=I(e,"a","logicalAnd","bool"),r=I(t,"b","logicalAnd","bool");return Ne(n.shape,r.shape),W.runKernelFunc(function(o){return o.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),M8=j({logicalNot_:function(e){var t=I(e,"x","logicalNot","bool");return W.runKernelFunc(function(n){return n.logicalNot(t)},{$x:t})}}),ZT=j({logicalOr_:function(e,t){var n=I(e,"a","logicalOr","bool"),r=I(t,"b","logicalOr","bool");return Ne(n.shape,r.shape),W.runKernelFunc(function(o){return o.logicalOr(n,r)},{$a:n,$b:r})}}),F8=j({logicalXor_:function(e,t){var n=I(e,"a","logicalXor","bool"),r=I(t,"b","logicalXor","bool");return Ne(n.shape,r.shape),ZT(e,t).logicalAnd(ch(e,t).logicalNot())}}),ha=j({where_:function(e,t,n){var r=I(t,"a","where"),o=I(n,"b","where"),i=I(e,"condition","where","bool");return Be(r.shape,o.shape,"Error in where: "),i.rank===1?D(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Be(i.shape,o.shape,"Error in where: "),W.runKernelFunc(function(a,s){var l=a.select(i,r,o);return s([i]),l},{$condition:i,$a:r,$b:o},function(a,s){var l=s[0];return{$condition:function(){return De(l).toFloat()},$a:function(){return a.mul(l.cast(a.dtype))},$b:function(){return a.mul(l.logicalNot().cast(a.dtype))}}})}}),e_=function(e){return le(this,void 0,void 0,function(){var t,n,r;return ue(this,function(o){switch(o.label){case 0:return[4,(t=I(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=cy(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},Ie=j({add_:function(e,t){var n,r=I(e,"a","add"),o=I(t,"b","add");n=lt(r,o),r=n[0],o=n[1];var i=Ne(r.shape,o.shape);return W.runKernelFunc(function(a){return a.add(r,o)},{a:r,b:o},function(a){return{a:function(){var s=a,l=It(r.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)},b:function(){var s=a,l=It(o.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(o.shape)}}},"Add")}}),O8=j({addN_:function(e){D(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),D(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(o,i){return I(o,"tensors"+i,"addN")}),n=t[0];t.forEach(function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(o){if(!Bt(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return W.runKernelFunc(function(o){return o.addN(t)},r,function(o){var i={};return t.forEach(function(a,s){i[s]=function(){return o.clone()}}),i},"AddN")}}),L8=j({addStrict_:function(e,t){var n=I(e,"a","addStrict"),r=I(t,"b","addStrict");return Be(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),B8=j({atan2_:function(e,t){var n,r=I(e,"a","atan2"),o=I(t,"b","atan2");n=lt(r,o),r=n[0],o=n[1];var i=Ne(r.shape,o.shape);return W.runKernelFunc(function(a,s){var l=a.atan2(r,o);return s([r,o]),l},{$a:r,$b:o},function(a,s){var l=s[0],u=s[1];return{$a:function(){var c=Ie(l.square(),u.square()),d=a.mul(u.div(c)),f=It(l.shape,i);return f.length>0&&(d=d.sum(f)),d.reshape(l.shape)},$b:function(){var c=Ie(l.square(),u.square()),d=cf(a.mul(l.div(c))),f=It(u.shape,i);return f.length>0&&(d=d.sum(f)),d.reshape(u.shape)}}})}}),Cr=j({div_:function(e,t){var n,r=I(e,"a","div"),o=I(t,"b","div");if(n=lt(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return t_(r,o);var i=Ne(r.shape,o.shape);return W.runKernelFunc(function(a,s){var l=a.realDivide(r,o);return s([r,o]),l},{a:r,b:o},function(a,s){var l=s[0],u=s[1];return{a:function(){var c=a.div(u.toFloat()),d=It(l.shape,i);return d.length>0?c.sum(d).reshape(l.shape):c},b:function(){var c=a.mul(l.toFloat()),d=It(u.shape,i);d.length>0&&(c=c.sum(d).reshape(u.shape));var f=u.square();return c.div(f.toFloat()).neg()}}},"Div")}}),j8=j({divNoNan_:function(e,t){var n,r=I(e,"a","div"),o=I(t,"b","div");r=(n=lt(r,o))[0],o=n[1];var i=Cr(r,o),a=De(i),s=o.equal(a);return ha(s,a,i)}}),z8=j({divStrict_:function(e,t){var n=I(e,"a","div"),r=I(t,"b","div");return Be(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),t_=j({floorDiv_:function(e,t){var n,r=I(e,"a","floorDiv"),o=I(t,"b","floorDiv");n=lt(r,o),r=n[0],o=n[1];var i=Ne(r.shape,o.shape);return W.runKernelFunc(function(a,s){var l=a.floorDiv(r,o);return s([r,o]),l},{a:r,b:o},function(a,s){var l=s[0],u=s[1];return{a:function(){var c=a.div(u.toFloat()),d=It(l.shape,i);return d.length>0?c.sum(d).reshape(l.shape):c},b:function(){var c=a.mul(l.toFloat()),d=It(u.shape,i);d.length>0&&(c=c.sum(d).reshape(u.shape));var f=u.square();return c.div(f.toFloat()).neg()}}},"FloorDiv")}}),my=j({maximum_:function(e,t){var n,r=I(e,"a","maximum"),o=I(t,"b","maximum");return n=lt(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Ne(r.shape,o.shape),W.runKernelFunc(function(i,a){var s=i.maximum(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],l=a[1];return{a:function(){return i.mul(s.greaterEqual(l).toFloat())},b:function(){return i.mul(s.less(l).toFloat())}}},"Maximum")}}),V8=j({maximumStrict_:function(e,t){var n=I(e,"a","maximumStrict"),r=I(t,"b","maximumStrict");return Be(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),n_=j({minimum_:function(e,t){var n,r=I(e,"a","minimum"),o=I(t,"b","minimum");return n=lt(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Ne(r.shape,o.shape),W.runKernelFunc(function(i,a){var s=i.minimum(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],l=a[1];return{a:function(){return i.mul(s.lessEqual(l).toFloat())},b:function(){return i.mul(s.greater(l).toFloat())}}},"Minimum")}}),W8=j({minimumStrict_:function(e,t){var n=I(e,"a","minimumStrict"),r=I(t,"b","minimumStrict");return Be(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),$8=j({mod_:function(e,t){var n,r=I(e,"a","mod"),o=I(t,"b","mod");n=lt(r,o),r=n[0],o=n[1];var i=Ne(r.shape,o.shape);return W.runKernelFunc(function(a,s){var l=a.mod(r,o);return s([r,o]),l},{$a:r,$b:o},function(a,s){var l=s[0],u=s[1];return{$a:function(){var c=It(l.shape,i);return c.length>0?a.sum(c).reshape(l.shape):a},$b:function(){var c=a.mul(l.div(u).floor().neg()),d=It(u.shape,i);return d.length>0?c.sum(d).reshape(u.shape):c}}})}}),U8=j({modStrict_:function(e,t){var n=I(e,"a","modStrict"),r=I(t,"b","modStrict");return Be(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),cn=j({mul_:function(e,t){var n,r=I(e,"a","mul"),o=I(t,"b","mul");n=lt(r,o),r=n[0],o=n[1];var i=Ne(r.shape,o.shape);return W.runKernelFunc(function(a,s){var l=a.multiply(r,o);return s([r,o]),l},{a:r,b:o},function(a,s){var l=s[0],u=s[1];return{a:function(){var c=a.mul(u.toFloat()),d=It(l.shape,i);return d.length>0?c.sum(d).reshape(l.shape):c},b:function(){var c=a.mul(l.toFloat()),d=It(u.shape,i);return d.length>0?c.sum(d).reshape(u.shape):c}}},"Mul")}}),H8=j({mulStrict_:function(e,t){var n=I(e,"a","mul"),r=I(t,"b","mul");return Be(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),df=j({pow_:function(e,t){var n,r=I(e,"base","pow"),o=I(t,"exp","pow");n=lt(r,o),r=n[0],o=n[1];var i=Ne(r.shape,o.shape),a=[r,o];return W.runKernelFunc(function(s,l){var u=s.pow(r,o);return l([r,o,u]),u},{a:r,b:o},function(s,l){var u=l[0],c=l[1],d=l[2];return{a:function(){var f=c.toFloat(),h=s.mul(f.mul(u.pow(f.sub(ne(1))))),p=It(u.shape,i);return p.length>0&&(h=h.sum(p)),h.reshape(u.shape)},b:function(){var f=u.greater(0),h=u.log().where(f,De(u)),p=s.mul(d.mul(h)),m=It(c.shape,i);return m.length>0&&(p=p.sum(m)),p.reshape(c.shape)}}},"Pow",{},a,[!0])}}),G8=j({powStrict_:function(e,t){return Be(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),K8=j({squaredDifferenceStrict_:function(e,t){var n=I(e,"a","squaredDifferenceStrict"),r=I(t,"b","squaredDifferenceStrict");return Be(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Nt=j({sub_:function(e,t){var n,r=I(e,"a","sub"),o=I(t,"b","sub");n=lt(r,o),r=n[0],o=n[1];var i=Ne(r.shape,o.shape);return W.runKernelFunc(function(a){return a.subtract(r,o)},{a:r,b:o},function(a){return{a:function(){var s=a,l=It(r.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)},b:function(){var s=a,l=It(o.shape,i);return l.length>0&&(s=s.sum(l)),s.neg().reshape(o.shape)}}},"Sub")}}),q8=j({subStrict_:function(e,t){var n=I(e,"a","subStrict"),r=I(t,"b","subStrict");return Be(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),r_=j({equal_:function(e,t){var n,r=I(e,"a","equal"),o=I(t,"b","equal");return n=lt(r,o),r=n[0],o=n[1],Ne(r.shape,o.shape),W.runKernelFunc(function(i){return i.equal(r,o)},{$a:r,$b:o})}}),X8=j({equalStrict_:function(e,t){var n=I(e,"a","equalStrict"),r=I(t,"b","equalStrict");return Be(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Y8=j({greater_:function(e,t){var n,r=I(e,"a","greater"),o=I(t,"b","greater");return n=lt(r,o),r=n[0],o=n[1],Ne(r.shape,o.shape),W.runKernelFunc(function(i){return i.greater(r,o)},{a:r,b:o},null,"Greater")}}),o_=j({greaterEqual_:function(e,t){var n,r=I(e,"a","greaterEqual"),o=I(t,"b","greaterEqual");return n=lt(r,o),r=n[0],o=n[1],Ne(r.shape,o.shape),W.runKernelFunc(function(i,a){var s=i.greaterEqual(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],l=a[1];return{a:function(){return De(s)},b:function(){return De(l)}}},"GreaterEqual")}}),Q8=j({greaterEqualStrict_:function(e,t){var n=I(e,"a","greaterEqualStrict"),r=I(t,"b","greaterEqualStrict");return Be(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),J8=j({greaterStrict_:function(e,t){var n=I(e,"a","greaterStrict"),r=I(t,"b","greaterStrict");return Be(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Z8=j({less_:function(e,t){var n,r=I(e,"a","less"),o=I(t,"b","less");return n=lt(r,o),r=n[0],o=n[1],Ne(r.shape,o.shape),W.runKernelFunc(function(i){return i.less(r,o)},{a:r,b:o},null,"Less")}}),eW=j({lessEqual_:function(e,t){var n,r=I(e,"a","lessEqual"),o=I(t,"b","lessEqual");return n=lt(r,o),r=n[0],o=n[1],Ne(r.shape,o.shape),W.runKernelFunc(function(i,a){var s=i.lessEqual(r,o);return a([r,o]),s},{a:r,b:o},null,"LessEqual")}}),tW=j({lessEqualStrict_:function(e,t){var n=I(e,"a","lessEqualStrict"),r=I(t,"b","lessEqualStrict");return Be(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),nW=j({lessStrict_:function(e,t){var n=I(e,"a","lessStrict"),r=I(t,"b","lessStrict");return Be(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),rW=j({notEqual_:function(e,t){var n,r=I(e,"a","notEqual"),o=I(t,"b","notEqual");return n=lt(r,o),r=n[0],o=n[1],Ne(r.shape,o.shape),W.runKernelFunc(function(i){return i.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),oW=j({notEqualStrict_:function(e,t){var n=I(e,"a","notEqualStrict"),r=I(t,"b","notEqualStrict");return Be(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function e2(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function t2(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var gy=j({gather_:function(e,t,n){n===void 0&&(n=0);var r=I(e,"x","gather"),o=I(t,"indices","gather","int32");n=Pt(n,r.shape)[0];var i=function(a,s,l){for(var u=a.shape[l],c=[],d=1,f=1,h=0;h<l;h++)c.push(a.shape[h]),d*=a.shape[h];for(h=0;h<s.rank;h++)c.push(s.shape[h]);for(h=l+1;h<a.rank;h++)c.push(a.shape[h]),f*=a.shape[h];return{batchSize:d,sliceSize:f,dimSize:u,outputShape:c}}(r,o,n);return W.runKernelFunc(function(a,s){var l=a.gather(r,o.flatten(),n);return s([o]),l},{x:r,indices:o},function(a,s){var l=s[0];return{x:function(){var u=r.shape,c=l.size,d=u.slice(0,n),f=d.length,h=u.slice(n,u.length).slice(1),p=h.length,m=e2(0,f),y=e2(f+1,f+1+p),g=t2([d,[c],h]),v=a.reshape(g),x=l.reshape([c]),b=t2([[f],m,y]),k=v.transpose(b),E=i_(k,x,r.shape[n]),T=ny(b);return E=E.transpose(T)},indices:function(){return l}}},"Gather",{axis:n}).reshape(i.outputShape)}}),i_=j({unsortedSegmentSum_:function(e,t,n){var r=I(e,"x","unsortedSegmentSum"),o=I(t,"segmentIds","unsortedSegmentSum","int32");return D(yt(n),function(){return"numSegments must be of dtype int"}),W.runKernelFunc(function(i,a){var s=i.unsortedSegmentSum(r,o,n);return a([o]),s},{$x:r},function(i,a){var s=a[0];return{$x:function(){return function(l,u){for(var c=my(u,De(u)),d=gy(l,c),f=o_(u,ne(0,"int32")),h=d.rank-f.rank,p=0;p<h;++p)f=ar(f,p+1);f=ch(f,Js(d.shape,"bool"));var m=De(d);return ha(f,d,m)}(i,s)}}})}}),iW=function(e,t,n){return le(this,void 0,void 0,function(){var r,o,i,a,s,l,u,c,d,f,h,p,m;return ue(this,function(y){switch(y.label){case 0:for(r=I(e,"tensor","boolMask"),o=I(t,"mask","boolMask","bool"),i=n??0,a=o.rank,s=r.shape,D(a>0,function(){return"mask cannot be scalar"}),Be(s.slice(i,i+a),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,u=i;u<i+a;u++)l*=s[u];return c=s.slice(0,i).concat([l],s.slice(i+a)),d=r.reshape(c),f=o.reshape([-1]),[4,e_(f)];case 1:return h=y.sent(),p=h.squeeze([1]),m=gy(d,p,i),e!==r&&r.dispose(),t!==o&&o.dispose(),p.dispose(),d.dispose(),f.dispose(),h.dispose(),[2,m]}})})};function a_(e,t,n,r,o,i,a){i===void 0&&(i="NHWC"),D(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var s=e,l=t,u=!1;t.rank===3&&(u=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),D(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),D(l.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank}),D(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?l.shape[3]:l.shape[1];D(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),D(d===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."}),a!=null&&D(yt(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var f=sy(i),h=Ra(s,n.shape,r,1,o,a,!1,f),p=W.runKernelFunc(function(m,y){var g=m.conv2dDerInput(l,n,h);return y([n,l]),g},{dy4D:l,filter:n},function(m,y){var g=y[0],v=y[1];return{dy4D:function(){return vr(m,g,r,o,i,1,a)},filter:function(){return vy(m,v,g.shape,r,o,i,a)}}});return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Up(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),n=t[0],r=t[1],o=t[2];return n===1&&r===1&&o===1}function s_(e,t,n,r,o){D(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,a=t,s=!1;t.rank===4&&(s=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var l=i[4],u=a.shape[4];D(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),D(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),D(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),D(l===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[3]+"."}),D(u===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+u+") must match output depth for filter "+n.shape[4]+"."});var c=lf(i,n.shape,r,1,o),d=W.runKernelFunc(function(f){return f.conv3dDerInput(a,n,c)},{dy5D:a});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var aW=j({conv1d_:function(e,t,n,r,o,i,a){o===void 0&&(o="NWC"),i===void 0&&(i=1);var s=I(e,"x","conv1d"),l=I(t,"filter","conv1d"),u=s,c=!1;s.rank===2&&(c=!0,u=s.as3D(1,s.shape[0],s.shape[1])),D(u.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."}),D(l.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),a!=null&&D(yt(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),D(u.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+u.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),D(Fn(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"}),D(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),f=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),h=vr(f,d,[1,n],r,"NHWC",[1,i],a);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),vr=j({conv2d_:function(e,t,n,r,o,i,a){o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]);var s=I(e,"x","conv2d"),l=I(t,"filter","conv2d"),u=s,c=!1;s.rank===3&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),D(u.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+u.rank+"."}),D(l.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),a!=null&&D(yt(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=o==="NHWC"?u.shape[3]:u.shape[1];D(d===l.shape[2],function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+l.shape[2]+"."}),D(Fn(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"});var f=sy(o),h=Ra(u.shape,l.shape,n,i,r,a,!1,f),p=[l,u],m=W.runKernelFunc(function(y,g){var v=y.conv2d(u,l,h);return g([l,u]),v},{x:u,filter:l},function(y,g){var v=g,x=v[0],b=v[1];return D(js(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return l_(b.shape,y,x,n,r,o)},filter:function(){return vy(b,y,x.shape,n,r,o)}}},"Conv2D",h,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),sW=j({conv3d_:function(e,t,n,r,o,i){o===void 0&&(o="NDHWC"),i===void 0&&(i=[1,1,1]);var a=I(e,"x","conv3d"),s=I(t,"filter","conv3d"),l=a,u=!1;a.rank===4&&(u=!0,l=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),D(l.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),D(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),D(l.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),D(function(f,h){return Up(f)||Up(h)}(n,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),D(o==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var c=lf(l.shape,s.shape,n,i,r),d=W.runKernelFunc(function(f,h){var p=f.conv3d(l,s,c);return h([l,s]),p},{x:l,$filter:s},function(f,h){D(Up(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var p=h[0],m=h[1];return{x:function(){return s_(p.shape,f,m,n,r)},$filter:function(){return function(y,g,v,x,b){var k=y;y.rank===4&&(k=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3]));var E=g;E.rank===4&&(E=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3])),D(k.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+k.shape+"."}),D(E.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+E.shape+"."}),D(v.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+v+"."}),D(k.shape[4]===v[3],function(){return"Error in conv3dDerFilter: depth of input "+k.shape[4]+") must match input depth in filter ("+v[3]+"."}),D(E.shape[4]===v[4],function(){return"Error in conv3dDerFilter: depth of dy ("+E.shape[4]+") must match output depth for filter ("+v[4]+")."});var T=lf(k.shape,v,x,1,b);return W.runKernelFunc(function(R){return R.conv3dDerFilter(k,E,T)},{x5D:k,dy5D:E})}(p,f,m.shape,n,r)}}});return u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),vy=j({conv2dDerFilter_:function(e,t,n,r,o,i,a){i===void 0&&(i="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=t;l.rank===3&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),D(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),D(l.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."}),D(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var u=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];D(u===n[2],function(){return"Error in conv2dDerFilter: depth of input "+u+") must match input depth in filter ("+n[2]+"."}),D(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),a!=null&&D(yt(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var d=sy(i),f=Ra(s.shape,n,r,1,o,a,!1,d);return W.runKernelFunc(function(h){return h.conv2dDerFilter(s,l,f)},{x4D:s,dy4D:l})}}),l_=j({conv2dDerInput_:a_}),dh=j({depthwiseConv2d_:function(e,t,n,r,o,i,a){i===void 0&&(i=[1,1]);var s=I(e,"x","depthwiseConv2d"),l=I(t,"filter","depthwiseConv2d"),u=s,c=!1;s.rank===3&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),D(u.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+u.rank+"."}),D(l.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),D(u.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),i==null&&(i=[1,1]),D(Fn(n,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),a!=null&&D(yt(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=Ra(u.shape,l.shape,n,i,r,a,!0),f=[u,l],h=W.runKernelFunc(function(p,m){var y=p.depthwiseConv2D(u,l,d);return m([u,l]),y},{x:u,filter:l},function(p,m){D(js(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var y=m[0],g=m[1];return{x:function(){return u_(y.shape,p,g,d)},filter:function(){return c_(y,p,g.shape,d)}}},"DepthwiseConv2dNative",d,f);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),u_=j({depthwiseConv2dDerInput_:function(e,t,n,r){var o=t,i=!1;t.rank===3&&(i=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=W.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),c_=j({depthwiseConv2dDerFilter_:function(e,t,n,r){var o=e;e.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),W.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(o,i,r)},{x4D:o,dy4D:i})}}),yy=j({separableConv2d_:function(e,t,n,r,o,i,a){i===void 0&&(i=[1,1]),a===void 0&&(a="NHWC");var s=I(e,"x","separableConv2d"),l=I(t,"depthwiseFilter","separableConv2d"),u=I(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(s.rank===3&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");D(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),D(l.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),D(u.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),D(u.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+u.shape[0]+"."}),D(u.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+u.shape[1]+"."});var f=l.shape[2],h=l.shape[3];D(u.shape[2]===f*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*h+", but got "+u.shape[2]+"."});var p=dh(c,l,r,o,a,i),m=vr(p,u,1,"valid",a);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),lW=j({conv2dTranspose_:function(e,t,n,r,o,i){return a_(n,I(e,"x","conv2dTranspose"),I(t,"filter","conv2dTranspose"),r,o,"NHWC",i)}}),uW=j({conv3dTranspose_:function(e,t,n,r,o){return s_(n,I(e,"x","conv3dTranspose"),I(t,"filter","conv3dTranspose"),r,o)}}),fh=j({matMul_:function(e,t,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=I(e,"a","matMul"),a=I(t,"b","matMul");o=lt(i,a),i=o[0],a=o[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],l=r?a.shape[a.rank-1]:a.shape[a.rank-2],u=n?i.shape[i.rank-1]:i.shape[i.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],d=i.shape.slice(0,-2),f=a.shape.slice(0,-2),h=de(d),p=de(f);D(i.rank>=2&&a.rank>=2&&i.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+a.rank+"."}),D(Bt(d,f),function(){return"Error in matMul: outer dimensions ("+d+") and ("+f+") of Tensors with shapes "+i.shape+" and "+a.shape+" must match."}),D(s===l,function(){return"Error in matMul: inner shapes ("+s+") and ("+l+") of Tensors with shapes "+i.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=i.shape.slice(0,-2).concat([u,c]),y=n?i.as3D(h,s,u):i.as3D(h,u,s),g=r?a.as3D(p,c,l):a.as3D(p,l,c),v={transposeA:n,transposeB:r};return W.runKernelFunc(function(x,b){var k=x.batchMatMul(y,g,n,r);return b([y,g]),k},{a:y,b:g},function(x,b){var k=b,E=k[0],T=k[1];return n||r?!n&&r?{a:function(){return x.matMul(T,!1,!1)},b:function(){return x.matMul(E,!0,!1)}}:n&&!r?{a:function(){return T.matMul(x,!1,!0)},b:function(){return E.matMul(x,!1,!1)}}:{a:function(){return T.matMul(x,!0,!0)},b:function(){return x.matMul(E,!0,!0)}}:{a:function(){return x.matMul(T,!1,!0)},b:function(){return E.matMul(x,!0,!1)}}},"BatchMatMul",v).reshape(m)}}),cW=j({dot_:function(e,t){var n=I(e,"t1","dot"),r=I(t,"t2","dot");D(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];return D(o===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),dW=j({outerProduct_:function(e,t){var n=I(e,"v1","outerProduct"),r=I(t,"v2","outerProduct");return D(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Gu=j({reverse_:function(e,t){var n=I(e,"x","reverse");if(n.rank===0)return n.clone();var r=Pt(t,n.shape);return W.runKernelFunc(function(o){return o.reverse(n,r)},{$x:n},function(o){return{$x:function(){return o.reverse(r)}}}).reshapeAs(n)}}),fW=j({reverse1d_:function(e){var t=I(e,"x","reverse");return D(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),Gu(t,0)}}),hW=j({reverse2d_:function(e,t){var n=I(e,"x","reverse");return D(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Gu(n,t)}}),pW=j({reverse3d_:function(e,t){var n=I(e,"x","reverse");return D(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Gu(n,t)}}),mW=j({reverse4d_:function(e,t){var n=I(e,"x","reverse");return D(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Gu(n,t)}});function d_(e,t,n,r,o,i){var a=I(e,"x","maxPool"),s=a,l=!1;a.rank===3&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),D(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),D(Fn(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),i!=null&&D(yt(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var u=yu(s.shape,t,n,r,o,i);if(u.filterWidth===1&&u.filterHeight===1&&Bt(u.inShape,u.outShape))return a.clone();var c=[s],d=W.runKernelFunc(function(f,h){var p=f.maxPool(s,u);return h([s,p]),p},{x:s},function(f,h){var p=h[0],m=h[1];return{x:function(){return function(y,g,v,x,b,k,E,T){var R=I(y,"dy","maxPoolBackprop"),_=I(g,"input","maxPoolBackprop"),S=I(v,"output","maxPoolBackprop");D(_.rank===R.rank,function(){return"Rank of input ("+_.rank+") does not match rank of dy ("+R.rank+")"}),D(Fn(b,k),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+k+"'"}),D(R.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+R.rank+"."}),D(_.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+_.rank+"."});var A=yu(_.shape,x,b,k,E,T);return W.runKernelFunc(function(N){return N.maxPoolBackprop(R,_,S,A)},{$dy:R,$input:_})}(f,p,m,t,n,r,o)}}},"MaxPool",u,c);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function f_(e,t,n,r,o,i){var a=I(e,"x","avgPool","float32");D(Fn(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=a,l=!1;a.rank===3&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),D(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),i!=null&&D(yt(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var u=yu(s.shape,t,n,r,o,i);if(u.filterWidth===1&&u.filterHeight===1&&Bt(u.inShape,u.outShape))return a.clone();var c=W.runKernelFunc(function(d){return d.avgPool(s,u)},{x:s},function(d){return{x:function(){return function(f,h,p,m,y,g){var v=I(f,"dy","avgPoolBackprop"),x=I(h,"input","avgPoolBackprop");D(x.rank===v.rank,function(){return"Rank of input ("+x.rank+") does not match rank of dy ("+v.rank+")"}),D(Fn(m,y),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+y+"'"});var b=x,k=v,E=!1;x.rank===3&&(E=!0,b=x.as4D(1,x.shape[0],x.shape[1],x.shape[2]),k=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),D(k.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+k.rank+"."}),D(b.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+b.rank+"."});var T=yu(b.shape,p,m,y,g),R=W.runKernelFunc(function(_){return _.avgPoolBackprop(k,b,T)},{dy4D:k,input4D:b});return E?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}(d,s,t,n,r,o)}}},"AvgPool",u);return c=c.cast(a.dtype),l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Ft=j({maxPool_:function(e,t,n,r,o){return d_(e,t,n,1,r,o)}}),Ku=j({avgPool_:function(e,t,n,r,o){return f_(e,t,n,1,r,o)}}),gW=j({pool_:function(e,t,n,r,o,i){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");var a=I(e,"x","maxPool"),s=a,l=!1;a.rank===3&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),D(Fn(i,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"});var u,c=yu(s.shape,t,i,o,r),d=[c.dilationHeight,c.dilationWidth];u=r==="same"?function(b,k){var E=b.map(function(_,S){return _+(_-1)*(k[S]-1)}).map(function(_){return _-1}),T=E.map(function(_){return Math.floor(_/2)}),R=E.map(function(_,S){return _-T[S]});return E.map(function(_,S){return[T[S],R[S]]})}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var f=d[0]===1&&d[1]===1,h=function(b,k,E){var T=E.map(function(M){return M[0]}),R=E.map(function(M){return M[1]}),_=b.concat(T,R),S=k.map(function(M,F){return(M-_[F]%M)%M}),A=R.map(function(M,F){return M+S[F]}),N=k.map(function(M,F){return[T[F],A[F]]}),O=k.map(function(M,F){return[0,S[F]]});return[N,O]}([c.inHeight,c.inWidth],d,u),p=h[0],m=h[1],y=f?r:"valid",g=f?s:yT(s,d,p),v=(n==="avg"?function(){return f_(g,t,i,1,y)}:function(){return d_(g,t,i,1,y)})(),x=f?v:mT(v,d,m);return l?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),vW=j({maxPool3d_:function(e,t,n,r,o,i,a){i===void 0&&(i="NDHWC");var s=I(e,"x","maxPool3d"),l=s,u=!1;s.rank===4&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),D(l.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."}),D(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),D(Fn(n,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&D(yt(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=sf(l.shape,t,n,a,r,o,i),d=W.runKernelFunc(function(f,h){var p=f.maxPool3d(l,c);return h([l,p]),p},{x:l},function(f,h){var p=h[0],m=h[1];return{x:function(){return function(y,g,v,x,b,k,E,T){var R=I(y,"dy","maxPool3dBackprop"),_=I(g,"input","maxPool3dBackprop"),S=I(v,"output","maxPool3dBackprop"),A=R,N=_,O=S,M=!1;_.rank===4&&(M=!0,A=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),N=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3]),O=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3])),D(A.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+A.rank+"."}),D(N.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+N.rank+"."}),D(O.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+O.rank+"."}),k==null&&(k=[1,1,1]),D(Fn(b,k),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+k+"'"}),T!=null&&D(yt(E),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+T+" but got pad "+E+"."});var F=sf(N.shape,x,b,k,E,T),V=W.runKernelFunc(function(z){return z.maxPool3dBackprop(A,N,O,F)},{dy5D:A,input5D:N});return M?V.as4D(V.shape[1],V.shape[2],V.shape[3],V.shape[4]):V}(f,p,m,t,n,a,r,o)}}});return u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),yW=j({avgPool3d_:function(e,t,n,r,o,i,a){i===void 0&&(i="NDHWC");var s=I(e,"x","avgPool3d","float32"),l=s,u=!1;s.rank===4&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),D(l.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."}),D(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),D(Fn(n,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&D(yt(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=sf(l.shape,t,n,a,r,o,i),d=W.runKernelFunc(function(f){return f.avgPool3d(l,c)},{x:l},function(f){return{x:function(){return function(h,p,m,y,g,v,x){var b=I(h,"dy","avgPool3dBackprop"),k=I(p,"input","avgPool3dBackprop"),E=b,T=k,R=!1;k.rank===4&&(R=!0,E=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),T=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3])),D(E.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+E.rank+"."}),D(T.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+T.rank+"."}),g==null&&(g=[1,1,1]),D(Fn(y,g),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+g+"'"}),x!=null&&D(yt(v),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+x+" but got pad "+v+"."});var _=sf(T.shape,m,y,g,v,x),S=W.runKernelFunc(function(A){return A.avgPool3dBackprop(E,T,_)},{dy5D:E,input5D:T});return R?S.as4D(S.shape[1],S.shape[2],S.shape[3],S.shape[4]):S}(f,l,t,n,a,r,o)}}});return d=d.cast(l.dtype),u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),no=j({slice_:function(e,t,n){var r,o,i=I(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(l){D(l!==-1,function(){return"slice() does not support negative begin indexing."})}),o=(o=n==null?new Array(i.rank).fill(-1):typeof n=="number"?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(l,u){return l>=0?l:(D(l===-1,function(){return"Negative size values should be exactly -1 but got "+l+" for the slice() size at index "+u+"."}),i.shape[u]-r[u])}),G7(i,r,o);var a=i.shape,s={begin:r,size:o};return W.runKernelFunc(function(l){return l.slice(i,r,o)},{x:i},function(l){for(var u=[],c=0;c<l.rank;c++)u.push([r[c],a[c]-r[c]-o[c]]);return{x:function(){return l.pad(u)}}},"Slice",s)}}),xW=j({slice1d_:function(e,t,n){var r=I(e,"x","slice1d");return D(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),no(r,[t],[n])}}),bW=j({slice2d_:function(e,t,n){var r=I(e,"x","slice2d");return D(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),no(r,t,n)}}),h_=j({slice3d_:function(e,t,n){var r=I(e,"x","slice3d");return D(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),no(r,t,n)}}),wW=j({slice4d_:function(e,t,n){var r=I(e,"x","slice4d");return D(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),no(r,t,n)}});function p_(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(Mn(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Mn(e.shape,r))),{x:function(){var i=e.mul(n.equal(t).cast(e.dtype));return o==null?i:i.transpose(o)}}}var kW=j({all_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=I(e,"x","all","bool"),o=Pt(t,r.shape),i=o,a=oo(i,r.rank);a!=null&&(r=r.transpose(a),i=io(i.length,r.rank));var s=W.runKernelFunc(function(u){return u.all(r,i)},{$x:r});if(n){var l=Mn(s.shape,o);return s.reshape(l)}return s}}),CW=j({any_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=I(e,"x","any","bool"),o=Pt(t,r.shape),i=o,a=oo(i,r.rank);a!=null&&(r=r.transpose(a),i=io(i.length,r.rank));var s=W.runKernelFunc(function(u){return u.any(r,i)},{$x:r});if(n){var l=Mn(s.shape,o);return s.reshape(l)}return s}}),EW=j({argMax_:function(e,t){t===void 0&&(t=0);var n=I(e,"x","argMax");t==null&&(t=0);var r=Pt(t,n.shape),o=oo(r,n.rank);o!=null&&(n=n.transpose(o),r=io(r.length,n.rank));var i={axis:r[0]},a=[n];return W.runKernelFunc(function(s,l){var u=s.argMax(n,r[0]);return l([n]),u},{x:n},function(s,l){var u=l[0];return{x:function(){return De(u)}}},"ArgMax",i,a)}}),SW=j({argMin_:function(e,t){t===void 0&&(t=0);var n=I(e,"x","argMin");t==null&&(t=0);var r=Pt(t,n.shape),o=oo(r,n.rank);return o!=null&&(n=n.transpose(o),r=io(r.length,n.rank)),W.runKernelFunc(function(i,a){var s=i.argMin(n,r[0]);return a([n]),s},{$x:n},function(i,a){var s=a[0];return{$x:function(){return De(s)}}})}}),RW=j({logSumExp_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=I(e,"x","logSumExp"),o=Pt(t,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var l=Mn(s.shape,o);return s.reshape(l)}return s}}),hh=j({max_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=I(e,"x","max"),o=r,i=Pt(t,r.shape),a=i,s=oo(a,r.rank);s!=null&&(r=r.transpose(s),a=io(a.length,r.rank));var l=[r],u=W.runKernelFunc(function(d,f){var h=d.max(r,a);return f([o,h]),h},{x:r},function(d,f){return p_(d,f[1],f[0],i,s)},"Max",{axes:a},l,[!0]);if(n){var c=Mn(u.shape,i);u=u.reshape(c)}return u}}),TW=j({mean_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=I(e,"x","mean"),o=Pt(t,r.shape),i=de(rn(r.shape,o)[1]);return lh(function(a){var s=ne(i);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(t,n),gradFunc:function(l){var u=a.shape.slice();return o.forEach(function(c){u[c]=1}),l.reshape(u).mul(Js(a.shape,"float32")).div(i)}}})(r)}}),_W=j({min_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=I(e,"x","min"),o=r,i=Pt(t,r.shape),a=i,s=oo(a,r.rank);s!=null&&(r=r.transpose(s),a=io(a.length,r.rank));var l=[r],u=W.runKernelFunc(function(d,f){var h=d.min(r,a);return f([o,h]),h},{x:r},function(d,f){return p_(d,f[1],f[0],i,s)},"Min",{axes:a},l,[!0]);if(n){var c=Mn(u.shape,i);u=u.reshape(c)}return u}}),IW=j({moments_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Pt(t,(e=I(e,"x","moments")).shape),o=e.mean(r,n),i=o.shape;n||(i=Mn(o.shape,r));var a=e.toFloat().sub(o.reshape(i)).square();return{mean:o,variance:a.mean(r,n)}}}),m_=j({sum_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=I(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=Pt(t,r.shape);return lh(function(i){var a=oo(o,i.rank),s=o,l=i;a!=null&&(l=i.transpose(a),s=io(s.length,i.rank));var u=function(h){var p=i.shape.slice();return o.forEach(function(m){p[m]=1}),h.reshape(p).mul(Js(i.shape,"float32"))},c={axes:s},d=W.runKernelFunc(function(h){return h.sum(l,s)},{x:l},function(h){return{x:function(){return u(h)}}},"Sum",c);if(n){var f=Mn(d.shape,o);d=d.reshape(f)}return{value:d,gradFunc:u}})(r)}}),NW=j({prod_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=I(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=Pt(t,r.shape),i=oo(o,r.rank),a=o,s=r;i!=null&&(s=r.transpose(i),a=io(a.length,r.rank));var l=W.runKernelFunc(function(c){return c.prod(s,a)},{permutedX:s});if(n){var u=Mn(l.shape,o);l=l.reshape(u)}return l}}),g_=j({elu_:function(e){var t=I(e,"x","elu");return W.runKernelFunc(function(n,r){var o=n.elu(t);return r([o]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return W.runKernelFunc(function(i){return i.eluDer(n,o)},{dy:n,y:o})}}})}}),PW=j({leakyRelu_:function(e,t){t===void 0&&(t=.2);var n=I(e,"x","leakyRelu");return my(ne(t).mul(n),n)}}),v_=j({prelu_:function(e,t){var n=I(e,"x","prelu"),r=I(t,"alpha","prelu");return W.runKernelFunc(function(o,i){var a=o.prelu(n,r);return i([n,r]),a},{x:n,alpha:r},function(o,i){var a=i[0],s=i[1],l=a.greater(0);return{x:function(){return ha(l,o,o.mul(s))},alpha:function(){var u=ha(l,De(o),o.mul(a)),c=It(s.shape,o.shape);return c.length>0&&(u=u.sum(c)),u.reshape(s.shape)}}},"Prelu")}}),it=j({relu_:function(e){var t=I(e,"x","relu");return t.dtype==="bool"?t.toInt():W.runKernelFunc(function(n,r){var o=n.relu(t);return r([t]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mulStrict(o.step().toFloat())}}},"Relu")}}),y_=j({relu6_:function(e){var t=I(e,"x","relu6");return t.dtype==="bool"?t.toInt():W.runKernelFunc(function(n,r){var o=n.relu6(t);return r([t]),o},{x:t},function(n,r){var o=r[0],i=o.lessEqual(6).mul(o.step());return{x:function(){return n.mulStrict(i.toFloat())}}},"Relu6")}}),AW=j({selu_:function(e){var t=I(e,"x","selu");return W.runKernelFunc(function(n,r){var o=n.selu(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){var i=o.greater(ne(0)),a=ne(fy),s=ne(hy),l=n.mul(s),u=n.mul(a).mul(o.toFloat().exp());return ha(i,l,u)}}})}}),Ei=j({transpose_:function(e,t){var n=I(e,"x","transpose");if(t==null&&(t=n.shape.map(function(o,i){return i}).reverse()),D(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(o){D(o>=0&&o<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return W.runKernelFunc(function(o){return o.transpose(n,t)},{x:n},function(o){var i=ny(t);return{x:function(){return o.transpose(i)}}},"Transpose",r)}}),DW=j({localResponseNormalization_:function(e,t,n,r,o){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var i=I(e,"x","localResponseNormalization");D(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),D(yt(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var a=i,s=!1;i.rank===3&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var l=W.runKernelFunc(function(u,c){var d=u.localResponseNormalization4D(a,t,n,r,o);return c([a,d]),d},{x4D:a},function(u,c){var d=c[0],f=c[1];return{x4D:function(){return W.runKernelFunc(function(h){return h.LRNGrad(u,d,f,t,n,r,o)},{})}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),x_=j({norm_:function(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=function s(l,u,c){if(c===void 0&&(c=null),l.rank===0)return l.abs();if(l.rank!==1&&c===null)return s(l.reshape([-1]),u,c);if(l.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(u===1)return l.abs().sum(c);if(u===1/0)return l.abs().max(c);if(u===-1/0)return l.abs().min(c);if(u==="euclidean"||u===2)return l.abs().pow(ne(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}if(Array.isArray(c)&&c.length===2){if(u===1)return l.abs().sum(c[0]).max(c[1]-1);if(u===1/0)return l.abs().sum(c[1]).max(c[0]);if(u===-1/0)return l.abs().sum(c[1]).min(c[0]);if(u==="fro"||u==="euclidean")return l.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+u)}throw new Error("Error in norm: invalid axis: "+c)}(e=I(e,"x","norm"),t,n),i=o.shape;if(r){var a=Pt(n,e.shape);i=Mn(o.shape,a)}return o.reshape(i)}}),MW=j({basicLSTMCell_:function(e,t,n,r,o,i){var a=I(e,"forgetBias","basicLSTMCell"),s=I(t,"lstmKernel","basicLSTMCell"),l=I(n,"lstmBias","basicLSTMCell"),u=I(r,"data","basicLSTMCell"),c=I(o,"c","basicLSTMCell"),d=I(i,"h","basicLSTMCell"),f=u.concat(d,1).matMul(s).add(l),h=f.shape[0],p=f.shape[1]/4,m=[h,p],y=f.slice([0,0],m),g=f.slice([0,p],m),v=f.slice([0,2*p],m),x=f.slice([0,3*p],m),b=y.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(a.add(v).sigmoid())),k=b.tanh().mulStrict(x.sigmoid());return[b,k]}}),FW=j({multiRNNCell_:function(e,t,n,r){for(var o=I(t,"data","multiRNNCell"),i=ef(n,"c","multiRNNCell"),a=ef(r,"h","multiRNNCell"),s=o,l=[],u=0;u<e.length;u++){var c=e[u](s,i[u],a[u]);l.push(c[0]),l.push(c[1]),s=c[1]}var d=[],f=[];for(u=0;u<l.length;u+=2)d.push(l[u]),f.push(l[u+1]);return[d,f]}}),OW=j({movingAverage_:function(e,t,n,r,o){o===void 0&&(o=!0);var i=I(e,"v","movingAverage"),a=I(t,"x","movingAverage"),s=I(n,"decay","movingAverage");D6(i,a),D(Bt(i.shape,a.shape),function(){return"Shape mismatch in v and x"});var l=ne(1),u=l.sub(s),c=a.sub(i).mul(u);if(o){D(r!=null,function(){return"When using zeroDebias: true, step is required."});var d=I(r,"step","movingAverage");c=c.div(l.sub(df(s,d)))}return i.add(c)}}),LW=j({stridedSlice_:function(e,t,n,r,o,i,a,s,l){if(o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=0),r==null&&(r=new Array(t.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var u=I(e,"x","stridedSlice"),c=M1(s),d=u.shape.slice();c.forEach(function(y){t[y]=0,n[y]=1,d.splice(y,0,1)}),u=u.reshape(d);for(var f=0;f<u.rank;f++)t[f]=K7(o,t,r,u.shape,f),n[f]=q7(i,n,r,u.shape,f),r[f]=r[f]||1;var h=M1(l);h.forEach(function(y){n[y]=t[y]+1,r[y]=1});var p=ay(t,n,r),m=p.filter(function(y,g){return h.indexOf(g)===-1});return r.every(function(y){return y===1})?no(u,t,p).reshape(m):W.runKernelFunc(function(y){return y.stridedSlice(u,t,n,r)},{$x:u}).reshape(m)}}),BW=j({topk_:function(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=I(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var i=W.runKernelFunc(function(a){return a.topk(r,t,n)},{$x:r});return{values:i[0],indices:i[1]}}}),jW=j({scatterND_:function(e,t,n){var r=I(e,"indices","scatterND","int32"),o=I(t,"updates","scatterND");return H7(o,r,n),W.runKernelFunc(function(i){return i.scatterND(r,o,n)},{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),xy=j({fft_:function(e){D(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return W.runKernelFunc(function(o){return o.fft(r)},{input:e}).reshape(e.shape)}}),ff=j({ifft_:function(e){D(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return W.runKernelFunc(function(o){return o.ifft(r)},{input:e}).reshape(e.shape)}}),by=j({rfft_:function(e,t){D(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],o=e.size/r;if(t!=null&&t<r){var i=e.shape.map(function(g){return 0}),a=e.shape.map(function(g){return g});a[e.shape.length-1]=t,n=e.slice(i,a),r=t}else if(t!=null&&t>r){var s=e.shape.map(function(g){return g});s[e.shape.length-1]=t-r,n=e.concat(Ze(s),e.shape.length-1),r=t}else n=e;var l=n.zerosLike(),u=Ut(n,l).as2D(o,r),c=xy(u),d=Math.floor(r/2)+1,f=sr(c),h=jr(c),p=f.split([d,r-d],f.shape.length-1),m=h.split([d,r-d],h.shape.length-1),y=n.shape.slice();return y[n.shape.length-1]=d,Ut(p[0],m[0]).reshape(y)}}),b_=j({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=ff(r);return sr(o)}var i=[n,2*(t-1)],a=sr(e).as2D(n,t),s=jr(e).as2D(n,t),l=a.slice([0,1],[n,t-2]).reverse(1),u=s.slice([0,1],[n,t-2]).reverse(1).mul(ne(-1)),c=a.concat(l,1),d=s.concat(u,1);return r=Ut(c,d).as2D(i[0],i[1]),o=ff(r),sr(o)}}),zW=Object.freeze({fft:xy,ifft:ff,rfft:by,irfft:b_}),VW=j({sparseToDense_:function(e,t,n,r){r===void 0&&(r=0);var o=I(e,"sparseIndices","sparseToDense","int32"),i=I(t,"sparseValues","sparseToDense"),a=I(r,"defaultValue","sparseToDense",i.dtype);return function(s,l,u,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var d=s.rank>0?s.shape[0]:1,f=s.rank>1?s.shape[1]:1;if(u.length!==f)throw new Error("outputShape has incorrect number of elements:, "+u.length+", should be: "+f+".");var h=l.size;if(l.rank!==0&&(l.rank!==1||h!==d))throw new Error("sparseValues has incorrect shape "+l.shape+", should be [] or ["+d+"]");if(l.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,a),W.runKernelFunc(function(s){return s.sparseToDense(o,i,n,a)},{$sparseIndices:o,$sparseValues:i,$defaultValue:a})}}),WW=j({gatherND_:function(e,t){var n=I(t,"indices","gatherND","int32"),r=I(e,"x","gatherND");return W.runKernelFunc(function(o){return o.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),$W=j({diag_:function(e){var t=I(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return W.runKernelFunc(function(r){return r.diag(t)},{$x:t}).reshape(n)}}),UW=j({dropout_:function(e,t,n,r){var o=I(e,"x","dropout");if(D(o.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),D(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof rt?o.clone():o;var i=function(l,u){if(u==null)return l.shape.slice();if(Bt(l.shape,u))return u;if(l.shape.length===u.length){for(var c=[],d=0;d<l.shape.length;d++)u[d]==null&&l.shape[d]!=null?c.push(l.shape[d]):c.push(u[d]);return c}return u}(o,n),a=1-t,s=vT(i,0,1,"float32",r).add(a).floor().div(a);return o.mul(s)}});function w_(e,t,n){for(var r=1-e%2,o=new Float32Array(e),i=0;i<e;++i){var a=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(a)}return kt(o,"float32")}var wy=j({hannWindow_:function(e){return w_(e,.5,.5)}}),k_=j({hammingWindow_:function(e){return w_(e,.54,.46)}}),ky=j({frame_:function(e,t,n,r,o){r===void 0&&(r=!1),o===void 0&&(o=0);for(var i=0,a=[];i+t<=e.size;)a.push(no(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,l=Tt([no(e,i,t-s),Yr([s],o)]);a.push(l),i+=n}return a.length===0?gi([],[0,t]):Tt(a).as2D(a.length,t)}}),C_=j({stft_:function(e,t,n,r,o){var i;o===void 0&&(o=wy),r==null&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var a=ky(e,t,n),s=cn(a,o(t)),l=[],u=0;u<a.shape[0];u++)l.push(by(s.slice([u,0],[1,t]),r));return Tt(l)}}),HW=Object.freeze({hannWindow:wy,hammingWindow:k_,frame:ky,stft:C_}),ln,GW=function(e,t,n){return n===void 0&&(n=1),le(this,void 0,void 0,function(){var r,o,i,a,s,l,u,c,d,f,h,p,m,y;return ue(this,function(g){switch(g.label){case 0:return r=I(e,"predictions","inTopK"),o=I(t,"targets","inTopK"),D(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),D(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),Be(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],D(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n}),[4,r.data()];case 1:return a=g.sent(),[4,o.data()];case 2:for(s=g.sent(),l=[a.length/i,i],c=l[1],d=mu("bool",u=l[0]),f=0;f<u;f++){for(h=f*c,p=a.subarray(h,h+c),m=[],y=0;y<p.length;y++)m.push({value:p[y],index:y});for(m.sort(function(v,x){return x.value-v.value}),d[f]=0,y=0;y<n;y++)if(m[y].index===s[f]){d[f]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),[2,Kt(d,o.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ln||(ln={}));var KW=j({absoluteDifference_:function(e,t,n,r){r===void 0&&(r=ln.SUM_BY_NONZERO_WEIGHTS);var o=I(e,"labels","absoluteDifference"),i=I(t,"predictions","absoluteDifference"),a=null;n!=null&&(a=I(n,"weights","absoluteDifference")),Be(o.shape,i.shape,"Error in absoluteDifference: ");var s=o.sub(i).abs();return Bo(s,a,r)}}),Bo=j({computeWeightedLoss_:function(e,t,n){n===void 0&&(n=ln.SUM_BY_NONZERO_WEIGHTS);var r=I(e,"losses","computeWeightedLoss"),o=null;t!=null&&(o=I(t,"weights","computeWeightedLoss"));var i=o==null?r:r.mul(o);if(n===ln.NONE)return i;if(n===ln.SUM)return i.sum();if(n===ln.MEAN){if(o==null)return i.mean();var a=r.size/o.size,s=i.sum().div(o.sum());return a>1?s.div(ne(a)):s}if(n===ln.SUM_BY_NONZERO_WEIGHTS){if(o==null)return i.sum().div(ne(r.size));var l=o.mul(Js(r.shape)).notEqual(ne(0)).sum().toFloat();return i.sum().div(l)}throw Error("Unknown reduction: "+n)}}),qW=j({cosineDistance_:function(e,t,n,r,o){o===void 0&&(o=ln.SUM_BY_NONZERO_WEIGHTS);var i=I(e,"labels","cosineDistance"),a=I(t,"predictions","cosineDistance"),s=null;r!=null&&(s=I(r,"weights","cosineDistance")),Be(i.shape,a.shape,"Error in cosineDistance: ");var l=ne(1).sub(i.mul(a).sum(n,!0));return Bo(l,s,o)}}),XW=j({hingeLoss_:function(e,t,n,r){r===void 0&&(r=ln.SUM_BY_NONZERO_WEIGHTS);var o=I(e,"labels","hingeLoss"),i=I(t,"predictions","hingeLoss"),a=null;n!=null&&(a=I(n,"weights","hingeLoss")),Be(o.shape,i.shape,"Error in hingeLoss: ");var s=ne(1);o=ne(2).mul(o).sub(s);var l=s.sub(o.mul(i)).relu();return Bo(l,a,r)}}),YW=j({huberLoss_:function(e,t,n,r,o){r===void 0&&(r=1),o===void 0&&(o=ln.SUM_BY_NONZERO_WEIGHTS);var i=I(e,"labels","huberLoss"),a=I(t,"predictions","huberLoss"),s=null;n!=null&&(s=I(n,"weights","huberLoss")),Be(i.shape,a.shape,"Error in huberLoss: ");var l=ne(r),u=a.sub(i).abs(),c=n_(u,l),d=u.sub(c),f=ne(.5).mul(c.square()).add(l.mul(d));return Bo(f,s,o)}}),QW=j({logLoss_:function(e,t,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=ln.SUM_BY_NONZERO_WEIGHTS);var i=I(e,"labels","logLoss"),a=I(t,"predictions","logLoss"),s=null;n!=null&&(s=I(n,"weights","logLoss")),Be(i.shape,a.shape,"Error in logLoss: ");var l=ne(1),u=ne(r),c=i.mul(a.add(u).log()).neg().sub(l.sub(i).mul(l.sub(a).add(u).log()));return Bo(c,s,o)}}),JW=j({meanSquaredError_:function(e,t,n,r){r===void 0&&(r=ln.SUM_BY_NONZERO_WEIGHTS);var o=I(e,"labels","meanSquaredError"),i=I(t,"predictions","meanSquaredError"),a=null;n!=null&&(a=I(n,"weights","meanSquaredError")),Be(o.shape,i.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(i);return Bo(s,a,r)}}),ZW=j({sigmoidCrossEntropy_:function(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=ln.SUM_BY_NONZERO_WEIGHTS);var i=I(e,"multiClassLabels","sigmoidCrossEntropy"),a=I(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=I(n,"weights","sigmoidCrossEntropy")),Be(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=ne(r),u=ne(1),c=ne(.5);i=i.mul(u.sub(l)).add(c.mul(l))}var d=function(f,h){var p=I(f,"labels","sigmoidCrossEntropyWithLogits"),m=I(h,"logits","sigmoidCrossEntropyWithLogits");Be(p.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var y=m.relu(),g=m.mul(p),v=m.abs().neg().exp().log1p();return y.sub(g).add(v)}(i,a);return Bo(d,s,o)}}),e$=j({softmaxCrossEntropy_:function(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=ln.SUM_BY_NONZERO_WEIGHTS);var i=I(e,"onehotLabels","softmaxCrossEntropy"),a=I(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=I(n,"weights","softmaxCrossEntropy")),Be(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var l=ne(r),u=ne(1),c=ne(i.shape[1]);i=i.mul(u.sub(l)).add(l.div(c))}var d=function(f,h,p){if(p===void 0&&(p=-1),p===-1&&(p=h.rank-1),p!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+p);return lh(function(m,y,g){var v=y.logSumExp([p],!0),x=y.toFloat().sub(v);return g([m,x]),{value:x.mul(m).neg().sum([p]),gradFunc:function(b,k){var E=k[0],T=k[1],R=Mn(b.shape,[p]);return[b.reshape(R).mul(E.toFloat().sub(T.exp())),b.reshape(R).mul(T.exp().sub(E.toFloat()))]}}})(f,h)}(i,a);return Bo(d,s,o)}}),t$=Object.freeze({get Reduction(){return ln},absoluteDifference:KW,computeWeightedLoss:Bo,cosineDistance:qW,hingeLoss:XW,huberLoss:YW,logLoss:QW,meanSquaredError:JW,sigmoidCrossEntropy:ZW,softmaxCrossEntropy:e$});function n2(e,t){return t===void 0&&(t=!1),W.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=gT(n),i=e.clone(),a=gi([[1]],[1,1]),s=a.clone(),l=n>=r?r:n,u=function(d){var f,h=i,p=s,m=o;f=W.tidy(function(){var y=i.slice([d,d],[n-d,1]),g=y.norm(),v=i.slice([d,d],[1,1]),x=gi([[-1]]).where(v.greater(0),gi([[1]])),b=v.sub(x.mul(g)),k=y.div(b);s=k.shape[0]===1?a.clone():a.concat(k.slice([1,0],[k.shape[0]-1,k.shape[1]]),0);var E=x.matMul(b).div(g).neg(),T=i.slice([d,0],[n-d,r]),R=E.mul(s);if(d===0)i=T.sub(R.matMul(s.transpose().matMul(T)));else{var _=T.sub(R.matMul(s.transpose().matMul(T)));i=i.slice([0,0],[d,r]).concat(_,0)}var S=o.slice([0,d],[n,o.shape[1]-d]);if(d===0)o=S.sub(S.matMul(s).matMul(R.transpose()));else{var A=S.sub(S.matMul(s).matMul(R.transpose()));o=o.slice([0,0],[n,d]).concat(A,1)}return[s,i,o]}),s=f[0],i=f[1],o=f[2],An([h,p,m])},c=0;c<l;++c)u(c);return!t&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]})}var n$=j({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=I(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,i=r.shape.slice(-2),a=i[0],s=i[1];if(!(t<=a))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+a+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=a),n<0&&(n=s);var l=tf(0,a,1,"int32").reshape([-1,1]),u=tf(0,s,1,"int32"),c=Nt(l,u),d=ch(c.lessEqual(ne(+t,"int32")),c.greaterEqual(ne(-n,"int32"))),f=Ze([a,s],r.dtype);return Gn(_t(r.reshape([-1,a,s])).map(function(h){return ha(d,h,f)})).reshape(o)}}),r$=j({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,D(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(l){D(e[l].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[l].shape[0]+" vs. "+n+")"})},o=1;o<e.length;++o)r(o)}else t=!0,e=oy(e,e.shape[0],0).map(function(l){return xT(l,[0])});D(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],a=e,s=function(l){i.push(W.tidy(function(){var u=a[l];if(l>0)for(var c=0;c<l;++c){var d=m_(i[c].mulStrict(u)).mul(i[c]);u=u.sub(d)}return u.div(x_(u,"euclidean"))}))};for(o=0;o<e.length;++o)s(o);return t?Gn(i,0):i}}),o$=j({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return n2(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(a,s){return a*s}),r=_t(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];return r.forEach(function(a){var s=n2(a,t),l=s[0],u=s[1];o.push(l),i.push(u)}),[Gn(o,0).reshape(e.shape),Gn(i,0).reshape(e.shape)]}}),i$=Object.freeze({bandPart:n$,gramSchmidt:r$,qr:o$});function ph(e,t,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);var a=e.shape[0];return n=Math.min(n,a),D(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),D(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),D(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),D(t.rank===1,function(){return"scores must be a 1D tensor"}),D(t.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+t.shape[0]}),D(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}var a$=j({resizeBilinear_:function(e,t,n){n===void 0&&(n=!1);var r=I(e,"images","resizeBilinear");D(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),D(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var o=r,i=!1;r.rank===3&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],l=W.runKernelFunc(function(u,c){return c([o]),u.resizeBilinear(o,a,s,n)},{x:o},function(u,c){return{x:function(){return W.runKernelFunc(function(d){return d.resizeBilinearBackprop(u,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:s});return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),s$=j({resizeNearestNeighbor_:function(e,t,n){n===void 0&&(n=!1);var r=I(e,"images","resizeNearestNeighbor");D(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),D(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),D(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,i=!1;r.rank===3&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],l=W.runKernelFunc(function(u,c){return c([o]),u.resizeNearestNeighbor(o,a,s,n)},{batchImages:o},function(u,c){return{batchImages:function(){return W.runKernelFunc(function(d){return d.resizeNearestNeighborBackprop(u,c[0],n)},{})}}});return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),l$=j({nonMaxSuppression_:function(e,t,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var i=I(e,"boxes","nonMaxSuppression"),a=I(t,"scores","nonMaxSuppression"),s=ph(i,a,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return W.runKernelFunc(function(u){return u.nonMaxSuppression(i,a,n,r,o)},{boxes:i,scores:a},null,"NonMaxSuppressionV3",l)}}),u$=function(e,t,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),le(this,void 0,void 0,function(){var i,a,s,l,u,c,d;return ue(this,function(f){switch(f.label){case 0:return i=I(e,"boxes","nonMaxSuppressionAsync"),a=I(t,"scores","nonMaxSuppressionAsync"),s=ph(i,a,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([i.data(),a.data()])];case 1:return l=f.sent(),u=l[0],c=l[1],d=ly(u,c,n,r,o),i!==e&&i.dispose(),a!==t&&a.dispose(),[2,d]}})})},c$=j({nonMaxSuppressionWithScore_:function(e,t,n,r,o,i){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var a=I(e,"boxes","nonMaxSuppression"),s=I(t,"scores","nonMaxSuppression"),l=ph(a,s,n,r,o,i),u={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:o=l.scoreThreshold,softNmsSigma:i=l.softNmsSigma},c=W.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},u);return{selectedIndices:c[0],selectedScores:c[1]}}}),d$=function(e,t,n,r,o,i){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),le(this,void 0,void 0,function(){var a,s,l,u,c,d,f;return ue(this,function(h){switch(h.label){case 0:return a=I(e,"boxes","nonMaxSuppressionAsync"),s=I(t,"scores","nonMaxSuppressionAsync"),l=ph(a,s,n,r,o,i),n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return u=h.sent(),c=u[0],d=u[1],f=uy(c,d,n,r,o,i),a!==e&&a.dispose(),s!==t&&s.dispose(),[2,f]}})})},f$=j({cropAndResize_:function(e,t,n,r,o,i){var a=I(e,"image","cropAndResize"),s=I(t,"boxes","cropAndResize","float32"),l=I(n,"boxInd","cropAndResize","int32");o=o||"bilinear",i=i||0;var u=s.shape[0];return D(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),D(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+u+",4] but had shape "+s.shape+"."}),D(l.rank===1&&l.shape[0]===u,function(){return"Error in cropAndResize: boxInd must be have size ["+u+"] but had shape "+s.shape+"."}),D(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),D(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),D(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),W.runKernelFunc(function(c,d){return c.cropAndResize(a,s,l,r,o,i)},{images:a,boxes:s,boxInd:l},null,"CropAndResize",{method:o,extrapolationValue:i,cropSize:r})}}),Cy=Object.freeze({resizeBilinear:a$,resizeNearestNeighbor:s$,nonMaxSuppression:l$,nonMaxSuppressionAsync:u$,nonMaxSuppressionWithScore:c$,nonMaxSuppressionWithScoreAsync:d$,cropAndResize:f$}),Ey=function(e,t){return!(e>0)||t==="linear"},Sy=function(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},Ry=function(e,t){var n=t,r=It(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},Ty=function(e,t,n){if(t==="linear")return e;if(t==="relu")return it(e);if(t==="elu")return g_(e);if(t==="relu6")return y_(e);if(t==="prelu")return v_(e,n);throw new Error("Unknown fused activation "+t+".")},h$=j({fusedMatMul_:function(e){var t,n=e.a,r=e.b,o=e.transposeA,i=o!==void 0&&o,a=e.transposeB,s=a!==void 0&&a,l=e.bias,u=e.activation,c=u===void 0?"linear":u,d=e.preluActivationWeights;if(Ey(W.state.gradientDepth,c)===!1){var f=fh(n,r,i,s);return l!=null&&(f=Ie(f,l)),Ty(f,c,d)}var h=I(n,"a","fused matMul"),p=I(r,"b","fused matMul");t=lt(h,p),h=t[0],p=t[1];var m=i?h.shape[h.rank-2]:h.shape[h.rank-1],y=s?p.shape[p.rank-1]:p.shape[p.rank-2],g=i?h.shape[h.rank-1]:h.shape[h.rank-2],v=s?p.shape[p.rank-2]:p.shape[p.rank-1],x=h.shape.slice(0,-2),b=p.shape.slice(0,-2),k=de(x),E=de(b);D(h.rank>=2&&p.rank>=2&&h.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."}),D(Bt(x,b),function(){return"Error in fused matMul: outer dimensions ("+x+") and ("+b+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."}),D(m===y,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+y+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+i+" and transposeB="+s+" must match."});var T,R,_=h.shape.slice(0,-2).concat([g,v]),S=i?h.as3D(k,m,g):h.as3D(k,g,m),A=s?p.as3D(E,v,y):p.as3D(E,y,v);l!=null&&Ne(_,(T=lt(T=I(l,"bias","fused matMul"),h)[0]).shape),d!=null&&(R=I(d,"prelu weights","fused matMul"));var N={a:S,b:A};l!=null&&(N.bias=T),d!=null&&(N.preluActivationWeights=R);var O=[S,A];return W.runKernelFunc(function(M,F){var V=M.fusedBatchMatMul({a:S,b:A,transposeA:i,transposeB:s,bias:T,activation:c,preluActivationWeights:R});return F([S,A,V]),V},N,function(M,F){var V=F[0],z=F[1],P=F[2],B=Sy(M,P,c),L={};return l!=null&&(L={bias:function(){return Ry(T,B)}}),Object.assign(i||s?!i&&s?{a:function(){return B.matMul(z,!1,!1)},b:function(){return B.matMul(V,!0,!1)}}:i&&!s?{a:function(){return z.matMul(B,!1,!0)},b:function(){return V.matMul(B,!1,!1)}}:{a:function(){return z.matMul(B,!0,!0)},b:function(){return B.matMul(V,!0,!0)}}:{a:function(){return B.matMul(z,!1,!0)},b:function(){return V.matMul(B,!0,!1)}},L)},"_FusedMatMul",{transposeA:i,transposeB:s,activation:c},O,[!0]).reshape(_)}}),p$=j({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=i===void 0?"NHWC":i,s=e.dilations,l=s===void 0?[1,1]:s,u=e.dimRoundingMode,c=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights;if(f=f||"linear",Ey(W.state.gradientDepth,f)===!1){var p=vr(t,n,r,o,a,l,u);return c!=null&&(p=Ie(p,c)),Ty(p,f,h)}var m=I(t,"x","conv2d"),y=I(n,"filter","conv2d"),g=m,v=!1;m.rank===3&&(v=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),D(g.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),D(y.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+y.rank+"."}),u!=null&&D(yt(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+"."}),D(g.shape[3]===y.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+y.shape[2]+"."}),D(Fn(r,l),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),D(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var x,b,k=Ra(g.shape,y.shape,r,l,o,u);c!=null&&(x=lt(x=I(c,"bias","fused conv2d"),m)[0],Ne(k.outShape,x.shape)),h!=null&&(b=I(h,"prelu weights","fused conv2d"));var E={x:g,filter:y};c!=null&&(E.bias=x),h!=null&&(E.preluActivationWeights=b);var T=[y,g],R=W.runKernelFunc(function(_,S){var A=_.fusedConv2d({input:g,filter:y,convInfo:k,bias:x,activation:f,preluActivationWeights:b});return S([y,g,A]),A},E,function(_,S){var A=S,N=A[0],O=A[1],M=A[2],F=Sy(_,M,f);D(js(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"});var V={};return c!=null&&(V={bias:function(){return Ry(x,F)}}),Object.assign({x:function(){return l_(O.shape,F,N,r,o)},filter:function(){return vy(O,F,N.shape,r,o)}},V)},"FusedConv2D",{convInfo:k,activation:f},T,[!0]);return v?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),m$=j({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=i===void 0?"NHWC":i,s=e.dilations,l=s===void 0?[1,1]:s,u=e.dimRoundingMode,c=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights;if(Ey(W.state.gradientDepth,f)===!1){var p=dh(t,n,r,o,a,l,u);return c!=null&&(p=Ie(p,c)),Ty(p,f,h)}var m=I(t,"x","depthwiseConv2d"),y=I(n,"filter","depthwiseConv2d"),g=m,v=!1;m.rank===3&&(v=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),D(g.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),D(y.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+y.rank+"."}),D(g.shape[3]===y.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+y.shape[2]+"."}),l==null&&(l=[1,1]),D(Fn(r,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),u!=null&&D(yt(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+u+" but got pad "+o+"."});var x,b,k=Ra(g.shape,y.shape,r,l,o,u,!0);c!=null&&(x=lt(x=I(c,"bias","fused conv2d"),m)[0],Ne(k.outShape,x.shape)),h!=null&&(b=I(h,"prelu weights","fused depthwiseConv2d"));var E={x:g,filter:y};c!=null&&(E.bias=x),h!=null&&(E.preluActivationWeights=b);var T=[y,g],R=W.runKernelFunc(function(_,S){var A=_.fusedDepthwiseConv2D({input:g,filter:y,convInfo:k,bias:x,activation:f,preluActivationWeights:b});return S([y,g,A]),A},E,function(_,S){D(js(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"});var A=S[0],N=S[1],O=S[2],M=Sy(_,O,f),F={};return c!=null&&(F={bias:function(){return Ry(x,M)}}),Object.assign({x:function(){return u_(N.shape,M,A,k)},filter:function(){return c_(N,M,A.shape,k)}},F)},"FusedDepthwiseConv2D",{convInfo:k,activation:f},T,[!0]);return v?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),g$=Object.freeze({matMul:h$,conv2d:p$,depthwiseConv2d:m$}),v$=Object.freeze({image:Cy,linalg:i$,losses:t$,spectral:zW,fused:g$,signal:HW,square:QV,squaredDifference:GT,conv1d:aW,conv2d:vr,conv3d:sW,depthwiseConv2d:dh,separableConv2d:yy,conv2dTranspose:lW,conv3dTranspose:uW,op:j,batchNormalization2d:T8,batchNormalization3d:_8,batchNormalization4d:I8,batchNormalization:N8,batchNorm:JT,batchNorm2d:P8,batchNorm3d:A8,batchNorm4d:D8,booleanMaskAsync:iW,complex:Ut,real:sr,imag:jr,concat:Tt,concat1d:g7,concat2d:v7,concat3d:y7,concat4d:x7,split:oy,matMul:fh,dot:cW,outerProduct:dW,reverse:Gu,reverse1d:fW,reverse2d:hW,reverse3d:pW,reverse4d:mW,maxPool:Ft,avgPool:Ku,pool:gW,maxPool3d:vW,avgPool3d:yW,slice:no,slice1d:xW,slice2d:bW,slice3d:h_,slice4d:wW,abs:JV,acos:ZV,acosh:e8,asin:t8,asinh:n8,atan:r8,atanh:o8,ceil:i8,clipByValue:py,cos:a8,cosh:s8,erf:l8,exp:Hg,expm1:u8,floor:c8,log:d8,log1p:f8,logSigmoid:h8,neg:cf,reciprocal:p8,round:m8,rsqrt:KT,sigmoid:qT,sign:g8,isNaN:v8,isInf:y8,isFinite:x8,sin:b8,sinh:w8,softplus:k8,sqrt:C8,step:E8,tan:S8,tanh:R8,all:kW,any:CW,argMax:EW,argMin:SW,logSumExp:RW,max:hh,mean:TW,min:_W,moments:IW,sum:m_,prod:NW,equal:r_,equalStrict:X8,greater:Y8,greaterEqual:o_,greaterEqualStrict:Q8,greaterStrict:J8,less:Z8,lessEqual:eW,lessEqualStrict:tW,lessStrict:nW,notEqual:rW,notEqualStrict:oW,add:Ie,addN:O8,addStrict:L8,atan2:B8,div:Cr,divNoNan:j8,divStrict:z8,floorDiv:t_,maximum:my,maximumStrict:V8,minimum:n_,minimumStrict:W8,mod:$8,modStrict:U8,mul:cn,mulStrict:H8,pow:df,powStrict:G8,squaredDifferenceStrict:K8,sub:Nt,subStrict:q8,elu:g_,leakyRelu:PW,prelu:v_,relu:it,relu6:y_,selu:AW,logicalAnd:ch,logicalNot:M8,logicalOr:ZT,logicalXor:F8,where:ha,whereAsync:e_,buffer:Se,print:_7,batchToSpaceND:mT,broadcastTo:I7,cast:N7,clone:P7,cumsum:A7,depthToSpace:D7,expandDims:ar,eye:gT,multinomial:M7,oneHot:Vg,pad:Sa,pad1d:F7,pad2d:O7,pad3d:L7,pad4d:B7,rand:j7,randomNormal:z7,randomGamma:V7,randomUniform:vT,reshape:Er,spaceToBatchND:yT,squeeze:xT,stack:Gn,tile:gs,truncatedNormal:W7,unstack:_t,setdiff1dAsync:$7,fill:Yr,linspace:m7,ones:Js,range:tf,scalar:ne,tensor:Kt,tensor1d:kt,tensor2d:gi,tensor3d:ry,tensor4d:Sn,tensor5d:f7,tensor6d:h7,variable:p7,zeros:Ze,onesLike:pT,zerosLike:De,transpose:Ei,softmax:Lo,logSoftmax:Y7,localResponseNormalization:DW,norm:x_,gather:gy,unsortedSegmentSum:i_,basicLSTMCell:MW,multiRNNCell:FW,movingAverage:OW,stridedSlice:LW,topk:BW,scatterND:jW,fft:xy,ifft:ff,rfft:by,irfft:b_,sparseToDense:VW,gatherND:WW,diag:$W,dropout:UW,hannWindow:wy,hammingWindow:k_,frame:ky,stft:C_,inTopKAsync:GW});function Y(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(n){n!=null&&D(n.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function Hp(e,t,n,r){if(n==="linear")return e.linear(t);if(n==="relu")return e.relu(t);if(n==="elu")return e.elu(t);if(n==="relu6")return e.relu6(t);if(n==="prelu")return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var y$=function(e){function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new RT(n,W),n}return Ir(t,e),t.prototype.write=function(n,r,o){this.firstUse&&(this.firstUse=!1,X().get("IS_NODE")&&Zd(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:n,dtype:o}),i},t.prototype.move=function(n,r,o,i){this.data.set(n,{values:r,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return le(this,void 0,void 0,function(){return ue(this,function(r){return[2,this.readSync(n)]})})},t.prototype.readSync=function(n){var r=this.data.get(n),o=r.dtype,i=r.complexTensors;return o==="complex64"?Ug(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(n).values},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),o=r;if(n.dtype==="string")try{o=r.map(function(i){return Yd(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Se(n.shape,n.dtype,o)},t.prototype.makeOutput=function(n,r,o){var i=this.write(n,r,o);return W.makeTensorFromDataId(i,r,o,this)},t.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return le(this,void 0,void 0,function(){var r;return ue(this,function(o){return r=Or(),n(),[2,{kernelMs:Or()-r}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,r){var o=this.makeOutput(null,n.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:W.keep(n.clone()),imag:W.keep(r.clone())},o},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,o){if(Y(n,"slice"),ET(n.shape,r,o)){var i=ST(r,n.strides),a=de(o);return Kt(this.readSync(n.dataId).subarray(i,i+a),o,n.dtype)}for(var s=Se(o,n.dtype),l=this.bufferSync(n),u=0;u<s.size;++u){var c=s.indexToLoc(u).map(function(d,f){return d+r[f]});s.values[u]=l.get.apply(l,c)}return s.toTensor()},t.prototype.stridedSlice=function(n,r,o,i){Y(n,"stridedSlice");var a=ay(r,o,i);if(a.some(function(h){return h===0}))return Kt([],a);for(var s=Se(a,n.dtype),l=this.bufferSync(n),u=0;u<s.size;u++){for(var c=s.indexToLoc(u),d=new Array(c.length),f=0;f<d.length;f++)d[f]=c[f]*i[f]+r[f];s.set.apply(s,[l.get.apply(l,d)].concat(c))}return s.toTensor()},t.prototype.diag=function(n){for(var r=this.readSync(n.dataId),o=Se([n.size,n.size],n.dtype),i=o.values,a=0;a<r.length;a++)i[a*n.size+a]=r[a];return o.toTensor()},t.prototype.unstack=function(n,r){for(var o=n.shape[r],i=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(i[a++]=n.shape[s]);var l=new Array(n.rank).fill(0),u=n.shape.slice();u[r]=1;var c=new Array(o);for(s=0;s<c.length;s++)l[r]=s,c[s]=this.slice(n,l,u).reshape(i);return c},t.prototype.reverse=function(n,r){Y(n,"reverse");for(var o=Se(n.shape,n.dtype),i=this.bufferSync(n),a=function(l){var u=o.indexToLoc(l),c=u.slice();r.forEach(function(d){return c[d]=n.shape[d]-1-c[d]}),o.set.apply(o,[i.get.apply(i,c)].concat(u))},s=0;s<o.size;s++)a(s);return o.toTensor()},t.prototype.concat=function(n,r){var o=this;if(n[0].dtype==="complex64"){var i=n.map(function(h){return sr(h)}),a=n.map(function(h){return jr(h)});return Ut(this.concat(i,r),this.concat(a,r))}var s=n.map(function(h){var p=de(h.shape.slice(r));return h.as2D(-1,p)}),l=Bs(s.map(function(h){return h.shape}),1),u=Se(l,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(h){u.set(o.readSync(h.dataId),c),c+=h.size})}else{var d=0;s.forEach(function(h){for(var p=o.readSync(h.dataId),m=0,y=0;y<h.shape[0];++y)for(var g=y*l[1]+d,v=0;v<h.shape[1];++v)u[g+v]=p[m++];d+=h.shape[1]})}var f=Bs(n.map(function(h){return h.shape}),r);return Kt(u,f,n[0].dtype)},t.prototype.neg=function(n){return Y(n,"neg"),this.multiply(ne(-1),n)},t.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o+a,imag:i+s}}):this.broadcastedBinaryOp(n,r,Ht(n.dtype,r.dtype),function(o,i){return o+i})},t.prototype.addN=function(n){var r=this;Y(n,"addN");for(var o=n.map(function(c){return r.readSync(c.dataId)}),i=Se(n[0].shape,n[0].dtype),a=i.values,s=0;s<n.length;s++)for(var l=o[s],u=0;u<a.length;u++)a[u]+=l[u];return i.toTensor()},t.prototype.softmax=function(n,r){var o=Pt([r],n.shape),i=this.max(n,o),a=Mn(i.shape,o),s=this.subtract(n,i.reshape(a)),l=this.exp(s),u=this.sum(l,o).reshape(a);return this.realDivide(l,u)},t.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o-a,imag:i-s}}):this.broadcastedBinaryOp(n,r,Ht(n.dtype,r.dtype),function(o,i){return o-i})},t.prototype.pow=function(n,r){return Y([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.pow(o,i)})},t.prototype.batchMatMul=function(n,r,o,i){Y([n,r],"matMul");for(var a=o?n.shape[1]:n.shape[2],s=o?n.shape[2]:n.shape[1],l=i?r.shape[1]:r.shape[2],u=n.shape[0],c=this.readSync(n.dataId),d=this.readSync(r.dataId),f=o?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],h=f[0],p=f[1],m=f[2],y=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],g=y[0],v=y[1],x=y[2],b=s*l,k=Se([u,s,l],n.dtype),E=k.values,T=this.blockSize,R=0;R<u;R++)for(var _=0;_<s;_+=T)for(var S=0;S<l;S+=T)for(var A=0;A<a;A+=T)for(var N=Math.min(_+T,s),O=Math.min(S+T,l),M=Math.min(A+T,a),F=_;F<N;F++)for(var V=S;V<O;V++){for(var z=0,P=A;P<M;P++)z+=c[R*h+F*p+P*m]*d[P*g+V*v+R*x];E[R*b+(F*l+V)]+=z}return k.toTensor()},t.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,i=n.transposeA,a=n.transposeB,s=n.bias,l=n.activation,u=n.preluActivationWeights,c=this.batchMatMul(r,o,i,a);return s&&(c=this.add(c,s)),l&&(c=Hp(this,c,l,u)),c},t.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o*a-i*s,imag:o*s+i*a}}):this.broadcastedBinaryOp(n,r,Ht(n.dtype,r.dtype),function(o,i){return o*i})},t.prototype.realDivide=function(n,r){return Y([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(o,i){return o/i})},t.prototype.floorDiv=function(n,r){return Y([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(o,i){return Math.floor(o/i)})},t.prototype.sum=function(n,r){Y(n,"sum"),jn("sum",r,n.rank);for(var o=rn(n.shape,r),i=o[0],a=o[1],s=Ze(i,Ht(n.dtype,"int32")),l=de(a),u=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<u.length;++d){for(var f=d*l,h=0,p=0;p<l;++p)h+=c[f+p];u[d]=h}return s},t.prototype.prod=function(n,r){Y(n,"sum");for(var o=rn(n.shape,r),i=o[0],a=o[1],s=Ze(i,Ht(n.dtype,"int32")),l=de(a),u=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<u.length;++d){for(var f=d*l,h=1,p=0;p<l;++p)h*=c[f+p];u[d]=h}return s},t.prototype.unsortedSegmentSum=function(n,r,o){Y(n,"unsortedSegmentSum");for(var i=[],a=n.rank-r.rank,s=0;s<a;++s)r=r.expandDims(s+1);for(s=0;s<o;++s){var l=ne(s,"int32"),u=r_(l,r).asType("float32").mul(n).sum(0);i.push(u)}return Gn(i)},t.prototype.argMin=function(n,r){Y(n,"argMin");var o=[r];jn("argMin",o,n.rank);for(var i=rn(n.shape,o),a=i[0],s=i[1],l=Ze(a,"int32"),u=de(s),c=this.readSync(l.dataId),d=this.readSync(n.dataId),f=0;f<c.length;++f){for(var h=f*u,p=d[h],m=0,y=0;y<u;++y){var g=d[h+y];g<p&&(p=g,m=y)}c[f]=m}return l},t.prototype.argMax=function(n,r){Y(n,"argMax");var o=[r];jn("argMax",o,n.rank);for(var i=rn(n.shape,o),a=i[0],s=i[1],l=Ze(a,"int32"),u=de(s),c=this.readSync(l.dataId),d=this.readSync(n.dataId),f=0;f<c.length;++f){for(var h=f*u,p=d[h],m=0,y=0;y<u;++y){var g=d[h+y];g>p&&(p=g,m=y)}c[f]=m}return l},t.prototype.cumsum=function(n,r,o,i){if(Y(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var a=Ht(n.dtype,"int32"),s=Ze(n.shape,a),l=this.readSync(s.dataId),u=this.readSync(n.dataId),c=n.shape[n.rank-1],d=i?function(y,g){return y+c-g-1}:function(y,g){return y+g},f=0;f<u.length;f+=c)for(var h=0;h<c;h++){var p=d(f,h);if(h===0)l[p]=o?0:u[p];else{var m=d(f,h-1);l[p]=o?u[m]+l[m]:u[p]+l[m]}}return s},t.prototype.equal=function(n,r){return Y([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o===i?1:0})},t.prototype.notEqual=function(n,r){return Y([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o!==i?1:0})},t.prototype.less=function(n,r){return Y([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o<i?1:0})},t.prototype.lessEqual=function(n,r){return Y([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o<=i?1:0})},t.prototype.greater=function(n,r){return Y([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o>i?1:0})},t.prototype.greaterEqual=function(n,r){return Y([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o>=i?1:0})},t.prototype.logicalNot=function(n){Y(n,"logicalNot");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)o[i]=r[i]?0:1;return this.makeOutput(o,n.shape,"bool")},t.prototype.logicalAnd=function(n,r){return Y([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o&&i})},t.prototype.logicalOr=function(n,r){return Y([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o||i})},t.prototype.select=function(n,r,o){Y([n,r,o],"select");for(var i=this.readSync(n.dataId),a=this.readSync(r.dataId),s=this.readSync(o.dataId),l=Ze(r.shape,Ht(r.dtype,o.dtype)),u=this.readSync(l.dataId),c=0,d=n.rank===0||n.rank>1||r.rank===1?1:de(r.shape.slice(1)),f=0;f<i.length;f++)for(var h=0;h<d;h++)i[f]===1?u[c++]=a[f]:u[c++]=s[f];return l},t.prototype.where=function(n){Y([n],"where");var r=this.readSync(n.dataId);return cy(n.shape,r)},t.prototype.topk=function(n,r,o){return Y(n,"topk"),MT(this.readSync(n.dataId),n.shape,n.dtype,r)},t.prototype.min=function(n,r){Y(n,"min"),jn("min",r,n.rank);for(var o=rn(n.shape,r),i=o[0],a=o[1],s=Ze(i,n.dtype),l=de(a),u=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<u.length;++d){for(var f=d*l,h=c[f],p=0;p<l;++p){var m=c[f+p];m<h&&(h=m)}u[d]=h}return s},t.prototype.minimum=function(n,r){return Y([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.min(o,i)})},t.prototype.mod=function(n,r){return Y([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){var a=o%i;return o<0&&i<0||o>=0&&i>=0?a:(a+i)%i})},t.prototype.max=function(n,r){Y(n,"max"),jn("max",r,n.rank);for(var o=rn(n.shape,r),i=o[0],a=o[1],s=Ze(i,n.dtype),l=de(a),u=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<u.length;++d){for(var f=d*l,h=c[f],p=0;p<l;++p){var m=c[f+p];m>h&&(h=m)}u[d]=h}return s},t.prototype.maximum=function(n,r){return Y([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.max(o,i)})},t.prototype.all=function(n,r){Y(n,"all"),jn("all",r,n.rank);for(var o=rn(n.shape,r),i=o[0],a=o[1],s=Ze(i,n.dtype),l=de(a),u=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<u.length;++d){for(var f=d*l,h=c[f],p=0;p<l;++p){var m=c[f+p];h=h&&m}u[d]=h}return s},t.prototype.any=function(n,r){Y(n,"any"),jn("any",r,n.rank);for(var o=rn(n.shape,r),i=o[0],a=o[1],s=Ze(i,n.dtype),l=de(a),u=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<u.length;++d){for(var f=d*l,h=c[f],p=0;p<l;++p){var m=c[f+p];h=h||m}u[d]=h}return s},t.prototype.squaredDifference=function(n,r){return Y([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){var a=o-i;return a*a})},t.prototype.ceil=function(n){Y(n,"ceil");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.ceil(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.floor=function(n){Y(n,"floor");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.floor(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.sign=function(n){Y(n,"x");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?o[i]=-1:r[i]>0?o[i]=1:o[i]=0;return this.makeOutput(o,n.shape,"float32")},t.prototype.isNaN=function(n){Y(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.isInf=function(n){Y(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.isFinite=function(n){Y(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.round=function(n){Y(n,"round");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=Math.floor(r[i]);r[i]-a<.5?o[i]=Math.floor(r[i]):r[i]-a>.5?o[i]=Math.ceil(r[i]):o[i]=a%2==0?a:a+1}return this.makeOutput(o,n.shape,"float32")},t.prototype.exp=function(n){Y(n,"exp");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.exp(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.expm1=function(n){Y(n,"expm1");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.expm1(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.log=function(n){Y(n,"log");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.log(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.log1p=function(n){Y(n,"log1p");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.log1p(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.sqrt=function(n){Y(n,"sqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.sqrt(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.rsqrt=function(n){Y(n,"rsqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=1/Math.sqrt(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.reciprocal=function(n){Y(n,"reciprocal");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=1/r[i];return this.makeOutput(o,n.shape,"float32")},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){Y(n,"relu");for(var r=Ze(n.shape,n.dtype),o=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<i.length;++a)o[a]=Math.max(0,i[a]);return r},t.prototype.relu6=function(n){Y(n,"relu");for(var r=Ze(n.shape,n.dtype),o=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<i.length;++a)o[a]=Math.min(Math.max(0,i[a]),6);return r},t.prototype.prelu=function(n,r){return Y([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return o<0?i*o:o})},t.prototype.elu=function(n){Y(n,"elu");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=o[i];r[i]=a>=0?a:Math.exp(a)-1}return this.makeOutput(r,n.shape,"float32")},t.prototype.eluDer=function(n,r){Y([n,r],"eluDer");for(var o=new Float32Array(r.size),i=this.readSync(r.dataId),a=this.readSync(n.dataId),s=0;s<i.length;++s){var l=i[s];o[s]=l>=1?a[s]:a[s]*(l+1)}return this.makeOutput(o,r.shape,"float32")},t.prototype.selu=function(n){Y(n,"selu");for(var r=fy,o=hy,i=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var l=a[s];i[s]=l>=0?o*l:r*(Math.exp(l)-1)}return this.makeOutput(i,n.shape,"float32")},t.prototype.clip=function(n,r,o){Y(n,"clip");for(var i=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var l=a[s];i[s]=l>o?o:l<r?r:l}return this.makeOutput(i,n.shape,"float32")},t.prototype.abs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.abs(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<n.size;++i){var a=o[2*i],s=o[2*i+1];r[i]=Math.hypot(a,s)}return this.makeOutput(r,n.shape,"float32")},t.prototype.int=function(n){Y(n,"int");for(var r=new Int32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=o[i];return this.makeOutput(r,n.shape,"int32")},t.prototype.sigmoid=function(n){Y(n,"sigmoid");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=1/(1+Math.exp(-o[i]));return this.makeOutput(r,n.shape,"float32")},t.prototype.softplus=function(n){Y(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a]>-r,l=i[a]<r,u=Math.exp(i[a]),c=void 0;c=l?u:s?i[a]:Math.log(1+u),o[a]=c}return this.makeOutput(o,n.shape,"float32")},t.prototype.sin=function(n){Y(n,"sin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.sin(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cos=function(n){Y(n,"cos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.cos(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tan=function(n){Y(n,"tan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.tan(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asin=function(n){Y(n,"asin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.asin(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acos=function(n){Y(n,"acos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.acos(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan=function(n){Y(n,"atan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.atan(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan2=function(n,r){return Y([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.atan2(o,i)})},t.prototype.sinh=function(n){Y(n,"sinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.sinh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cosh=function(n){Y(n,"cosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.cosh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tanh=function(n){Y(n,"tanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=x6(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asinh=function(n){Y(n,"asinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.asinh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acosh=function(n){Y(n,"acosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.acosh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atanh=function(n){Y(n,"atanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.atanh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.erf=function(n){Y(n,"erf");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=Math.sign(o[i]),s=Math.abs(o[i]),l=1/(1+.3275911*s);r[i]=a*(1-((((1.061405429*l-1.453152027)*l+1.421413741)*l-.284496736)*l+.254829592)*l*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},t.prototype.step=function(n,r){r===void 0&&(r=0),Y(n,"step");for(var o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a];isNaN(s)?o[a]=NaN:o[a]=s>0?1:r}return this.makeOutput(o,n.shape,"float32")},t.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,l=n.preluActivationWeights,u=this.conv2d(r,o,i);return a&&(u=this.add(u,a)),s&&(u=Hp(this,u,s,l)),u},t.prototype.conv2d=function(n,r,o){Y([n,r],"conv2d");for(var i=o.filterHeight,a=o.filterWidth,s=o.dilationHeight,l=o.dilationWidth,u=o.padInfo.left,c=o.padInfo.top,d=o.dataFormat==="channelsLast",f=Se(o.outShape,n.dtype),h=n.strides[0],p=d?n.strides[1]:n.strides[2],m=d?n.strides[2]:1,y=d?1:n.strides[1],g=f.strides[0],v=d?f.strides[1]:f.strides[2],x=d?f.strides[2]:1,b=d?1:f.strides[1],k=this.readSync(n.dataId),E=this.readSync(r.dataId),T=f.values,R=0;R<o.batchSize;++R)for(var _=R*h,S=R*g,A=0;A<o.outHeight;++A)for(var N=S+A*v,O=A*o.strideHeight-c,M=0;M<i;M++){var F=O+M*s;if(!(F<0||F>=o.inHeight))for(var V=M*r.strides[0],z=_+F*p,P=0;P<o.outWidth;++P)for(var B=N+P*x,L=P*o.strideWidth-u,$=0;$<a;$++){var q=L+$*l;if(!(q<0||q>=o.inWidth))for(var Q=z+q*m,ee=V+$*r.strides[1],te=0;te<o.inChannels;++te){for(var re=k[Q+te*y],ce=0;ce<o.outChannels;++ce)T[B+ce*b]+=re*E[ee+ce];ee+=o.outChannels}}}return f.toTensor()},t.prototype.conv3d=function(n,r,o){for(var i=o.filterDepth,a=o.filterHeight,s=o.filterWidth,l=o.dilationDepth,u=o.dilationHeight,c=o.dilationWidth,d=o.padInfo.front,f=o.padInfo.left,h=o.padInfo.top,p=Se(o.outShape,n.dtype),m=this.readSync(n.dataId),y=this.readSync(r.dataId),g=p.values,v=0;v<o.batchSize;++v)for(var x=v*n.strides[0],b=v*p.strides[0],k=0;k<o.outDepth;++k)for(var E=b+k*p.strides[1],T=k*o.strideDepth-d,R=0;R<i;R++){var _=T+R*l;if(!(_<0||_>=o.inDepth))for(var S=R*r.strides[0],A=x+_*n.strides[1],N=0;N<o.outHeight;++N)for(var O=E+N*p.strides[2],M=N*o.strideHeight-h,F=0;F<a;F++){var V=M+F*u;if(!(V<0||V>=o.inHeight))for(var z=S+F*r.strides[1],P=A+V*n.strides[2],B=0;B<o.outWidth;++B)for(var L=O+B*o.outChannels,$=B*o.strideWidth-f,q=0;q<s;q++){var Q=$+q*c;if(!(Q<0||Q>=o.inWidth))for(var ee=z+q*r.strides[2],te=P+Q*o.inChannels,re=ee,ce=0;ce<o.inChannels;++ce){for(var ae=m[te+ce],me=0;me<o.outChannels;++me)g[L+me]+=ae*y[re+me];re+=o.outChannels}}}}return p.toTensor()},t.prototype.conv2dDerInput=function(n,r,o){Y([n,r],"conv2dDerInput");for(var i=Se(o.inShape,"float32"),a=i.values,s=this.readSync(n.dataId),l=this.readSync(r.dataId),u=r.strides,c=u[0],d=u[1],f=u[2],h=o.batchSize,p=o.filterHeight,m=o.filterWidth,y=o.inChannels,g=o.inHeight,v=o.inWidth,x=o.outChannels,b=o.outHeight,k=o.outWidth,E=o.strideHeight,T=o.strideWidth,R=o.dataFormat,_=p-1-o.padInfo.top,S=m-1-o.padInfo.left,A=R==="channelsLast",N=i.strides[0],O=A?i.strides[1]:i.strides[2],M=A?i.strides[2]:1,F=A?1:i.strides[1],V=n.strides[0],z=A?n.strides[1]:n.strides[2],P=A?n.strides[2]:1,B=A?1:n.strides[1],L=0;L<h;++L)for(var $=0;$<y;++$)for(var q=0;q<g;++q)for(var Q=q-_,ee=Math.max(0,Math.ceil(Q/E)),te=Math.min(b,(p+Q)/E),re=0;re<v;++re){for(var ce=re-S,ae=Math.max(0,Math.ceil(ce/T)),me=Math.min(k,(m+ce)/T),Ae=0,Ce=ee;Ce<te;++Ce)for(var se=Ce*E-Q,be=ae;be<me;++be)for(var Re=V*L+z*Ce+P*be,we=c*(p-1-se)+d*(m-1-(be*T-ce))+f*$,Fe=0;Fe<x;++Fe)Ae+=s[Re+B*Fe]*l[we+Fe];a[N*L+O*q+M*re+F*$]=Ae}return i.toTensor()},t.prototype.conv3dDerInput=function(n,r,o){for(var i=Se(o.inShape,"float32"),a=i.values,s=i.strides,l=s[0],u=s[1],c=s[2],d=s[3],f=this.readSync(n.dataId),h=n.strides,p=h[0],m=h[1],y=h[2],g=h[3],v=this.readSync(r.dataId),x=r.strides,b=x[0],k=x[1],E=x[2],T=x[3],R=o.batchSize,_=o.filterDepth,S=o.filterHeight,A=o.filterWidth,N=o.inChannels,O=o.inDepth,M=o.inHeight,F=o.inWidth,V=o.outChannels,z=o.outDepth,P=o.outHeight,B=o.outWidth,L=o.strideDepth,$=o.strideHeight,q=o.strideWidth,Q=_-1-o.padInfo.front,ee=S-1-o.padInfo.top,te=A-1-o.padInfo.left,re=0;re<R;++re)for(var ce=0;ce<N;++ce)for(var ae=0;ae<O;++ae)for(var me=ae-Q,Ae=Math.max(0,Math.ceil(me/L)),Ce=Math.min(z,(_+me)/L),se=0;se<M;++se)for(var be=se-ee,Re=Math.max(0,Math.ceil(be/$)),we=Math.min(P,(S+be)/$),Fe=0;Fe<F;++Fe){for(var At=Fe-te,ge=Math.max(0,Math.ceil(At/q)),Xe=Math.min(B,(A+At)/q),Vt=0,Dt=Ae;Dt<Ce;++Dt)for(var Jt=Dt*L-me,Mt=Re;Mt<we;++Mt)for(var yr=Mt*$-be,kn=ge;kn<Xe;++kn)for(var Cn=p*re+m*Dt+y*Mt+g*kn,tr=b*(_-1-Jt)+k*(S-1-yr)+E*(A-1-(kn*q-At))+T*ce,ht=0;ht<V;++ht)Vt+=f[Cn+ht]*v[tr+ht];a[l*re+u*ae+c*se+d*Fe+ce]=Vt}return i.toTensor()},t.prototype.conv2dDerFilter=function(n,r,o){Y([n,r],"conv2dDerFilter");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,l=o.filterWidth,u=o.dataFormat==="channelsLast",c=Se(o.filterShape,"float32"),d=o.padInfo.left,f=o.padInfo.top,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var y=Math.max(0,Math.ceil((f-m)/i)),g=Math.min(o.outHeight,(o.inHeight+f-m)/i),v=0;v<l;++v)for(var x=Math.max(0,Math.ceil((d-v)/a)),b=Math.min(o.outWidth,(o.inWidth+d-v)/a),k=0;k<o.inChannels;++k)for(var E=0;E<o.outChannels;++E){for(var T=0,R=0;R<o.batchSize;++R)for(var _=y;_<g;++_)for(var S=m+_*i-f,A=x;A<b;++A){var N=v+A*a-d;T+=u?h.get(R,S,N,k)*p.get(R,_,A,E):h.get(R,k,S,N)*p.get(R,E,_,A)}c.set(T,m,v,k,E)}return c.toTensor()},t.prototype.conv3dDerFilter=function(n,r,o){for(var i=o.strideDepth,a=o.strideHeight,s=o.strideWidth,l=o.filterDepth,u=o.filterHeight,c=o.filterWidth,d=Se(o.filterShape,"float32"),f=d.values,h=d.strides,p=h[0],m=h[1],y=h[2],g=h[3],v=this.readSync(r.dataId),x=r.strides,b=x[0],k=x[1],E=x[2],T=x[3],R=this.readSync(n.dataId),_=n.strides,S=_[0],A=_[1],N=_[2],O=_[3],M=o.padInfo.front,F=o.padInfo.left,V=o.padInfo.top,z=0;z<l;++z)for(var P=Math.max(0,Math.ceil((M-z)/i)),B=Math.min(o.outDepth,(o.inDepth+M-z)/i),L=z*p,$=0;$<u;++$)for(var q=Math.max(0,Math.ceil((V-$)/a)),Q=Math.min(o.outHeight,(o.inHeight+V-$)/a),ee=$*m+L,te=0;te<c;++te)for(var re=Math.max(0,Math.ceil((F-te)/s)),ce=Math.min(o.outWidth,(o.inWidth+F-te)/s),ae=te*y+ee,me=0;me<o.inChannels;++me)for(var Ae=me*g+ae,Ce=0;Ce<o.outChannels;++Ce){for(var se=0,be=0;be<o.batchSize;++be)for(var Re=be*S,we=be*b,Fe=P;Fe<B;++Fe)for(var At=(z+Fe*i-M)*A+Re,ge=Fe*k+we,Xe=q;Xe<Q;++Xe)for(var Vt=($+Xe*a-V)*N+At,Dt=Xe*E+ge,Jt=re;Jt<ce;++Jt){var Mt=Jt*T+Dt;se+=R[(te+Jt*s-F)*O+Vt+me]*v[Mt+Ce]}f[Ae+Ce]=se}return d.toTensor()},t.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,l=n.preluActivationWeights,u=this.depthwiseConv2D(r,o,i);return a&&(u=this.add(u,a)),s&&(u=Hp(this,u,s,l)),u},t.prototype.depthwiseConv2D=function(n,r,o){Y([n,r],"depthwiseConv2D");for(var i=o.filterHeight,a=o.filterWidth,s=o.dilationHeight,l=o.dilationWidth,u=o.padInfo.left,c=o.padInfo.top,d=o.outChannels/o.inChannels,f=Se(o.outShape,n.dtype),h=this.readSync(n.dataId),p=this.readSync(r.dataId),m=f.values,y=0;y<o.batchSize;++y)for(var g=y*n.strides[0],v=y*f.strides[0],x=0;x<o.outHeight;++x)for(var b=v+x*f.strides[1],k=x*o.strideHeight-u,E=0;E<i;++E){var T=k+E*s;if(!(T<0||T>=o.inHeight))for(var R=E*r.strides[0],_=g+T*n.strides[1],S=0;S<o.outWidth;++S)for(var A=b+S*f.strides[2],N=S*o.strideWidth-c,O=0;O<a;++O){var M=N+O*l;if(!(M<0||M>=o.inWidth))for(var F=R+O*r.strides[1],V=_+M*o.inChannels,z=A,P=F,B=0;B<o.inChannels;++B){for(var L=h[V+B],$=0;$<d;++$)m[z+$]+=L*p[P+$];z+=d,P+=d}}}return f.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,r,o){Y([n,r],"depthwiseConv2DDerInput");for(var i=Se(o.inShape,"float32"),a=i.values,s=i.strides,l=s[0],u=s[1],c=s[2],d=this.readSync(n.dataId),f=n.strides,h=f[0],p=f[1],m=f[2],y=this.readSync(r.dataId),g=r.strides,v=g[0],x=g[1],b=g[2],k=o.batchSize,E=o.filterHeight,T=o.filterWidth,R=o.inChannels,_=o.inHeight,S=o.inWidth,A=o.outChannels,N=o.outHeight,O=o.outWidth,M=o.strideHeight,F=o.strideWidth,V=E-1-o.padInfo.top,z=T-1-o.padInfo.left,P=A/R,B=0;B<k;++B)for(var L=0;L<R;++L)for(var $=0;$<_;++$)for(var q=$-V,Q=Math.max(0,Math.ceil(q/M)),ee=Math.min(N,(E+q)/M),te=0;te<S;++te){for(var re=te-z,ce=Math.max(0,Math.ceil(re/F)),ae=Math.min(O,(T+re)/F),me=0,Ae=Q;Ae<ee;++Ae)for(var Ce=Ae*M-q,se=ce;se<ae;++se)for(var be=h*B+p*Ae+m*se,Re=v*(E-1-Ce)+x*(T-1-(se*F-re))+b*L,we=0;we<P;++we)me+=d[be+(L*P+we)]*y[Re+we];a[l*B+u*$+c*te+L]=me}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,r,o){Y([n,r],"depthwiseConv2DDerFilter");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,l=o.filterWidth,u=Se(o.filterShape,"float32"),c=o.padInfo.left,d=o.padInfo.top,f=o.outChannels/o.inChannels,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var y=Math.max(0,Math.ceil((d-m)/i)),g=Math.min(o.outHeight,(o.inHeight+d-m)/i),v=0;v<l;++v)for(var x=Math.max(0,Math.ceil((c-v)/a)),b=Math.min(o.outWidth,(o.inWidth+c-v)/a),k=0;k<o.outChannels;++k){for(var E=Math.trunc(k/f),T=k%f,R=0,_=0;_<o.batchSize;++_)for(var S=y;S<g;++S)for(var A=m+S*i-d,N=x;N<b;++N){var O=v+N*a-c;R+=h.get(_,A,O,E)*p.get(_,S,N,k)}u.set(R,m,v,E,T)}return u.toTensor()},t.prototype.tile=function(n,r){return Y(n,"tile"),DT(this.bufferSync(n),r)},t.prototype.pad=function(n,r,o){Y(n,"pad");var i=r.map(function(f,h){return f[0]+n.shape[h]+f[1]}),a=r.map(function(f){return f[0]}),s=this.bufferSync(n),l=Se(i,n.dtype);o!==0&&l.values.fill(o);for(var u=0;u<n.size;u++){var c=s.indexToLoc(u),d=c.map(function(f,h){return f+a[h]});l.set.apply(l,[s.get.apply(s,c)].concat(d))}return l.toTensor()},t.prototype.transpose=function(n,r){Y(n,"transpose");for(var o=new Array(n.rank),i=0;i<o.length;i++)o[i]=n.shape[r[i]];var a=this.readSync(n.dataId),s=Se(o,n.dtype),l=this.bufferSync(n);for(i=0;i<n.size;++i){for(var u=l.indexToLoc(i),c=new Array(u.length),d=0;d<c.length;d++)c[d]=u[r[d]];var f=s.locToIndex(c);s.values[f]=a[i]}return s.toTensor()},t.prototype.gather=function(n,r,o){Y([n,r],"gather");var i=n.shape.slice(),a=this.readSync(r.dataId);i[o]=a.length;for(var s=Se(i,n.dtype),l=this.bufferSync(n),u=0;u<s.size;++u){var c=s.indexToLoc(u),d=c.slice();d[o]=a[c[o]];var f=l.locToIndex(d);s.values[u]=l.values[f]}return s.toTensor()},t.prototype.batchToSpaceND=function(n,r,o){Y([n],"batchToSpaceND");var i=r.reduce(function(d,f){return d*f}),a=nf(n.shape,r,i),s=rf(a.length,r.length),l=of(n.shape,r,i),u=bT(o,r.length),c=wT(l,o,r.length);return n.reshape(a).transpose(s).reshape(l).slice(u,c)},t.prototype.spaceToBatchND=function(n,r,o){Y([n],"spaceToBatchND");var i=r.reduce(function(f,h){return f*h}),a=[[0,0]];a.push.apply(a,o);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var l=n.pad(a),u=nf(l.shape,r,i,!1),c=rf(u.length,r.length,!1),d=of(l.shape,r,i,!1);return l.reshape(u).transpose(c).reshape(d)},t.prototype.pool=function(n,r,o){Y(n,"pool");for(var i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,h=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(n.dataId),m=Se(r.outShape,n.dtype),y=m.values,g=r.outShape[1]*r.outShape[2]*r.outShape[3],v=r.outShape[2]*r.outShape[3],x=r.outShape[3],b=0;b<r.batchSize;++b)for(var k=b*g,E=b*n.strides[0],T=0;T<r.inChannels;++T)for(var R=0;R<r.outHeight;++R)for(var _=R*i-d,S=Math.max(0,_),A=Math.min(r.inHeight,u+_),N=k+R*v,O=0;O<r.outWidth;++O){for(var M=O*a-f,F=Math.max(0,M),V=Math.min(r.inWidth,c+M),z=h,P=0,B=0,L=S;L<A;L+=s){for(var $=E+L*n.strides[1],q=F;q<V;q+=l){var Q=p[$+q*n.strides[2]+T];o==="max"&&Q>z?z=Q:o==="avg"&&(P+=Q,B++)}if(isNaN(z))break}y[N+O*x+T]=o==="avg"?P/B:z}return m.toTensor()},t.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},t.prototype.maxPoolPositions=function(n,r){for(var o=Se(r.outShape,"int32"),i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,h=this.bufferSync(n),p=0;p<r.batchSize;++p)for(var m=0;m<r.inChannels;++m)for(var y=0;y<r.outHeight;++y){for(var g=y*i-d,v=g;v<0;)v+=s;for(var x=Math.min(r.inHeight,u+g),b=0;b<r.outWidth;++b){for(var k=b*a-f,E=k;E<0;)E+=l;for(var T=Math.min(r.inWidth,c+k),R=Number.NEGATIVE_INFINITY,_=-1,S=v;S<x;S+=s)for(var A=S-g,N=E;N<T;N+=l){var O=N-k,M=h.get(p,S,N,m);M>R&&(R=M,_=A*c+O)}o.set(_,p,y,b,m)}}return o.toTensor()},t.prototype.maxPoolBackprop=function(n,r,o,i){Y([r,o],"maxPoolBackprop");for(var a=this.maxPoolPositions(r,i),s=i.strideHeight,l=i.strideWidth,u=i.dilationHeight,c=i.dilationWidth,d=i.effectiveFilterHeight,f=i.effectiveFilterWidth,h=f-1-i.padInfo.left,p=d-1-i.padInfo.top,m=Se(r.shape,"float32"),y=this.bufferSync(a),g=this.bufferSync(n),v=0;v<i.batchSize;++v)for(var x=0;x<i.inChannels;++x)for(var b=0;b<i.inHeight;++b)for(var k=0;k<i.inWidth;++k){for(var E=b-p,T=k-h,R=0,_=0;_<d;_+=u){var S=(E+_)/s;if(!(S<0||S>=i.outHeight||Math.floor(S)!==S))for(var A=0;A<f;A+=c){var N=(T+A)/l;if(!(N<0||N>=i.outWidth||Math.floor(N)!==N)){var O=d*f-1-y.get(v,S,N,x)===_*f+A?1:0;O!==0&&(R+=g.get(v,S,N,x)*O)}}}m.set(R,v,b,k,x)}return m.toTensor()},t.prototype.avgPoolBackprop=function(n,r,o){Y([n,r],"avgPoolBackprop");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,l=o.filterWidth,u=o.dilationHeight,c=o.dilationWidth,d=o.effectiveFilterHeight,f=o.effectiveFilterWidth,h=f-1-o.padInfo.left,p=d-1-o.padInfo.top,m=Se(r.shape,"float32"),y=1/(s*l),g=this.bufferSync(n),v=0;v<o.batchSize;++v)for(var x=0;x<o.inChannels;++x)for(var b=0;b<o.inHeight;++b)for(var k=0;k<o.inWidth;++k){for(var E=b-p,T=k-h,R=0,_=0;_<d;_+=u){var S=(E+_)/i;if(!(S<0||S>=o.outHeight||Math.floor(S)!==S))for(var A=0;A<f;A+=c){var N=(T+A)/a;N<0||N>=o.outWidth||Math.floor(N)!==N||(R+=g.get(v,S,N,x))}}m.set(R*y,v,b,k,x)}return m.toTensor()},t.prototype.pool3d=function(n,r,o){Y(n,"pool3d");for(var i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,y=r.padInfo.left,g=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(n.dataId),x=Se(r.outShape,n.dtype),b=x.values,k=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[2]*r.outShape[3]*r.outShape[4],T=r.outShape[3]*r.outShape[4],R=r.outShape[4],_=0;_<r.batchSize;++_)for(var S=_*k,A=_*n.strides[0],N=0;N<r.inChannels;++N)for(var O=0;O<r.outDepth;++O){for(var M=O*i-p,F=M;F<0;)F+=l;for(var V=Math.min(r.inDepth,d+M),z=S+O*E,P=0;P<r.outHeight;++P){for(var B=P*a-m,L=B;L<0;)L+=u;for(var $=Math.min(r.inHeight,f+B),q=z+P*T,Q=0;Q<r.outWidth;++Q){for(var ee=Q*s-y,te=ee;te<0;)te+=c;for(var re=Math.min(r.inWidth,h+ee),ce=q+Q*R,ae=g,me=0,Ae=0,Ce=F;Ce<V;Ce+=l){for(var se=A+Ce*n.strides[1],be=L;be<$;be+=u){for(var Re=se+be*n.strides[2],we=te;we<re;we+=c){var Fe=v[Re+we*n.strides[3]+N];if(o==="max"&&Fe>ae?ae=Fe:o==="avg"&&(me+=Fe,Ae++),isNaN(ae))break}if(isNaN(ae))break}if(isNaN(ae))break}b[ce+N]=o==="avg"?me/Ae:ae}}}return x.toTensor()},t.prototype.avgPool3d=function(n,r){return Y(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(n,r,o){Y([n,r],"avgPool3dBackprop");for(var i=o.strideDepth,a=o.strideHeight,s=o.strideWidth,l=o.filterDepth,u=o.filterHeight,c=o.filterWidth,d=o.dilationDepth,f=o.dilationHeight,h=o.dilationWidth,p=o.effectiveFilterDepth,m=o.effectiveFilterHeight,y=o.effectiveFilterWidth,g=p-1-o.padInfo.front,v=y-1-o.padInfo.left,x=m-1-o.padInfo.top,b=Se(r.shape,"float32"),k=1/(l*u*c),E=this.bufferSync(n),T=0;T<o.batchSize;++T)for(var R=0;R<o.inChannels;++R)for(var _=0;_<o.inDepth;++_)for(var S=0;S<o.inHeight;++S)for(var A=0;A<o.inWidth;++A){for(var N=_-g,O=S-x,M=A-v,F=0,V=0;V<p;V+=d){var z=(N+V)/i;if(!(z<0||z>=o.outDepth||Math.floor(z)!==z))for(var P=0;P<m;P+=f){var B=(O+P)/a;if(!(B<0||B>=o.outHeight||Math.floor(B)!==B))for(var L=0;L<y;L+=h){var $=(M+L)/s;$<0||$>=o.outWidth||Math.floor($)!==$||(F+=E.get(T,z,B,$,R))}}}b.set(F*k,T,_,S,A,R)}return b.toTensor()},t.prototype.maxPool3d=function(n,r){return Y(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(n,r){for(var o=Se(r.outShape,"int32"),i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,y=r.padInfo.left,g=this.bufferSync(n),v=0;v<r.batchSize;++v)for(var x=0;x<r.inChannels;++x)for(var b=0;b<r.outDepth;++b){for(var k=b*i-p,E=k;E<0;)E+=l;for(var T=Math.min(r.inDepth,d+k),R=0;R<r.outHeight;++R){for(var _=R*a-m,S=_;S<0;)S+=u;for(var A=Math.min(r.inHeight,f+_),N=0;N<r.outWidth;++N){for(var O=N*s-y,M=O;M<0;)M+=c;for(var F=Math.min(r.inWidth,h+O),V=Number.NEGATIVE_INFINITY,z=-1,P=E;P<T;P+=l)for(var B=P-k,L=S;L<A;L+=u)for(var $=L-_,q=M;q<F;q+=c){var Q=q-O,ee=g.get(v,P,L,q,x);ee>=V&&(V=ee,z=B*f*h+$*f+Q)}o.set(z,v,b,R,N,x)}}}return o.toTensor()},t.prototype.maxPool3dBackprop=function(n,r,o,i){Y([r,o],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(r,i),s=i.strideDepth,l=i.strideHeight,u=i.strideWidth,c=i.dilationDepth,d=i.dilationHeight,f=i.dilationWidth,h=i.effectiveFilterDepth,p=i.effectiveFilterHeight,m=i.effectiveFilterWidth,y=h-1-i.padInfo.front,g=m-1-i.padInfo.left,v=p-1-i.padInfo.top,x=Se(r.shape,"float32"),b=this.bufferSync(a),k=this.bufferSync(n),E=0;E<i.batchSize;++E)for(var T=0;T<i.inChannels;++T)for(var R=0;R<i.inDepth;++R)for(var _=0;_<i.inHeight;++_)for(var S=0;S<i.inWidth;++S){for(var A=R-y,N=_-v,O=S-g,M=0,F=0;F<h;F+=c){var V=(A+F)/s;if(!(V<0||V>=i.outDepth||Math.floor(V)!==V))for(var z=0;z<p;z+=d){var P=(N+z)/l;if(!(P<0||P>=i.outHeight||Math.floor(P)!==P))for(var B=0;B<m;B+=f){var L=(O+B)/u;if(!(L<0||L>=i.outWidth||Math.floor(L)!==L)){var $=h*p*m-1-b.get(E,V,P,L,T)===F*p*m+z*m+B?1:0;$!==0&&(M+=k.get(E,V,P,L,T)*$)}}}}x.set(M,E,R,_,S,T)}return x.toTensor()},t.prototype.cast=function(n,r){return IT(n,r,this)},t.prototype.reshape=function(n,r){return $g(n,r)},t.prototype.avgPool=function(n,r){return Y(n,"avgPool"),this.pool(n,r,"avg").toFloat()},t.prototype.resizeBilinear=function(n,r,o,i){Y(n,"resizeBilinear");for(var a=n.shape,s=a[0],l=a[1],u=a[2],c=a[3],d=this.readSync(n.dataId),f=new Float32Array(de([s,r,o,c])),h=[i&&r>1?l-1:l,i&&o>1?u-1:u],p=[i&&r>1?r-1:r,i&&o>1?o-1:o],m=0,y=h[0]/p[0],g=h[1]/p[1],v=0;v<s;v++)for(var x=0;x<r;x++)for(var b=y*x,k=Math.floor(b),E=b-k,T=Math.min(l-1,Math.ceil(b)),R=v*n.strides[0]+k*n.strides[1],_=v*n.strides[0]+T*n.strides[1],S=0;S<o;S++)for(var A=g*S,N=Math.floor(A),O=A-N,M=Math.min(u-1,Math.ceil(A)),F=R+N*n.strides[2],V=_+N*n.strides[2],z=R+M*n.strides[2],P=_+M*n.strides[2],B=0;B<c;B++){var L=d[F+B],$=d[V+B],q=L+(d[z+B]-L)*O,Q=q+($+(d[P+B]-$)*O-q)*E;f[m++]=Q}return Kt(f,[s,r,o,c])},t.prototype.resizeBilinearBackprop=function(n,r,o){Y([n,r],"resizeBilinearBackprop");for(var i=r.shape,a=i[0],s=i[1],l=i[2],u=i[3],c=n.shape,d=c[1],f=c[2],h=new Float32Array(a*s*l*u),p=[o&&d>1?s-1:s,o&&f>1?l-1:l],m=[o&&d>1?d-1:d,o&&f>1?f-1:f],y=p[0]/m[0],g=p[1]/m[1],v=this.readSync(n.dataId),x=0,b=0;b<a;b++)for(var k=b*r.strides[0],E=0;E<d;E++)for(var T=E*y,R=Math.floor(T),_=Math.min(Math.ceil(T),s-1),S=k+R*r.strides[1],A=k+_*r.strides[1],N=T-R,O=1-N,M=0;M<f;M++)for(var F=M*g,V=Math.floor(F),z=Math.min(Math.ceil(F),l-1),P=F-V,B=1-P,L=S+V*r.strides[2],$=S+z*r.strides[2],q=A+V*r.strides[2],Q=A+z*r.strides[2],ee=O*B,te=O*P,re=N*B,ce=N*P,ae=0;ae<u;ae++){var me=v[x++];h[L+ae]+=me*ee,h[$+ae]+=me*te,h[q+ae]+=me*re,h[Q+ae]+=me*ce}return Sn(h,[a,l,s,u],r.dtype)},t.prototype.resizeNearestNeighbor=function(n,r,o,i){Y(n,"resizeNearestNeighbor");for(var a=n.shape,s=a[0],l=a[1],u=a[2],c=a[3],d=this.readSync(n.dataId),f=new Float32Array(s*r*o*c),h=[i&&r>1?l-1:l,i&&o>1?u-1:u],p=[i&&r>1?r-1:r,i&&o>1?o-1:o],m=h[0]/p[0],y=h[1]/p[1],g=0,v=0;v<s;v++)for(var x=v*n.strides[0],b=0;b<r;b++)for(var k=m*b,E=x+Math.min(l-1,i?Math.round(k):Math.floor(k))*n.strides[1],T=0;T<o;T++)for(var R=y*T,_=E+Math.min(u-1,i?Math.round(R):Math.floor(R))*n.strides[2],S=0;S<c;S++){var A=d[_+S];f[g++]=A}return Kt(f,[s,r,o,c],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,r,o){Y([n,r],"resizeNearestNeighborBackprop");for(var i=r.shape,a=i[0],s=i[1],l=i[2],u=i[3],c=n.shape,d=c[1],f=c[2],h=new Float32Array(a*s*l*u),p=this.readSync(n.dataId),m=[o&&d>1?s-1:s,o&&f>1?l-1:l],y=[o&&d>1?d-1:d,o&&f>1?f-1:f],g=m[0]/y[0],v=m[1]/y[1],x=1/g,b=1/v,k=2*Math.ceil(x)+2,E=2*Math.ceil(b)+2,T=0;T<a;T++)for(var R=T*r.strides[0],_=0;_<s;_++)for(var S=R+_*r.strides[1],A=Math.floor(_*x),N=Math.floor(A-k/2),O=0;O<l;O++)for(var M=S+O*r.strides[2],F=Math.floor(O*b),V=Math.floor(F-E/2),z=0;z<u;z++){for(var P=0,B=0;B<k;B++){var L=B+N;if(!(L<0||L>=d)){var $=R+L*n.strides[1],q=L*g;if(_===Math.min(s-1,o?Math.round(q):Math.floor(q)))for(var Q=0;Q<E;Q++){var ee=Q+V;if(!(ee<0||ee>=f)){var te=$+ee*n.strides[2],re=ee*v;O===Math.min(l-1,o?Math.round(re):Math.floor(re))&&(P+=p[te+z])}}}}h[M+z]=P}return Sn(h,r.shape,r.dtype)},t.prototype.batchNormalization=function(n,r,o,i,a,s){Y([n,r,o,a,s],"batchNorm");for(var l=this.readSync(n.dataId),u=this.readSync(r.dataId),c=this.readSync(o.dataId),d=a?this.readSync(a.dataId):new Float32Array([1]),f=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(l.length),p=f.length,m=d.length,y=c.length,g=u.length,v=0,x=0,b=0,k=0,E=0;E<l.length;++E)h[E]=f[v++]+(l[E]-u[x++])*d[b++]/Math.sqrt(c[k++]+i),v>=p&&(v=0),x>=g&&(x=0),b>=m&&(b=0),k>=y&&(k=0);return Sn(h,n.shape)},t.prototype.localResponseNormalization4D=function(n,r,o,i,a){Y(n,"localResponseNormalization4D");var s=n.shape[3],l=s-1,u=this.readSync(n.dataId),c=n.size,d=new Float32Array(c);function f(y){for(var g=y%s,v=y-g+Math.max(0,g-r),x=y-g+Math.min(g+r,l),b=0;v<=x;v++){var k=u[v];b+=k*k}return b}for(var h=0;h<c;h++){var p=f(h),m=u[h]*Math.pow(o+i*p,-a);d[h]=m}return Sn(d,n.shape)},t.prototype.LRNGrad=function(n,r,o,i,a,s,l){Y(n,"LRNGrad");for(var u=n.shape[3],c=this.readSync(n.dataId),d=this.readSync(r.dataId),f=this.readSync(o.dataId),h=new Float32Array(n.size),p=n.size,m=0;m<p;m++){for(var y=m%u,g=m-y+Math.max(0,y-i),v=m-y+Math.min(u,y+i+1),x=0,b=g;b<v;b++)x+=Math.pow(d[b],2);for(x=s*x+a,b=g;b<v;b++){var k=-2*s*l*d[b]*f[m]/x;m===b&&(k+=Math.pow(x,-l)),k*=c[m],h[b]+=k}}return Sn(h,n.shape)},t.prototype.multinomial=function(n,r,o,i){Y(n,"multinomial");for(var a=r?n:Lo(n),s=a.shape[0],l=a.shape[1],u=Ze([s,o],"int32"),c=this.readSync(u.dataId),d=this.readSync(a.dataId),f=0;f<s;++f){var h=f*l,p=new Float32Array(l-1);p[0]=d[h];for(var m=1;m<p.length;++m)p[m]=p[m-1]+d[h+m];for(var y=sh(i.toString()),g=f*o,v=0;v<o;++v){var x=y();c[g+v]=p.length;for(var b=0;b<p.length;b++)if(x<p[b]){c[g+v]=b;break}}}return u},t.prototype.oneHot=function(n,r,o,i){Y(n,"oneHot");var a=new Float32Array(n.size*r);a.fill(i);for(var s=this.readSync(n.dataId),l=0;l<n.size;++l)s[l]>=0&&s[l]<r&&(a[l*r+s[l]]=o);return gi(a,[n.size,r],"int32")},t.prototype.nonMaxSuppression=function(n,r,o,i,a){return Y(n,"nonMaxSuppression"),ly(this.readSync(n.dataId),this.readSync(r.dataId),o,i,a)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,r){for(var o=n.shape[0],i=n.shape[1],a=Se(n.shape,"float32"),s=Se(n.shape,"float32"),l=sr(n).as2D(o,i),u=jr(n).as2D(o,i),c=0;c<o;c++)for(var d=l.slice([c,0],[1,i]),f=u.slice([c,0],[1,i]),h=Ut(d,f),p=this.readSync(this.fftImpl(h,r).dataId),m=0;m<i;m++){var y=F1(p,m);a.values[c*i+m]=y.real,s.values[c*i+m]=y.imag}return Ut(a.toTensor(),s.toTensor()).as2D(o,i)},t.prototype.fftImpl=function(n,r){var o=n.as1D(),i=o.size;if(this.isExponentOf2(i)){var a=this.fftRadix2(o,i,r).as2D(n.shape[0],n.shape[1]);return r&&(a=Ut(sr(a).div(ne(i)),jr(a).div(ne(i)))),a}var s=this.readSync(n.dataId),l=function(u){for(var c=new Float32Array(u.length/2),d=new Float32Array(u.length/2),f=0;f<u.length;f+=2)c[f/2]=u[f],d[f/2]=u[f+1];return{real:c,imag:d}}(this.fourierTransformByMatmul(s,i,r));return Ut(l.real,l.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,r,o){if(r===1)return n;var i=this.readSync(n.dataId),a=r/2,s=function(g){for(var v=Math.ceil(g.length/4),x=new Float32Array(v),b=new Float32Array(v),k=0;k<g.length;k+=4)x[Math.floor(k/4)]=g[k],b[Math.floor(k/4)]=g[k+1];return{real:x,imag:b}}(i),l=Ut(s.real,s.imag).as1D(),u=function(g){for(var v=Math.floor(g.length/4),x=new Float32Array(v),b=new Float32Array(v),k=2;k<g.length;k+=4)x[Math.floor(k/4)]=g[k],b[Math.floor(k/4)]=g[k+1];return{real:x,imag:b}}(i),c=Ut(u.real,u.imag).as1D();l=this.fftRadix2(l,a,o),c=this.fftRadix2(c,a,o);var d=function(g,v){for(var x=new Float32Array(g/2),b=new Float32Array(g/2),k=0;k<Math.ceil(g/2);k++){var E=(v?2:-2)*Math.PI*(k/g);x[k]=Math.cos(E),b[k]=Math.sin(E)}return{real:x,imag:b}}(r,o),f=Ut(d.real,d.imag).mul(c),h=l.add(f),p=l.sub(f),m=sr(h).concat(sr(p)),y=jr(h).concat(jr(p));return Ut(m,y).as1D()},t.prototype.fourierTransformByMatmul=function(n,r,o){for(var i=new Float32Array(2*r),a=0;a<r;a++){for(var s=0,l=0,u=0;u<r;u++){var c=J7(a*u,r,o),d=F1(n,u);s+=d.real*c.real-d.imag*c.imag,l+=d.real*c.imag+d.imag*c.real}o&&(s/=r,l/=r),Q7(i,s,l,a)}return i},t.prototype.depthToSpace=function(n,r,o){D(o==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o}),D(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=n.shape[0],a=n.shape[1],s=n.shape[2],l=n.shape[3],u=a*r,c=s*r,d=l/(r*r),f=this.readSync(n.dataId),h=new Float32Array(i*u*c*d),p=0,m=0;m<i;++m)for(var y=0;y<u;++y)for(var g=Math.floor(y/r),v=y%r,x=0;x<c;++x)for(var b=Math.floor(x/r),k=(v*r+x%r)*d,E=0;E<d;++E){var T=E+k+l*(b+s*(g+a*m));h[p++]=f[T]}return Sn(h,[i,u,c,d])},t.prototype.broadcastedBinaryOp=function(n,r,o,i){var a=Ne(n.shape,r.shape),s=Se(a,o),l=this.readSync(n.dataId),u=this.readSync(r.dataId),c=ii(n.shape,a),d=ii(r.shape,a),f=s.values;if(c.length+d.length===0)for(var h=0;h<f.length;++h)f[h]=i(l[h%l.length],u[h%u.length]);else{var p=this.bufferSync(n),m=this.bufferSync(r),y=function(g){var v=s.indexToLoc(g),x=v.slice(-n.rank);c.forEach(function(T){return x[T]=0});var b=p.locToIndex(x),k=v.slice(-r.rank);d.forEach(function(T){return k[T]=0});var E=m.locToIndex(k);f[g]=i(l[b],u[E])};for(h=0;h<f.length;++h)y(h)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,r,o){var i=Ne(n.shape,r.shape),a=Se(i,"float32"),s=Se(i,"float32"),l=this.readSync(n.dataId),u=this.readSync(r.dataId),c=ii(n.shape,i),d=ii(r.shape,i),f=a.values,h=s.values;if(c.length+d.length===0)for(var p=0;p<f.length;p++){var m=p%l.length,y=p%u.length,g=o(l[2*m],l[2*m+1],u[2*y],u[2*y+1]);f[p]=g.real,h[p]=g.imag}else{var v=this.bufferSync(this.data.get(n.dataId).complexTensors.real),x=this.bufferSync(this.data.get(r.dataId).complexTensors.real),b=function(k){var E=a.indexToLoc(k),T=E.slice(-n.rank);c.forEach(function(N){return T[N]=0});var R=v.locToIndex(T),_=E.slice(-r.rank);d.forEach(function(N){return _[N]=0});var S=x.locToIndex(_),A=o(l[2*R],l[2*R+1],u[2*S],u[2*S+1]);f[k]=A.real,h[k]=A.imag};for(p=0;p<f.length;p++)b(p)}return this.complex(a.toTensor(),s.toTensor())},t.prototype.split=function(n,r,o){return AT(n,r,o)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(n,r,o,i,a,s){for(var l=n.shape,u=l[0],c=l[1],d=l[2],f=l[3],h=r.shape[0],p=i[0],m=i[1],y=Se([h,p,m,f],"float32"),g=this.readSync(r.dataId),v=this.readSync(o.dataId),x=this.readSync(n.dataId),b=n.strides,k=y.strides,E=0;E<h;E++){var T=4*E,R=g[T],_=g[T+1],S=g[T+2],A=g[T+3],N=v[E];if(!(N>=u))for(var O=p>1?(S-R)*(c-1)/(p-1):0,M=m>1?(A-_)*(d-1)/(m-1):0,F=0;F<p;F++){var V=p>1?R*(c-1)+F*O:.5*(R+S)*(c-1);if(V<0||V>c-1)for(var z=0;z<m;z++)for(var P=0;P<f;P++){var B=P+z*k[2]+F*k[1]+E*k[0];y.values[B]=s}else if(a==="bilinear"){var L=Math.floor(V),$=Math.ceil(V),q=V-L;for(z=0;z<m;z++)if((Ce=m>1?_*(d-1)+z*M:.5*(_+A)*(d-1))<0||Ce>d-1)for(P=0;P<f;P++)B=P+z*k[2]+F*k[1]+E*k[0],y.values[B]=s;else{var Q=Math.floor(Ce),ee=Math.ceil(Ce),te=Ce-Q;for(P=0;P<f;P++){var re=x[B=P+Q*b[2]+L*b[1]+N*b[0]],ce=x[B=P+ee*b[2]+L*b[1]+N*b[0]],ae=x[B=P+Q*b[2]+$*b[1]+N*b[0]],me=re+(ce-re)*te,Ae=ae+(x[B=P+ee*b[2]+$*b[1]+N*b[0]]-ae)*te;B=P+z*k[2]+F*k[1]+E*k[0],y.values[B]=me+(Ae-me)*q}}}else for(z=0;z<m;++z){var Ce;if((Ce=m>1?_*(d-1)+z*M:.5*(_+A)*(d-1))<0||Ce>d-1)for(P=0;P<f;P++)B=P+z*k[2]+F*k[1]+E*k[0],y.values[B]=s;else{var se=Math.round(Ce),be=Math.round(V);for(P=0;P<f;P++){var Re=P+se*b[2]+be*b[1]+N*b[0],we=P+z*k[2]+F*k[1]+E*k[0];y.values[we]=x[Re]}}}}}return y.toTensor()},t.prototype.sparseToDense=function(n,r,o,i){var a=af(0,n,o),s=a.sliceRank,l=a.numUpdates,u=a.sliceSize,c=a.strides,d=a.outputSize;return this.scatter(n,r,o,d,u,l,s,c,i,!1)},t.prototype.gatherND=function(n,r){var o=r.shape,i=o[o.length-1],a=kT(n,r),s=a[0],l=a[1],u=a[2],c=a[3];if(l===0)return Kt([],s,n.dtype);for(var d=new gu([l,u],n.dtype),f=this.readSync(r.dataId),h=this.readSync(n.dataId),p=0;p<l;p++){for(var m=[],y=0,g=0;g<i;g++){var v=f[p*i+g];y+=v*c[g],m.push(v)}if(y<0||y>=n.size/u)throw new Error("Invalid indices: "+m+" does not index into "+n.shape);for(var x=0;x<u;x++)d.values[p*u+x]=h[y*u+x]}return d.toTensor().reshape(s)},t.prototype.scatterND=function(n,r,o){var i=af(0,n,o),a=i.sliceRank,s=i.numUpdates,l=i.sliceSize,u=i.strides,c=i.outputSize,d=ne(0);return this.scatter(n,r,o,c,l,s,a,u,d,!0)},t.prototype.fill=function(n,r,o){var i=Xd(o=o||Vu(r),de(n));return i.fill(r),W.makeTensor(i,n,o,this)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var r=Xd(n.dtype,de(n.shape));return this.makeOutput(r,n.shape,n.dtype)},t.prototype.linspace=function(n,r,o){return NT(n,r,o)},t.prototype.scatter=function(n,r,o,i,a,s,l,u,c,d){var f=[i/a,a],h=this.readSync(n.dataId),p=this.readSync(r.dataId);if(i===0)return Kt([],o,r.dtype);var m=new gu(f,r.dtype);m.values.fill(this.readSync(c.dataId)[0]);for(var y=0;y<s;y++){for(var g=[],v=0,x=0;x<l;x++){var b=h[y*l+x];g.push(b),v+=b*u[x]}if(v<0||v>=i/a)throw new Error("Invalid indices: "+g+" does not index into "+o);for(var k=0;k<a;k++)d?m.values[v*a+k]+=p[y*a+k]:m.values[v*a+k]=r.rank===0?p[0]:p[y*a+k]}return m.toTensor().reshape(o)},t}(TT);W.registerBackend("cpu",function(){return new y$},1);for(var Gp=0,r2=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t,i=o.boxes,a=o.scores,s=r,l=s.maxOutputSize,u=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,f=n;Y(i,"NonMaxSuppressionWithScore");var h=uy(f.data.get(i.dataId).values,f.data.get(a.dataId).values,l,u,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n;Y(r,"square");for(var i=o.data.get(r.dataId).values,a=new Float32Array(i.length),s=0;s<i.length;++s){var l=i[s];a[s]=l*l}return{dataId:o.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:xu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n;Y([o,i],xu);var s=a.data.get(o.dataId).values,l=a.data.get(i.dataId).values,u=function(f,h,p,m,y,g){var v=Ne(f,h),x=v.length,b=Xr(v),k=mu(y,de(v)),E=f.length,T=h.length,R=Xr(f),_=Xr(h),S=ii(f,v),A=ii(h,v);if(S.length+A.length===0)for(var N=0;N<k.length;++N)k[N]=g(p[N%p.length],m[N%m.length]);else{var O=function(M){var F=_6(M,x,b),V=F.slice(-E);S.forEach(function(L){return V[L]=0});var z=R1(V,E,R),P=F.slice(-T);A.forEach(function(L){return P[L]=0});var B=R1(P,T,_);k[M]=g(p[z],m[B])};for(N=0;N<k.length;++N)O(N)}return[k,v]}(o.shape,i.shape,s,l,o.dtype,function(f,h){var p=f-h;return p*p}),c=u[0],d=u[1];return{dataId:a.write(c,d,o.dtype),shape:d,dtype:o.dtype}}}];Gp<r2.length;Gp++)tT(r2[Gp]);var Aa,x$=function(e){this.variableNames=["A"];var t=sn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},b$=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=sn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var Kp=0,o2=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,i=r.numChannels,a=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,l=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=l[0],c=l[1],d=[c,u],f=[c,u,i];(s||a)&&(Aa==null&&(Aa=document.createElement("canvas").getContext("2d")),Aa.canvas.width=u,Aa.canvas.height=c,Aa.drawImage(o,0,0,u,c),o=Aa.canvas);var h=n.makeTensorInfo(d,"int32");n.texData.get(h.dataId).usage=Wn.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);var p=X().getBool("WEBGL_PACK")?new b$(f):new x$(f),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;Zd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=t,i=o.boxes,a=o.scores,s=r,l=s.maxOutputSize,u=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,f=n,h=uy(f.readSync(i.dataId),f.readSync(a.dataId),l,u,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n,i=new _e(r.shape,"return x * x;");return o.runWebGLProgram(i,[r],r.dtype)}},{kernelName:xu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n,s=X().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new co("return (a - b) * (a - b);",o.shape,i.shape):new ut("return (a - b) * (a - b);",o.shape,i.shape);return a.compileAndRun(s,[o,i])}}];Kp<o2.length;Kp++)tT(o2[Kp]);for(var qp=0,i2=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:xu,gradFunc:function(e,t){var n=t[0],r=t[1],o=ne(2);return{a:function(){return cn(e,cn(o,Nt(n,r)))},b:function(){return cn(e,cn(o,Nt(r,n)))}}}}];qp<i2.length;qp++)v6(i2[qp]);var w$=function(){function e(){}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e}();X().get("IS_BROWSER")&&X().setPlatform("browser",new w$);var Xp,k$=function(){return require("node-fetch")},C$=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return X().global.fetch!=null?X().global.fetch(t,n):(Xp==null&&(Xp=k$()),Xp(t,n))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e}();X().get("IS_NODE")&&X().setPlatform("node",new C$);var Gg={float32:4,int32:4,uint16:2,uint8:1,bool:1},hf=4;function E_(e,t){for(var n={},r=0,o=function(s){var l=s.name,u=s.dtype,c=s.shape,d=de(c),f=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=Gg[h.dtype],m=e.slice(r,r+d*p),y=h.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(u==="float32")f=Float32Array.from(y,function(E){return E*h.scale+h.min});else{if(u!=="int32")throw new Error("Unsupported dtype in weight '"+l+"': "+u);f=Int32Array.from(y,function(E){return Math.round(E*h.scale+h.min)})}r+=d*p}else if(u==="string"){var g=de(s.shape);f=[];for(var v=0;v<g;v++){var x=new Uint32Array(e.slice(r,r+hf))[0];r+=hf;var b=new Uint8Array(e.slice(r,r+x));f.push(b),r+=x}}else{var k=Gg[u];if(m=e.slice(r,r+d*k),u==="float32")f=new Float32Array(m);else if(u==="int32")f=new Int32Array(m);else{if(u!=="bool")throw new Error("Unsupported dtype in weight '"+l+"': "+u);f=new Uint8Array(m)}r+=d*k}n[l]=Kt(f,c,u)},i=0,a=t;i<a.length;i++)o(a[i]);return n}function E$(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(i){if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(t),o=0;return n.forEach(function(i){r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var Kg=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function a2(e){return Kg?Buffer.byteLength(e):new Blob([e]).size}function _y(e){var t=0;e.forEach(function(o){t+=o.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(o){n.set(new Uint8Array(o),r),r+=o.byteLength}),n.buffer}function s2(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function qu(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:a2(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:a2(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var $n=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var a=i(t,r);a!==null&&o.push(a)}),o},e}(),ys="://",vi=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){D(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(ys)&&(t=t.slice(0,t.indexOf(ys))),D(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();D(r.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(t){var n=this.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return n},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function sd(e){if(e.indexOf(ys)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+vi.getSchemes().join(","));return{scheme:e.split(ys)[0],path:e.split(ys)[1]}}function l2(e,t,n){return n===void 0&&(n=!1),le(this,void 0,void 0,function(){var r,o,i,a,s,l,u,c,d;return ue(this,function(f){switch(f.label){case 0:return D(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),D((r=$n.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),D(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),o=r[0],D((i=$n.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),D(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),a=i[0],s=sd(e).scheme,l=sd(e).path,u=s===sd(e).scheme,[4,o.load()];case 1:return c=f.sent(),n&&u?[4,vi.getManager(s).removeModel(l)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,a.save(c)];case 4:return d=f.sent(),!n||u?[3,6]:[4,vi.getManager(s).removeModel(l)];case 5:f.sent(),f.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}var Ji="models_store",ai="model_info_store";function S_(){if(!X().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function qg(e){var t=e.result;t.createObjectStore(Ji,{keyPath:"modelPath"}),t.createObjectStore(ai,{keyPath:"modelPath"})}var xs=function(){function e(t){if(this.indexedDB=S_(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){return ue(this,function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return le(this,void 0,void 0,function(){return ue(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,n){var r=this;return new Promise(function(o,i){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return qg(a)},a.onsuccess=function(){var s=a.result;if(n==null){var l=s.transaction(Ji,"readonly"),u=l.objectStore(Ji).get(r.modelPath);u.onsuccess=function(){if(u.result==null)return s.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(u.result.modelArtifacts)},u.onerror=function(m){return s.close(),i(u.error)},l.oncomplete=function(){return s.close()}}else{var c,d=qu(n),f=s.transaction(ai,"readwrite"),h=f.objectStore(ai),p=h.put({modelPath:r.modelPath,modelArtifactsInfo:d});p.onsuccess=function(){var m=(c=s.transaction(Ji,"readwrite")).objectStore(Ji).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:d});m.onsuccess=function(){return o({modelArtifactsInfo:d})},m.onerror=function(y){var g=(h=f.objectStore(ai)).delete(r.modelPath);g.onsuccess=function(){return s.close(),i(m.error)},g.onerror=function(v){return s.close(),i(m.error)}}},p.onerror=function(m){return s.close(),i(p.error)},f.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return i(a.error)}})},e.URL_SCHEME="indexeddb://",e}(),u2=function(e){return X().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(xs.URL_SCHEME)?(t=e.slice(xs.URL_SCHEME.length),new xs(t)):null;var t};$n.registerSaveRouter(u2),$n.registerLoadRouter(u2);var S$=function(){function e(){this.indexedDB=S_()}return e.prototype.listModels=function(){return le(this,void 0,void 0,function(){var t=this;return ue(this,function(n){return[2,new Promise(function(r,o){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return qg(i)},i.onsuccess=function(){var a=i.result,s=a.transaction(ai,"readonly"),l=s.objectStore(ai).getAll();l.onsuccess=function(){for(var u={},c=0,d=l.result;c<d.length;c++){var f=d[c];u[f.modelPath]=f.modelArtifactsInfo}r(u)},l.onerror=function(u){return a.close(),o(l.error)},s.oncomplete=function(){return a.close()}},i.onerror=function(a){return o(i.error)}})]})})},e.prototype.removeModel=function(t){return le(this,void 0,void 0,function(){var n=this;return ue(this,function(r){var o;return t=(o=t).startsWith(xs.URL_SCHEME)?o.slice(xs.URL_SCHEME.length):o,[2,new Promise(function(i,a){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return qg(s)},s.onsuccess=function(){var l,u=s.result,c=u.transaction(ai,"readwrite"),d=c.objectStore(ai),f=d.get(t);f.onsuccess=function(){if(f.result==null)return u.close(),a(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var h=d.delete(t),p=function(){var m=(l=u.transaction(Ji,"readwrite")).objectStore(Ji).delete(t);m.onsuccess=function(){return i(f.result.modelArtifactsInfo)},m.onerror=function(y){return a(f.error)}};h.onsuccess=p,h.onerror=function(m){return p(),u.close(),a(f.error)}},f.onerror=function(h){return u.close(),a(f.error)},c.oncomplete=function(){l==null?u.close():l.oncomplete=function(){return u.close()}}},s.onerror=function(l){return a(s.error)}})]})})},e}();if(X().getBool("IS_BROWSER"))try{vi.registerManager(xs.URL_SCHEME,new S$)}catch{}var mo="/",ja="tensorflowjs_models",R_="info",R$="model_topology",T$="weight_specs",_$="weight_data",I$="model_metadata";function T_(e){return{info:[ja,e,R_].join(mo),topology:[ja,e,R$].join(mo),weightSpecs:[ja,e,T$].join(mo),weightData:[ja,e,_$].join(mo),modelMetadata:[ja,e,I$].join(mo)}}function N$(e){var t=e.split(mo);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(mo)}var bs=function(){function e(t){if(!X().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=T_(this.modelPath)}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){var n,r,o;return ue(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),o=qu(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(a){if(Kg)return Buffer.from(a).toString("base64");for(var s=new Uint8Array(a),l="",u=0,c=s.length;u<c;u++)l+=String.fromCharCode(s[u]);return btoa(l)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return le(this,void 0,void 0,function(){var t,n,r,o,i,a,s;return ue(this,function(l){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(i),n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,n.userDefinedMetadata=a.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(u){if(Kg){var c=Buffer.from(u,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var d=atob(u),f=new Uint8Array(d.length),h=0;h<d.length;++h)f.set([d.charCodeAt(h)],h);return f.buffer}(s),[2,n]})})},e.URL_SCHEME="localstorage://",e}(),c2=function(e){return X().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(bs.URL_SCHEME)?(t=e.slice(bs.URL_SCHEME.length),new bs(t)):null;var t};$n.registerSaveRouter(c2),$n.registerLoadRouter(c2);var P$=function(){function e(){D(X().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),D(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return le(this,void 0,void 0,function(){var t,n,r,o,i,a;return ue(this,function(s){for(t={},n=ja+mo,r=mo+R_,o=0;o<this.LS.length;++o)(i=this.LS.key(o)).startsWith(n)&&i.endsWith(r)&&(a=N$(i),t[a]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return le(this,void 0,void 0,function(){var n,r;return ue(this,function(o){var i;if(t=(i=t).startsWith(bs.URL_SCHEME)?i.slice(bs.URL_SCHEME.length):i,n=T_(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},e}();if(X().getBool("IS_BROWSER"))try{vi.registerManager(bs.URL_SCHEME,new P$)}catch{}var A$="model",D$=".json",M$=".weights.bin";function d2(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var Yp=function(){function e(t){if(!X().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=A$),this.modelTopologyFileName=t+D$,this.weightDataFileName=t+M$}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s;return ue(this,function(l){switch(l.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=i,[4,d2(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return l.sent(),t.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,d2(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:l.sent(),l.label=4;case 4:return[2,{modelArtifactsInfo:qu(t)}]}})})},e.URL_SCHEME="downloads://",e}(),F$=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return le(this,void 0,void 0,function(){var t,n,r=this;return ue(this,function(o){return t=this.files[0],n=this.files.slice(1),[2,new Promise(function(i,a){var s=new FileReader;s.onload=function(l){var u=JSON.parse(l.target.result),c=u.modelTopology;if(c!=null){n.length===0&&i({modelTopology:c});var d=u.weightsManifest;if(d!=null){var f;try{f=r.checkManifestAndWeightFiles(d,n)}catch(y){return void a(y)}var h=[],p=[],m=[];d.forEach(function(y){y.paths.forEach(function(g){p.push(g),m.push(null)}),h.push.apply(h,y.weights)}),d.forEach(function(y){y.paths.forEach(function(g){var v=new FileReader;v.onload=function(x){var b=x.target.result,k=p.indexOf(g);m[k]=b,m.indexOf(null)===-1&&i({modelTopology:c,weightSpecs:h,weightData:_y(m),format:u.format,generatedBy:u.generatedBy,convertedBy:u.convertedBy,userDefinedMetadata:u.userDefinedMetadata})},v.onerror=function(x){return a("Failed to weights data from file of path '"+g+"'.")},v.readAsArrayBuffer(f[g])})})}else a(new Error("weightManifest field is missing from file "+t.name))}else a(new Error("modelTopology field is missing from file "+t.name))},s.onerror=function(l){return a("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],o=n.map(function(l){return s2(l.name)}),i={},a=0,s=t;a<s.length;a++)s[a].paths.forEach(function(l){var u=s2(l);if(r.indexOf(u)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+u+"'");if(r.push(u),o.indexOf(u)===-1)throw new Error("Weight file with basename '"+u+"' is not provided.");i[l]=n[o.indexOf(u)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return i},e}();function f2(e,t,n,r){(function(i){D(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,a){D(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),D(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),D(a>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+a})}(n=n??0,r=r??1);var o=0;return Promise.all(e.map(function(i){return i.then(function(a){var s=n+ ++o/e.length*(r-n);return t(s),a}),i}))}function __(e,t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s,l,u,c;return ue(this,function(d){switch(d.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?X().platform.fetch:t.fetchFunc,r=e.map(function(f){return n(f,t.requestInit,{isBinary:!0})}),o=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=d.sent(),[3,4];case 2:return[4,f2(r,t.onProgress,o,i)];case 3:a=d.sent(),d.label=4;case 4:return s=a.map(function(f){return f.arrayBuffer()}),l=.5,u=1,t.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,f2(s,t.onProgress,l,u)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}})})}function h2(e){var t=this;return function(n,r,o){return r===void 0&&(r=""),le(t,void 0,void 0,function(){var i,a,s,l,u,c,d,f,h,p;return ue(this,function(m){switch(m.label){case 0:if(i=n.map(function(){return!1}),a={},s=o!=null?o.map(function(){return!1}):[],l=[],n.forEach(function(y,g){var v=0;y.weights.forEach(function(x){var b="quantization"in x?x.quantization.dtype:x.dtype,k=Gg[b]*de(x.shape),E=function(){i[g]=!0,a[g]==null&&(a[g]=[]),a[g].push({manifestEntry:x,groupOffset:v,sizeBytes:k})};o!=null?o.forEach(function(T,R){T===x.name&&(E(),s[R]=!0)}):E(),l.push(x.name),v+=k})}),!s.every(function(y){return y}))throw u=o.filter(function(y,g){return!s[g]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+`. 
Manifest JSON has weights with names: `+l.join(", ")+".");return c=i.reduce(function(y,g,v){return g&&y.push(v),y},[]),d=[],c.forEach(function(y){n[y].paths.forEach(function(g){var v=r+(r.endsWith("/")?"":"/")+g;d.push(v)})}),[4,e(d)];case 1:return f=m.sent(),h={},p=0,c.forEach(function(y){for(var g=n[y].paths.length,v=0,x=0;x<g;x++)v+=f[p+x].byteLength;for(var b=new ArrayBuffer(v),k=new Uint8Array(b),E=0,T=0;T<g;T++){var R=new Uint8Array(f[p+T]);k.set(R,E),E+=R.byteLength}a[y].forEach(function(_){var S=E_(b.slice(_.groupOffset,_.groupOffset+_.sizeBytes),[_.manifestEntry]);for(var A in S)h[A]=S[A]}),p+=g}),[2,h]}})})}}$n.registerSaveRouter(function(e){return X().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Yp.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new Yp(t)}(e.slice(Yp.URL_SCHEME.length)):null});var I_=function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(D(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=X().platform.fetch,D(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&D(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){var n,r,o,i;return ue(this,function(a){switch(a.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((i=a.sent()).ok)return[2,{modelArtifactsInfo:qu(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return le(this,void 0,void 0,function(){var t,n,r,o,i,a,s,l,u,c,d,f;return ue(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,t.json()];case 3:return n=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,i=n.weightsManifest,a=n.generatedBy,s=n.convertedBy,l=n.format,u=n.userDefinedMetadata,o==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:f=h.sent(),c=f[0],d=f[1],h.label=7;case 7:return[2,{modelTopology:o,weightSpecs:c,weightData:d,userDefinedMetadata:u,generatedBy:a,convertedBy:s,format:l}]}})})},e.prototype.loadWeights=function(t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s,l,u,c,d,f;return ue(this,function(h){switch(h.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var m=p.lastIndexOf("/"),y=p.lastIndexOf("?"),g=p.substring(0,m),v=y>m?p.substring(y):"";return[g+"/",v]}(n),o=r[0],i=r[1],a=this.weightPathPrefix||o,s=[],l=0,u=t;l<u.length;l++)c=u[l],s.push.apply(s,c.weights);return d=[],t.forEach(function(p){p.paths.forEach(function(m){d.push(a+m+i)})}),[4,__(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=h.sent(),[2,[s,_y(f)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Xg(e){return e.match(I_.URL_SCHEME_REGEX)!=null}var p2=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(n){return Xg(n)}):Xg(e))?Yg(e,{onProgress:t}):null};function Yg(e,t){return new I_(e,t)}$n.registerSaveRouter(p2),$n.registerLoadRouter(p2);var Qp=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return le(this,void 0,void 0,function(){return ue(this,function(t){return[2,this.modelArtifacts]})})},e}(),O$=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){return ue(this,function(n){return[2,this.saveHandler(t)]})})},e}(),N_=Object.freeze({browserFiles:function(e){return new F$(e)},browserHTTPRequest:function(e,t){return Yg(e,t)},concatenateArrayBuffers:_y,decodeWeights:E_,encodeWeights:function(e,t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s=this;return ue(this,function(l){switch(l.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map(function(u){return u.name}):Object.keys(e),i=function(u){var c=o[u],d=Array.isArray(e)?e[u].tensor:e[c];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+d.dtype);var f={name:c,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var h=new Promise(function(p){return le(s,void 0,void 0,function(){var m,y,g,v,x,b,k;return ue(this,function(E){switch(E.label){case 0:return[4,d.bytes()];case 1:for(m=E.sent(),y=m.reduce(function(T,R){return T+R.length},0)+hf*m.length,g=new Uint8Array(y),v=0,x=0;x<m.length;x++)b=m[x],k=new Uint8Array(new Uint32Array([b.length]).buffer),g.set(k,v),v+=hf,g.set(b,v),v+=b.length;return p(g),[2]}})})});r.push(h)}else r.push(d.data());t!=null&&(f.group=t),n.push(f)},a=0;a<o.length;++a)i(a);return[4,Promise.all(r)];case 1:return[2,{data:E$(l.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new Qp(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Qp({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Qp({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return $n.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:qu,getSaveHandlers:function(e){return $n.getSaveHandlers(e)},http:Yg,isHTTPScheme:Xg,loadWeights:function(e,t,n,r){return t===void 0&&(t=""),le(this,void 0,void 0,function(){return ue(this,function(o){return[2,h2(function(i){return __(i,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return $n.registerLoadRouter(e)},registerSaveRouter:function(e){return $n.registerSaveRouter(e)},weightsLoaderFactory:h2,withSaveHandler:function(e){return new O$(e)},copyModel:function(e,t){return le(this,void 0,void 0,function(){return ue(this,function(n){return[2,l2(e,t,!1)]})})},listModels:function(){return le(this,void 0,void 0,function(){var e,t,n,r,o,i,a;return ue(this,function(s){switch(s.label){case 0:e=vi.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(o=r[n],[4,vi.getManager(o).listModels()]):[3,4];case 2:for(a in i=s.sent())t[o+ys+a]=i[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return le(this,void 0,void 0,function(){return ue(this,function(n){return[2,l2(e,t,!0)]})})},removeModel:function(e){return le(this,void 0,void 0,function(){var t;return ue(this,function(n){return t=sd(e),[2,vi.getManager(t.scheme).removeModel(t.path)]})})}}),Da;j({confusionMatrix_:function(e,t,n){var r=I(e,"labels","confusionMatrix"),o=I(t,"predictions","confusionMatrix");D(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),D(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),D(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),D(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),D(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var i=Vg(r.asType("int32"),n),a=Vg(o.asType("int32"),n);return i.transpose().matMul(a).asType("int32")}});var L$=j({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,i=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);a=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(eT("FromPixels",W.backendName)!=null)return W.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,l,u=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=u[0],d=u[1];if(a?s=e.getContext("2d").getImageData(0,0,c,d).data:r||n?s=e.data:(i||o)&&(Da==null&&(Da=document.createElement("canvas").getContext("2d")),Da.canvas.width=c,Da.canvas.height=d,Da.drawImage(e,0,0,c,d),s=Da.getImageData(0,0,c,d).data),t===4)l=new Int32Array(s);else{var f=c*d;l=new Int32Array(f*t);for(var h=0;h<f;h++)for(var p=0;p<t;++p)l[h*t+p]=s[4*h+p]}return ry(l,[d,c,t],"int32")}}),Iy=Object.freeze({toPixels:function(e,t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s,l,u,c,d,f,h,p,m,y,g,v,x,b,k,E,T,R;return ue(this,function(_){switch(_.label){case 0:if(n=I(e,"img","toPixels"),e instanceof rt||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=n.rank===2?1:n.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return s=_.sent(),l=n.min(),u=n.max(),[4,Promise.all([l.data(),u.data()])];case 2:if(c=_.sent(),d=c[0],f=c[1],h=d[0],p=f[0],l.dispose(),u.dispose(),n.dtype==="float32"){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(m=n.dtype==="float32"?255:1,y=new Uint8ClampedArray(i*o*4),g=0;g<o*i;++g)v=void 0,x=void 0,b=void 0,k=void 0,a===1?(v=s[g]*m,x=s[g]*m,b=s[g]*m,k=255):a===3?(v=s[3*g]*m,x=s[3*g+1]*m,b=s[3*g+2]*m,k=255):a===4&&(v=s[4*g]*m,x=s[4*g+1]*m,b=s[4*g+2]*m,k=s[4*g+3]*m),y[(E=4*g)+0]=Math.round(v),y[E+1]=Math.round(x),y[E+2]=Math.round(b),y[E+3]=Math.round(k);return t!=null&&(t.width=i,t.height=o,T=t.getContext("2d"),R=new ImageData(y,i,o),T.putImageData(R,0,0)),n!==e&&n.dispose(),[2,y]}})})},fromPixels:L$}),B$=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e}(),j$=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Ta(e){D(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),D(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),D(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),j$.register(e)}var _a=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Ir(t,e),t.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var i=this.computeGradients(n,o),a=i.value,s=i.grads;if(o!=null){var l=o.map(function(u){return{name:u.name,tensor:s[u.name]}});this.applyGradients(l)}else this.applyGradients(s);return An(s),r?a:(a.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return X7(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&An(this.iterations_)},t.prototype.saveIterations=function(){return le(this,void 0,void 0,function(){return ue(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:ne(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ue(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ue(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(n){return le(this,void 0,void 0,function(){var r;return ue(this,function(o){switch(o.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=o.sent()[0],[2,n.slice(1)]}})})},t}(B$);Object.defineProperty(_a,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var z$=function(e){function t(n,r,o){o===void 0&&(o=null);var i=e.call(this)||this;return i.learningRate=n,i.rho=r,i.epsilon=o,i.accumulatedGrads=[],i.accumulatedUpdates=[],o==null&&(i.epsilon=W.backend.epsilon()),i}return Ir(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=W.registeredVariables[o];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:o+"/accum_grad",variable:oe(function(){return De(a).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:o+"/accum_var",variable:oe(function(){return De(a).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var l=r.accumulatedGrads[i].variable,u=r.accumulatedUpdates[i].variable;oe(function(){var c=l.mul(r.rho).add(s.square().mul(1-r.rho)),d=u.add(r.epsilon).sqrt().div(l.add(r.epsilon).sqrt()).mul(s),f=u.mul(r.rho).add(d.square().mul(1-r.rho));l.assign(c),u.assign(f);var h=d.mul(-r.learningRate).add(a);a.assign(h)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(An(this.accumulatedGrads.map(function(n){return n.variable})),An(this.accumulatedUpdates.map(function(n){return n.variable})))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){var n;return ue(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){var r;return ue(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t}(_a);Ta(z$);var V$=function(e){function t(n,r){r===void 0&&(r=.1);var o=e.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads=[],o}return Ir(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=W.registeredVariables[o];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:o+"/accumulator",variable:oe(function(){return Yr(a.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var l=r.accumulatedGrads[i].variable;oe(function(){var u=l.add(s.square());l.assign(u);var c=s.div(u.add(W.backend.epsilon()).sqrt()).mul(-r.learningRate).add(a);a.assign(c)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&An(this.accumulatedGrads.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ue(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ue(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t}(_a);Ta(V$);var W$=function(e){function t(n,r,o,i){i===void 0&&(i=null);var a=e.call(this)||this;return a.learningRate=n,a.beta1=r,a.beta2=o,a.epsilon=i,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],oe(function(){a.accBeta1=ne(r).variable(),a.accBeta2=ne(o).variable()}),i==null&&(a.epsilon=W.backend.epsilon()),a}return Ir(t,e),t.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);oe(function(){var i=Nt(1,r.accBeta1),a=Nt(1,r.accBeta2);o.forEach(function(s,l){var u=W.registeredVariables[s];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:s+"/m",variable:oe(function(){return De(u).variable(!1)})}),r.accumulatedSecondMoment[l]==null&&(r.accumulatedSecondMoment[l]={originalName:s+"/v",variable:oe(function(){return De(u).variable(!1)})});var c=Array.isArray(n)?n[l].tensor:n[s];if(c!=null){var d=r.accumulatedFirstMoment[l].variable,f=r.accumulatedSecondMoment[l].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),p=f.mul(r.beta2).add(c.square().mul(1-r.beta2)),m=h.div(i),y=p.div(a);d.assign(h),f.assign(p);var g=m.div(y.sqrt().add(r.epsilon)).mul(-r.learningRate).add(u);u.assign(g)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&An(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&An(this.accumulatedSecondMoment.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){var n;return ue(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){var r,o=this;return ue(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),oe(function(){o.accBeta1.assign(df(o.beta1,o.iterations_+1)),o.accBeta2.assign(df(o.beta2,o.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t}(_a);Ta(W$);var $$=function(e){function t(n,r,o,i,a){i===void 0&&(i=null),a===void 0&&(a=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=o,s.epsilon=i,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],oe(function(){s.iteration=ne(0).variable(),s.accBeta1=ne(r).variable()}),i==null&&(s.epsilon=W.backend.epsilon()),s}return Ir(t,e),t.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);oe(function(){var i=Nt(1,r.accBeta1),a=Cr(-r.learningRate,r.iteration.mul(r.decay).add(1));o.forEach(function(s,l){var u=W.registeredVariables[s];r.accumulatedFirstMoment[l]==null&&(r.accumulatedFirstMoment[l]={originalName:s+"/m",variable:De(u).variable(!1)}),r.accumulatedWeightedInfNorm[l]==null&&(r.accumulatedWeightedInfNorm[l]={originalName:s+"/v",variable:De(u).variable(!1)});var c=Array.isArray(n)?n[l].tensor:n[s];if(c!=null){var d=r.accumulatedFirstMoment[l].variable,f=r.accumulatedWeightedInfNorm[l].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),p=f.mul(r.beta2),m=c.abs(),y=p.maximum(m);d.assign(h),f.assign(y);var g=a.div(i).mul(h.div(y.add(r.epsilon))).add(u);u.assign(g)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&An(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&An(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ue(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ue(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t}(_a);Ta($$);var P_=function(e){function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Ir(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=Array.isArray(n)?n[i].tensor:n[o];if(a!=null){var s=W.registeredVariables[o];oe(function(){var l=r.c.mul(a).add(s);s.assign(l)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=u7(ne(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ue(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ue(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t.className="SGD",t}(_a);Ta(P_);var U$=function(e){function t(n,r,o){o===void 0&&(o=!1);var i=e.call(this,n)||this;return i.learningRate=n,i.momentum=r,i.useNesterov=o,i.accumulations=[],i.m=ne(i.momentum),i}return Ir(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=W.registeredVariables[o];r.accumulations[i]==null&&(r.accumulations[i]={originalName:o+"/momentum",variable:oe(function(){return De(a).variable(!1)})});var s=r.accumulations[i].variable,l=Array.isArray(n)?n[i].tensor:n[o];l!=null&&oe(function(){var u,c=r.m.mul(s).add(l);u=r.useNesterov?r.c.mul(l.add(c.mul(r.m))).add(a):r.c.mul(c).add(a),s.assign(c),a.assign(u)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&An(this.accumulations.map(function(n){return n.variable}))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ue(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ue(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t}(P_);Ta(U$);var H$=function(e){function t(n,r,o,i,a){r===void 0&&(r=.9),o===void 0&&(o=0),i===void 0&&(i=null),a===void 0&&(a=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=o,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,i==null&&(s.epsilon=W.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Ir(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=W.registeredVariables[o];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:o+"/rms",variable:oe(function(){return De(a).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:o+"/momentum",variable:oe(function(){return De(a).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:o+"/mg",variable:oe(function(){return De(a).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var l=r.accumulatedMeanSquares[i].variable,u=r.accumulatedMoments[i].variable;oe(function(){var c=l.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[i].variable,f=d.mul(r.decay).add(s.mul(1-r.decay)),h=u.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(f.square().add(r.epsilon)).sqrt()));l.assign(c),d.assign(f),u.assign(h);var p=a.sub(h);a.assign(p)}else{var m=l.mul(r.decay).add(s.square().mul(1-r.decay));h=u.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),l.assign(m),u.assign(h),p=a.sub(h),a.assign(p)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&An(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&An(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&An(this.accumulatedMoments.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){var n;return ue(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){var r;return ue(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t}(_a);Ta(H$);rt.prototype.squaredDifference=function(e){return GT(this,e)},H=v$;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qg=function(e,t){return Qg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},Qg(e,t)};function Ee(e,t){Qg(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var an=function(){return an=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},an.apply(this,arguments)};function he(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):o(c.value).then(s,l)}u((r=r.apply(e,[])).next())})}function pe(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function zl(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var ws=function(){function e(t,n){if(!oa(t)||!oa(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:n}));this._width=t,this._height=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function mh(e,t){return e instanceof rt&&e.shape.length===t}function G$(e){return mh(e,2)}function gh(e){return mh(e,3)}function yi(e){return mh(e,4)}function K$(e){return e%1!==0}function m2(e){return e%2===0}function q$(e,t){t===void 0&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function g2(e){return e&&e.width&&e.height}function X$(e,t){var n=e.width,r=e.height,o=t/Math.max(r,n);return new ws(Math.round(n*o),Math.round(r*o))}function Ny(e){return e.reduce(function(t,n){return t.add(n)},new Le(0,0)).div(new Le(e.length,e.length))}function bu(e,t,n){return Array(e).fill(0).map(function(r,o){return t+o*n})}function oa(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function v2(e){return oa(e)&&0<=e&&e<=1}var Le=function(){function e(t,n){this._x=t,this._y=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Si=function(){function e(t,n){n===void 0&&(n=!0);var r=t||{},o=[r.left,r.top,r.right,r.bottom].every(oa),i=[r.x,r.y,r.width,r.height].every(oa);if(!i&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],l=a[1],u=a[2],c=a[3];e.assertIsValidBox({x:s,y:l,width:u,height:c},"Box.constructor",n),this._x=s,this._y=l,this._width=u,this._height=c}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(oa)},e.assertIsValidBox=function(t,n,r){if(r===void 0&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new Le(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new Le(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new Le(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new Le(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(a){return Math.round(a)}),n=t[0],r=t[1],o=t[2],i=t[3];return new e({x:n,y:r,width:o,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(a){return Math.floor(a)}),n=t[0],r=t[1],o=t[2],i=t[3];return new e({x:n,y:r,width:o,height:i})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,o=t.width,i=t.height,a=Math.abs(o-i);return o<i&&(n-=a/2,o+=a),i<o&&(r-=a/2,i+=a),new e({x:n,y:r,width:o,height:i})},e.prototype.rescale=function(t){var n=g2(t)?t.width:t,r=g2(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],o=r[0],i=r[1],a=r[2],s=r[3];return new e({x:o,y:i,width:a,height:s})},e.prototype.clipAtImageBorders=function(t,n){var r=this,o=r.x,i=r.y,a=r.right,s=r.bottom,l=Math.max(o,0),u=Math.max(i,0),c=a-l,d=s-u,f=Math.min(c,t-l),h=Math.min(d,n-u);return new e({x:l,y:u,width:f,height:h}).floor()},e.prototype.shift=function(t,n){var r=this,o=r.width,i=r.height,a=this.x+t,s=this.y+n;return new e({x:a,y:s,width:o,height:i})},e.prototype.padAtBorders=function(t,n){var r=this.width+1,o=this.height+1,i=1,a=1,s=r,l=o,u=this.left,c=this.top,d=this.right,f=this.bottom;return d>n&&(s=-d+n+r,d=n),f>t&&(l=-f+t+o,f=t),u<1&&(l=2-u,u=1),c<1&&(l=2-c,c=1),{dy:a,edy:l,dx:i,edx:s,y:c,ey:f,x:u,ex:d,w:r,h:o}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),vh=function(e){Ee(t,e);function t(n,r,o,i,a){return a===void 0&&(a=!1),e.call(this,{left:n,top:r,right:o,bottom:i},a)||this}return t}(Si),A_=function(){function e(t,n,r,o,i){this._imageDims=new ws(i.width,i.height),this._score=t,this._classScore=n,this._className=r,this._box=new Si(o).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Si(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),ao=function(e){Ee(t,e);function t(n,r,o){return e.call(this,n,n,"",r,o)||this}return t.prototype.forSize=function(n,r){var o=e.prototype.forSize.call(this,n,r),i=o.score,a=o.relativeBox,s=o.imageDims;return new t(i,a,s)},t}(A_);function Y$(e,t,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),o=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=r*o;return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function Q$(e){var t=e.map(function(s){return s.x}),n=e.map(function(s){return s.y}),r=t.reduce(function(s,l){return l<s?l:s},1/0),o=n.reduce(function(s,l){return l<s?l:s},1/0),i=t.reduce(function(s,l){return s<l?l:s},0),a=n.reduce(function(s,l){return s<l?l:s},0);return new vh(r,o,i,a)}function wu(e,t,n,r){r===void 0&&(r=!0);for(var o=t.map(function(s,l){return{score:s,boxIndex:l}}).sort(function(s,l){return s.score-l.score}).map(function(s){return s.boxIndex}),i=[],a=function(){var s=o.pop();i.push(s);for(var l=o,u=[],c=0;c<l.length;c++){var d=l[c],f=e[s],h=e[d];u.push(Y$(f,h,r))}o=o.filter(function(p,m){return u[m]<=n})};o.length>0;)a();return i}function Xu(e,t){return oe(function(){var n=t[0],r=t[1],o=t[2],i=Yr(zl(e.shape.slice(0,3),[1]),n),a=Yr(zl(e.shape.slice(0,3),[1]),r),s=Yr(zl(e.shape.slice(0,3),[1]),o),l=Tt([i,a,s],3);return Nt(e,l)})}function J$(e,t){return t===void 0&&(t=!1),oe(function(){var n=e.shape.slice(1),r=n[0],o=n[1];if(r===o)return e;var i=Math.abs(r-o),a=Math.round(i*(t?.5:1)),s=r>o?2:1,l=function(h){var p=e.shape.slice();return p[s]=h,Yr(p,0)},u=l(a),c=i-u.shape[s],d=t&&c?l(c):null,f=[d,e,u].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return Tt(f,s)})}function Jp(e){return 1/(1+Math.exp(-e))}var Py=function(e){Ee(t,e);function t(n,r,o,i,a){return a===void 0&&(a=!1),e.call(this,{x:n,y:r,width:o,height:i},a)||this}return t}(Si),Z$=.5,eU=.43,tU=.45,pf=function(){function e(t,n,r){r===void 0&&(r=new Le(0,0));var o=n.width,i=n.height;this._imgDims=new ws(o,i),this._shift=r,this._positions=t.map(function(a){return a.mul(new Le(o,i)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new Le(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(n){return n.sub(t._shift).div(new Le(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new this.constructor(this.relativePositions,{width:t,height:n})},e.prototype.shiftBy=function(t,n){return new this.constructor(this.relativePositions,this._imgDims,new Le(t,n))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,n){if(n===void 0&&(n={}),t){var r=t instanceof ao?t.box.floor():new Si(t);return this.shiftBy(r.x,r.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),i=o.useDlibAlignment,a=o.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(a)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),n=t[0],r=t[1],o=t[2],i=function(d){return o.sub(d).magnitude()},a=(i(n)+i(r))/2,s=Math.floor(a/tU),l=Ny(t),u=Math.floor(Math.max(0,l.x-Z$*s)),c=Math.floor(Math.max(0,l.y-eU*s));return new Py(u,c,Math.min(s,this.imageWidth+u),Math.min(s,this.imageHeight+c))},e.prototype.alignMinBbox=function(t){var n=Q$(this.positions);return n.pad(n.width*t,n.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),nU=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],Ny([n[3],n[4]])]},t}(pf),rU=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Ny)},t}(pf),y2=function(){function e(t,n){this._label=t,this._distance=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+q$(this.distance)+")":"")},e}(),x2=function(e){Ee(t,e);function t(n,r){var o=e.call(this,n)||this;return o._label=r,o}return t.assertIsValidLabeledBox=function(n,r){if(Si.assertIsValidBox(n,r),!oa(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Si),Fc=function(){function e(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(r){return new Float32Array(r)});return new e(t.label,n)},e}();(function(e){Ee(t,e);function t(n,r,o,i){var a=e.call(this,n,r)||this;return a._score=o,a._classScore=i,a}return t.assertIsValidPredictedBox=function(n,r){if(x2.assertIsValidLabeledBox(n,r),!v2(n.score)||!v2(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(x2);function oU(e){return e.detection instanceof ao}function Ay(e,t){var n={detection:t};return Object.assign({},e,n)}function D_(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function M_(e){var t="";if(!e)try{e=require("fs")}catch(r){t=r.toString()}var n=e?function(r){return new Promise(function(o,i){e.readFile(r,function(a,s){return a?i(a):o(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:n}}function F_(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=M_();return an({Canvas:e||function(){function a(){}return a}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function a(){}return a}(),Image:t||function(){function a(){}return a}(),ImageData:global.ImageData||function(){function a(){}return a}(),Video:global.HTMLVideoElement||function(){function a(){}return a}(),createCanvasElement:n,createImageElement:r,fetch:o},i)}function O_(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function L_(){return typeof global=="object"&&typeof require=="function"&&typeof X4<"u"&&typeof process<"u"&&!!process.version}var Et;function iU(){if(!Et)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Et}function Jg(e){Et=e}function Dy(){O_()&&Jg(D_()),L_()&&Jg(F_())}function aU(e){if(Et||Dy(),!Et)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=t===void 0?Et.Canvas:t,r=e.Image,o=r===void 0?Et.Image:r;Et.Canvas=n,Et.Image=o,Et.createCanvasElement=e.createCanvasElement||function(){return new n},Et.createImageElement=e.createImageElement||function(){return new o},Et.ImageData=e.ImageData||Et.ImageData,Et.Video=e.Video||Et.Video,Et.fetch=e.fetch||Et.fetch,Et.readFile=e.readFile||Et.readFile}var pn={getEnv:iU,setEnv:Jg,initialize:Dy,createBrowserEnv:D_,createFileSystem:M_,createNodejsEnv:F_,monkeyPatch:aU,isBrowser:O_,isNodejs:L_};Dy();function B_(e){return!pn.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function pa(e){var t=pn.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var o=B_(e);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=o.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var b2;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(b2||(b2={}));function j_(e){var t=pn.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function sU(e){return new Promise(function(t,n){if(e instanceof pn.getEnv().Canvas||j_(e))return t();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",o),t(i))}function o(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",o),n(i))}e.addEventListener("load",r),e.addEventListener("error",o)})}function z_(e){var t=pn.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new ws(e.naturalWidth,e.naturalHeight):e instanceof r?new ws(e.videoWidth,e.videoHeight):new ws(e.width,e.height)}function yh(e){var t=e.width,n=e.height,r=pn.getEnv().createCanvasElement,o=r();return o.width=t,o.height=n,o}function My(e,t){var n=pn.getEnv().ImageData;if(!(e instanceof n)&&!j_(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=z_(e),o=r.width,i=r.height,a=yh({width:o,height:i});return e instanceof n?pa(a).putImageData(e,0,0):pa(a).drawImage(e,0,0,o,i),a}function lU(e,t){return he(this,void 0,void 0,function(){var n,r,o,i,a,s;return pe(this,function(l){switch(l.label){case 0:return n=pn.getEnv().createCanvasElement(),r=e.shape.slice(yi(e)?1:0),o=r[0],i=r[1],a=r[2],s=oe(function(){return e.as3D(o,i,a).toInt()}),[4,Iy.toPixels(s,n)];case 1:return l.sent(),s.dispose(),[2,n]}})})}function w2(e){var t=pn.getEnv(),n=t.Image,r=t.Canvas,o=t.Video;return e instanceof n||e instanceof r||e instanceof o}function uU(e,t,n){n===void 0&&(n=!1);var r=pn.getEnv(),o=r.Image,i=r.Canvas;if(!(e instanceof o||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=z_(e),s=t/Math.max(a.height,a.width),l=s*a.width,u=s*a.height,c=yh({width:t,height:t}),d=e instanceof i?e:My(e),f=Math.abs(l-u)/2,h=n&&l<u?f:0,p=n&&u<l?f:0;return pa(c).drawImage(d,h,p,l,u),c}var mf=function(){function e(t,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=n,this._batchSize=t.length,t.forEach(function(o,i){if(gh(o)){r._imageTensors[i]=o,r._inputDimensions[i]=o.shape;return}if(yi(o)){var a=o.shape[0];if(a!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+a+" passed, but not supported in input array");r._imageTensors[i]=o,r._inputDimensions[i]=o.shape.slice(1);return}var s=o instanceof pn.getEnv().Canvas?o:My(o);r._canvases[i]=s,r._inputDimensions[i]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return bu(this.batchSize,0,1).map(function(n,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(t),r=this.getInputHeight(t);return X$({width:n,height:r},this.inputSize)},e.prototype.toBatchTensor=function(t,n){var r=this;return n===void 0&&(n=!0),this._inputSize=t,oe(function(){var o=bu(r.batchSize,0,1).map(function(a){var s=r.getInput(a);if(s instanceof rt){var l=yi(s)?s:s.expandDims();return l=J$(l,n),(l.shape[1]!==t||l.shape[2]!==t)&&(l=Cy.resizeBilinear(l,[t,t])),l.as3D(t,t,3)}if(s instanceof pn.getEnv().Canvas)return Iy.fromPixels(uU(s,t,n));throw new Error("toBatchTensor - at batchIdx "+a+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),i=Gn(o.map(function(a){return a.toFloat()})).as4D(r.batchSize,t,t,3);return i})},e}();function zt(e){return he(this,void 0,void 0,function(){var t,n,r;return pe(this,function(o){switch(o.label){case 0:if(e instanceof mf)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(i){return Array.isArray(e)?" at input index "+i+":":""},r=t.map(B_),r.forEach(function(i,a){if(!w2(i)&&!gh(i)&&!yi(i))throw typeof t[a]=="string"?new Error("toNetInput -"+n(a)+" string passed, but could not resolve HTMLElement for element id "+t[a]):new Error("toNetInput -"+n(a)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(yi(i)){var s=i.shape[0];if(s!==1)throw new Error("toNetInput -"+n(a)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return w2(i)&&sU(i)}))];case 1:return o.sent(),[2,new mf(r,Array.isArray(e))]}})})}function Fy(e,t){return he(this,void 0,void 0,function(){var n,r,o,i,a,s,l;return pe(this,function(u){switch(u.label){case 0:return n=pn.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,zt(e)];case 1:if(o=u.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=o.getInput(0),i instanceof n?(a=i,[3,4]):[3,2];case 2:return[4,lU(i)];case 3:a=u.sent(),u.label=4;case 4:r=a,u.label=5;case 5:return s=pa(r),l=t.map(function(c){return c instanceof ao?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,l.map(function(c){var d=c.x,f=c.y,h=c.width,p=c.height,m=yh({width:h,height:p});return pa(m).putImageData(s.getImageData(d,f,h,p),0,0),m})]}})})}function Oy(e,t){return he(this,void 0,void 0,function(){return pe(this,function(n){if(!gh(e)&&!yi(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(yi(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,oe(function(){var r=e.shape.slice(yi(e)?1:0),o=r[0],i=r[1],a=r[2],s=t.map(function(u){return u instanceof ao?u.forSize(i,o).box:u}).map(function(u){return u.clipAtImageBorders(i,o)}),l=s.map(function(u){var c=u.x,d=u.y,f=u.width,h=u.height;return h_(e.as3D(o,i,a),[d,c,0],[h,f,a])});return l})]})})}function cU(e,t){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return n=pn.getEnv().fetch,[4,n(e,t)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function dU(e){return he(this,void 0,void 0,function(){return pe(this,function(t){switch(t.label){case 0:return[4,cU(e)];case 1:return[2,t.sent().json()]}})})}function V_(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var o=e.split("/").filter(function(s){return s}),i=e.endsWith(".json")?o[o.length-1]:n,a=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return a=e.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:a==="/"?"/"+i:a+"/"+i}}function fU(e,t){return he(this,void 0,void 0,function(){var n,r,o,i;return pe(this,function(a){switch(a.label){case 0:return n=V_(e,t),r=n.manifestUri,o=n.modelBaseUri,[4,dU(r)];case 1:return i=a.sent(),[2,N_.loadWeights(i,o)]}})})}var jo=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var n=this.traversePropertyPath(t),r=n.obj,o=n.objProp;return r[o]},e.prototype.reassignParamFromPath=function(t,n){var r=this.traversePropertyPath(t),o=r.obj,i=r.objProp;o[i].dispose(),o[i]=n},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof Ls})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof Ls)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(n){var r=n.path,o=n.tensor;t.reassignParamFromPath(r,o.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(n){var r=n.path,o=n.tensor,i=Kt(o.dataSync());o.dispose(),t.reassignParamFromPath(r,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(n){if(t&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var n=t.tensor;return Array.from(n.dataSync())}).reduce(function(t,n){return t.concat(n)}))},e.prototype.load=function(t){return he(this,void 0,void 0,function(){return pe(this,function(n){switch(n.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return n.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return he(this,void 0,void 0,function(){var n;return pe(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,fU(t,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},e.prototype.loadFromDisk=function(t){return he(this,void 0,void 0,function(){var n,r,o,i,a,s,l,u,c,d;return pe(this,function(f){switch(f.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=pn.getEnv().readFile,r=V_(t,this.getDefaultModelName()),o=r.manifestUri,i=r.modelBaseUri,a=function(h){return Promise.all(h.map(function(p){return n(p).then(function(m){return m.buffer})}))},s=N_.weightsLoaderFactory(a),c=(u=JSON).parse,[4,n(o)];case 1:return l=c.apply(u,[f.sent().toString()]),[4,s(l,i)];case 2:return d=f.sent(),this.loadFromWeightMap(d),[2]}})})},e.prototype.loadFromWeightMap=function(t){var n=this.extractParamsFromWeigthMap(t),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},e.prototype.extractWeights=function(t){var n=this.extractParams(t),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=t.split("/").reduce(function(i,a){if(!i.nextObj.hasOwnProperty(a))throw new Error("traversePropertyPath - object does not have property "+a+", for path "+t);return{obj:i.nextObj,objProp:a,nextObj:i.nextObj[a]}},{nextObj:this.params}),r=n.obj,o=n.objProp;if(!r||!o||!(r[o]instanceof rt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:o}},e}();function Un(e,t,n){return oe(function(){var r=yy(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Ie(r,t.bias),r})}function Zp(e,t,n){return n===void 0&&(n=!1),oe(function(){var r=it(n?Ie(vr(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Un(e,t.conv0,[2,2])),o=Un(r,t.conv1,[1,1]),i=it(Ie(r,o)),a=Un(i,t.conv2,[1,1]);return it(Ie(r,Ie(o,a)))})}function Oc(e,t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),oe(function(){var o=it(n?Ie(vr(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Un(e,t.conv0,r?[2,2]:[1,1])),i=Un(o,t.conv1,[1,1]),a=it(Ie(o,i)),s=Un(a,t.conv2,[1,1]),l=it(Ie(o,Ie(i,s))),u=Un(l,t.conv3,[1,1]);return it(Ie(o,Ie(i,Ie(s,u))))})}function Tr(e,t,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),oe(function(){var o=Ie(vr(e,t.filters,[1,1],n),t.bias);return r?it(o):o})}function zo(e,t){Object.keys(e).forEach(function(n){t.some(function(r){return r.originalPath===n})||e[n].dispose()})}function xh(e,t){return function(n,r,o,i){var a=Sn(e(n*r*o*o),[o,o,n,r]),s=kt(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:s}}}function Ly(e,t){return function(n,r,o){var i=gi(e(n*r),[n,r]),a=kt(e(r));return t.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:i,bias:a}}}var W_=function(){function e(t,n,r){this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}return e}();function By(e,t){return function(n,r,o){var i=Sn(e(9*n),[3,3,n,1]),a=Sn(e(n*r),[1,1,n,r]),s=kt(e(r));return t.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new W_(i,a,s)}}function jy(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new W_(n,r,o)}}function Mi(e,t){return function(n,r,o){var i=e[n];if(!mh(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:o||n}),i}}function Vo(e){var t=e;function n(o){var i=t.slice(0,o);return t=t.slice(o),i}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function $_(e,t){var n=xh(e,t),r=By(e,t);function o(a,s,l,u){u===void 0&&(u=!1);var c=u?n(a,s,3,l+"/conv0"):r(a,s,l+"/conv0"),d=r(s,s,l+"/conv1"),f=r(s,s,l+"/conv2");return{conv0:c,conv1:d,conv2:f}}function i(a,s,l,u){u===void 0&&(u=!1);var c=o(a,s,l,u),d=c.conv0,f=c.conv1,h=c.conv2,p=r(s,s,l+"/conv3");return{conv0:d,conv1:f,conv2:h,conv3:p}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:i}}function hU(e){var t=[],n=Vo(e),r=n.extractWeights,o=n.getRemainingWeights,i=$_(r,t).extractDenseBlock4Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),l=i(64,128,"dense2"),u=i(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:l,dense3:u}}}function U_(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function H_(e,t){var n=Mi(e,t),r=U_(n),o=jy(n);function i(s,l){l===void 0&&(l=!1);var u=l?r(s+"/conv0"):o(s+"/conv0"),c=o(s+"/conv1"),d=o(s+"/conv2");return{conv0:u,conv1:c,conv2:d}}function a(s,l){l===void 0&&(l=!1);var u=l?r(s+"/conv0"):o(s+"/conv0"),c=o(s+"/conv1"),d=o(s+"/conv2"),f=o(s+"/conv3");return{conv0:u,conv1:c,conv2:d,conv3:f}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:a}}function pU(e){var t=[],n=H_(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return zo(e,t),{params:r,paramMappings:t}}var G_=function(e){Ee(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return oe(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=Xu(o,i).div(ne(255)),s=Oc(a,r.dense0,!0);return s=Oc(s,r.dense1),s=Oc(s,r.dense2),s=Oc(s,r.dense3),s=Ku(s,[7,7],[2,2],"valid"),s})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,zt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(n){return pU(n)},t.prototype.extractParams=function(n){return hU(n)},t}(jo);function Wr(e,t){return oe(function(){return Ie(fh(e,t.weights),t.bias)})}function mU(e,t,n){var r=[],o=Vo(e),i=o.extractWeights,a=o.getRemainingWeights,s=Ly(i,r),l=s(t,n,"fc");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:l}}}function gU(e){var t=[],n=Mi(e,t);function r(i){var a=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:a,bias:s}}var o={fc:r("fc")};return zo(e,t),{params:o,paramMappings:t}}function K_(e){var t={},n={};return Object.keys(e).forEach(function(r){var o=r.startsWith("fc")?n:t;o[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var q_=function(e){Ee(t,e);function t(n,r){var o=e.call(this,n)||this;return o._faceFeatureExtractor=r,o}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return oe(function(){var i=n instanceof mf?r.faceFeatureExtractor.forwardInput(n):n;return Wr(i.as2D(i.shape[0],-1),o.fc)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,i=r.paramMappings;this._params=o,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return mU(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(n){var r=K_(n),o=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),gU(i)},t.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),i=o*r+o,a=n.slice(0,n.length-i),s=n.slice(n.length-i);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},t}(jo),k2=["neutral","happy","sad","angry","fearful","disgusted","surprised"],vU=function(){function e(t){var n=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);k2.forEach(function(r,o){n[r]=t[o]})}return e.prototype.asSortedArray=function(){var t=this;return k2.map(function(n){return{expression:n,probability:t[n]}}).sort(function(n,r){return r.probability-n.probability})},e}(),yU=function(e){Ee(t,e);function t(n){return n===void 0&&(n=new G_),e.call(this,"FaceExpressionNet",n)||this}return t.prototype.forwardInput=function(n){var r=this;return oe(function(){return Lo(r.runNet(n))})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,zt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.predictExpressions=function(n){return he(this,void 0,void 0,function(){var r,o,i,a,s=this;return pe(this,function(l){switch(l.label){case 0:return[4,zt(n)];case 1:return r=l.sent(),[4,this.forwardInput(r)];case 2:return o=l.sent(),[4,Promise.all(_t(o).map(function(u){return he(s,void 0,void 0,function(){var c;return pe(this,function(d){switch(d.label){case 0:return[4,u.data()];case 1:return c=d.sent(),u.dispose(),[2,c]}})})}))];case 3:return i=l.sent(),o.dispose(),a=i.map(function(u){return new vU(u)}),[2,r.isBatchInput?a:a[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(q_);function X_(e,t){var n={expressions:t};return Object.assign({},e,n)}function xU(e){return oU(e)&&e.landmarks instanceof pf&&e.unshiftedLandmarks instanceof pf&&e.alignedRect instanceof ao}function zy(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),o=r.align(),i=e.detection.imageDims,a=new ao(e.detection.score,o.rescale(i.reverse()),i),s={landmarks:r,unshiftedLandmarks:t,alignedRect:a};return Object.assign({},e,s)}function bU(e,t){var n=xh(e,t),r=By(e,t);function o(a,s,l){var u=r(a,s,l+"/separable_conv0"),c=r(s,s,l+"/separable_conv1"),d=n(a,s,1,l+"/expansion_conv");return{separable_conv0:u,separable_conv1:c,expansion_conv:d}}function i(a,s){var l=r(a,a,s+"/separable_conv0"),u=r(a,a,s+"/separable_conv1"),c=r(a,a,s+"/separable_conv2");return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:i}}function wU(e,t){var n=[],r=Vo(e),o=r.extractWeights,i=r.getRemainingWeights,a=bU(o,n),s=a.extractConvParams,l=a.extractSeparableConvParams,u=a.extractReductionBlockParams,c=a.extractMainBlockParams,d=s(3,32,3,"entry_flow/conv_in"),f=u(32,64,"entry_flow/reduction_block_0"),h=u(64,128,"entry_flow/reduction_block_1"),p={conv_in:d,reduction_block_0:f,reduction_block_1:h},m={};bu(t,0,1).forEach(function(x){m["main_block_"+x]=c(128,"middle_flow/main_block_"+x)});var y=u(128,256,"exit_flow/reduction_block"),g=l(256,512,"exit_flow/separable_conv"),v={reduction_block:y,separable_conv:g};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:p,middle_flow:m,exit_flow:v}}}function kU(e,t){var n=Mi(e,t),r=U_(n),o=jy(n);function i(s){var l=o(s+"/separable_conv0"),u=o(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:l,separable_conv1:u,expansion_conv:c}}function a(s){var l=o(s+"/separable_conv0"),u=o(s+"/separable_conv1"),c=o(s+"/separable_conv2");return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:i,extractMainBlockParams:a}}function CU(e,t){var n=[],r=kU(e,n),o=r.extractConvParams,i=r.extractSeparableConvParams,a=r.extractReductionBlockParams,s=r.extractMainBlockParams,l=o("entry_flow/conv_in"),u=a("entry_flow/reduction_block_0"),c=a("entry_flow/reduction_block_1"),d={conv_in:l,reduction_block_0:u,reduction_block_1:c},f={};bu(t,0,1).forEach(function(y){f["main_block_"+y]=s("middle_flow/main_block_"+y)});var h=a("exit_flow/reduction_block"),p=i("exit_flow/separable_conv"),m={reduction_block:h,separable_conv:p};return zo(e,n),{params:{entry_flow:d,middle_flow:f,exit_flow:m},paramMappings:n}}function Y_(e,t,n){return Ie(vr(e,t.filters,n,"same"),t.bias)}function em(e,t,n){n===void 0&&(n=!0);var r=n?it(e):e;return r=Un(r,t.separable_conv0,[1,1]),r=Un(it(r),t.separable_conv1,[1,1]),r=Ft(r,[3,3],[2,2],"same"),r=Ie(r,Y_(e,t.expansion_conv,[2,2])),r}function EU(e,t){var n=Un(it(e),t.separable_conv0,[1,1]);return n=Un(it(n),t.separable_conv1,[1,1]),n=Un(it(n),t.separable_conv2,[1,1]),n=Ie(n,e),n}var SU=function(e){Ee(t,e);function t(n){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return t.prototype.forwardInput=function(n){var r=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return oe(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],s=Xu(i,a).div(ne(256)),l=it(Y_(s,o.entry_flow.conv_in,[2,2]));return l=em(l,o.entry_flow.reduction_block_0,!1),l=em(l,o.entry_flow.reduction_block_1),bu(r._numMainBlocks,0,1).forEach(function(u){l=EU(l,o.middle_flow["main_block_"+u])}),l=em(l,o.exit_flow.reduction_block),l=it(Un(l,o.exit_flow.separable_conv,[1,1])),l})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,zt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(n){return CU(n,this._numMainBlocks)},t.prototype.extractParams=function(n){return wU(n,this._numMainBlocks)},t}(jo);function RU(e){var t=[],n=Vo(e),r=n.extractWeights,o=n.getRemainingWeights,i=Ly(r,t),a=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:a,gender:s}}}}function TU(e){var t=[],n=Mi(e,t);function r(i){var a=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:a,bias:s}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return zo(e,t),{params:o,paramMappings:t}}var gf;(function(e){e.FEMALE="female",e.MALE="male"})(gf||(gf={}));var _U=function(e){Ee(t,e);function t(n){n===void 0&&(n=new SU(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return oe(function(){var i=n instanceof mf?r.faceFeatureExtractor.forwardInput(n):n,a=Ku(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),s=Wr(a,o.fc.age).as1D(),l=Wr(a,o.fc.gender);return{age:s,gender:l}})},t.prototype.forwardInput=function(n){var r=this;return oe(function(){var o=r.runNet(n),i=o.age,a=o.gender;return{age:i,gender:Lo(a)}})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,zt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.predictAgeAndGender=function(n){return he(this,void 0,void 0,function(){var r,o,i,a,s,l,u=this;return pe(this,function(c){switch(c.label){case 0:return[4,zt(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return o=c.sent(),i=_t(o.age),a=_t(o.gender),s=i.map(function(d,f){return{ageTensor:d,genderTensor:a[f]}}),[4,Promise.all(s.map(function(d){var f=d.ageTensor,h=d.genderTensor;return he(u,void 0,void 0,function(){var p,m,y,g,v;return pe(this,function(x){switch(x.label){case 0:return[4,f.data()];case 1:return p=x.sent()[0],[4,h.data()];case 2:return m=x.sent()[0],y=m>.5,g=y?gf.MALE:gf.FEMALE,v=y?m:1-m,f.dispose(),h.dispose(),[2,{age:p,gender:g,genderProbability:v}]}})})}))];case 3:return l=c.sent(),o.age.dispose(),o.gender.dispose(),[2,r.isBatchInput?l:l[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,i=r.paramMappings;this._params=o,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return RU(n)},t.prototype.extractParamsFromWeigthMap=function(n){var r=K_(n),o=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),TU(i)},t.prototype.extractParams=function(n){var r=1539,o=n.slice(0,n.length-r),i=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},t}(jo),Q_=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(n,r,o){var i=o.map(function(s){var l=s.width,u=s.height,c=r/Math.max(u,l);return{width:l*c,height:u*c}}),a=i.length;return oe(function(){var s=function(f,h){return Gn([Yr([68],f),Yr([68],h)],1).as2D(1,136).as1D()},l=function(f,h){var p=i[f],m=p.width,y=p.height;return h(m,y)?Math.abs(m-y)/2:0},u=function(f){return l(f,function(h,p){return h<p})},c=function(f){return l(f,function(h,p){return p<h})},d=n.mul(Yr([a,136],r)).sub(Gn(Array.from(Array(a),function(f,h){return s(u(h),c(h))}))).div(Gn(Array.from(Array(a),function(f,h){return s(i[h].width,i[h].height)})));return d})},t.prototype.forwardInput=function(n){var r=this;return oe(function(){var o=r.runNet(n);return r.postProcess(o,n.inputSize,n.inputDimensions.map(function(i){var a=i[0],s=i[1];return{height:a,width:s}}))})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,zt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.detectLandmarks=function(n){return he(this,void 0,void 0,function(){var r,o,i,a=this;return pe(this,function(s){switch(s.label){case 0:return[4,zt(n)];case 1:return r=s.sent(),o=oe(function(){return _t(a.forwardInput(r))}),[4,Promise.all(o.map(function(l,u){return he(a,void 0,void 0,function(){var c,d,f,h,p;return pe(this,function(m){switch(m.label){case 0:return f=(d=Array).from,[4,l.data()];case 1:return c=f.apply(d,[m.sent()]),h=c.filter(function(y,g){return m2(g)}),p=c.filter(function(y,g){return!m2(g)}),[2,new rU(Array(68).fill(0).map(function(y,g){return new Le(h[g],p[g])}),{height:r.getInputHeight(u),width:r.getInputWidth(u)})]}})})}))];case 2:return i=s.sent(),o.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(q_),J_=function(e){Ee(t,e);function t(n){return n===void 0&&(n=new G_),e.call(this,"FaceLandmark68Net",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(Q_);function IU(e){var t=[],n=H_(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return zo(e,t),{params:r,paramMappings:t}}function NU(e){var t=[],n=Vo(e),r=n.extractWeights,o=n.getRemainingWeights,i=$_(r,t).extractDenseBlock3Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),l=i(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:l}}}var PU=function(e){Ee(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return oe(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=Xu(o,i).div(ne(255)),s=Zp(a,r.dense0,!0);return s=Zp(s,r.dense1),s=Zp(s,r.dense2),s=Ku(s,[14,14],[2,2],"valid"),s})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,zt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(n){return IU(n)},t.prototype.extractParams=function(n){return NU(n)},t}(jo),AU=function(e){Ee(t,e);function t(n){return n===void 0&&(n=new PU),e.call(this,"FaceLandmark68TinyNet",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(Q_);(function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(J_);function DU(e,t){return Ie(cn(e,t.weights),t.biases)}function Vy(e,t,n,r,o){o===void 0&&(o="same");var i=t.conv,a=i.filters,s=i.bias,l=vr(e,a,n,o);return l=Ie(l,s),l=DU(l,t.scale),r?it(l):l}function MU(e,t){return Vy(e,t,[1,1],!0)}function Z_(e,t){return Vy(e,t,[1,1],!1)}function eI(e,t){return Vy(e,t,[2,2],!0,"valid")}function FU(e,t){function n(s,l,u){var c=e(s),d=c.length/(l*u*u);if(K$(d))throw new Error("depth has to be an integer: "+d+", weights.length: "+c.length+", numFilters: "+l+", filterSize: "+u);return oe(function(){return Ei(Sn(c,[l,d,u,u]),[2,3,1,0])})}function r(s,l,u,c){var d=n(s,l,u),f=kt(e(l));return t.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:d,bias:f}}function o(s,l){var u=kt(e(s)),c=kt(e(s));return t.push({paramPath:l+"/weights"},{paramPath:l+"/biases"}),{weights:u,biases:c}}function i(s,l,u,c){var d=r(s,l,u,c+"/conv"),f=o(l,c+"/scale");return{conv:d,scale:f}}function a(s,l,u,c,d){d===void 0&&(d=!1);var f=i((d?.5:1)*s,l,u,c+"/conv1"),h=i(s,l,u,c+"/conv2");return{conv1:f,conv2:h}}return{extractConvLayerParams:i,extractResidualLayerParams:a}}function OU(e){var t=Vo(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=FU(n,o),a=i.extractConvLayerParams,s=i.extractResidualLayerParams,l=a(4704,32,7,"conv32_down"),u=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),f=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),y=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),v=s(147456,128,3,"conv128_2"),x=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),k=s(589824,256,3,"conv256_2"),E=s(589824,256,3,"conv256_down_out"),T=oe(function(){return Ei(gi(n(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var R={conv32_down:l,conv32_1:u,conv32_2:c,conv32_3:d,conv64_down:f,conv64_1:h,conv64_2:p,conv64_3:m,conv128_down:y,conv128_1:g,conv128_2:v,conv256_down:x,conv256_1:b,conv256_2:k,conv256_down_out:E,fc:T};return{params:R,paramMappings:o}}function LU(e,t){var n=Mi(e,t);function r(a){var s=n(a+"/scale/weights",1),l=n(a+"/scale/biases",1);return{weights:s,biases:l}}function o(a){var s=n(a+"/conv/filters",4),l=n(a+"/conv/bias",1),u=r(a);return{conv:{filters:s,bias:l},scale:u}}function i(a){return{conv1:o(a+"/conv1"),conv2:o(a+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:i}}function BU(e){var t=[],n=LU(e,t),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,i=r("conv32_down"),a=o("conv32_1"),s=o("conv32_2"),l=o("conv32_3"),u=o("conv64_down"),c=o("conv64_1"),d=o("conv64_2"),f=o("conv64_3"),h=o("conv128_down"),p=o("conv128_1"),m=o("conv128_2"),y=o("conv256_down"),g=o("conv256_1"),v=o("conv256_2"),x=o("conv256_down_out"),b=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!G$(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var k={conv32_down:i,conv32_1:a,conv32_2:s,conv32_3:l,conv64_down:u,conv64_1:c,conv64_2:d,conv64_3:f,conv128_down:h,conv128_1:p,conv128_2:m,conv256_down:y,conv256_1:g,conv256_2:v,conv256_down_out:x,fc:b};return zo(e,t),{params:k,paramMappings:t}}function Ar(e,t){var n=MU(e,t.conv1);return n=Z_(n,t.conv2),n=Ie(n,e),n=it(n),n}function Lc(e,t){var n=eI(e,t.conv1);n=Z_(n,t.conv2);var r=Ku(e,2,2,"valid"),o=Ze(r.shape),i=r.shape[3]!==n.shape[3],a=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(a){var s=zl(n.shape);s[1]=1;var l=Ze(s);n=Tt([n,l],1);var u=zl(n.shape);u[2]=1;var c=Ze(u);n=Tt([n,c],2)}return r=i?Tt([r,o],3):r,n=Ie(r,n),n=it(n),n}var jU=function(e){Ee(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return oe(function(){var o=n.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],a=Xu(o,i).div(ne(256)),s=eI(a,r.conv32_down);s=Ft(s,3,2,"valid"),s=Ar(s,r.conv32_1),s=Ar(s,r.conv32_2),s=Ar(s,r.conv32_3),s=Lc(s,r.conv64_down),s=Ar(s,r.conv64_1),s=Ar(s,r.conv64_2),s=Ar(s,r.conv64_3),s=Lc(s,r.conv128_down),s=Ar(s,r.conv128_1),s=Ar(s,r.conv128_2),s=Lc(s,r.conv256_down),s=Ar(s,r.conv256_1),s=Ar(s,r.conv256_2),s=Lc(s,r.conv256_down_out);var l=s.mean([1,2]),u=fh(l,r.fc);return u})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,zt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.computeFaceDescriptor=function(n){return he(this,void 0,void 0,function(){var r,o,i,a=this;return pe(this,function(s){switch(s.label){case 0:return[4,zt(n)];case 1:return r=s.sent(),o=oe(function(){return _t(a.forwardInput(r))}),[4,Promise.all(o.map(function(l){return l.data()}))];case 2:return i=s.sent(),o.forEach(function(l){return l.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(n){return BU(n)},t.prototype.extractParams=function(n){return OU(n)},t}(jo);function tI(e,t){var n={descriptor:t};return Object.assign({},e,n)}function nI(e,t){var n={age:t};return Object.assign({},e,n)}function rI(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var oI=function(){function e(t){var n=t===void 0?{}:t,r=n.minFaceSize,o=n.scaleFactor,i=n.maxNumScales,a=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=o||.709,this._maxNumScales=i||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(l){return typeof l!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(l){return typeof l!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function zU(e,t){function n(l,u){var c=Sn(e(9*l),[3,3,l,1]),d=kt(e(l)),f=kt(e(l)),h=kt(e(l)),p=kt(e(l));return t.push({paramPath:u+"/filters"},{paramPath:u+"/batch_norm_scale"},{paramPath:u+"/batch_norm_offset"},{paramPath:u+"/batch_norm_mean"},{paramPath:u+"/batch_norm_variance"}),{filters:c,batch_norm_scale:d,batch_norm_offset:f,batch_norm_mean:h,batch_norm_variance:p}}function r(l,u,c,d,f){var h=Sn(e(l*u*c*c),[c,c,l,u]),p=kt(e(u));return t.push({paramPath:d+"/filters"},{paramPath:d+"/"+(f?"batch_norm_offset":"bias")}),{filters:h,bias:p}}function o(l,u,c,d){var f=r(l,u,c,d,!0),h=f.filters,p=f.bias;return{filters:h,batch_norm_offset:p}}function i(l,u,c){var d=n(l,c+"/depthwise_conv"),f=o(l,u,1,c+"/pointwise_conv");return{depthwise_conv:d,pointwise_conv:f}}function a(){var l=o(3,32,3,"mobilenetv1/conv_0"),u=i(32,64,"mobilenetv1/conv_1"),c=i(64,128,"mobilenetv1/conv_2"),d=i(128,128,"mobilenetv1/conv_3"),f=i(128,256,"mobilenetv1/conv_4"),h=i(256,256,"mobilenetv1/conv_5"),p=i(256,512,"mobilenetv1/conv_6"),m=i(512,512,"mobilenetv1/conv_7"),y=i(512,512,"mobilenetv1/conv_8"),g=i(512,512,"mobilenetv1/conv_9"),v=i(512,512,"mobilenetv1/conv_10"),x=i(512,512,"mobilenetv1/conv_11"),b=i(512,1024,"mobilenetv1/conv_12"),k=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:u,conv_2:c,conv_3:d,conv_4:f,conv_5:h,conv_6:p,conv_7:m,conv_8:y,conv_9:g,conv_10:v,conv_11:x,conv_12:b,conv_13:k}}function s(){var l=o(1024,256,1,"prediction_layer/conv_0"),u=o(256,512,3,"prediction_layer/conv_1"),c=o(512,128,1,"prediction_layer/conv_2"),d=o(128,256,3,"prediction_layer/conv_3"),f=o(256,128,1,"prediction_layer/conv_4"),h=o(128,256,3,"prediction_layer/conv_5"),p=o(256,64,1,"prediction_layer/conv_6"),m=o(64,128,3,"prediction_layer/conv_7"),y=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),g=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),v=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),x=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),b=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),k=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),E=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),T=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),R=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),_=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),S=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),A=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),N={box_encoding_predictor:y,class_predictor:g},O={box_encoding_predictor:v,class_predictor:x},M={box_encoding_predictor:b,class_predictor:k},F={box_encoding_predictor:E,class_predictor:T},V={box_encoding_predictor:R,class_predictor:_},z={box_encoding_predictor:S,class_predictor:A};return{conv_0:l,conv_1:u,conv_2:c,conv_3:d,conv_4:f,conv_5:h,conv_6:p,conv_7:m,box_predictor_0:N,box_predictor_1:O,box_predictor_2:M,box_predictor_3:F,box_predictor_4:V,box_predictor_5:z}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:s}}function VU(e){var t=[],n=Vo(e),r=n.extractWeights,o=n.getRemainingWeights,i=zU(r,t),a=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,l=a(),u=s(),c=ry(r(5118*4),[1,5118,4]),d={extra_dim:c};if(t.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:l,prediction_layer:u,output_layer:d},paramMappings:t}}function WU(e,t){var n=Mi(e,t);function r(u,c,d){var f=n(u+"/Conv2d_"+c+"_pointwise/weights",4,d+"/filters"),h=n(u+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,d+"/batch_norm_offset");return{filters:f,batch_norm_offset:h}}function o(u){var c="mobilenetv1/conv_"+u,d="MobilenetV1/Conv2d_"+u+"_depthwise",f=c+"/depthwise_conv",h=c+"/pointwise_conv",p=n(d+"/depthwise_weights",4,f+"/filters"),m=n(d+"/BatchNorm/gamma",1,f+"/batch_norm_scale"),y=n(d+"/BatchNorm/beta",1,f+"/batch_norm_offset"),g=n(d+"/BatchNorm/moving_mean",1,f+"/batch_norm_mean"),v=n(d+"/BatchNorm/moving_variance",1,f+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:m,batch_norm_offset:y,batch_norm_mean:g,batch_norm_variance:v},pointwise_conv:r("MobilenetV1",u,h)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function a(u,c){var d=n(u+"/weights",4,c+"/filters"),f=n(u+"/biases",1,c+"/bias");return{filters:d,bias:f}}function s(u){var c=a("Prediction/BoxPredictor_"+u+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+u+"/box_encoding_predictor"),d=a("Prediction/BoxPredictor_"+u+"/ClassPredictor","prediction_layer/box_predictor_"+u+"/class_predictor");return{box_encoding_predictor:c,class_predictor:d}}function l(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:l}}function $U(e){var t=[],n=WU(e,t),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!gh(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var a={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:i}};return zo(e,t),{params:a,paramMappings:t}}function Mr(e,t,n){return oe(function(){var r=vr(e,t.filters,n,"same");return r=Ie(r,t.batch_norm_offset),py(r,0,6)})}var UU=.0010000000474974513;function HU(e,t,n){return oe(function(){var r=dh(e,t.filters,n,"same");return r=JT(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,UU),py(r,0,6)})}function GU(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function KU(e,t){return oe(function(){var n=null,r=Mr(e,t.conv_0,[2,2]),o=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(o.forEach(function(i,a){var s=a+1,l=GU(s);r=HU(r,i.depthwise_conv,l),r=Mr(r,i.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function qU(e,t,n,r,o){var i=e.shape[0],a=Math.min(n,i),s=t.map(function(c,d){return{score:c,boxIndex:d}}).filter(function(c){return c.score>o}).sort(function(c,d){return d.score-c.score}),l=function(c){return c<=r?1:0},u=[];return s.forEach(function(c){if(!(u.length>=a)){for(var d=c.score,f=u.length-1;f>=0;--f){var h=XU(e,c.boxIndex,u[f]);if(h!==0&&(c.score*=l(h),c.score<=o))break}d===c.score&&u.push(c.boxIndex)}}),u}function XU(e,t,n){var r=e.arraySync(),o=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),a=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),u=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),f=(a-o)*(s-i),h=(c-l)*(d-u);if(f<=0||h<=0)return 0;var p=Math.max(o,l),m=Math.max(i,u),y=Math.min(a,c),g=Math.min(s,d),v=Math.max(y-p,0)*Math.max(g-m,0);return v/(f+h-v)}function YU(e){var t=_t(Ei(e,[1,0])),n=[Nt(t[2],t[0]),Nt(t[3],t[1])],r=[Ie(t[0],Cr(n[0],ne(2))),Ie(t[1],Cr(n[1],ne(2)))];return{sizes:n,centers:r}}function QU(e,t){var n=YU(e),r=n.sizes,o=n.centers,i=_t(Ei(t,[1,0])),a=Cr(cn(Hg(Cr(i[2],ne(5))),r[0]),ne(2)),s=Ie(cn(Cr(i[0],ne(10)),r[0]),o[0]),l=Cr(cn(Hg(Cr(i[3],ne(5))),r[1]),ne(2)),u=Ie(cn(Cr(i[1],ne(10)),r[1]),o[1]);return Ei(Gn([Nt(s,a),Nt(u,l),Ie(s,a),Ie(u,l)]),[1,0])}function JU(e,t,n){return oe(function(){var r=e.shape[0],o=QU(Er(gs(n.extra_dim,[r,1,1]),[-1,4]),Er(e,[-1,4]));o=Er(o,[r,o.shape[0]/r,4]);var i=qT(no(t,[0,0,1],[-1,-1,-1])),a=no(i,[0,0,0],[-1,-1,1]);a=Er(a,[r,a.shape[1]]);var s=_t(o),l=_t(a);return{boxes:s,scores:l}})}function Ma(e,t){return oe(function(){var n=e.shape[0],r=Er(Tr(e,t.box_encoding_predictor),[n,-1,1,4]),o=Er(Tr(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}})}function ZU(e,t,n){return oe(function(){var r=Mr(e,n.conv_0,[1,1]),o=Mr(r,n.conv_1,[2,2]),i=Mr(o,n.conv_2,[1,1]),a=Mr(i,n.conv_3,[2,2]),s=Mr(a,n.conv_4,[1,1]),l=Mr(s,n.conv_5,[2,2]),u=Mr(l,n.conv_6,[1,1]),c=Mr(u,n.conv_7,[2,2]),d=Ma(t,n.box_predictor_0),f=Ma(e,n.box_predictor_1),h=Ma(o,n.box_predictor_2),p=Ma(a,n.box_predictor_3),m=Ma(l,n.box_predictor_4),y=Ma(c,n.box_predictor_5),g=Tt([d.boxPredictionEncoding,f.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,y.boxPredictionEncoding],1),v=Tt([d.classPrediction,f.classPrediction,h.classPrediction,p.classPrediction,m.classPrediction,y.classPrediction],1);return{boxPredictions:g,classPredictions:v}})}var bh=function(){function e(t){var n=t===void 0?{}:t,r=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),iI=function(e){Ee(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return oe(function(){var o=n.toBatchTensor(512,!1).toFloat(),i=Nt(cn(o,ne(.007843137718737125)),ne(1)),a=KU(i,r.mobilenetv1),s=ZU(a.out,a.conv11,r.prediction_layer),l=s.boxPredictions,u=s.classPredictions;return JU(l,u,r.output_layer)})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,zt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o,i,a,s,l,u,c,d,f,h,p,m,y,g,v,x,b,k,E,T,R;return pe(this,function(_){switch(_.label){case 0:return o=new bh(r),i=o.maxResults,a=o.minConfidence,[4,zt(n)];case 1:for(s=_.sent(),l=this.forwardInput(s),u=l.boxes,c=l.scores,d=u[0],f=c[0],h=1;h<u.length;h++)u[h].dispose(),c[h].dispose();return y=(m=Array).from,[4,f.data()];case 2:return p=y.apply(m,[_.sent()]),g=.5,v=qU(d,p,i,g,a),x=s.getReshapedInputDimensions(0),b=s.inputSize,k=b/x.width,E=b/x.height,T=d.arraySync(),R=v.map(function(S){var A=[Math.max(0,T[S][0]),Math.min(1,T[S][2])].map(function(z){return z*E}),N=A[0],O=A[1],M=[Math.max(0,T[S][1]),Math.min(1,T[S][3])].map(function(z){return z*k}),F=M[0],V=M[1];return new ao(p[S],new Py(F,N,V-F,O-N),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),d.dispose(),f.dispose(),[2,R]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(n){return $U(n)},t.prototype.extractParams=function(n){return VU(n)},t}(jo);(function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(iI);var e9=.4,t9=[new Le(.738768,.874946),new Le(2.42204,2.65704),new Le(4.30971,7.04493),new Le(10.246,4.59428),new Le(12.6868,11.8741)],n9=[new Le(1.603231,2.094468),new Le(6.041143,7.080126),new Le(2.882459,3.518061),new Le(4.266906,5.178857),new Le(9.041765,10.66308)],r9=[117.001,114.697,97.404],o9="tiny_yolov2_model",i9="tiny_yolov2_separable_conv_model",Bc=function(e){return typeof e=="number"};function a9(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Bc(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return Bc(t.x)&&Bc(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Bc)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function Wy(e){return oe(function(){var t=cn(e,ne(.10000000149011612));return Ie(it(Nt(e,t)),t)})}function Uo(e,t){return oe(function(){var n=Sa(e,[[0,0],[1,1],[1,1],[0,0]]);return n=vr(n,t.conv.filters,[1,1],"valid"),n=Nt(n,t.bn.sub),n=cn(n,t.bn.truediv),n=Ie(n,t.conv.bias),Wy(n)})}function Ho(e,t){return oe(function(){var n=Sa(e,[[0,0],[1,1],[1,1],[0,0]]);return n=yy(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=Ie(n,t.bias),Wy(n)})}function s9(e,t){var n=xh(e,t);function r(a,s){var l=kt(e(a)),u=kt(e(a));return t.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:l,truediv:u}}function o(a,s,l){var u=n(a,s,3,l+"/conv"),c=r(s,l+"/bn");return{conv:u,bn:c}}var i=By(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:i}}function l9(e,t,n,r){var o=Vo(e),i=o.extractWeights,a=o.getRemainingWeights,s=[],l=s9(i,s),u=l.extractConvParams,c=l.extractConvWithBatchNormParams,d=l.extractSeparableConvParams,f;if(t.withSeparableConvs){var h=r[0],p=r[1],m=r[2],y=r[3],g=r[4],v=r[5],x=r[6],b=r[7],k=r[8],E=t.isFirstLayerConv2d?u(h,p,3,"conv0"):d(h,p,"conv0"),T=d(p,m,"conv1"),R=d(m,y,"conv2"),_=d(y,g,"conv3"),S=d(g,v,"conv4"),A=d(v,x,"conv5"),N=b?d(x,b,"conv6"):void 0,O=k?d(b,k,"conv7"):void 0,M=u(k||b||x,5*n,1,"conv8");f={conv0:E,conv1:T,conv2:R,conv3:_,conv4:S,conv5:A,conv6:N,conv7:O,conv8:M}}else{var h=r[0],p=r[1],m=r[2],y=r[3],g=r[4],v=r[5],x=r[6],b=r[7],k=r[8],E=c(h,p,"conv0"),T=c(p,m,"conv1"),R=c(m,y,"conv2"),_=c(y,g,"conv3"),S=c(g,v,"conv4"),A=c(v,x,"conv5"),N=c(x,b,"conv6"),O=c(b,k,"conv7"),M=u(k,5*n,1,"conv8");f={conv0:E,conv1:T,conv2:R,conv3:_,conv4:S,conv5:A,conv6:N,conv7:O,conv8:M}}if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:f,paramMappings:s}}function u9(e,t){var n=Mi(e,t);function r(s){var l=n(s+"/sub",1),u=n(s+"/truediv",1);return{sub:l,truediv:u}}function o(s){var l=n(s+"/filters",4),u=n(s+"/bias",1);return{filters:l,bias:u}}function i(s){var l=o(s+"/conv"),u=r(s+"/bn");return{conv:l,bn:u}}var a=jy(n);return{extractConvParams:o,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}}function c9(e,t){var n=[],r=u9(e,n),o=r.extractConvParams,i=r.extractConvWithBatchNormParams,a=r.extractSeparableConvParams,s;if(t.withSeparableConvs){var l=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?o("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:l>7?a("conv6"):void 0,conv7:l>8?a("conv7"):void 0,conv8:o("conv8")}}else s={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:o("conv8")};return zo(e,n),{params:s,paramMappings:n}}var C2;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(C2||(C2={}));var $y=function(){function e(t){var n=t===void 0?{}:t,r=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),aI=function(e){Ee(t,e);function t(n){var r=e.call(this,"TinyYolov2")||this;return a9(n),r._config=n,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(n,r){var o=Uo(n,r.conv0);return o=Ft(o,[2,2],[2,2],"same"),o=Uo(o,r.conv1),o=Ft(o,[2,2],[2,2],"same"),o=Uo(o,r.conv2),o=Ft(o,[2,2],[2,2],"same"),o=Uo(o,r.conv3),o=Ft(o,[2,2],[2,2],"same"),o=Uo(o,r.conv4),o=Ft(o,[2,2],[2,2],"same"),o=Uo(o,r.conv5),o=Ft(o,[2,2],[1,1],"same"),o=Uo(o,r.conv6),o=Uo(o,r.conv7),Tr(o,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(n,r){var o=this.config.isFirstLayerConv2d?Wy(Tr(n,r.conv0,"valid",!1)):Ho(n,r.conv0);return o=Ft(o,[2,2],[2,2],"same"),o=Ho(o,r.conv1),o=Ft(o,[2,2],[2,2],"same"),o=Ho(o,r.conv2),o=Ft(o,[2,2],[2,2],"same"),o=Ho(o,r.conv3),o=Ft(o,[2,2],[2,2],"same"),o=Ho(o,r.conv4),o=Ft(o,[2,2],[2,2],"same"),o=Ho(o,r.conv5),o=Ft(o,[2,2],[1,1],"same"),o=r.conv6?Ho(o,r.conv6):o,o=r.conv7?Ho(o,r.conv7):o,Tr(o,r.conv8,"valid",!1)},t.prototype.forwardInput=function(n,r){var o=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return oe(function(){var a=n.toBatchTensor(r,!1).toFloat();return a=o.config.meanRgb?Xu(a,o.config.meanRgb):a,a=a.div(ne(256)),o.config.withSeparableConvs?o.runMobilenet(a,i):o.runTinyYolov2(a,i)})},t.prototype.forward=function(n,r){return he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,zt(n)];case 1:return[4,o.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o,i,a,s,l,u,c,d,f,h,p,m,y,g,v=this;return pe(this,function(x){switch(x.label){case 0:return o=new $y(r),i=o.inputSize,a=o.scoreThreshold,[4,zt(n)];case 1:return s=x.sent(),[4,this.forwardInput(s,i)];case 2:return l=x.sent(),u=oe(function(){return _t(l)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(u,s.getReshapedInputDimensions(0),a)];case 3:return d=x.sent(),l.dispose(),u.dispose(),f=d.map(function(b){return b.box}),h=d.map(function(b){return b.score}),p=d.map(function(b){return b.classScore}),m=d.map(function(b){return v.config.classes[b.label]}),y=wu(f.map(function(b){return b.rescale(i)}),h,this.config.iouThreshold,!0),g=y.map(function(b){return new A_(h[b],p[b],m[b],f[b],c)}),[2,g]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(n){return c9(n,this.config)},t.prototype.extractParams=function(n){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,o=r?r.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return l9(n,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(n,r,o){return he(this,void 0,void 0,function(){var i,a,s,l,u,c,d,f,h,p,m,y,g,v,x,b,k,E,T,R,_,S,A,N,O,M,F,V,z,P=this;return pe(this,function(B){switch(B.label){case 0:return i=r.width,a=r.height,s=Math.max(i,a),l=s/i,u=s/a,c=n.shape[1],d=this.config.anchors.length,f=oe(function(){var L=n.reshape([c,c,d,P.boxEncodingSize]),$=L.slice([0,0,0,0],[c,c,d,4]),q=L.slice([0,0,0,4],[c,c,d,1]),Q=P.withClassScores?Lo(L.slice([0,0,0,5],[c,c,d,P.config.classes.length]),3):ne(0);return[$,q,Q]}),h=f[0],p=f[1],m=f[2],y=[],[4,p.array()];case 1:return g=B.sent(),[4,h.array()];case 2:v=B.sent(),x=0,B.label=3;case 3:if(!(x<c))return[3,12];b=0,B.label=4;case 4:if(!(b<c))return[3,11];k=0,B.label=5;case 5:return k<d?(E=Jp(g[x][b][k][0]),!o||E>o?(T=(b+Jp(v[x][b][k][0]))/c*l,R=(x+Jp(v[x][b][k][1]))/c*u,_=Math.exp(v[x][b][k][2])*this.config.anchors[k].x/c*l,S=Math.exp(v[x][b][k][3])*this.config.anchors[k].y/c*u,A=T-_/2,N=R-S/2,O={row:x,col:b,anchor:k},this.withClassScores?[4,this.extractPredictedClass(m,O)]:[3,7]):[3,9]):[3,10];case 6:return z=B.sent(),[3,8];case 7:z={classScore:1,label:0},B.label=8;case 8:M=z,F=M.classScore,V=M.label,y.push(an({box:new vh(A,N,A+_,N+S),score:E,classScore:E*F,label:V},O)),B.label=9;case 9:return k++,[3,5];case 10:return b++,[3,4];case 11:return x++,[3,3];case 12:return h.dispose(),p.dispose(),m.dispose(),[2,y]}})})},t.prototype.extractPredictedClass=function(n,r){return he(this,void 0,void 0,function(){var o,i,a,s;return pe(this,function(l){switch(l.label){case 0:return o=r.row,i=r.col,a=r.anchor,[4,n.array()];case 1:return s=l.sent(),[2,Array(this.config.classes.length).fill(0).map(function(u,c){return s[o][i][a][c]}).map(function(u,c){return{classScore:u,label:c}}).reduce(function(u,c){return u.classScore>c.classScore?u:c})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(jo),d9=function(e){Ee(t,e);function t(n){n===void 0&&(n=!0);var r=this,o=Object.assign({},{withSeparableConvs:n,iouThreshold:e9,classes:["face"]},n?{anchors:n9,meanRgb:r9}:{anchors:t9,withClassScores:!0});return r=e.call(this,o)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return o=i.sent(),[2,o.map(function(a){return new ao(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?i9:o9},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(aI),sI=function(e){Ee(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return t}($y),Yu=function(){function e(){}return e.prototype.then=function(t){return he(this,void 0,void 0,function(){var n;return pe(this,function(r){switch(r.label){case 0:return n=t,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return he(this,void 0,void 0,function(){return pe(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function wh(e,t,n,r,o){return o===void 0&&(o=function(i){var a=i.alignedRect;return a}),he(this,void 0,void 0,function(){var i,a,s,l,u;return pe(this,function(c){switch(c.label){case 0:return i=e.map(function(d){return xU(d)?o(d):d.detection}),s=r,s?[3,5]:t instanceof rt?[4,Oy(t,i)]:[3,2];case 1:return l=c.sent(),[3,4];case 2:return[4,Fy(t,i)];case 3:l=c.sent(),c.label=4;case 4:s=l,c.label=5;case 5:return a=s,[4,n(a)];case 6:return u=c.sent(),a.forEach(function(d){return d instanceof rt&&d.dispose()}),[2,u]}})})}function Uy(e,t,n,r,o){return he(this,void 0,void 0,function(){var i=this;return pe(this,function(a){return[2,wh([e],t,function(s){return he(i,void 0,void 0,function(){return pe(this,function(l){return[2,n(s[0])]})})},r,o)]})})}function f9(e){return oe(function(){return Gn(_t(e,3).reverse(),3)})}var jc=2,vf=12;function h9(e,t){var n=xh(e,t),r=Ly(e,t);function o(u,c){var d=kt(e(u));return t.push({paramPath:c}),d}function i(u,c,d){d===void 0&&(d=!1);var f=n(u[0],u[1],3,c+"/conv1"),h=o(u[1],c+"/prelu1_alpha"),p=n(u[1],u[2],3,c+"/conv2"),m=o(u[2],c+"/prelu2_alpha"),y=n(u[2],u[3],d?2:3,c+"/conv3"),g=o(u[3],c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:p,prelu2_alpha:m,conv3:y,prelu3_alpha:g}}function a(){var u=i([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),d=n(32,4,1,"pnet/conv4_2");return an(an({},u),{conv4_1:c,conv4_2:d})}function s(){var u=i([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),d=o(128,"rnet/prelu4_alpha"),f=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return an(an({},u),{fc1:c,prelu4_alpha:d,fc2_1:f,fc2_2:h})}function l(){var u=i([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),d=o(128,"onet/prelu4_alpha"),f=r(1152,256,"onet/fc1"),h=o(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),m=r(256,4,"onet/fc2_2"),y=r(256,10,"onet/fc2_3");return an(an({},u),{conv4:c,prelu4_alpha:d,fc1:f,prelu5_alpha:h,fc2_1:p,fc2_2:m,fc2_3:y})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:l}}function p9(e){var t=Vo(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=h9(n,o),a=i.extractPNetParams,s=i.extractRNetParams,l=i.extractONetParams,u=a(),c=s(),d=l();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:u,rnet:c,onet:d},paramMappings:o}}function m9(e,t){var n=Mi(e,t);function r(c){var d=n(c+"/weights",4,c+"/filters"),f=n(c+"/bias",1);return{filters:d,bias:f}}function o(c){var d=n(c+"/weights",2),f=n(c+"/bias",1);return{weights:d,bias:f}}function i(c){return n(c,1)}function a(c){var d=r(c+"/conv1"),f=i(c+"/prelu1_alpha"),h=r(c+"/conv2"),p=i(c+"/prelu2_alpha"),m=r(c+"/conv3"),y=i(c+"/prelu3_alpha");return{conv1:d,prelu1_alpha:f,conv2:h,prelu2_alpha:p,conv3:m,prelu3_alpha:y}}function s(){var c=a("pnet"),d=r("pnet/conv4_1"),f=r("pnet/conv4_2");return an(an({},c),{conv4_1:d,conv4_2:f})}function l(){var c=a("rnet"),d=o("rnet/fc1"),f=i("rnet/prelu4_alpha"),h=o("rnet/fc2_1"),p=o("rnet/fc2_2");return an(an({},c),{fc1:d,prelu4_alpha:f,fc2_1:h,fc2_2:p})}function u(){var c=a("onet"),d=r("onet/conv4"),f=i("onet/prelu4_alpha"),h=o("onet/fc1"),p=i("onet/prelu5_alpha"),m=o("onet/fc2_1"),y=o("onet/fc2_2"),g=o("onet/fc2_3");return an(an({},c),{conv4:d,prelu4_alpha:f,fc1:h,prelu5_alpha:p,fc2_1:m,fc2_2:y,fc2_3:g})}return{extractPNetParams:s,extractRNetParams:l,extractONetParams:u}}function g9(e){var t=[],n=m9(e,t),r=n.extractPNetParams,o=n.extractRNetParams,i=n.extractONetParams,a=r(),s=o(),l=i();return zo(e,t),{params:{pnet:a,rnet:s,onet:l},paramMappings:t}}function Zg(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function v9(e,t,n){for(var r=n[0],o=n[1],i=vf/e,a=[],s=Math.min(r,o)*i,l=0;s>=12;)a.push(i*Math.pow(t,l)),s=s*t,l+=1;return a}var Hy=function(e){Ee(t,e);function t(n,r,o,i){return e.call(this,{left:n,top:r,right:o,bottom:i},!0)||this}return t}(Si);function lI(e){return oe(function(){return cn(Nt(e,ne(127.5)),ne(.0078125))})}function ks(e,t){return oe(function(){return Ie(it(e),cn(t,cf(it(cf(e)))))})}function Gy(e,t,n){return n===void 0&&(n=!1),oe(function(){var r=Tr(e,t.conv1,"valid");return r=ks(r,t.prelu1_alpha),r=Ft(r,n?[2,2]:[3,3],[2,2],"same"),r=Tr(r,t.conv2,"valid"),r=ks(r,t.prelu2_alpha),r=n?r:Ft(r,[3,3],[2,2],"valid"),r=Tr(r,t.conv3,"valid"),r=ks(r,t.prelu3_alpha),r})}function y9(e,t){return oe(function(){var n=Gy(e,t,!0),r=Tr(n,t.conv4_1,"valid"),o=ar(hh(r,3),3),i=Lo(Nt(r,o),3),a=Tr(n,t.conv4_2,"valid");return{prob:i,regions:a}})}function x9(e,t){return oe(function(){var n=Zg(t,e.shape.slice(1)),r=n.height,o=n.width,i=Cy.resizeBilinear(e,[r,o]),a=lI(i);return Ei(a,[0,2,1,3])})}function b9(e,t,n,r){for(var o=[],i=e.arraySync(),a=0;a<e.shape[0];a++)for(var s=0;s<e.shape[1];s++)i[a][s]>=r&&o.push(new Le(s,a));var l=o.map(function(u){var c=new vh(Math.round((u.y*jc+1)/n),Math.round((u.x*jc+1)/n),Math.round((u.y*jc+vf)/n),Math.round((u.x*jc+vf)/n)),d=i[u.y][u.x],f=t.arraySync(),h=new Hy(f[u.y][u.x][0],f[u.y][u.x][1],f[u.y][u.x][2],f[u.y][u.x][3]);return{cell:c,score:d,region:h}});return l}function w9(e,t,n,r,o){o.stage1=[];var i=t.map(function(f){return oe(function(){var h={scale:f},p=x9(e,f),m=Date.now(),y=y9(p,r),g=y.prob,v=y.regions;h.pnet=Date.now()-m;var x=_t(_t(g,3)[1])[0],b=_t(v)[0];return{scoresTensor:x,regionsTensor:b,scale:f,statsForScale:h}})}),a=i.map(function(f){var h=f.scoresTensor,p=f.regionsTensor,m=f.scale,y=f.statsForScale,g=b9(h,p,m,n);if(h.dispose(),p.dispose(),!g.length)return o.stage1.push(y),[];var v=Date.now(),x=wu(g.map(function(b){return b.cell}),g.map(function(b){return b.score}),.5);return y.nms=Date.now()-v,y.numBoxes=x.length,o.stage1.push(y),x.map(function(b){return g[b]})}),s=a.reduce(function(f,h){return f.concat(h)},[]),l=[],u=[];if(s.length>0){var c=Date.now(),d=wu(s.map(function(f){return f.cell}),s.map(function(f){return f.score}),.7);o.stage1_nms=Date.now()-c,u=d.map(function(f){return s[f].score}),l=d.map(function(f){return s[f]}).map(function(f){var h=f.cell,p=f.region;return new vh(h.left+p.left*h.width,h.top+p.top*h.height,h.right+p.right*h.width,h.bottom+p.bottom*h.height).toSquare().round()})}return{boxes:l,scores:u}}function uI(e,t,n){var r=n.width,o=n.height;return he(this,void 0,void 0,function(){var i,a,s,l=this;return pe(this,function(u){switch(u.label){case 0:return i=pa(e),[4,Promise.all(t.map(function(c){return he(l,void 0,void 0,function(){var d,f,h,p,m,y,g,v;return pe(this,function(x){return d=c.padAtBorders(e.height,e.width),f=d.y,h=d.ey,p=d.x,m=d.ex,y=p-1,g=f-1,v=i.getImageData(y,g,m-y,h-g),[2,pn.isNodejs()?My(v):createImageBitmap(v)]})})}))];case 1:return a=u.sent(),s=[],a.forEach(function(c){var d=yh({width:r,height:o}),f=pa(d);f.drawImage(c,0,0,r,o);for(var h=f.getImageData(0,0,r,o).data,p=[],m=0;m<h.length;m+=4)p.push(h[m+2]),p.push(h[m+1]),p.push(h[m]);s.push(p)}),[2,s.map(function(c){var d=oe(function(){var f=Ei(Sn(c,[1,r,o,3]),[0,2,1,3]).toFloat();return lI(f)});return d})]}})})}function k9(e,t){return oe(function(){var n=Gy(e,t),r=Er(n,[n.shape[0],t.fc1.weights.shape[0]]),o=Wr(r,t.fc1),i=ks(o,t.prelu4_alpha),a=Wr(i,t.fc2_1),s=ar(hh(a,1),1),l=Lo(Nt(a,s),1),u=Wr(i,t.fc2_2),c=_t(l,1)[1];return{scores:c,regions:u}})}function C9(e,t,n,r,o){return he(this,void 0,void 0,function(){var i,a,s,l,u,c,d,f,h,p,m,y,g,v;return pe(this,function(x){switch(x.label){case 0:return i=Date.now(),[4,uI(e,t,{width:24,height:24})];case 1:return a=x.sent(),o.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map(function(b){var k=k9(b,r);return b.dispose(),k}),o.stage2_rnet=Date.now()-i,l=s.length>1?Tt(s.map(function(b){return b.scores})):s[0].scores,d=(c=Array).from,[4,l.data()];case 2:return u=d.apply(c,[x.sent()]),l.dispose(),f=u.map(function(b,k){return{score:b,idx:k}}).filter(function(b){return b.score>n}).map(function(b){var k=b.idx;return k}),h=f.map(function(b){return t[b]}),p=f.map(function(b){return u[b]}),m=[],y=[],h.length>0&&(i=Date.now(),g=wu(h,p,.7),o.stage2_nms=Date.now()-i,v=g.map(function(b){var k=s[f[b]].regions.arraySync();return new Hy(k[0][0],k[0][1],k[0][2],k[0][3])}),y=g.map(function(b){return p[b]}),m=g.map(function(b,k){return h[b].calibrate(v[k])})),s.forEach(function(b){b.regions.dispose(),b.scores.dispose()}),[2,{boxes:m,scores:y}]}})})}function E9(e,t){return oe(function(){var n=Gy(e,t);n=Ft(n,[2,2],[2,2],"same"),n=Tr(n,t.conv4,"valid"),n=ks(n,t.prelu4_alpha);var r=Er(n,[n.shape[0],t.fc1.weights.shape[0]]),o=Wr(r,t.fc1),i=ks(o,t.prelu5_alpha),a=Wr(i,t.fc2_1),s=ar(hh(a,1),1),l=Lo(Nt(a,s),1),u=Wr(i,t.fc2_2),c=Wr(i,t.fc2_3),d=_t(l,1)[1];return{scores:d,regions:u,points:c}})}function S9(e,t,n,r,o){return he(this,void 0,void 0,function(){var i,a,s,l,u,c,d,f,h,p,m,y,g,v,x;return pe(this,function(b){switch(b.label){case 0:return i=Date.now(),[4,uI(e,t,{width:48,height:48})];case 1:return a=b.sent(),o.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map(function(k){var E=E9(k,r);return k.dispose(),E}),o.stage3_onet=Date.now()-i,l=s.length>1?Tt(s.map(function(k){return k.scores})):s[0].scores,d=(c=Array).from,[4,l.data()];case 2:return u=d.apply(c,[b.sent()]),l.dispose(),f=u.map(function(k,E){return{score:k,idx:E}}).filter(function(k){return k.score>n}).map(function(k){var E=k.idx;return E}),h=f.map(function(k){var E=s[k].regions.arraySync();return new Hy(E[0][0],E[0][1],E[0][2],E[0][3])}),p=f.map(function(k,E){return t[k].calibrate(h[E])}),m=f.map(function(k){return u[k]}),y=[],g=[],v=[],p.length>0&&(i=Date.now(),x=wu(p,m,.7,!1),o.stage3_nms=Date.now()-i,y=x.map(function(k){return p[k]}),g=x.map(function(k){return m[k]}),v=x.map(function(k,E){return Array(5).fill(0).map(function(T,R){var _=s[k].points.arraySync();return new Le(_[0][R]*(y[E].width+1)+y[E].left,_[0][R+5]*(y[E].height+1)+y[E].top)})})),s.forEach(function(k){k.regions.dispose(),k.scores.dispose(),k.points.dispose()}),[2,{boxes:y,scores:g,points:v}]}})})}var R9=function(e){Ee(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(n){return he(this,void 0,void 0,function(){return pe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},t.prototype.loadFromDisk=function(n){return he(this,void 0,void 0,function(){return pe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},t.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o,i,a,s,l,u,c,d,f,h,p,m,y,g,v,x,b,k,E,T,R;return pe(this,function(_){switch(_.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(i=n.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),l=oe(function(){return f9(ar(Iy.fromPixels(i)).toFloat())}),u=function(S){return l.dispose(),a.total=Date.now()-s,S},c=l.shape.slice(1),d=c[0],f=c[1],h=new oI(r),p=h.minFaceSize,m=h.scaleFactor,y=h.maxNumScales,g=h.scoreThresholds,v=h.scaleSteps,x=(v||v9(p,m,[d,f])).filter(function(S){var A=Zg(S,[d,f]);return Math.min(A.width,A.height)>vf}).slice(0,y),a.scales=x,a.pyramid=x.map(function(S){return Zg(S,[d,f])}),b=Date.now(),[4,w9(l,x,g[0],o.pnet,a)];case 1:return k=_.sent(),a.total_stage1=Date.now()-b,k.boxes.length?(a.stage2_numInputBoxes=k.boxes.length,b=Date.now(),[4,C9(i,k.boxes,g[1],o.rnet,a)]):[2,u({results:[],stats:a})];case 2:return E=_.sent(),a.total_stage2=Date.now()-b,E.boxes.length?(a.stage3_numInputBoxes=E.boxes.length,b=Date.now(),[4,S9(i,E.boxes,g[2],o.onet,a)]):[2,u({results:[],stats:a})];case 3:return T=_.sent(),a.total_stage3=Date.now()-b,R=T.boxes.map(function(S,A){return zy(Ay({},new ao(T.scores[A],new Py(S.left/f,S.top/d,S.width/f,S.height/d),{height:d,width:f})),new nU(T.points[A].map(function(N){return N.sub(new Le(S.left,S.top)).div(new Le(S.width,S.height))}),{width:S.width,height:S.height}))}),[2,u({results:R,stats:a})]}})})},t.prototype.forward=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,zt(n)];case 1:return[4,o.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,zt(n)];case 1:return[2,o.apply(this,[i.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(n){return g9(n)},t.prototype.extractParams=function(n){return p9(n)},t}(jo),T9=.4,_9=[new Le(1.603231,2.094468),new Le(6.041143,7.080126),new Le(2.882459,3.518061),new Le(4.266906,5.178857),new Le(9.041765,10.66308)],I9=[117.001,114.697,97.404],N9=function(e){Ee(t,e);function t(){var n=this,r={withSeparableConvs:!0,iouThreshold:T9,classes:["face"],anchors:_9,meanRgb:I9,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=e.call(this,r)||this,n}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return o=i.sent(),[2,o.map(function(a){return new ao(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(aI),vn={ssdMobilenetv1:new iI,tinyFaceDetector:new N9,tinyYolov2:new d9,mtcnn:new R9,faceLandmark68Net:new J_,faceLandmark68TinyNet:new AU,faceRecognitionNet:new jU,faceExpressionNet:new yU,ageGenderNet:new _U},cI=function(e){Ee(t,e);function t(n,r,o){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=o,i}return t}(Yu),Ky=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o=this;return pe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,wh(n,this.input,function(a){return he(o,void 0,void 0,function(){return pe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(l){return vn.faceExpressionNet.predictExpressions(l)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(a,s){return X_(a,r[s])})]}})})},t.prototype.withAgeAndGender=function(){return new Qy(this,this.input)},t}(cI),qy=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,Uy(n,this.input,function(i){return vn.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=o.sent(),[2,X_(n,r)]}})})},t.prototype.withAgeAndGender=function(){return new Jy(this,this.input)},t}(cI),Xy=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new Zy(this,this.input)},t.prototype.withFaceDescriptors=function(){return new tx(this,this.input)},t}(Ky),Yy=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new ex(this,this.input)},t.prototype.withFaceDescriptor=function(){return new nx(this,this.input)},t}(qy),dI=function(e){Ee(t,e);function t(n,r,o){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=o,i}return t}(Yu),Qy=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o=this;return pe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,wh(n,this.input,function(a){return he(o,void 0,void 0,function(){return pe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(l){return vn.ageGenderNet.predictAgeAndGender(l)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(a,s){var l=r[s],u=l.age,c=l.gender,d=l.genderProbability;return nI(rI(a,c,d),u)})]}})})},t.prototype.withFaceExpressions=function(){return new Ky(this,this.input)},t}(dI),Jy=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o,i,a;return pe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,Uy(n,this.input,function(l){return vn.ageGenderNet.predictAgeAndGender(l)},this.extractedFaces)]:[2];case 2:return r=s.sent(),o=r.age,i=r.gender,a=r.genderProbability,[2,nI(rI(n,i,a),o)]}})})},t.prototype.withFaceExpressions=function(){return new qy(this,this.input)},t}(dI),Zy=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new Xy(this,this.input)},t.prototype.withFaceDescriptors=function(){return new tx(this,this.input)},t}(Qy),ex=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new Yy(this,this.input)},t.prototype.withFaceDescriptor=function(){return new nx(this,this.input)},t}(Jy),fI=function(e){Ee(t,e);function t(n,r){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o}return t}(Yu),tx=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,wh(n,this.input,function(i){return Promise.all(i.map(function(a){return vn.faceRecognitionNet.computeFaceDescriptor(a)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=o.sent(),[2,r.map(function(i,a){return tI(n[a],i)})]}})})},t.prototype.withFaceExpressions=function(){return new Xy(this,this.input)},t.prototype.withAgeAndGender=function(){return new Zy(this,this.input)},t}(fI),nx=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,Uy(n,this.input,function(i){return vn.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=o.sent(),[2,tI(n,r)]}})})},t.prototype.withFaceExpressions=function(){return new Yy(this,this.input)},t.prototype.withAgeAndGender=function(){return new ex(this,this.input)},t}(fI),hI=function(e){Ee(t,e);function t(n,r,o){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.useTinyLandmarkNet=o,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?vn.faceLandmark68TinyNet:vn.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Yu),P9=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o,i,a,s=this;return pe(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return n=l.sent(),r=n.map(function(u){return u.detection}),this.input instanceof rt?[4,Oy(this.input,r)]:[3,3];case 2:return i=l.sent(),[3,5];case 3:return[4,Fy(this.input,r)];case 4:i=l.sent(),l.label=5;case 5:return o=i,[4,Promise.all(o.map(function(u){return s.landmarkNet.detectLandmarks(u)}))];case 6:return a=l.sent(),o.forEach(function(u){return u instanceof rt&&u.dispose()}),[2,n.map(function(u,c){return zy(u,a[c])})]}})})},t.prototype.withFaceExpressions=function(){return new Xy(this,this.input)},t.prototype.withAgeAndGender=function(){return new Zy(this,this.input)},t.prototype.withFaceDescriptors=function(){return new tx(this,this.input)},t}(hI),A9=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o,i,a;return pe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof rt?[4,Oy(this.input,[r])]:[3,3]):[2];case 2:return i=s.sent(),[3,5];case 3:return[4,Fy(this.input,[r])];case 4:i=s.sent(),s.label=5;case 5:return o=i,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return a=s.sent(),o.forEach(function(l){return l instanceof rt&&l.dispose()}),[2,zy(n,a)]}})})},t.prototype.withFaceExpressions=function(){return new Yy(this,this.input)},t.prototype.withAgeAndGender=function(){return new ex(this,this.input)},t.prototype.withFaceDescriptor=function(){return new nx(this,this.input)},t}(hI),pI=function(e){Ee(t,e);function t(n,r){r===void 0&&(r=new bh);var o=e.call(this)||this;return o.input=n,o.options=r,o}return t}(Yu),D9=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o,i;return pe(this,function(a){switch(a.label){case 0:return n=this,r=n.input,o=n.options,o instanceof oI?[4,vn.mtcnn.forward(r,o)]:[3,2];case 1:return[2,a.sent().map(function(s){return s.detection})];case 2:if(i=o instanceof sI?function(s){return vn.tinyFaceDetector.locateFaces(s,o)}:o instanceof bh?function(s){return vn.ssdMobilenetv1.locateFaces(s,o)}:o instanceof $y?function(s){return vn.tinyYolov2.locateFaces(s,o)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return he(n,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,r(o.map(function(a){return Ay({},a)}))]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new P9(this.runAndExtendWithFaceDetections(),this.input,n)},t.prototype.withFaceExpressions=function(){return new Ky(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new Qy(this.runAndExtendWithFaceDetections(),this.input)},t}(pI),M9=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return[4,new D9(this.input,this.options)];case 1:return n=o.sent(),r=n[0],n.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return he(n,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,r(o?Ay({},o):void 0)]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new A9(this.runAndExtendWithFaceDetection(),this.input,n)},t.prototype.withFaceExpressions=function(){return new qy(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new Jy(this.runAndExtendWithFaceDetection(),this.input)},t}(pI);function F9(e,t){return t===void 0&&(t=new bh),new M9(e,t)}function mI(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(o,i){return o-r[i]}).reduce(function(o,i){return o+Math.pow(i,2)},0))}(function(){function e(t,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,i=function(){return"person "+o++};this._labeledDescriptors=r.map(function(a){if(a instanceof Fc)return a;if(a instanceof Float32Array)return new Fc(i(),[a]);if(a.descriptor&&a.descriptor instanceof Float32Array)return new Fc(i(),[a.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,n){return n.map(function(r){return mI(r,t)}).reduce(function(r,o){return r+o},0)/(n.length||1)},e.prototype.matchDescriptor=function(t){var n=this;return this.labeledDescriptors.map(function(r){var o=r.descriptors,i=r.label;return new y2(i,n.computeMeanDistance(t,o))}).reduce(function(r,o){return r.distance<o.distance?r:o})},e.prototype.findBestMatch=function(t){var n=this.matchDescriptor(t);return n.distance<this.distanceThreshold?n:new y2("unknown",n.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(r){return Fc.fromJSON(r)});return new e(n,t.distanceThreshold)},e})();const O9=async()=>{const e="/models";await Promise.all([vn.tinyFaceDetector.loadFromUri(e),vn.faceLandmark68Net.loadFromUri(e),vn.faceRecognitionNet.loadFromUri(e)])},L9=async e=>!e||e.src===""?(console.error("Image element is empty or invalid."),null):await F9(e,new sI).withFaceLandmarks().withFaceDescriptor();function B9(){const e=C.useRef(null),t=C.useRef(null),n=C.useRef(null);C.useEffect(()=>{(async()=>{Ao("Loading","Getting camera access..."),await O9(),r()})()},[]);const r=()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(l=>{hr.close(),e.current.srcObject=l,e.current.setAttribute("autoplay",""),e.current.setAttribute("muted",""),e.current.setAttribute("playsinline","")}).catch(l=>{const u=l.name==="NotAllowedError"?"Izin akses kamera ditolak oleh pengguna":"Tidak ada kamera yang tersedia pada perangkat";ft("error","Error",u)})},o=()=>{const l=t.current.getContext("2d"),u=e.current,c=400;t.current.width=c,t.current.height=c;const d=(u.videoWidth-c)/2,f=(u.videoHeight-c)/2;l.save(),l.scale(-1,1),l.translate(-c,0),l.drawImage(u,d,f,c,c,0,0,c,c),l.restore();const h=t.current.toDataURL("image/jpeg");n.current.src=h},i=async()=>{Ao("Loading","Sedang melakukan deteksi wajah...");const l=10;let u=0;try{const c={"devop-sso":localStorage.getItem("regist_token"),csrf_token:Ue.get("csrf")},d=await Yt.postInput("loadFace",c);if(!d.status)throw new Error("Gagal memuat data wajah.");const f=d.data.facecam,h=async()=>{if(u>=l){ft("error","Deteksi Gagal","Wajah tidak terdeteksi, pastikan pencahayaan memadai",()=>s());return}u++;const p=await L9(n.current);if(!p){setTimeout(h,1e3);return}if(f.some(y=>{const g=new Float32Array(y.facecam_id.split(", ").map(Number));return mI(g,p.descriptor)<=.6})){ft("error","Error","Wajah sudah terdaftar, gunakan wajah lain.",()=>s());return}a(p)};h()}catch(c){console.error(c),pr(c,"/login")}},a=async l=>{const u={param:Array.from(l.descriptor).join(", "),img:t.current.toDataURL("image/jpeg"),"devop-sso":localStorage.getItem("regist_token"),csrf_token:Ue.get("csrf")};try{const c=await Yt.postInput("facecam",u);if(c.status)ft(c.data.info,c.data.title,c.data.message,()=>window.location.replace("/setpassword"));else throw new Error("Gagal mendaftarkan wajah.")}catch(c){console.error(c),pr(c,"/facereg")}},s=()=>{n.current.src=""};return w.jsxs("div",{className:"bg-primary-low text-white flex flex-col h-screen w-screen",children:[w.jsx("video",{ref:e,className:"video-feed"}),w.jsx("canvas",{ref:t,className:"hidden"}),w.jsx("img",{ref:n,className:"hidden",alt:"Captured face"}),w.jsxs("div",{className:"controls",children:[w.jsx("button",{onClick:o,children:"Ambil Gambar"}),w.jsx("button",{onClick:i,children:"Proses"})]})]})}const ev=C.forwardRef(function(t,n){return w.jsxs("label",{className:"swap flex justify-center items-center border-[1px] border-white relative z-[5] w-10 rounded-lg",children:[w.jsx("input",{type:"checkbox",className:"invisible absolute",onChange:()=>{n.current.type=="password"?n.current.type="text":n.current.type="password"}}),w.jsx(l6,{className:"size-6 stroke-2 swap-off absolute"}),w.jsx(a6,{className:"size-6 stroke-2 swap-on absolute"})]})});function j9(){const e=C.useRef(null),t=C.useRef(null),n=C.useRef(null),r=()=>{const i=e.current.value.trim(),a=t.current.value;return/^\S+@\S+\.\S+$/.test(i)?a.length<8?"Password harus minimal 8 karakter.":null:"Email tidak valid."},o=async i=>{i.preventDefault();const a=r();a&&ft("Validasi Gagal",a,"error");const s=e.current.value.trim(),l=t.current.value,u=HR(l),c=Fj(s,u),d=["username","password"],f=[s,u,c[1],Ue.get("csrf")],h=Yn(Po(d),f);localStorage.setItem("AUTH_KEY",c[0]),localStorage.setItem("devop-sso",c[1]),console.log(h);try{Ao("Loading","Logging in...");const p=await Yt.authPost("login",localStorage.getItem("AUTH_KEY"),h),m=JSON.parse(p);localStorage.setItem("login_token",m.data.token),Ue.set("csrf",m.csrfHash,{secure:!0,sameSite:"Strict"}),ft("Berhasil",m.data.message,"success",()=>window.location.replace("/home"))}catch(p){pr(p,"/login")}};return C.useEffect(()=>{const i=a=>{a.key==="Enter"&&n.current.click()};return window.addEventListener("keypress",i),()=>{window.removeEventListener("keypress",i)}},[]),w.jsxs("div",{className:"bg-primary-low font-primary text-white flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] relative z-[1]",children:[w.jsx("img",{src:"/img/login.png",alt:"labschool-unesa-logo",className:"w-full h-[60vh] absolute top-0 left-0 z-0"}),w.jsxs("div",{className:"w-full h-fit bottom-0 bg-primary-md rounded-t-[2rem] p-6 sm:p-8 absolute z-10",children:[w.jsx("h2",{className:"font-bold text-4xl",children:"Login Dulu"}),w.jsx("p",{className:"font-light text-xs",children:"Selamat datang kembali!!!"}),w.jsxs("form",{className:"my-6 space-y-4 md:space-y-6",onSubmit:o,children:[w.jsxs("div",{className:"space-y-4 md:space-y-6 flex flex-col gap-2",children:[w.jsx("input",{type:"email",name:"email",id:"email",ref:e,className:"bg-primary-md border-white border-[1px] placeholder-white text-xs rounded-lg focus:bg-white focus:border-0 focus:text-black w-full py-3 px-4",placeholder:"Email",required:!0}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"password",name:"password",id:"password",ref:t,placeholder:"Password (8 or more characters)",className:"flex-1 bg-primary-md border-white border-[1px] placeholder-white text-white text-xs rounded-lg focus:bg-white focus:border-0 focus:text-black block w-full py-3 px-4",required:!0}),w.jsx(ev,{ref:t})]}),w.jsx(Ve,{to:"/recover",className:"text-sm font-light text-end",children:"Lupa password?"}),w.jsx("button",{type:"submit",ref:n,className:"btn border-none w-full text-primary-md font-semibold bg-white hover:bg-primary-300 focus:ring-4 focus:outline-none focus:ring-primary-300 rounded-xl text-sm px-4 py-2 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Login"})]}),w.jsx("div",{id:"line",className:"w-full border-t-[0.25px] border-white h-0 relative top-4",children:w.jsx("p",{className:"absolute text-center left-[calc(50%-1.25rem)] top-[-0.85rem] z-10 text-white bg-primary-md w-10",children:"or"})})]}),w.jsxs("p",{className:"text-center text-sm font-light text-white dark:text-gray-400 mt-10",children:["Belum memiliki akun?"," ",w.jsx(Ve,{to:"/",className:"font-medium underline text-white hover:underline dark:text-primary-500",children:"Register"})]})]})]})}function z9(){const e=C.useRef(),[t,n]=C.useState(!1),r=o=>{o.preventDefault(),Ao("Loading","Verifying Email..."),n(!0);const i=["username","csrf_token"],a=[e.current.value,Ue.get("csrf")];localStorage.setItem("email",e.current.value),Yt.postInput("recover",Yn(i,a)).then(s=>{s=JSON.parse(s),n(!1),ft(s.data.info,s.data.title,s.data.message,()=>window.location.replace("/"+s.data.location))}).catch(s=>{pr(s,"/recover")})};return w.jsxs("div",{className:"bg-primary-low font-primary text-white flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] relative z-[1]",children:[w.jsx(Ve,{to:"/",children:w.jsx(gr,{className:"size-7 absolute top-8 left-6 z-[2]"})}),w.jsx("img",{src:"/img/reset_pwd.png",alt:"reset",className:"w-screen h-2/3 absolute top-0 left-0 z-0"}),w.jsxs("div",{className:"w-full h-1/2 mt-auto bottom-0 bg-primary-md rounded-t-[2rem] p-6 sm:p-8 relative z-10",children:[w.jsx("h2",{className:"font-bold text-4xl",children:"Ganti Password"}),w.jsx("div",{className:"my-6 space-y-4 md:space-y-6 p-4 pb-4",children:w.jsxs("form",{className:"space-y-4 md:space-y-6 flex flex-col gap-2",children:[w.jsx("input",{type:"email",name:"email",id:"email",ref:e,className:"bg-primary-md border-white border-[1px] placeholder-white text-white text-xs rounded-lg focus:bg-white focus:border-0 focus:text-black block w-full py-3 px-4",placeholder:"Email",required:""}),w.jsx("button",{onClick:r,disabled:t,className:"btn border-none w-full text-primary-md font-semibold bg-white hover:bg-primary-300 focus:ring-4 focus:outline-none focus:ring-primary-300 rounded-xl text-sm px-4 py-2 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:t?w.jsxs("div",{className:"flex justify-center items-center gap-2",children:[w.jsx("p",{children:"Loading"}),w.jsx("span",{className:"loading loading-spinner text-white"})]}):"Ganti Password"}),w.jsx("div",{id:"line",className:"w-full border-t-[0.25px] border-white h-0 relative top-4",children:w.jsx("p",{className:"absolute text-center left-[calc(50%-1.25rem)] top-[-0.85rem] z-10 text-white bg-primary-md w-10",children:"or"})})]})}),w.jsxs("p",{className:"text-center text-sm font-light text-white dark:text-gray-400 mt-5",children:["Belum memiliki akun?"," ",w.jsx(Ve,{to:"/",className:"font-medium underline text-white hover:underline dark:text-primary-500",children:"Register"})]})]})]})}function V9({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const W9=C.forwardRef(V9);function $9({title:e,titleId:t,...n},r){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?C.createElement("title",{id:t},e):null,C.createElement("path",{fillRule:"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z",clipRule:"evenodd"}))}const U9=C.forwardRef($9);var gI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},E2=$r.createContext&&$r.createContext(gI),H9=["attr","size","title"];function G9(e,t){if(e==null)return{};var n=K9(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function K9(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function yf(){return yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yf.apply(this,arguments)}function S2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(n),!0).forEach(function(r){q9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q9(e,t,n){return t=X9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X9(e){var t=Y9(e,"string");return typeof t=="symbol"?t:String(t)}function Y9(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vI(e){return e&&e.map((t,n)=>$r.createElement(t.tag,xf({key:n},t.attr),vI(t.child)))}function wn(e){return t=>$r.createElement(Q9,yf({attr:xf({},e.attr)},t),vI(e.child))}function Q9(e){var t=n=>{var{attr:r,size:o,title:i}=e,a=G9(e,H9),s=o||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),$r.createElement("svg",yf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:l,style:xf(xf({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&$r.createElement("title",null,i),e.children)};return E2!==void 0?$r.createElement(E2.Consumer,null,n=>t(n)):t(gI)}function J9(e){return wn({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Z9(e){return wn({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function eH(e){return wn({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(e)}function yI(e){return wn({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function tH(e){return wn({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function nH(e){return wn({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function rH(e){return wn({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},child:[]}]})(e)}function oH(e){return wn({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function xI(e){return wn({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"},child:[]}]})(e)}function bI(e){return wn({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"},child:[]}]})(e)}function rx(e){return wn({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"},child:[]}]})(e)}function iH(e){return wn({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"},child:[]}]})(e)}function aH(e){return wn({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},child:[]}]})(e)}const ox="-";function sH(e){const t=uH(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;function o(a){const s=a.split(ox);return s[0]===""&&s.length!==1&&s.shift(),wI(s,t)||lH(a)}function i(a,s){const l=n[a]||[];return s&&r[a]?[...l,...r[a]]:l}return{getClassGroupId:o,getConflictingClassGroupIds:i}}function wI(e,t){var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?wI(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const i=e.join(ox);return(a=t.validators.find(({validator:s})=>s(i)))==null?void 0:a.classGroupId}const R2=/^\[(.+)\]$/;function lH(e){if(R2.test(e)){const t=R2.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function uH(e){const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return dH(Object.entries(e.classGroups),n).forEach(([i,a])=>{tv(a,r,i,t)}),r}function tv(e,t,n,r){e.forEach(o=>{if(typeof o=="string"){const i=o===""?t:T2(t,o);i.classGroupId=n;return}if(typeof o=="function"){if(cH(o)){tv(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,a])=>{tv(a,T2(t,i),n,r)})})}function T2(e,t){let n=e;return t.split(ox).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function cH(e){return e.isThemeGetter}function dH(e,t){return t?e.map(([n,r])=>{const o=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,s])=>[t+a,s])):i);return[n,o]}):e}function fH(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;function o(i,a){n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)}return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return o(i,a),a},set(i,a){n.has(i)?n.set(i,a):o(i,a)}}}const kI="!";function hH(e){const t=e.separator,n=t.length===1,r=t[0],o=t.length;return function(a){const s=[];let l=0,u=0,c;for(let m=0;m<a.length;m++){let y=a[m];if(l===0){if(y===r&&(n||a.slice(m,m+o)===t)){s.push(a.slice(u,m)),u=m+o;continue}if(y==="/"){c=m;continue}}y==="["?l++:y==="]"&&l--}const d=s.length===0?a:a.substring(u),f=d.startsWith(kI),h=f?d.substring(1):d,p=c&&c>u?c-u:void 0;return{modifiers:s,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}}}function pH(e){if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t}function mH(e){return{cache:fH(e.cacheSize),splitModifiers:hH(e),...sH(e)}}const gH=/\s+/;function vH(e,t){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,i=new Set;return e.trim().split(gH).map(a=>{const{modifiers:s,hasImportantModifier:l,baseClassName:u,maybePostfixModifierPosition:c}=n(a);let d=r(c?u.substring(0,c):u),f=!!c;if(!d){if(!c)return{isTailwindClass:!1,originalClassName:a};if(d=r(u),!d)return{isTailwindClass:!1,originalClassName:a};f=!1}const h=pH(s).join(":");return{isTailwindClass:!0,modifierId:l?h+kI:h,classGroupId:d,originalClassName:a,hasPostfixModifier:f}}).reverse().filter(a=>{if(!a.isTailwindClass)return!0;const{modifierId:s,classGroupId:l,hasPostfixModifier:u}=a,c=s+l;return i.has(c)?!1:(i.add(c),o(l,u).forEach(d=>i.add(s+d)),!0)}).reverse().map(a=>a.originalClassName).join(" ")}function yH(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=CI(t))&&(r&&(r+=" "),r+=n);return r}function CI(e){if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=CI(e[r]))&&(n&&(n+=" "),n+=t);return n}function xH(e,...t){let n,r,o,i=a;function a(l){const u=t.reduce((c,d)=>d(c),e());return n=mH(u),r=n.cache.get,o=n.cache.set,i=s,s(l)}function s(l){const u=r(l);if(u)return u;const c=vH(l,n);return o(l,c),c}return function(){return i(yH.apply(null,arguments))}}function Ye(e){const t=n=>n[e]||[];return t.isThemeGetter=!0,t}const EI=/^\[(?:([a-z-]+):)?(.+)\]$/i,bH=/^\d+\/\d+$/,wH=new Set(["px","full","screen"]),kH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,SH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,RH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function uo(e){return Zi(e)||wH.has(e)||bH.test(e)}function Go(e){return Zs(e,"length",MH)}function Zi(e){return!!e&&!Number.isNaN(Number(e))}function zc(e){return Zs(e,"number",Zi)}function gl(e){return!!e&&Number.isInteger(Number(e))}function TH(e){return e.endsWith("%")&&Zi(e.slice(0,-1))}function Te(e){return EI.test(e)}function Ko(e){return kH.test(e)}const _H=new Set(["length","size","percentage"]);function IH(e){return Zs(e,_H,SI)}function NH(e){return Zs(e,"position",SI)}const PH=new Set(["image","url"]);function AH(e){return Zs(e,PH,OH)}function DH(e){return Zs(e,"",FH)}function vl(){return!0}function Zs(e,t,n){const r=EI.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1}function MH(e){return CH.test(e)&&!EH.test(e)}function SI(){return!1}function FH(e){return SH.test(e)}function OH(e){return RH.test(e)}function LH(){const e=Ye("colors"),t=Ye("spacing"),n=Ye("blur"),r=Ye("brightness"),o=Ye("borderColor"),i=Ye("borderRadius"),a=Ye("borderSpacing"),s=Ye("borderWidth"),l=Ye("contrast"),u=Ye("grayscale"),c=Ye("hueRotate"),d=Ye("invert"),f=Ye("gap"),h=Ye("gradientColorStops"),p=Ye("gradientColorStopPositions"),m=Ye("inset"),y=Ye("margin"),g=Ye("opacity"),v=Ye("padding"),x=Ye("saturate"),b=Ye("scale"),k=Ye("sepia"),E=Ye("skew"),T=Ye("space"),R=Ye("translate"),_=()=>["auto","contain","none"],S=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",Te,t],N=()=>[Te,t],O=()=>["",uo,Go],M=()=>["auto",Zi,Te],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],P=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Te],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[Zi,zc],q=()=>[Zi,Te];return{cacheSize:500,separator:":",theme:{colors:[vl],spacing:[uo,Go],blur:["none","",Ko,Te],brightness:$(),borderColor:[e],borderRadius:["none","","full",Ko,Te],borderSpacing:N(),borderWidth:O(),contrast:$(),grayscale:B(),hueRotate:q(),invert:B(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[TH,Go],inset:A(),margin:A(),opacity:$(),padding:N(),saturate:$(),scale:$(),sepia:B(),skew:q(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[Ko]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Te]}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gl,Te]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",gl,Te]}],"grid-cols":[{"grid-cols":[vl]}],"col-start-end":[{col:["auto",{span:["full",gl,Te]},Te]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[vl]}],"row-start-end":[{row:["auto",{span:[gl,Te]},Te]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,t]}],"min-w":[{"min-w":[Te,t,"min","max","fit"]}],"max-w":[{"max-w":[Te,t,"none","full","min","max","fit","prose",{screen:[Ko]},Ko]}],h:[{h:[Te,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ko,Go]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zc]}],"font-family":[{font:[vl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",Zi,zc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",uo,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",uo,Go]}],"underline-offset":[{"underline-offset":["auto",uo,Te]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),NH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",IH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},AH]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:V()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[uo,Te]}],"outline-w":[{outline:[uo,Go]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[uo,Go]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ko,DH]}],"shadow-color":[{shadow:[vl]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":z()}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ko,Te]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[gl,Te]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[uo,Go,zc]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const K=xH(LH);function Ui(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function ku(e){if(!Ui(e))return e;const t={};for(const n in e)t[n]=ku(e[n]);return t}function Z(e,t){if(Ui(t)&&Object.keys(t).length===0)return ku({...e,...t});const n={...e,...t};if(Ui(t)&&Ui(e))for(const r in t)Ui(t[r])&&r in e&&Ui(e[r])?n[r]=Z(e[r],t[r]):n[r]=Ui(t[r])?ku(t[r]):t[r];return n}const BH={root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"p-5 first:rounded-t-lg last:rounded-b-lg dark:bg-gray-900"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between p-5 text-left font-medium text-gray-500 first:rounded-t-lg last:rounded-b-lg dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"bg-transparent dark:bg-transparent"},heading:"",open:{off:"",on:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-white"}}},jH={base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",closeButton:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"h-5 w-5",color:{info:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",red:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",green:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",yellow:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",blue:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",pink:"bg-pink-100 text-pink-500 hover:bg-pink-200 focus:ring-pink-400 dark:bg-pink-200 dark:text-pink-600 dark:hover:bg-pink-300",lime:"bg-lime-100 text-lime-500 hover:bg-lime-200 focus:ring-lime-400 dark:bg-lime-200 dark:text-lime-600 dark:hover:bg-lime-300",dark:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-200 dark:text-gray-600 dark:hover:bg-gray-300",indigo:"bg-indigo-100 text-indigo-500 hover:bg-indigo-200 focus:ring-indigo-400 dark:bg-indigo-200 dark:text-indigo-600 dark:hover:bg-indigo-300",purple:"bg-purple-100 text-purple-500 hover:bg-purple-200 focus:ring-purple-400 dark:bg-purple-200 dark:text-purple-600 dark:hover:bg-purple-300",teal:"bg-teal-100 text-teal-500 hover:bg-teal-200 focus:ring-teal-400 dark:bg-teal-200 dark:text-teal-600 dark:hover:bg-teal-300",light:"bg-gray-50 text-gray-500 hover:bg-gray-100 focus:ring-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:hover:text-white"}},color:{info:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",gray:"border-gray-500 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",failure:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",success:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",warning:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",red:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",green:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",yellow:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",blue:"border-blue-500 bg-blue-100 text-blue-700 dark:bg-blue-200 dark:text-blue-800",cyan:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",pink:"border-pink-500 bg-pink-100 text-pink-700 dark:bg-pink-200 dark:text-pink-800",lime:"border-lime-500 bg-lime-100 text-lime-700 dark:bg-lime-200 dark:text-lime-800",dark:"border-gray-600 bg-gray-800 text-gray-200 dark:bg-gray-900 dark:text-gray-300",indigo:"border-indigo-500 bg-indigo-100 text-indigo-700 dark:bg-indigo-200 dark:text-indigo-800",purple:"border-purple-500 bg-purple-100 text-purple-700 dark:bg-purple-200 dark:text-purple-800",teal:"border-teal-500 bg-teal-100 text-teal-700 dark:bg-teal-200 dark:text-teal-800",light:"border-gray-400 bg-gray-50 text-gray-600 dark:bg-gray-500 dark:text-gray-200"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg",wrapper:"flex items-center"},zH={root:{base:"flex items-center justify-center space-x-4 rounded",bordered:"p-1 ring-2",rounded:"rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-cyan-400 dark:ring-cyan-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},img:{base:"rounded",off:"relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"",placeholder:"absolute -bottom-1 h-auto w-auto text-gray-400"},size:{xs:"h-6 w-6",sm:"h-8 w-8",md:"h-10 w-10",lg:"h-20 w-20",xl:"h-36 w-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-bottom-1","bottom-right":"-bottom-1 -right-1","top-left":"-left-1 -top-1","top-center":"-top-1","top-right":"-right-1 -top-1","center-right":"-right-1",center:"","center-left":"-left-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"relative inline-flex items-center justify-center overflow-hidden bg-gray-100 dark:bg-gray-600"}},group:{base:"flex -space-x-4"},groupCounter:{base:"relative flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xs font-medium text-white ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},VH={root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-800 dark:group-hover:bg-cyan-300",gray:"bg-gray-100 text-gray-800 group-hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 group-hover:bg-indigo-200 dark:bg-indigo-200 dark:text-indigo-900 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 group-hover:bg-purple-200 dark:bg-purple-200 dark:text-purple-900 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 group-hover:bg-pink-200 dark:bg-pink-200 dark:text-pink-900 dark:group-hover:bg-pink-300",blue:"bg-blue-100 text-blue-800 group-hover:bg-blue-200 dark:bg-blue-200 dark:text-blue-900 dark:group-hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-900 dark:group-hover:bg-cyan-300",dark:"bg-gray-600 text-gray-100 group-hover:bg-gray-500 dark:bg-gray-900 dark:text-gray-200 dark:group-hover:bg-gray-700",light:"bg-gray-200 text-gray-800 group-hover:bg-gray-300 dark:bg-gray-400 dark:text-gray-900 dark:group-hover:bg-gray-500",green:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",lime:"bg-lime-100 text-lime-800 group-hover:bg-lime-200 dark:bg-lime-200 dark:text-lime-900 dark:group-hover:bg-lime-300",red:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",teal:"bg-teal-100 text-teal-800 group-hover:bg-teal-200 dark:bg-teal-200 dark:text-teal-900 dark:group-hover:bg-teal-300",yellow:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"h-3 w-3",sm:"h-3.5 w-3.5"}}},WH={root:{base:"text-xl font-semibold italic text-gray-900 dark:text-white"}},$H={root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-4 w-4 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},UH={base:"group relative flex items-stretch justify-center p-0.5 text-center font-medium transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow] focus:z-10 focus:outline-none",fullSized:"w-full",color:{dark:"border border-transparent bg-gray-800 text-white focus:ring-4 focus:ring-gray-300 enabled:hover:bg-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:focus:ring-gray-800 dark:enabled:hover:bg-gray-700",failure:"border border-transparent bg-red-700 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-800 dark:bg-red-600 dark:focus:ring-red-900 dark:enabled:hover:bg-red-700",gray:":ring-cyan-700 border border-gray-200 bg-white text-gray-900 focus:text-cyan-700 focus:ring-4 enabled:hover:bg-gray-100 enabled:hover:text-cyan-700 dark:border-gray-600 dark:bg-transparent dark:text-gray-400 dark:enabled:hover:bg-gray-700 dark:enabled:hover:text-white",info:"border border-transparent bg-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-800 dark:bg-cyan-600 dark:focus:ring-cyan-800 dark:enabled:hover:bg-cyan-700",light:"border border-gray-300 bg-white text-gray-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-600 dark:text-white dark:focus:ring-gray-700 dark:enabled:hover:border-gray-700 dark:enabled:hover:bg-gray-700",purple:"border border-transparent bg-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-purple-800 dark:bg-purple-600 dark:focus:ring-purple-900 dark:enabled:hover:bg-purple-700",success:"border border-transparent bg-green-700 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-800 dark:bg-green-600 dark:focus:ring-green-800 dark:enabled:hover:bg-green-700",warning:"border border-transparent bg-yellow-400 text-white focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-500 dark:focus:ring-yellow-900",blue:"border border-transparent bg-blue-700 text-white focus:ring-4 focus:ring-blue-300 enabled:hover:bg-blue-800 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",cyan:"border border-cyan-300 bg-white text-cyan-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-100 dark:border-cyan-600 dark:bg-cyan-600 dark:text-white dark:focus:ring-cyan-700 dark:enabled:hover:border-cyan-700 dark:enabled:hover:bg-cyan-700",green:"border border-green-300 bg-white text-green-900 focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-100 dark:border-green-600 dark:bg-green-600 dark:text-white dark:focus:ring-green-700 dark:enabled:hover:border-green-700 dark:enabled:hover:bg-green-700",indigo:"border border-indigo-300 bg-white text-indigo-900 focus:ring-4 focus:ring-indigo-300 enabled:hover:bg-indigo-100 dark:border-indigo-600 dark:bg-indigo-600 dark:text-white dark:focus:ring-indigo-700 dark:enabled:hover:border-indigo-700 dark:enabled:hover:bg-indigo-700",lime:"border border-lime-300 bg-white text-lime-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-lime-100 dark:border-lime-600 dark:bg-lime-600 dark:text-white dark:focus:ring-lime-700 dark:enabled:hover:border-lime-700 dark:enabled:hover:bg-lime-700",pink:"border border-pink-300 bg-white text-pink-900 focus:ring-4 focus:ring-pink-300 enabled:hover:bg-pink-100 dark:border-pink-600 dark:bg-pink-600 dark:text-white dark:focus:ring-pink-700 dark:enabled:hover:border-pink-700 dark:enabled:hover:bg-pink-700",red:"border border-red-300 bg-white text-red-900 focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-100 dark:border-red-600 dark:bg-red-600 dark:text-white dark:focus:ring-red-700 dark:enabled:hover:border-red-700 dark:enabled:hover:bg-red-700",teal:"border border-teal-300 bg-white text-teal-900 focus:ring-4 focus:ring-teal-300 enabled:hover:bg-teal-100 dark:border-teal-600 dark:bg-teal-600 dark:text-white dark:focus:ring-teal-700 dark:enabled:hover:border-teal-700 dark:enabled:hover:bg-teal-700",yellow:"border border-yellow-300 bg-white text-yellow-900 focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-100 dark:border-yellow-600 dark:bg-yellow-600 dark:text-white dark:focus:ring-yellow-700 dark:enabled:hover:border-yellow-700 dark:enabled:hover:bg-yellow-700"},disabled:"cursor-not-allowed opacity-50",isProcessing:"cursor-wait",spinnerSlot:"absolute top-0 flex h-full items-center",spinnerLeftPosition:{xs:"left-2",sm:"left-3",md:"left-4",lg:"left-5",xl:"left-6"},gradient:{cyan:"bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",failure:"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-gradient-to-br dark:focus:ring-red-800",info:"bg-gradient-to-r from-cyan-500 via-cyan-600 to-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800 ",lime:"bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 text-gray-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-gradient-to-br dark:focus:ring-lime-800",pink:"bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 text-white focus:ring-4 focus:ring-pink-300 enabled:hover:bg-gradient-to-br dark:focus:ring-pink-800",purple:"bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-gradient-to-br dark:focus:ring-purple-800",success:"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-gradient-to-br dark:focus:ring-green-800",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 text-white focus:ring-4 focus:ring-teal-300 enabled:hover:bg-gradient-to-br dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"bg-gradient-to-r from-cyan-500 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",greenToBlue:"bg-gradient-to-br from-green-400 to-cyan-600 text-white focus:ring-4 focus:ring-green-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-green-800",pinkToOrange:"bg-gradient-to-br from-pink-500 to-orange-400 text-white focus:ring-4 focus:ring-pink-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-pink-800",purpleToBlue:"bg-gradient-to-br from-purple-600 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",purpleToPink:"bg-gradient-to-r from-purple-500 to-pink-500 text-white focus:ring-4 focus:ring-purple-200 enabled:hover:bg-gradient-to-l dark:focus:ring-purple-800",redToYellow:"bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 text-gray-900 focus:ring-4 focus:ring-red-100 enabled:hover:bg-gradient-to-bl dark:focus:ring-red-400",tealToLime:"bg-gradient-to-r from-teal-200 to-lime-200 text-gray-900 focus:ring-4 focus:ring-lime-200 enabled:hover:bg-gradient-to-l enabled:hover:from-teal-200 enabled:hover:to-lime-200 enabled:hover:text-gray-900 dark:focus:ring-teal-700"},inner:{base:"flex items-stretch transition-all duration-200",position:{none:"",start:"rounded-r-none",middle:"rounded-none",end:"rounded-l-none"},outline:"border border-transparent",isProcessingPadding:{xs:"pl-8",sm:"pl-10",md:"pl-12",lg:"pl-16",xl:"pl-20"}},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-cyan-200 text-xs font-semibold text-cyan-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"flex w-full justify-center bg-white text-gray-900 transition-all duration-75 ease-in group-enabled:group-hover:bg-opacity-0 group-enabled:group-hover:text-inherit dark:bg-gray-900 dark:text-white",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base",xl:"px-6 py-3 text-base"}},HH={base:"inline-flex",position:{none:"",start:"rounded-r-none focus:ring-2",middle:"rounded-none border-l-0 pl-0 focus:ring-2",end:"rounded-l-none border-l-0 pl-0 focus:ring-2"}},GH={root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},KH={root:{base:"relative h-full w-full",leftControl:"absolute left-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute right-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none"},indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute left-1/2 top-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:{off:"w-full flex-shrink-0 transform cursor-default snap-center",on:"w-full flex-shrink-0 transform cursor-grab snap-center"}},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},qH={root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700",color:{default:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-gray-800 dark:focus:ring-cyan-600",dark:"text-gray-800 focus:ring-gray-800 dark:ring-offset-gray-800 dark:focus:ring-gray-800",failure:"text-red-900 focus:ring-red-900 dark:ring-offset-red-900 dark:focus:ring-red-900",gray:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",info:"text-cyan-800 focus:ring-cyan-800 dark:ring-offset-gray-800 dark:focus:ring-cyan-800",light:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",purple:"text-purple-600 focus:ring-purple-600 dark:ring-offset-purple-600 dark:focus:ring-purple-600",success:"text-green-800 focus:ring-green-800 dark:ring-offset-green-800 dark:focus:ring-green-800",warning:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400",blue:"text-blue-700 focus:ring-blue-600 dark:ring-offset-blue-700 dark:focus:ring-blue-700",cyan:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-cyan-600 dark:focus:ring-cyan-600",green:"text-green-600 focus:ring-green-600 dark:ring-offset-green-600 dark:focus:ring-green-600",indigo:"text-indigo-700 focus:ring-indigo-700 dark:ring-offset-indigo-700 dark:focus:ring-indigo-700",lime:"text-lime-700 focus:ring-lime-700 dark:ring-offset-lime-700 dark:focus:ring-lime-700",pink:"text-pink-600 focus:ring-pink-600 dark:ring-offset-pink-600 dark:focus:ring-pink-600",red:"text-red-600 focus:ring-red-600 dark:ring-offset-red-600 dark:focus:ring-red-600",teal:"text-teal-600 focus:ring-teal-600 dark:ring-offset-teal-600 dark:focus:ring-teal-600",yellow:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400"}}},XH={root:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"}},YH={root:{base:"relative"},popup:{root:{base:"absolute top-10 z-50 block pt-2",inline:"relative top-0 z-auto",inner:"inline-block rounded-lg bg-white p-4 shadow-lg dark:bg-gray-700"},header:{base:"",title:"px-2 py-3 text-center font-semibold text-gray-900 dark:text-white",selectors:{base:"mb-2 flex justify-between",button:{base:"rounded-lg bg-white px-5 py-2.5 text-sm font-semibold text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",prev:"",next:"",view:""}}},view:{base:"p-1"},footer:{base:"mt-2 flex space-x-2",button:{base:"w-full rounded-lg px-5 py-2 text-center text-sm font-medium focus:ring-4 focus:ring-cyan-300",today:"bg-cyan-700 text-white hover:bg-cyan-800 dark:bg-cyan-600 dark:hover:bg-cyan-700",clear:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"}}},views:{days:{header:{base:"mb-1 grid grid-cols-7",title:"h-6 text-center text-sm font-medium leading-6 text-gray-500 dark:text-gray-400"},items:{base:"grid w-64 grid-cols-7",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600 ",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},months:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},years:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},decades:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9  text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}}}},QH={arrowIcon:"ml-2 h-4 w-4",content:"py-1 focus:outline-none",floating:{animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"z-10 w-fit divide-y divide-gray-100 rounded shadow focus:outline-none",content:"py-1 text-sm text-gray-700 dark:text-gray-200",divider:"my-1 h-px bg-gray-100 dark:bg-gray-600",header:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200",hidden:"invisible opacity-0",item:{container:"",base:"flex w-full cursor-pointer items-center justify-start px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:bg-gray-600 dark:focus:text-white",icon:"mr-2 h-4 w-4"},style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},target:"w-fit"},inlineWrapper:"flex items-center"},JH={root:{base:"flex"},field:{base:"relative w-full",input:{base:"block w-full overflow-hidden rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},ZH={input:{default:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"}},success:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"}},error:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"}}},label:{default:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-gray-500 transition-transform  duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"}},success:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500"}},error:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500"}}},helperText:{default:"mt-2 text-xs text-gray-600 dark:text-gray-400",success:"mt-2 text-xs text-green-600 dark:text-green-400",error:"mt-2 text-xs text-red-600 dark:text-red-400"}},eG={root:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800"},groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"me-4 last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"my-6 w-full border-gray-200 dark:border-gray-700 sm:mx-auto lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},tG={root:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-cyan-700 dark:text-cyan-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}}},nG={root:{base:"rounded-lg border border-gray-200 bg-gray-100 px-2 py-1.5 text-xs font-semibold text-gray-800 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-100",icon:"inline-block"}},rG={root:{base:"text-sm font-medium",disabled:"opacity-50",colors:{default:"text-gray-900 dark:text-white",info:"text-cyan-500 dark:text-cyan-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"}}},oG={root:{base:"list-inside space-y-1 text-gray-500 dark:text-gray-400",ordered:{off:"list-disc",on:"list-decimal"},horizontal:"flex list-none flex-wrap items-center justify-center space-x-4 space-y-0",unstyled:"list-none",nested:"mt-2 ps-5"},item:{withIcon:{off:"",on:"flex items-center"},icon:"me-2 h-3.5 w-3.5 flex-shrink-0"}},iG={root:{base:"list-none rounded-lg border border-gray-200 bg-white text-left text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},item:{base:"[&>*]:first:rounded-t-lg [&>*]:last:rounded-b-lg [&>*]:last:border-b-0",link:{base:"flex w-full items-center border-b border-gray-200 px-4 py-2 dark:border-gray-600",active:{off:"hover:bg-gray-100 hover:text-cyan-700 focus:text-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-cyan-700 text-white dark:bg-gray-800"},disabled:{off:"",on:"cursor-not-allowed bg-gray-100 text-gray-900 hover:bg-gray-100 hover:text-gray-900 focus:text-gray-900"},href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}}},aG={root:{base:"fixed inset-x-0 top-0 z-50 h-screen overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative flex max-h-[90dvh] flex-col rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"flex-1 overflow-auto p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t border-b p-5 dark:border-gray-600",popup:"border-b-0 p-2",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"}},sG={root:{base:"bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pl-3 pr-4 md:p-0",active:{on:"bg-cyan-700 text-white dark:text-white md:bg-transparent md:text-cyan-700",off:"border-b border-gray-100  text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-cyan-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},lG={base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",active:"bg-cyan-50 text-cyan-600 hover:bg-cyan-100 hover:text-cyan-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white",disabled:"cursor-not-allowed opacity-50"}}},uG={base:"absolute z-20 inline-block w-max max-w-[100vw] bg-white outline-none border border-gray-200 rounded-lg shadow-sm dark:border-gray-600 dark:bg-gray-800",content:"z-10 overflow-hidden rounded-[7px]",arrow:{base:"absolute h-2 w-2 z-0 rotate-45 mix-blend-lighten bg-white border border-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:mix-blend-color",placement:"-4px"}},cG={base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"space-x-2 rounded-full text-center font-medium leading-none text-cyan-300 dark:text-cyan-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500",cyan:"bg-cyan-600",gray:"bg-gray-500",lime:"bg-lime-600",pink:"bg-pink-500",teal:"bg-teal-600"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},dG={root:{base:"h-4 w-4 border border-gray-300 text-cyan-600 focus:ring-2 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-cyan-600 dark:focus:ring-cyan-600"}},fG={root:{base:"flex"},field:{base:"relative w-full",input:{base:"w-full cursor-pointer appearance-none rounded-lg bg-gray-200 dark:bg-gray-700",sizes:{sm:"h-1",md:"h-2",lg:"h-3"}}}},hG={root:{base:"flex items-center"},star:{empty:"text-gray-300 dark:text-gray-500",filled:"text-yellow-400",sizes:{sm:"h-5 w-5",md:"h-7 w-7",lg:"h-10 w-10"}}},pG={base:"flex items-center",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500"}},mG={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},gG={root:{base:"h-full",collapsed:{on:"w-16",off:"w-64"},inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-gray-50 px-3 py-4 dark:bg-gray-800"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:{base:"h-6 w-6 transition delay-0 ease-in-out",open:{on:"rotate-180",off:""}}},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg bg-gray-100 p-4 dark:bg-gray-700",color:{blue:"bg-cyan-50 dark:bg-cyan-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"flex-1 whitespace-nowrap px-3"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:"",listItem:""},items:{base:""},itemGroup:{base:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700"},logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},vG={base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-cyan-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-10 w-10"}},yG={root:{base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",shadow:"absolute left-0 top-0 -z-10 h-full w-full rounded-lg bg-white drop-shadow-md dark:bg-black",wrapper:"relative"},body:{base:"group/body",cell:{base:"px-6 py-4 group-first/body:group-first/row:first:rounded-tl-lg group-first/body:group-first/row:last:rounded-tr-lg group-last/body:group-last/row:first:rounded-bl-lg group-last/body:group-last/row:last:rounded-br-lg"}},head:{base:"group/head text-xs uppercase text-gray-700 dark:text-gray-400",cell:{base:"bg-gray-50 px-6 py-3 group-first/head:first:rounded-tl-lg group-first/head:last:rounded-tr-lg dark:bg-gray-700"}},row:{base:"group/row",hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"}},xG={base:"flex flex-col gap-2",tablist:{base:"flex text-center",styles:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"-mb-px flex-wrap border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap space-x-2 text-sm font-medium text-gray-500 dark:text-gray-400",fullWidth:"grid w-full grid-flow-col divide-x divide-gray-200 rounded-none text-sm font-medium shadow dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center rounded-t-lg p-4 text-sm font-medium first:ml-0 focus:outline-none focus:ring-4 focus:ring-cyan-300 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",styles:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-cyan-600 dark:bg-gray-800 dark:text-cyan-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800  dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"active rounded-t-lg border-b-2 border-cyan-600 text-cyan-600 dark:border-cyan-500 dark:text-cyan-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-cyan-600 text-white",off:"rounded-lg hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-0 flex w-full rounded-none first:ml-0",active:{on:"active rounded-none bg-gray-100 p-4 text-gray-900 dark:bg-gray-700 dark:text-white",off:"rounded-none bg-white hover:bg-gray-50 hover:text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white"}}},icon:"mr-2 h-5 w-5"}},tabitemcontainer:{base:"",styles:{default:"",underline:"",pills:"",fullWidth:""}},tabpanel:"py-3"},bG={base:"block w-full rounded-lg border text-sm disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},wG={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},kG={root:{direction:{horizontal:"sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"}},item:{root:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},content:{root:{base:"mt-3 sm:pr-8"},body:{base:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"},time:{base:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},title:{base:"text-lg font-semibold text-gray-900 dark:text-white"}},point:{horizontal:"flex items-center",line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex",marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{base:"h-3 w-3 text-cyan-600 dark:text-cyan-300",wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-cyan-200 ring-8 ring-white dark:bg-cyan-900 dark:ring-gray-900"}},vertical:""}}},CG={root:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out"},toggle:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},EG={root:{base:"group relative flex items-center rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"rounded-full border group-focus:ring-4 group-focus:ring-cyan-500/25",checked:{on:"after:translate-x-full after:border-white",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:"border-cyan-700 bg-cyan-700",dark:"bg-dark-700 border-dark-900",failure:"border-red-900 bg-red-700",gray:"border-gray-600 bg-gray-500",green:"border-green-700 bg-green-600",light:"bg-light-700 border-light-900",red:"border-red-900 bg-red-700",purple:"border-purple-900 bg-purple-700",success:"border-green-500 bg-green-500",yellow:"border-yellow-400 bg-yellow-400",warning:"border-yellow-600 bg-yellow-600",cyan:"border-cyan-500 bg-cyan-500",lime:"border-lime-400 bg-lime-400",indigo:"border-indigo-400 bg-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"border-cyan-600 bg-cyan-600",pink:"border-pink-600 bg-pink-600"}},sizes:{sm:"h-5 w-9 after:absolute after:left-[2px] after:top-[2px] after:h-4 after:w-4",md:"h-6 w-11 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5",lg:"h-7 w-14 after:absolute after:left-[4px] after:top-0.5 after:h-6 after:w-6"}}},SG={target:"w-fit",animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"absolute z-10 inline-block rounded-lg px-3 py-2 text-sm font-medium shadow-sm",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20"},RG={accordion:BH,alert:jH,avatar:zH,badge:VH,blockquote:WH,breadcrumb:$H,button:UH,buttonGroup:HH,card:GH,carousel:KH,checkbox:qH,datepicker:YH,darkThemeToggle:XH,dropdown:QH,fileInput:JH,floatingLabel:ZH,footer:eG,helperText:tG,kbd:nG,label:rG,listGroup:iG,list:oG,modal:aG,navbar:sG,pagination:lG,popover:uG,progress:cG,radio:dG,rangeSlider:fG,rating:hG,ratingAdvanced:pG,select:mG,textInput:wG,textarea:bG,toggleSwitch:EG,sidebar:gG,spinner:vG,table:yG,tabs:xG,timeline:kG,toast:CG,tooltip:SG},TG={theme:ku(RG)};function ye(){return ku(TG.theme)}const RI=C.createContext(void 0);function TI(){const e=C.useContext(RI);if(!e)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return e}const _I=({children:e,className:t,theme:n={},...r})=>{const{isOpen:o}=TI(),i=Z(ye().accordion.content,n);return w.jsx("div",{className:K(i.base,t),"data-testid":"flowbite-accordion-content",hidden:!o,...r,children:e})},II=({children:e,...t})=>{const{alwaysOpen:n}=t,[r,o]=C.useState(t.isOpen),i=n?{...t,isOpen:r,setOpen:()=>o(!r)}:t;return w.jsx(RI.Provider,{value:i,children:e})},NI=({as:e="h2",children:t,className:n,theme:r={},...o})=>{const{arrowIcon:i,flush:a,isOpen:s,setOpen:l}=TI(),u=()=>typeof l<"u"&&l(),c=Z(ye().accordion.title,r);return w.jsxs("button",{className:K(c.base,c.flush[a?"on":"off"],c.open[s?"on":"off"],n),onClick:u,type:"button",...o,children:[w.jsx(e,{className:c.heading,"data-testid":"flowbite-accordion-heading",children:t}),i&&w.jsx(i,{"aria-hidden":!0,className:K(c.arrow.base,c.arrow.open[s?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},PI=({alwaysOpen:e=!1,arrowIcon:t=yI,children:n,flush:r=!1,collapseAll:o=!1,className:i,theme:a={},...s})=>{const[l,u]=C.useState(o?-1:0),c=C.useMemo(()=>C.Children.map(n,(f,h)=>C.cloneElement(f,{alwaysOpen:e,arrowIcon:t,flush:r,isOpen:l===h,setOpen:()=>u(l===h?-1:h)})),[e,t,n,r,l]),d=Z(ye().accordion.root,a);return w.jsx("div",{className:K(d.base,d.flush[r?"on":"off"],i),"data-testid":"flowbite-accordion",...s,children:c})};PI.displayName="Accordion";II.displayName="Accordion.Panel";NI.displayName="Accordion.Title";_I.displayName="Accordion.Content";const Vc=Object.assign(PI,{Panel:II,Title:NI,Content:_I}),AI=({children:e,className:t,theme:n={},...r})=>{const o=Z(ye().avatar.group,n);return w.jsx("div",{"data-testid":"avatar-group-element",className:K(o.base,t),...r,children:e})};AI.displayName="Avatar.Group";const DI=({className:e,href:t,theme:n={},total:r,...o})=>{const i=Z(ye().avatar.groupCounter,n);return w.jsxs("a",{href:t,className:K(i.base,e),...o,children:["+",r]})};DI.displayName="Avatar.GroupCounter";const MI=({alt:e="",bordered:t=!1,children:n,className:r,color:o="light",img:i,placeholderInitials:a="",rounded:s=!1,size:l="md",stacked:u=!1,status:c,statusPosition:d="top-left",theme:f={},...h})=>{const p=Z(ye().avatar,f),m=K(p.root.img.base,t&&p.root.bordered,t&&p.root.color[o],s&&p.root.rounded,u&&p.root.stacked,p.root.img.on,p.root.size[l]),y={className:K(m,p.root.img.on),"data-testid":"flowbite-avatar-img"};return w.jsxs("div",{className:K(p.root.base,r),"data-testid":"flowbite-avatar",...h,children:[w.jsxs("div",{className:"relative",children:[i?typeof i=="string"?w.jsx("img",{alt:e,src:i,...y}):i({alt:e,...y}):a?w.jsx("div",{className:K(p.root.img.off,p.root.initials.base,u&&p.root.stacked,t&&p.root.bordered,t&&p.root.color[o],p.root.size[l],s&&p.root.rounded),"data-testid":"flowbite-avatar-initials-placeholder",children:w.jsx("span",{className:K(p.root.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:a})}):w.jsx("div",{className:K(m,p.root.img.off),"data-testid":"flowbite-avatar-img",children:w.jsx("svg",{className:p.root.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),c&&w.jsx("span",{"data-testid":"flowbite-avatar-status",className:K(p.root.status.base,p.root.status[c],p.root.statusPosition[d])})]}),n&&w.jsx("div",{children:n})]})};MI.displayName="Avatar";Object.assign(MI,{Group:AI,Counter:DI});const FI=({children:e,color:t="info",href:n,icon:r,size:o="xs",className:i,theme:a={},...s})=>{const l=Z(ye().badge,a),u=()=>w.jsxs("span",{className:K(l.root.base,l.root.color[t],l.root.size[o],l.icon[r?"on":"off"],i),"data-testid":"flowbite-badge",...s,children:[r&&w.jsx(r,{"aria-hidden":!0,className:l.icon.size[o],"data-testid":"flowbite-badge-icon"}),e&&w.jsx("span",{children:e})]});return n?w.jsx("a",{className:l.root.href,href:n,children:w.jsx(u,{})}):w.jsx(u,{})};FI.displayName="Badge";const OI=({className:e,color:t="info",light:n,size:r="md",theme:o={},...i})=>{const a=Z(ye().spinner,o);return w.jsx("span",{role:"status",...i,children:w.jsxs("svg",{fill:"none",viewBox:"0 0 100 101",className:K(a.base,a.color[t],a.light[n?"on":"off"].base,a.light[n?"on":"off"].color[t],a.size[r],e),children:[w.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),w.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})};OI.displayName="Spinner";const ix=C.forwardRef(({children:e,as:t,href:n,type:r="button",...o},i)=>{const a=t||(n?"a":"button");return C.createElement(a,{ref:i,href:n,type:r,...o},e)});ix.displayName="ButtonBaseComponent";const LI=(e,t,n)=>C.Children.map(e,(r,o)=>C.isValidElement(r)?r.props.children?C.cloneElement(r,{...r.props,children:LI(r.props.children,t,n),positionInGroup:_2(o,C.Children.count(e))}):C.cloneElement(r,{outline:t,pill:n,positionInGroup:_2(o,C.Children.count(e))}):r),_2=(e,t)=>e===0?"start":e===t-1?"end":"middle",BI=({children:e,className:t,outline:n,pill:r,theme:o={},...i})=>{const a=C.useMemo(()=>LI(e,n,r),[e,n,r]),s=Z(ye().buttonGroup,o);return w.jsx("div",{className:K(s.base,t),role:"group",...i,children:a})};BI.displayName="Button.Group";const jI=C.forwardRef(({children:e,className:t,color:n="info",disabled:r,fullSized:o,isProcessing:i=!1,processingLabel:a="Loading...",processingSpinner:s,gradientDuoTone:l,gradientMonochrome:u,label:c,outline:d=!1,pill:f=!1,positionInGroup:h="none",size:p="md",theme:m={},...y},g)=>{const{buttonGroup:v,button:x}=ye(),b=Z(x,m),k=y;return w.jsx(ix,{ref:g,disabled:r,className:K(b.base,r&&b.disabled,!l&&!u&&b.color[n],l&&!u&&b.gradientDuoTone[l],!l&&u&&b.gradient[u],d&&(b.outline.color[n]??b.outline.color.default),b.pill[f?"on":"off"],o&&b.fullSized,v.position[h],t),...k,children:w.jsx("span",{className:K(b.inner.base,b.outline[d?"on":"off"],b.outline.pill[d&&f?"on":"off"],b.size[p],d&&!b.outline.color[n]&&b.inner.outline,i&&b.isProcessing,i&&b.inner.isProcessingPadding[p],b.inner.position[h]),children:w.jsxs(w.Fragment,{children:[i&&w.jsx("span",{className:K(b.spinnerSlot,b.spinnerLeftPosition[p]),children:s||w.jsx(OI,{size:p})}),typeof e<"u"?e:w.jsx("span",{"data-testid":"flowbite-button-label",className:K(b.label),children:i?a:c})]})})})});jI.displayName="Button";const zI=Object.assign(jI,{Group:BI}),VI=({children:e,...t})=>{const n=r=>{const i=r.target.closest('[role="banner"]');i==null||i.remove()};return w.jsx(zI,{onClick:n,...t,children:e})};VI.displayName="Banner.CollapseButton";const WI=({children:e,...t})=>w.jsx("div",{"data-testid":"flowbite-banner",role:"banner",tabIndex:-1,...t,children:e});WI.displayName="Banner";Object.assign(WI,{CollapseButton:VI});const $I=C.forwardRef(({children:e,className:t,href:n,icon:r,theme:o={},...i},a)=>{const s=typeof n<"u",l=s?"a":"span",u=Z(ye().breadcrumb.item,o);return w.jsxs("li",{className:K(u.base,t),...i,children:[w.jsx(rx,{"aria-hidden":!0,className:u.chevron,"data-testid":"flowbite-breadcrumb-separator"}),w.jsxs(l,{ref:a,className:u.href[s?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:n,children:[r&&w.jsx(r,{"aria-hidden":!0,className:u.icon}),e]})]})});$I.displayName="Breadcrumb.Item";const UI=({children:e,className:t,theme:n={},...r})=>{const o=Z(ye().breadcrumb.root,n);return w.jsx("nav",{"aria-label":"Breadcrumb",className:K(o.base,t),...r,children:w.jsx("ol",{className:o.list,children:e})})};UI.displayName="Breadcrumb";Object.assign(UI,{Item:$I});var HI={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(i=o(i,r(s)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var a="";for(var s in i)t.call(i,s)&&i[s]&&(a=o(a,s));return a}function o(i,a){return a?i?i+" "+a:i+a:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(HI);var _G=HI.exports;const IG=Nf(_G);var ax={exports:{}};function GI(e,t=100,n={}){if(typeof e!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");const{immediate:r}=typeof n=="boolean"?{immediate:n}:n;let o,i,a,s,l;function u(){const d=Date.now()-s;if(d<t&&d>=0)a=setTimeout(u,t-d);else if(a=void 0,!r){const f=o,h=i;o=void 0,i=void 0,l=e.apply(f,h)}}const c=function(...d){if(o&&this!==o)throw new Error("Debounced method called with different contexts.");o=this,i=d,s=Date.now();const f=r&&!a;if(a||(a=setTimeout(u,t)),f){const h=o,p=i;o=void 0,i=void 0,l=e.apply(h,p)}return l};return c.clear=()=>{a&&(clearTimeout(a),a=void 0)},c.flush=()=>{if(!a)return;const d=o,f=i;o=void 0,i=void 0,l=e.apply(d,f),clearTimeout(a),a=void 0},c}ax.exports.debounce=GI;ax.exports=GI;var NG=ax.exports;const PG=Nf(NG),AG=300,DG=0;class KI extends C.PureComponent{constructor(n){super(n);pt(this,"container");pt(this,"scrolling");pt(this,"started");pt(this,"pressed");pt(this,"isMobile",!1);pt(this,"internal");pt(this,"scrollLeft");pt(this,"scrollTop");pt(this,"clientX");pt(this,"clientY");pt(this,"onEndScroll",()=>{this.scrolling=!1,!this.pressed&&this.started&&this.processEnd()});pt(this,"onScroll",()=>{const n=this.container.current;(n.scrollLeft!==this.scrollLeft||n.scrollTop!==this.scrollTop)&&(this.scrolling=!0,this.processScroll(),this.onEndScroll())});pt(this,"onTouchStart",n=>{const{nativeMobileScroll:r}=this.props;if(this.isDraggable(n.target))if(this.internal=!0,r&&this.scrolling)this.pressed=!0;else{const o=n.touches[0];this.processClick(o.clientX,o.clientY),!r&&this.props.stopPropagation&&n.stopPropagation()}});pt(this,"onTouchEnd",()=>{const{nativeMobileScroll:n}=this.props;this.pressed&&(this.started&&(!this.scrolling||!n)?this.processEnd():this.pressed=!1,this.forceUpdate())});pt(this,"onTouchMove",n=>{const{nativeMobileScroll:r}=this.props;if(this.pressed&&(!r||!this.isMobile)){const o=n.touches[0];o&&this.processMove(o.clientX,o.clientY),n.preventDefault(),this.props.stopPropagation&&n.stopPropagation()}});pt(this,"onMouseDown",n=>{var r,o;this.isDraggable(n.target)&&this.isScrollable()&&(this.internal=!0,((o=(r=this.props)==null?void 0:r.buttons)==null?void 0:o.indexOf(n.button))!==-1&&(this.processClick(n.clientX,n.clientY),n.preventDefault(),this.props.stopPropagation&&n.stopPropagation()))});pt(this,"onMouseMove",n=>{this.pressed&&(this.processMove(n.clientX,n.clientY),n.preventDefault(),this.props.stopPropagation&&n.stopPropagation())});pt(this,"onMouseUp",n=>{this.pressed&&(this.started?this.processEnd():(this.internal=!1,this.pressed=!1,this.forceUpdate(),this.props.onClick&&this.props.onClick(n)),n.preventDefault(),this.props.stopPropagation&&n.stopPropagation())});this.container=$r.createRef(),this.onEndScroll=PG(this.onEndScroll,AG),this.scrolling=!1,this.started=!1,this.pressed=!1,this.internal=!1,this.getRef=this.getRef.bind(this)}componentDidMount(){const{nativeMobileScroll:n}=this.props,r=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),r.addEventListener("touchstart",this.onTouchStart,{passive:!1}),r.addEventListener("mousedown",this.onMouseDown,{passive:!1}),n&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())}componentWillUnmount(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)}getElement(){return this.container.current}isMobileDevice(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1}isDraggable(n){const r=this.props.ignoreElements;if(r){const o=n.closest(r);return o===null||o.contains(this.getElement())}else return!0}isScrollable(){const n=this.container.current;return n&&(n.scrollWidth>n.clientWidth||n.scrollHeight>n.clientHeight)}processClick(n,r){const o=this.container.current;this.scrollLeft=o==null?void 0:o.scrollLeft,this.scrollTop=o==null?void 0:o.scrollTop,this.clientX=n,this.clientY=r,this.pressed=!0}processStart(n=!0){const{onStartScroll:r}=this.props;this.started=!0,n&&document.body.classList.add("cursor-grab"),r&&r({external:!this.internal}),this.forceUpdate()}processScroll(){if(this.started){const{onScroll:n}=this.props;n&&n({external:!this.internal})}else this.processStart(!1)}processMove(n,r){const{horizontal:o,vertical:i,activationDistance:a,onScroll:s}=this.props,l=this.container.current;this.started?(o&&(l.scrollLeft-=n-this.clientX),i&&(l.scrollTop-=r-this.clientY),s&&s({external:!this.internal}),this.clientX=n,this.clientY=r,this.scrollLeft=l.scrollLeft,this.scrollTop=l.scrollTop):(o&&Math.abs(n-this.clientX)>a||i&&Math.abs(r-this.clientY)>a)&&(this.clientX=n,this.clientY=r,this.processStart())}processEnd(){const{onEndScroll:n}=this.props;this.container.current&&n&&n({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("cursor-grab"),this.forceUpdate()}getRef(n){[this.container,this.props.innerRef].forEach(r=>{r&&(typeof r=="function"?r(n):r.current=n)})}render(){const{children:n,draggingClassName:r,className:o,style:i,hideScrollbars:a}=this.props;return w.jsx("div",{className:IG(o,this.pressed&&r,{"!scroll-auto [&>*]:pointer-events-none [&>*]:cursor-grab":this.pressed,"overflow-auto":this.isMobile,"overflow-hidden !overflow-x-hidden [overflow:-moz-scrollbars-none] [scrollbar-width:none]":a,"[&::-webkit-scrollbar]:[-webkit-appearance:none !important] [&::-webkit-scrollbar]:!hidden [&::-webkit-scrollbar]:!h-0 [&::-webkit-scrollbar]:!w-0 [&::-webkit-scrollbar]:!bg-transparent":a}),style:i,ref:this.getRef,onScroll:this.onScroll,children:n})}}pt(KI,"defaultProps",{nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},buttons:[DG]});const MG=()=>typeof window<"u",qI=({children:e,indicators:t=!0,leftControl:n,rightControl:r,slide:o=!0,draggable:i=!0,slideInterval:a,className:s,theme:l={},onSlideChange:u=null,pauseOnHover:c=!1,...d})=>{const f=Z(ye().carousel,l),h=MG()&&navigator.userAgent.indexOf("IEMobile")!==-1,p=C.useRef(null),[m,y]=C.useState(0),[g,v]=C.useState(!1),[x,b]=C.useState(!1),k=C.useRef(!1),E=C.useMemo(()=>C.Children.map(e,A=>C.cloneElement(A,{className:K(f.item.base,A.props.className)})),[e,f.item.base]),T=C.useCallback(A=>()=>{E&&(A=(A+E.length)%E.length,p.current&&(p.current.scrollLeft=p.current.clientWidth*A),y(A))},[E]);C.useEffect(()=>{p.current&&!g&&p.current.scrollLeft!==0&&y(Math.round(p.current.scrollLeft/p.current.clientWidth))},[g]),C.useEffect(()=>{if(o&&!(c&&x)){const A=setInterval(()=>!g&&T(m+1)(),a??3e3);return()=>clearInterval(A)}},[m,g,T,o,a,c,x]),C.useEffect(()=>{k.current?u&&u(m):k.current=!0},[u,m]);const R=A=>()=>v(A),_=C.useCallback(()=>b(!0),[b]),S=C.useCallback(()=>b(!1),[b]);return w.jsxs("div",{className:K(f.root.base,s),"data-testid":"carousel",onMouseEnter:_,onMouseLeave:S,onTouchStart:_,onTouchEnd:S,...d,children:[w.jsx(KI,{className:K(f.scrollContainer.base,(h||!g)&&f.scrollContainer.snap),draggingClassName:"cursor-grab",innerRef:p,onEndScroll:R(!1),onStartScroll:R(i),vertical:!1,horizontal:i,children:E==null?void 0:E.map((A,N)=>w.jsx("div",{className:f.item.wrapper[i?"on":"off"],"data-active":m===N,"data-testid":"carousel-item",children:A},N))}),t&&w.jsx("div",{className:f.indicators.wrapper,children:E==null?void 0:E.map((A,N)=>w.jsx("button",{className:K(f.indicators.base,f.indicators.active[N===m?"on":"off"]),onClick:T(N),"data-testid":"carousel-indicator","aria-label":`Slide ${N+1}`},N))}),E&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:f.root.leftControl,children:w.jsx("button",{className:"group","data-testid":"carousel-left-control",onClick:T(m-1),type:"button","aria-label":"Previous slide",children:n||w.jsx(FG,{theme:l})})}),w.jsx("div",{className:f.root.rightControl,children:w.jsx("button",{className:"group","data-testid":"carousel-right-control",onClick:T(m+1),type:"button","aria-label":"Next slide",children:r||w.jsx(OG,{theme:l})})})]})]})},FG=({theme:e={}})=>{const t=Z(ye().carousel,e);return w.jsx("span",{className:t.control.base,children:w.jsx(bI,{className:t.control.icon})})},OG=({theme:e={}})=>{const t=Z(ye().carousel,e);return w.jsx("span",{className:t.control.base,children:w.jsx(rx,{className:t.control.icon})})};qI.displayName="Carousel";const LG=C.forwardRef(({className:e,color:t="default",theme:n={},...r},o)=>{const i=Z(ye().checkbox,n);return w.jsx("input",{ref:o,type:"checkbox",className:K(i.root.base,i.root.color[t],e),...r})});LG.displayName="Checkbox";const Qu=({children:e,className:t,color:n="default",theme:r={},value:o,...i})=>{const a=Z(ye().helperText,r);return w.jsx("p",{className:K(a.root.base,a.root.colors[n],t),...i,children:o??e??""})};Qu.displayName="HelperText";const XI=C.forwardRef(({addon:e,className:t,color:n="gray",helperText:r,icon:o,rightIcon:i,shadow:a,sizing:s="md",theme:l={},type:u="text",...c},d)=>{const f=Z(ye().textInput,l);return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:K(f.base,t),children:[e&&w.jsx("span",{className:f.addon,children:e}),w.jsxs("div",{className:f.field.base,children:[o&&w.jsx("div",{className:f.field.icon.base,children:w.jsx(o,{className:f.field.icon.svg})}),i&&w.jsx("div",{"data-testid":"right-icon",className:f.field.rightIcon.base,children:w.jsx(i,{className:f.field.rightIcon.svg})}),w.jsx("input",{className:K(f.field.input.base,f.field.input.colors[n],f.field.input.sizes[s],f.field.input.withIcon[o?"on":"off"],f.field.input.withRightIcon[i?"on":"off"],f.field.input.withAddon[e?"on":"off"],f.field.input.withShadow[a?"on":"off"]),type:u,...c,ref:d})]})]}),r&&w.jsx(Qu,{color:n,children:r})]})});XI.displayName="TextInput";const YI=C.createContext(void 0);function kh(){const e=C.useContext(YI);if(!e)throw new Error("useDatePickerContext should be used within the DatePickerContext provider!");return e}var Je;(function(e){e[e.Days=0]="Days",e[e.Months=1]="Months",e[e.Years=2]="Years",e[e.Decades=3]="Decades"})(Je||(Je={}));var nv;(function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday"})(nv||(nv={}));const Ju=(e,t,n)=>{const r=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();if(t&&n){const o=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime();return r>=o&&r<=i}if(t){const o=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return r>=o}if(n){const o=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime();return r<=o}return!0},Ch=(e,t)=>(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e.getTime()===t.getTime()),BG=(e,t,n)=>(Ju(e,t,n)||(t&&e<t?e=t:n&&e>n&&(e=n)),e),jG=(e,t)=>{const n=new Date(e.getFullYear(),e.getMonth(),1);let o=n.getDay()-t;return o<0&&(o+=7),sx(n,-o)},zG=(e,t)=>{const n=[],r=new Date(0);r.setDate(r.getDate()-r.getDay()+t);const o=new Intl.DateTimeFormat(e,{weekday:"short"});for(let i=0;i<7;i++)n.push(o.format(sx(r,i)));return n},sx=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},VG=(e,t)=>{const n=new Date(e);return n.setMonth(n.getMonth()+t),n},os=(e,t)=>{const n=new Date(e);return n.setFullYear(n.getFullYear()+t),n},Vl=(e,t,n)=>{let r={day:"numeric",month:"long",year:"numeric"};return n&&(r=n),new Intl.DateTimeFormat(e,r).format(t)},is=(e,t)=>{const n=e.getFullYear();return Math.floor(n/t)*t},WG=(e,t)=>{const n=e.getFullYear(),r=t+9;return n>=t&&n<=r},$G=({theme:e={}})=>{const{theme:t,weekStart:n,minDate:r,maxDate:o,viewDate:i,selectedDate:a,changeSelectedDate:s,language:l}=kh(),u=Z(t.views.days,e),c=zG(l,n),d=jG(i,n);return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:u.header.base,children:c.map((f,h)=>w.jsx("span",{className:u.header.title,children:f},h))}),w.jsx("div",{className:u.items.base,children:[...Array(42)].map((f,h)=>{const p=sx(d,h),m=Vl(l,p,{day:"numeric"}),y=Ch(a,p),g=!Ju(p,r,o);return w.jsx("button",{disabled:g,type:"button",className:K(u.items.item.base,y&&u.items.item.selected,g&&u.items.item.disabled),onClick:()=>{g||s(p,!0)},children:m},h)})})]})},UG=({theme:e={}})=>{const{theme:t,selectedDate:n,viewDate:r,setViewDate:o,setView:i}=kh(),a=Z(t.views.decades,e);return w.jsx("div",{className:a.items.base,children:[...Array(12)].map((s,l)=>{const c=is(r,100)-10+l*10,d=new Date(c,0,1),f=os(d,9),h=WG(r,c),p=!Ju(r,d,f);return w.jsx("button",{disabled:p,type:"button",className:K(a.items.item.base,h&&a.items.item.selected,p&&a.items.item.disabled),onClick:()=>{p||(o(os(r,c-n.getFullYear())),i(Je.Years))},children:c},l)})})},HG=({theme:e={}})=>{const{theme:t,minDate:n,maxDate:r,selectedDate:o,viewDate:i,language:a,setViewDate:s,setView:l}=kh(),u=Z(t.views.months,e);return w.jsx("div",{className:u.items.base,children:[...Array(12)].map((c,d)=>{const f=new Date(i.getTime());f.setMonth(d);const h=Vl(a,f,{month:"short"}),p=Ch(o,f),m=!Ju(f,n,r);return w.jsx("button",{disabled:m,type:"button",className:K(u.items.item.base,p&&u.items.item.selected,m&&u.items.item.disabled),onClick:()=>{m||(s(f),l(Je.Days))},children:h},d)})})},GG=({theme:e={}})=>{const{theme:t,selectedDate:n,minDate:r,maxDate:o,viewDate:i,setViewDate:a,setView:s}=kh(),l=Z(t.views.years,e);return w.jsx("div",{className:l.items.base,children:[...Array(12)].map((u,c)=>{const f=is(i,10)-1+c*1,h=new Date(i.getTime());h.setFullYear(f);const p=Ch(n,h),m=!Ju(h,r,o);return w.jsx("button",{disabled:m,type:"button",className:K(l.items.item.base,p&&l.items.item.selected,m&&l.items.item.disabled),onClick:()=>{m||(a(h),s(Je.Months))},children:f},c)})})},KG=({title:e,open:t,inline:n=!1,autoHide:r=!0,showClearButton:o=!0,labelClearButton:i="Clear",showTodayButton:a=!0,labelTodayButton:s="Today",defaultDate:l=new Date,minDate:u,maxDate:c,language:d="en",weekStart:f=nv.Sunday,className:h,theme:p={},onSelectedDateChanged:m,...y},g)=>{const v=Z(ye().datepicker,p);l=BG(l,u,c);const[x,b]=C.useState(t),[k,E]=C.useState(Je.Days),[T,R]=C.useState(l),[_,S]=C.useState(l),A=C.useRef(null),N=C.useRef(null),O=(B,L)=>{R(B),m&&m(B),r&&k===Je.Days&&L==!0&&!n&&b(!1)},M=()=>{O(l,!0),l&&S(l)};C.useImperativeHandle(g,()=>({focus(){var B;(B=A.current)==null||B.focus()},clear(){M()}}));const F=B=>{switch(B){case Je.Decades:return w.jsx(UG,{theme:v.views.decades});case Je.Years:return w.jsx(GG,{theme:v.views.years});case Je.Months:return w.jsx(HG,{theme:v.views.months});case Je.Days:default:return w.jsx($G,{theme:v.views.days})}},V=()=>{switch(k){case Je.Days:return Je.Months;case Je.Months:return Je.Years;case Je.Years:return Je.Decades}return k},z=()=>{switch(k){case Je.Decades:return`${is(_,100)} - ${is(_,100)+90}`;case Je.Years:return`${is(_,10)} - ${is(_,10)+9}`;case Je.Months:return Vl(d,_,{year:"numeric"});case Je.Days:default:return Vl(d,_,{month:"long",year:"numeric"})}},P=(B,L,$)=>{switch(B){case Je.Days:return new Date(VG(L,$));case Je.Months:return new Date(os(L,$));case Je.Years:return new Date(os(L,$*10));case Je.Decades:return new Date(os(L,$*100));default:return new Date(os(L,$*10))}};return C.useEffect(()=>{const B=L=>{var Q,ee;const $=(Q=N==null?void 0:N.current)==null?void 0:Q.contains(L.target),q=(ee=A==null?void 0:A.current)==null?void 0:ee.contains(L.target);!$&&!q&&b(!1)};return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[A,N,b]),w.jsx(YI.Provider,{value:{theme:v,language:d,minDate:u,maxDate:c,weekStart:f,isOpen:x,setIsOpen:b,view:k,setView:E,viewDate:_,setViewDate:S,selectedDate:T,setSelectedDate:R,changeSelectedDate:O},children:w.jsxs("div",{className:K(v.root.base,h),children:[!n&&w.jsx(XI,{theme:v.root.input,icon:eH,ref:A,onFocus:()=>{Ch(_,T)||S(T),b(!0)},value:T&&Vl(d,T),readOnly:!0,...y}),(x||n)&&w.jsx("div",{ref:N,className:K(v.popup.root.base,n&&v.popup.root.inline),children:w.jsxs("div",{className:v.popup.root.inner,children:[w.jsxs("div",{className:v.popup.header.base,children:[e&&w.jsx("div",{className:v.popup.header.title,children:e}),w.jsxs("div",{className:v.popup.header.selectors.base,children:[w.jsx("button",{type:"button",className:K(v.popup.header.selectors.button.base,v.popup.header.selectors.button.prev),onClick:()=>S(P(k,_,-1)),children:w.jsx(J9,{})}),w.jsx("button",{type:"button",className:K(v.popup.header.selectors.button.base,v.popup.header.selectors.button.view),onClick:()=>E(V()),children:z()}),w.jsx("button",{type:"button",className:K(v.popup.header.selectors.button.base,v.popup.header.selectors.button.next),onClick:()=>S(P(k,_,1)),children:w.jsx(Z9,{})})]})]}),w.jsx("div",{className:v.popup.view.base,children:F(k)}),(o||a)&&w.jsxs("div",{className:v.popup.footer.base,children:[a&&w.jsx("button",{type:"button",className:K(v.popup.footer.button.base,v.popup.footer.button.today),onClick:()=>{const B=new Date;O(B,!0),S(B)},children:s}),o&&w.jsx("button",{type:"button",className:K(v.popup.footer.button.base,v.popup.footer.button.clear),onClick:()=>{O(l,!0),l&&S(l)},children:i})]})]})})]})})},qG=C.forwardRef(KG);qG.displayName="Datepicker";function Eh(){return typeof window<"u"}function Ia(e){return QI(e)?(e.nodeName||"").toLowerCase():"#document"}function Dn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function so(e){var t;return(t=(QI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function QI(e){return Eh()?e instanceof Node||e instanceof Dn(e).Node:!1}function $e(e){return Eh()?e instanceof Element||e instanceof Dn(e).Element:!1}function Qt(e){return Eh()?e instanceof HTMLElement||e instanceof Dn(e).HTMLElement:!1}function rv(e){return!Eh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Dn(e).ShadowRoot}function Zu(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=mr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function XG(e){return["table","td","th"].includes(Ia(e))}function Sh(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function lx(e){const t=ux(),n=$e(e)?mr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function YG(e){let t=Do(e);for(;Qt(t)&&!Ri(t);){if(lx(t))return t;if(Sh(t))return null;t=Do(t)}return null}function ux(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ri(e){return["html","body","#document"].includes(Ia(e))}function mr(e){return Dn(e).getComputedStyle(e)}function Rh(e){return $e(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Do(e){if(Ia(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rv(e)&&e.host||so(e);return rv(t)?t.host:t}function JI(e){const t=Do(e);return Ri(t)?e.ownerDocument?e.ownerDocument.body:e.body:Qt(t)&&Zu(t)?t:JI(t)}function xi(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=JI(e),i=o===((r=e.ownerDocument)==null?void 0:r.body),a=Dn(o);if(i){const s=ov(a);return t.concat(a,a.visualViewport||[],Zu(o)?o:[],s&&n?xi(s):[])}return t.concat(o,xi(o,[],n))}function ov(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function zr(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function bt(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&rv(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function cx(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function ZI(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function eN(e){return e.mozInputSource===0&&e.isTrusted?!0:iv()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function dx(e){return QG()?!1:!iv()&&e.width===0&&e.height===0||iv()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function fx(){return/apple/i.test(navigator.vendor)}function iv(){const e=/android/i;return e.test(cx())||e.test(ZI())}function tN(){return cx().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function QG(){return ZI().includes("jsdom/")}function bf(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function JG(e){return"nativeEvent"in e}function ZG(e){return e.matches("html,body")}function gn(e){return(e==null?void 0:e.ownerDocument)||document}function tm(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Zo(e){return"composedPath"in e?e.composedPath()[0]:e.target}const eK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function hx(e){return Qt(e)&&e.matches(eK)}function Gt(e){e.preventDefault(),e.stopPropagation()}function nN(e){return e?e.getAttribute("role")==="combobox"&&hx(e):!1}const tK=["top","right","bottom","left"],I2=["start","end"],N2=tK.reduce((e,t)=>e.concat(t,t+"-"+I2[0],t+"-"+I2[1]),[]),zs=Math.min,ia=Math.max,wf=Math.round,as=Math.floor,Qr=e=>({x:e,y:e}),nK={left:"right",right:"left",bottom:"top",top:"bottom"},rK={start:"end",end:"start"};function av(e,t,n){return ia(e,zs(t,n))}function el(e,t){return typeof e=="function"?e(t):e}function Mo(e){return e.split("-")[0]}function Jr(e){return e.split("-")[1]}function rN(e){return e==="x"?"y":"x"}function px(e){return e==="y"?"height":"width"}function Th(e){return["top","bottom"].includes(Mo(e))?"y":"x"}function mx(e){return rN(Th(e))}function oN(e,t,n){n===void 0&&(n=!1);const r=Jr(e),o=mx(e),i=px(o);let a=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=Cf(a)),[a,Cf(a)]}function oK(e){const t=Cf(e);return[kf(e),t,kf(t)]}function kf(e){return e.replace(/start|end/g,t=>rK[t])}function iK(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:a;default:return[]}}function aK(e,t,n,r){const o=Jr(e);let i=iK(Mo(e),n==="start",r);return o&&(i=i.map(a=>a+"-"+o),t&&(i=i.concat(i.map(kf)))),i}function Cf(e){return e.replace(/left|right|bottom|top/g,t=>nK[t])}function sK(e){return{top:0,right:0,bottom:0,left:0,...e}}function iN(e){return typeof e!="number"?sK(e):{top:e,right:e,bottom:e,left:e}}function Ef(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function P2(e,t,n){let{reference:r,floating:o}=e;const i=Th(t),a=mx(t),s=px(a),l=Mo(t),u=i==="y",c=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let h;switch(l){case"top":h={x:c,y:r.y-o.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Jr(t)){case"start":h[a]-=f*(n&&u?-1:1);break;case"end":h[a]+=f*(n&&u?-1:1);break}return h}const lK=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:c,y:d}=P2(u,r,l),f=r,h={},p=0;for(let m=0;m<s.length;m++){const{name:y,fn:g}=s[m],{x:v,y:x,data:b,reset:k}=await g({x:c,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:u,platform:a,elements:{reference:e,floating:t}});c=v??c,d=x??d,h={...h,[y]:{...h[y],...b}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(u=k.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:o}):k.rects),{x:c,y:d}=P2(u,f,l)),m=-1)}return{x:c,y:d,placement:f,strategy:o,middlewareData:h}};async function gx(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=el(t,e),p=iN(h),y=s[f?d==="floating"?"reference":"floating":d],g=Ef(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{...a.floating,x:r,y:o}:a.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),b=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},k=Ef(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:x,strategy:l}):v);return{top:(g.top-k.top+p.top)/b.y,bottom:(k.bottom-g.bottom+p.bottom)/b.y,left:(g.left-k.left+p.left)/b.x,right:(k.right-g.right+p.right)/b.x}}const uK=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:a,elements:s,middlewareData:l}=t,{element:u,padding:c=0}=el(e,t)||{};if(u==null)return{};const d=iN(c),f={x:n,y:r},h=mx(o),p=px(h),m=await a.getDimensions(u),y=h==="y",g=y?"top":"left",v=y?"bottom":"right",x=y?"clientHeight":"clientWidth",b=i.reference[p]+i.reference[h]-f[h]-i.floating[p],k=f[h]-i.reference[h],E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let T=E?E[x]:0;(!T||!await(a.isElement==null?void 0:a.isElement(E)))&&(T=s.floating[x]||i.floating[p]);const R=b/2-k/2,_=T/2-m[p]/2-1,S=zs(d[g],_),A=zs(d[v],_),N=S,O=T-m[p]-A,M=T/2-m[p]/2+R,F=av(N,M,O),V=!l.arrow&&Jr(o)!=null&&M!==F&&i.reference[p]/2-(M<N?S:A)-m[p]/2<0,z=V?M<N?M-N:M-O:0;return{[h]:f[h]+z,data:{[h]:F,centerOffset:M-F-z,...V&&{alignmentOffset:z}},reset:V}}});function cK(e,t,n){return(e?[...n.filter(o=>Jr(o)===e),...n.filter(o=>Jr(o)!==e)]:n.filter(o=>Mo(o)===o)).filter(o=>e?Jr(o)===e||(t?kf(o)!==o:!1):!0)}const dK=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,o;const{rects:i,middlewareData:a,placement:s,platform:l,elements:u}=t,{crossAxis:c=!1,alignment:d,allowedPlacements:f=N2,autoAlignment:h=!0,...p}=el(e,t),m=d!==void 0||f===N2?cK(d||null,h,f):f,y=await gx(t,p),g=((n=a.autoPlacement)==null?void 0:n.index)||0,v=m[g];if(v==null)return{};const x=oN(v,i,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(s!==v)return{reset:{placement:m[0]}};const b=[y[Mo(v)],y[x[0]],y[x[1]]],k=[...((r=a.autoPlacement)==null?void 0:r.overflows)||[],{placement:v,overflows:b}],E=m[g+1];if(E)return{data:{index:g+1,overflows:k},reset:{placement:E}};const T=k.map(S=>{const A=Jr(S.placement);return[S.placement,A&&c?S.overflows.slice(0,2).reduce((N,O)=>N+O,0):S.overflows[0],S.overflows]}).sort((S,A)=>S[1]-A[1]),_=((o=T.filter(S=>S[2].slice(0,Jr(S[0])?2:3).every(A=>A<=0))[0])==null?void 0:o[0])||T[0][0];return _!==s?{data:{index:g+1,overflows:k},reset:{placement:_}}:{}}}},fK=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=el(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const g=Mo(o),v=Mo(s)===s,x=await(l.isRTL==null?void 0:l.isRTL(u.floating)),b=f||(v||!m?[Cf(s)]:oK(s));!f&&p!=="none"&&b.push(...aK(s,m,p,x));const k=[s,...b],E=await gx(t,y),T=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(c&&T.push(E[g]),d){const N=oN(o,a,x);T.push(E[N[0]],E[N[1]])}if(R=[...R,{placement:o,overflows:T}],!T.every(N=>N<=0)){var _,S;const N=(((_=i.flip)==null?void 0:_.index)||0)+1,O=k[N];if(O)return{data:{index:N,overflows:R},reset:{placement:O}};let M=(S=R.filter(F=>F.overflows[0]<=0).sort((F,V)=>F.overflows[1]-V.overflows[1])[0])==null?void 0:S.placement;if(!M)switch(h){case"bestFit":{var A;const F=(A=R.map(V=>[V.placement,V.overflows.filter(z=>z>0).reduce((z,P)=>z+P,0)]).sort((V,z)=>V[1]-z[1])[0])==null?void 0:A[0];F&&(M=F);break}case"initialPlacement":M=s;break}if(o!==M)return{reset:{placement:M}}}return{}}}};async function hK(e,t){const{placement:n,platform:r,elements:o}=e,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),a=Mo(n),s=Jr(n),l=Th(n)==="y",u=["left","top"].includes(a)?-1:1,c=i&&l?-1:1,d=el(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof p=="number"&&(h=s==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const pK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:a,middlewareData:s}=t,l=await hK(t,e);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:a}}}}},mK=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:y=>{let{x:g,y:v}=y;return{x:g,y:v}}},...l}=el(e,t),u={x:n,y:r},c=await gx(t,l),d=Th(Mo(o)),f=rN(d);let h=u[f],p=u[d];if(i){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",v=h+c[y],x=h-c[g];h=av(v,h,x)}if(a){const y=d==="y"?"top":"left",g=d==="y"?"bottom":"right",v=p+c[y],x=p-c[g];p=av(v,p,x)}const m=s.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}};function aN(e){const t=mr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Qt(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=wf(n)!==i||wf(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function vx(e){return $e(e)?e:e.contextElement}function Cs(e){const t=vx(e);if(!Qt(t))return Qr(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=aN(t);let a=(i?wf(n.width):n.width)/r,s=(i?wf(n.height):n.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const gK=Qr(0);function sN(e){const t=Dn(e);return!ux()||!t.visualViewport?gK:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vK(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Dn(e)?!1:t}function ma(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=vx(e);let a=Qr(1);t&&(r?$e(r)&&(a=Cs(r)):a=Cs(e));const s=vK(i,n,r)?sN(i):Qr(0);let l=(o.left+s.x)/a.x,u=(o.top+s.y)/a.y,c=o.width/a.x,d=o.height/a.y;if(i){const f=Dn(i),h=r&&$e(r)?Dn(r):r;let p=f,m=ov(p);for(;m&&r&&h!==p;){const y=Cs(m),g=m.getBoundingClientRect(),v=mr(m),x=g.left+(m.clientLeft+parseFloat(v.paddingLeft))*y.x,b=g.top+(m.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,d*=y.y,l+=x,u+=b,p=Dn(m),m=ov(p)}}return Ef({width:c,height:d,x:l,y:u})}function yx(e,t){const n=Rh(e).scrollLeft;return t?t.left+n:ma(so(e)).left+n}function lN(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:yx(e,r)),i=r.top+t.scrollTop;return{x:o,y:i}}function yK(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i=o==="fixed",a=so(r),s=t?Sh(t.floating):!1;if(r===a||s&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Qr(1);const c=Qr(0),d=Qt(r);if((d||!d&&!i)&&((Ia(r)!=="body"||Zu(a))&&(l=Rh(r)),Qt(r))){const h=ma(r);u=Cs(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const f=a&&!d&&!i?lN(a,l,!0):Qr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}}function xK(e){return Array.from(e.getClientRects())}function bK(e){const t=so(e),n=Rh(e),r=e.ownerDocument.body,o=ia(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=ia(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+yx(e);const s=-n.scrollTop;return mr(r).direction==="rtl"&&(a+=ia(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}function wK(e,t){const n=Dn(e),r=so(e),o=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;const u=ux();(!u||u&&t==="fixed")&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s,y:l}}function kK(e,t){const n=ma(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=Qt(e)?Cs(e):Qr(1),a=e.clientWidth*i.x,s=e.clientHeight*i.y,l=o*i.x,u=r*i.y;return{width:a,height:s,x:l,y:u}}function A2(e,t,n){let r;if(t==="viewport")r=wK(e,n);else if(t==="document")r=bK(so(e));else if($e(t))r=kK(t,n);else{const o=sN(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Ef(r)}function uN(e,t){const n=Do(e);return n===t||!$e(n)||Ri(n)?!1:mr(n).position==="fixed"||uN(n,t)}function CK(e,t){const n=t.get(e);if(n)return n;let r=xi(e,[],!1).filter(s=>$e(s)&&Ia(s)!=="body"),o=null;const i=mr(e).position==="fixed";let a=i?Do(e):e;for(;$e(a)&&!Ri(a);){const s=mr(a),l=lx(a);!l&&s.position==="fixed"&&(o=null),(i?!l&&!o:!l&&s.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Zu(a)&&!l&&uN(e,a))?r=r.filter(c=>c!==a):o=s,a=Do(a)}return t.set(e,r),r}function EK(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[...n==="clippingAncestors"?Sh(t)?[]:CK(t,this._c):[].concat(n),r],s=a[0],l=a.reduce((u,c)=>{const d=A2(t,c,o);return u.top=ia(d.top,u.top),u.right=zs(d.right,u.right),u.bottom=zs(d.bottom,u.bottom),u.left=ia(d.left,u.left),u},A2(t,s,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function SK(e){const{width:t,height:n}=aN(e);return{width:t,height:n}}function RK(e,t,n){const r=Qt(t),o=so(t),i=n==="fixed",a=ma(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=Qr(0);if(r||!r&&!i)if((Ia(t)!=="body"||Zu(o))&&(s=Rh(t)),r){const f=ma(t,!0,i,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else o&&(l.x=yx(o));const u=o&&!r&&!i?lN(o,s):Qr(0),c=a.left+s.scrollLeft-l.x-u.x,d=a.top+s.scrollTop-l.y-u.y;return{x:c,y:d,width:a.width,height:a.height}}function nm(e){return mr(e).position==="static"}function D2(e,t){if(!Qt(e)||mr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return so(e)===n&&(n=n.ownerDocument.body),n}function cN(e,t){const n=Dn(e);if(Sh(e))return n;if(!Qt(e)){let o=Do(e);for(;o&&!Ri(o);){if($e(o)&&!nm(o))return o;o=Do(o)}return n}let r=D2(e,t);for(;r&&XG(r)&&nm(r);)r=D2(r,t);return r&&Ri(r)&&nm(r)&&!lx(r)?n:r||YG(e)||n}const TK=async function(e){const t=this.getOffsetParent||cN,n=this.getDimensions,r=await n(e.floating);return{reference:RK(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _K(e){return mr(e).direction==="rtl"}const IK={convertOffsetParentRelativeRectToViewportRelativeRect:yK,getDocumentElement:so,getClippingRect:EK,getOffsetParent:cN,getElementRects:TK,getClientRects:xK,getDimensions:SK,getScale:Cs,isElement:$e,isRTL:_K};function NK(e,t){let n=null,r;const o=so(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),i();const{left:u,top:c,width:d,height:f}=e.getBoundingClientRect();if(s||t(),!d||!f)return;const h=as(c),p=as(o.clientWidth-(u+d)),m=as(o.clientHeight-(c+f)),y=as(u),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-y+"px",threshold:ia(0,zs(1,l))||1};let x=!0;function b(k){const E=k[0].intersectionRatio;if(E!==l){if(!x)return a();E?a(!1,E):r=setTimeout(()=>{a(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(b,{...v,root:o.ownerDocument})}catch{n=new IntersectionObserver(b,v)}n.observe(e)}return a(!0),i}function dN(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=vx(e),c=o||i?[...u?xi(u):[],...xi(t)]:[];c.forEach(g=>{o&&g.addEventListener("scroll",n,{passive:!0}),i&&g.addEventListener("resize",n)});const d=u&&s?NK(u,n):null;let f=-1,h=null;a&&(h=new ResizeObserver(g=>{let[v]=g;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,m=l?ma(e):null;l&&y();function y(){const g=ma(e);m&&(g.x!==m.x||g.y!==m.y||g.width!==m.width||g.height!==m.height)&&n(),m=g,p=requestAnimationFrame(y)}return n(),()=>{var g;c.forEach(v=>{o&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),d==null||d(),(g=h)==null||g.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const PK=pK,AK=dK,DK=mK,MK=fK,M2=uK,FK=(e,t,n)=>{const r=new Map,o={platform:IK,...n},i={...o.platform,_c:r};return lK(e,t,{...o,platform:i})};var ld=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Sf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Sf(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!Sf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function fN(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function F2(e,t){const n=fN(e);return Math.round(t*n)/n}function rm(e){const t=C.useRef(e);return ld(()=>{t.current=e}),t}function OK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:a}={},transform:s=!0,whileElementsMounted:l,open:u}=e,[c,d]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=C.useState(r);Sf(f,r)||h(r);const[p,m]=C.useState(null),[y,g]=C.useState(null),v=C.useCallback(P=>{P!==E.current&&(E.current=P,m(P))},[]),x=C.useCallback(P=>{P!==T.current&&(T.current=P,g(P))},[]),b=i||p,k=a||y,E=C.useRef(null),T=C.useRef(null),R=C.useRef(c),_=l!=null,S=rm(l),A=rm(o),N=rm(u),O=C.useCallback(()=>{if(!E.current||!T.current)return;const P={placement:t,strategy:n,middleware:f};A.current&&(P.platform=A.current),FK(E.current,T.current,P).then(B=>{const L={...B,isPositioned:N.current!==!1};M.current&&!Sf(R.current,L)&&(R.current=L,a0.flushSync(()=>{d(L)}))})},[f,t,n,A,N]);ld(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,d(P=>({...P,isPositioned:!1})))},[u]);const M=C.useRef(!1);ld(()=>(M.current=!0,()=>{M.current=!1}),[]),ld(()=>{if(b&&(E.current=b),k&&(T.current=k),b&&k){if(S.current)return S.current(b,k,O);O()}},[b,k,O,S,_]);const F=C.useMemo(()=>({reference:E,floating:T,setReference:v,setFloating:x}),[v,x]),V=C.useMemo(()=>({reference:b,floating:k}),[b,k]),z=C.useMemo(()=>{const P={position:n,left:0,top:0};if(!V.floating)return P;const B=F2(V.floating,c.x),L=F2(V.floating,c.y);return s?{...P,transform:"translate("+B+"px, "+L+"px)",...fN(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:L}},[n,s,V.floating,c.x,c.y]);return C.useMemo(()=>({...c,update:O,refs:F,elements:V,floatingStyles:z}),[c,O,F,V,z])}const LK=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?M2({element:r.current,padding:o}).fn(n):{}:r?M2({element:r,padding:o}).fn(n):{}}}},BK=(e,t)=>({...PK(e),options:[e,t]}),jK=(e,t)=>({...DK(e),options:[e,t]}),zK=(e,t)=>({...MK(e),options:[e,t]}),VK=(e,t)=>({...AK(e),options:[e,t]}),WK=(e,t)=>({...LK(e),options:[e,t]});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var $K=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Rf=$K.join(","),hN=typeof Element>"u",Vs=hN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Tf=!hN&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},_f=function e(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),i=o===""||o==="true",a=i||n&&t&&e(t.parentNode);return a},UK=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},HK=function(t,n,r){if(_f(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(Rf));return n&&Vs.call(t,Rf)&&o.unshift(t),o=o.filter(r),o},GK=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var a=i.shift();if(!_f(a,!1))if(a.tagName==="SLOT"){var s=a.assignedElements(),l=s.length?s:a.children,u=e(l,!0,r);r.flatten?o.push.apply(o,u):o.push({scopeParent:a,candidates:u})}else{var c=Vs.call(a,Rf);c&&r.filter(a)&&(n||!t.includes(a))&&o.push(a);var d=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),f=!_f(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(d&&f){var h=e(d===!0?a.children:d.children,!0,r);r.flatten?o.push.apply(o,h):o.push({scopeParent:a,candidates:h})}else i.unshift.apply(i,a.children)}}return o},pN=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},mN=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||UK(t))&&!pN(t)?0:t.tabIndex},KK=function(t,n){var r=mN(t);return r<0&&n&&!pN(t)?0:r},qK=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},gN=function(t){return t.tagName==="INPUT"},XK=function(t){return gN(t)&&t.type==="hidden"},YK=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},QK=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},JK=function(t){if(!t.name)return!0;var n=t.form||Tf(t),r=function(s){return n.querySelectorAll('input[type="radio"][name="'+s+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var i=QK(o,t.form);return!i||i===t},ZK=function(t){return gN(t)&&t.type==="radio"},eq=function(t){return ZK(t)&&!JK(t)},tq=function(t){var n,r=t&&Tf(t),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==t){var a,s,l;for(i=!!((a=o)!==null&&a!==void 0&&(s=a.ownerDocument)!==null&&s!==void 0&&s.contains(o)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!i&&o;){var u,c,d;r=Tf(o),o=(u=r)===null||u===void 0?void 0:u.host,i=!!((c=o)!==null&&c!==void 0&&(d=c.ownerDocument)!==null&&d!==void 0&&d.contains(o))}}return i},O2=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},nq=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var i=Vs.call(t,"details>summary:first-of-type"),a=i?t.parentElement:t;if(Vs.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var s=t;t;){var l=t.parentElement,u=Tf(t);if(l&&!l.shadowRoot&&o(l)===!0)return O2(t);t.assignedSlot?t=t.assignedSlot:!l&&u!==t.ownerDocument?t=u.host:t=l}t=s}if(tq(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return O2(t);return!1},rq=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return Vs.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},oq=function(t,n){return!(n.disabled||_f(n)||XK(n)||nq(n,t)||YK(n)||rq(n))},sv=function(t,n){return!(eq(n)||mN(n)<0||!oq(t,n))},iq=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},aq=function e(t){var n=[],r=[];return t.forEach(function(o,i){var a=!!o.scopeParent,s=a?o.scopeParent:o,l=KK(s,a),u=a?e(o.candidates):s;l===0?a?n.push.apply(n,u):n.push(s):r.push({documentOrder:i,tabIndex:l,item:o,isScope:a,content:u})}),r.sort(qK).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},_h=function(t,n){n=n||{};var r;return n.getShadowRoot?r=GK([t],n.includeContainer,{filter:sv.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:iq}):r=HK(t,n.includeContainer,sv.bind(null,n)),aq(r)},sq=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Vs.call(t,Rf)===!1?!1:sv(n,t)};function vN(e){return C.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const lq=Hl.useInsertionEffect,uq=lq||(e=>e());function Vr(e){const t=C.useRef(()=>{});return uq(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}const xx="ArrowUp",ec="ArrowDown",Ws="ArrowLeft",tl="ArrowRight";function Wc(e,t,n){return Math.floor(e/t)!==n}function Wl(e,t){return t<0||t>=e.current.length}function om(e,t){return nn(e,{disabledIndices:t})}function L2(e,t){return nn(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function nn(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:o,amount:i=1}=t===void 0?{}:t;const a=e.current,s=o?u=>o.includes(u):u=>{const c=a[u];return c==null||c.hasAttribute("disabled")||c.getAttribute("aria-disabled")==="true"};let l=n;do l+=r?-i:i;while(l>=0&&l<=a.length-1&&s(l));return l}function cq(e,t){let{event:n,orientation:r,loop:o,cols:i,disabledIndices:a,minIndex:s,maxIndex:l,prevIndex:u,stopEvent:c=!1}=t,d=u;if(n.key===xx){if(c&&Gt(n),u===-1)d=l;else if(d=nn(e,{startingIndex:d,amount:i,decrement:!0,disabledIndices:a}),o&&(u-i<s||d<0)){const f=u%i,h=l%i,p=l-(h-f);h===f?d=l:d=h>f?p:p-i}Wl(e,d)&&(d=u)}if(n.key===ec&&(c&&Gt(n),u===-1?d=s:(d=nn(e,{startingIndex:u,amount:i,disabledIndices:a}),o&&u+i>l&&(d=nn(e,{startingIndex:u%i-i,amount:i,disabledIndices:a}))),Wl(e,d)&&(d=u)),r==="both"){const f=as(u/i);n.key===tl&&(c&&Gt(n),u%i!==i-1?(d=nn(e,{startingIndex:u,disabledIndices:a}),o&&Wc(d,i,f)&&(d=nn(e,{startingIndex:u-u%i-1,disabledIndices:a}))):o&&(d=nn(e,{startingIndex:u-u%i-1,disabledIndices:a})),Wc(d,i,f)&&(d=u)),n.key===Ws&&(c&&Gt(n),u%i!==0?(d=nn(e,{startingIndex:u,disabledIndices:a,decrement:!0}),o&&Wc(d,i,f)&&(d=nn(e,{startingIndex:u+(i-u%i),decrement:!0,disabledIndices:a}))):o&&(d=nn(e,{startingIndex:u+(i-u%i),decrement:!0,disabledIndices:a})),Wc(d,i,f)&&(d=u));const h=as(l/i)===f;Wl(e,d)&&(o&&h?d=n.key===Ws?l:nn(e,{startingIndex:u-u%i-1,disabledIndices:a}):d=u)}return d}function dq(e,t,n){const r=[];let o=0;return e.forEach((i,a)=>{let{width:s,height:l}=i,u=!1;for(n&&(o=0);!u;){const c=[];for(let d=0;d<s;d++)for(let f=0;f<l;f++)c.push(o+d+f*t);o%t+s<=t&&c.every(d=>r[d]==null)?(c.forEach(d=>{r[d]=a}),u=!0):o++}}),[...r]}function fq(e,t,n,r,o){if(e===-1)return-1;const i=n.indexOf(e);switch(o){case"tl":return i;case"tr":return i+t[e].width-1;case"bl":return i+(t[e].height-1)*r;case"br":return n.lastIndexOf(e)}}function hq(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}let B2=0;function ho(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(B2);const i=()=>e==null?void 0:e.focus({preventScroll:n});o?i():B2=requestAnimationFrame(i)}var He=typeof document<"u"?C.useLayoutEffect:C.useEffect;function pq(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}function mq(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e.entries())if(r!==t.get(n))return!1;return!0}const yN=C.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function gq(e){let{children:t,elementsRef:n,labelsRef:r}=e;const[o,i]=C.useState(()=>new Map),a=C.useCallback(l=>{i(u=>new Map(u).set(l,null))},[]),s=C.useCallback(l=>{i(u=>{const c=new Map(u);return c.delete(l),c})},[]);return He(()=>{const l=new Map(o);Array.from(l.keys()).sort(pq).forEach((c,d)=>{l.set(c,d)}),mq(o,l)||i(l)},[o]),C.createElement(yN.Provider,{value:C.useMemo(()=>({register:a,unregister:s,map:o,elementsRef:n,labelsRef:r}),[a,s,o,n,r])},t)}function vq(e){let{label:t}=e===void 0?{}:e;const[n,r]=C.useState(null),o=C.useRef(null),{register:i,unregister:a,map:s,elementsRef:l,labelsRef:u}=C.useContext(yN),c=C.useCallback(d=>{if(o.current=d,n!==null&&(l.current[n]=d,u)){var f;const h=t!==void 0;u.current[n]=h?t:(f=d==null?void 0:d.textContent)!=null?f:null}},[n,l,u,t]);return He(()=>{const d=o.current;if(d)return i(d),()=>{a(d)}},[i,a]),He(()=>{const d=o.current?s.get(o.current):null;d!=null&&r(d)},[s]),C.useMemo(()=>({ref:c,index:n??-1}),[n,c])}function Cu(){return Cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cu.apply(this,arguments)}let im=!1,yq=0;const j2=()=>"floating-ui-"+yq++;function xq(){const[e,t]=C.useState(()=>im?j2():void 0);return He(()=>{e==null&&t(j2())},[]),C.useEffect(()=>{im||(im=!0)},[]),e}const bq=Hl.useId,Ih=bq||xq;function wq(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(o=>o!==n))||[])}}}const kq=C.createContext(null),Cq=C.createContext(null),Nh=()=>{var e;return((e=C.useContext(kq))==null?void 0:e.id)||null},tc=()=>C.useContext(Cq);function ga(e){return"data-floating-ui-"+e}function Zr(e){const t=C.useRef(e);return He(()=>{t.current=e}),t}const z2=ga("safe-polygon");function am(e,t,n){return n&&!bf(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Eq(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:{domReference:a,floating:s},refs:l}=e,{enabled:u=!0,delay:c=0,handleClose:d=null,mouseOnly:f=!1,restMs:h=0,move:p=!0}=t,m=tc(),y=Nh(),g=Zr(d),v=Zr(c),x=C.useRef(),b=C.useRef(),k=C.useRef(),E=C.useRef(),T=C.useRef(!0),R=C.useRef(!1),_=C.useRef(()=>{}),S=C.useCallback(()=>{var M;const F=(M=o.current.openEvent)==null?void 0:M.type;return(F==null?void 0:F.includes("mouse"))&&F!=="mousedown"},[o]);C.useEffect(()=>{if(!u)return;function M(F){let{open:V}=F;V||(clearTimeout(b.current),clearTimeout(E.current),T.current=!0)}return i.on("openchange",M),()=>{i.off("openchange",M)}},[u,i]),C.useEffect(()=>{if(!u||!g.current||!n)return;function M(V){S()&&r(!1,V,"hover")}const F=gn(s).documentElement;return F.addEventListener("mouseleave",M),()=>{F.removeEventListener("mouseleave",M)}},[s,n,r,u,g,S]);const A=C.useCallback(function(M,F,V){F===void 0&&(F=!0),V===void 0&&(V="hover");const z=am(v.current,"close",x.current);z&&!k.current?(clearTimeout(b.current),b.current=setTimeout(()=>r(!1,M,V),z)):F&&(clearTimeout(b.current),r(!1,M,V))},[v,r]),N=C.useCallback(()=>{_.current(),k.current=void 0},[]),O=C.useCallback(()=>{if(R.current){const M=gn(l.floating.current).body;M.style.pointerEvents="",M.removeAttribute(z2),R.current=!1}},[l]);return C.useEffect(()=>{if(!u)return;function M(){return o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1}function F(P){if(clearTimeout(b.current),T.current=!1,f&&!bf(x.current)||h>0&&am(v.current,"open")===0)return;const B=am(v.current,"open",x.current);B?b.current=setTimeout(()=>{r(!0,P,"hover")},B):r(!0,P,"hover")}function V(P){if(M())return;_.current();const B=gn(s);if(clearTimeout(E.current),g.current){n||clearTimeout(b.current),k.current=g.current({...e,tree:m,x:P.clientX,y:P.clientY,onClose(){O(),N(),A(P,!0,"safe-polygon")}});const $=k.current;B.addEventListener("mousemove",$),_.current=()=>{B.removeEventListener("mousemove",$)};return}(x.current==="touch"?!bt(s,P.relatedTarget):!0)&&A(P)}function z(P){M()||g.current==null||g.current({...e,tree:m,x:P.clientX,y:P.clientY,onClose(){O(),N(),A(P)}})(P)}if($e(a)){const P=a;return n&&P.addEventListener("mouseleave",z),s==null||s.addEventListener("mouseleave",z),p&&P.addEventListener("mousemove",F,{once:!0}),P.addEventListener("mouseenter",F),P.addEventListener("mouseleave",V),()=>{n&&P.removeEventListener("mouseleave",z),s==null||s.removeEventListener("mouseleave",z),p&&P.removeEventListener("mousemove",F),P.removeEventListener("mouseenter",F),P.removeEventListener("mouseleave",V)}}},[a,s,u,e,f,h,p,A,N,O,r,n,m,v,g,o]),He(()=>{var M;if(u&&n&&(M=g.current)!=null&&M.__options.blockPointerEvents&&S()){const V=gn(s).body;if(V.setAttribute(z2,""),V.style.pointerEvents="none",R.current=!0,$e(a)&&s){var F;const z=a,P=m==null||(F=m.nodesRef.current.find(B=>B.id===y))==null||(F=F.context)==null?void 0:F.elements.floating;return P&&(P.style.pointerEvents=""),z.style.pointerEvents="auto",s.style.pointerEvents="auto",()=>{z.style.pointerEvents="",s.style.pointerEvents=""}}}},[u,n,y,s,a,m,g,S]),He(()=>{n||(x.current=void 0,N(),O())},[n,N,O]),C.useEffect(()=>()=>{N(),clearTimeout(b.current),clearTimeout(E.current),O()},[u,a,N,O]),C.useMemo(()=>{if(!u)return{};function M(F){x.current=F.pointerType}return{reference:{onPointerDown:M,onPointerEnter:M,onMouseMove(F){n||h===0||(clearTimeout(E.current),E.current=setTimeout(()=>{T.current||r(!0,F.nativeEvent,"hover")},h))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(F){A(F.nativeEvent,!1)}}}},[u,h,n,r,A])}function Sq(e,t){var n;let r=[],o=(n=e.find(i=>i.id===t))==null?void 0:n.parentId;for(;o;){const i=e.find(a=>a.id===o);o=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function aa(e,t){let n=e.filter(o=>{var i;return o.parentId===t&&((i=o.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=e.filter(o=>{var i;return(i=r)==null?void 0:i.some(a=>{var s;return o.parentId===a.id&&((s=o.context)==null?void 0:s.open)})}),n=n.concat(r);return n}function Rq(e,t){let n,r=-1;function o(i,a){a>r&&(n=i,r=a),aa(e,i).forEach(l=>{o(l.id,a+1)})}return o(t,0),e.find(i=>i.id===n)}let Fa=new WeakMap,$c=new WeakSet,Uc={},sm=0;const Tq=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,xN=e=>e&&(e.host||xN(e.parentNode)),_q=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=xN(n);return e.contains(r)?r:null}).filter(n=>n!=null);function Iq(e,t,n,r){const o="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,a=_q(t,e),s=new Set,l=new Set(a),u=[];Uc[o]||(Uc[o]=new WeakMap);const c=Uc[o];a.forEach(d),f(t),s.clear();function d(h){!h||s.has(h)||(s.add(h),h.parentNode&&d(h.parentNode))}function f(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,p=>{if(s.has(p))f(p);else{const m=i?p.getAttribute(i):null,y=m!==null&&m!=="false",g=(Fa.get(p)||0)+1,v=(c.get(p)||0)+1;Fa.set(p,g),c.set(p,v),u.push(p),g===1&&y&&$c.add(p),v===1&&p.setAttribute(o,""),!y&&i&&p.setAttribute(i,"true")}})}return sm++,()=>{u.forEach(h=>{const p=(Fa.get(h)||0)-1,m=(c.get(h)||0)-1;Fa.set(h,p),c.set(h,m),p||(!$c.has(h)&&i&&h.removeAttribute(i),$c.delete(h)),m||h.removeAttribute(o)}),sm--,sm||(Fa=new WeakMap,Fa=new WeakMap,$c=new WeakSet,Uc={})}}function V2(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=gn(e[0]).body;return Iq(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const Eu=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function bN(e,t){const n=_h(e,Eu());t==="prev"&&n.reverse();const r=n.indexOf(zr(gn(e)));return n.slice(r+1)[0]}function wN(){return bN(document.body,"next")}function kN(){return bN(document.body,"prev")}function $l(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!bt(n,r)}function Nq(e){_h(e,Eu()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Pq(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const bx={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let Aq;function W2(e){e.key==="Tab"&&(e.target,clearTimeout(Aq))}const If=C.forwardRef(function(t,n){const[r,o]=C.useState();He(()=>(fx()&&o("button"),document.addEventListener("keydown",W2),()=>{document.removeEventListener("keydown",W2)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ga("focus-guard")]:"",style:bx};return C.createElement("span",Cu({},t,i))}),CN=C.createContext(null),$2=ga("portal");function Dq(e){let{id:t,root:n}=e===void 0?{}:e;const[r,o]=C.useState(null),i=Ih(),a=EN(),s=C.useRef(null);return He(()=>()=>{r==null||r.remove(),queueMicrotask(()=>{s.current=null})},[r]),He(()=>{if(s.current)return;const l=t?document.getElementById(t):null;if(!l)return;const u=document.createElement("div");u.id=i,u.setAttribute($2,""),l.appendChild(u),s.current=u,o(u)},[t,i]),He(()=>{if(s.current)return;let l=n||(a==null?void 0:a.portalNode);l&&!$e(l)&&(l=l.current),l=l||document.body;let u=null;t&&(u=document.createElement("div"),u.id=t,l.appendChild(u));const c=document.createElement("div");c.id=i,c.setAttribute($2,""),l=u||l,l.appendChild(c),s.current=c,o(c)},[t,n,i,a]),r}function Mq(e){let{children:t,id:n,root:r=null,preserveTabOrder:o=!0}=e;const i=Dq({id:n,root:r}),[a,s]=C.useState(null),l=C.useRef(null),u=C.useRef(null),c=C.useRef(null),d=C.useRef(null),f=!!a&&!a.modal&&a.open&&o&&!!(r||i);return C.useEffect(()=>{if(!i||!o||a!=null&&a.modal)return;function h(p){i&&$l(p)&&(p.type==="focusin"?Pq:Nq)(i)}return i.addEventListener("focusin",h,!0),i.addEventListener("focusout",h,!0),()=>{i.removeEventListener("focusin",h,!0),i.removeEventListener("focusout",h,!0)}},[i,o,a==null?void 0:a.modal]),C.createElement(CN.Provider,{value:C.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:u,beforeInsideRef:c,afterInsideRef:d,portalNode:i,setFocusManagerState:s}),[o,i])},f&&i&&C.createElement(If,{"data-type":"outside",ref:l,onFocus:h=>{if($l(h,i)){var p;(p=c.current)==null||p.focus()}else{const m=kN()||(a==null?void 0:a.refs.domReference.current);m==null||m.focus()}}}),f&&i&&C.createElement("span",{"aria-owns":i.id,style:bx}),i&&a0.createPortal(t,i),f&&i&&C.createElement(If,{"data-type":"outside",ref:u,onFocus:h=>{if($l(h,i)){var p;(p=d.current)==null||p.focus()}else{const m=wN()||(a==null?void 0:a.refs.domReference.current);m==null||m.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,h.nativeEvent))}}}))}const EN=()=>C.useContext(CN),U2=20;let Hi=[];function lm(e){Hi=Hi.filter(n=>n.isConnected);let t=e;if(!(!t||Ia(t)==="body")){if(!sq(t,Eu())){const n=_h(t,Eu())[0];if(!n)return;t=n}Hi.push(t),Hi.length>U2&&(Hi=Hi.slice(-U2))}}function H2(){return Hi.slice().reverse().find(e=>e.isConnected)}const Fq=C.forwardRef(function(t,n){return C.createElement("button",Cu({},t,{type:"button",ref:n,tabIndex:-1,style:bx}))});function SN(e){const{context:t,children:n,disabled:r=!1,order:o=["content"],guards:i=!0,initialFocus:a=0,returnFocus:s=!0,modal:l=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:c=!0}=e,{open:d,refs:f,nodeId:h,onOpenChange:p,events:m,dataRef:y,elements:{domReference:g,floating:v}}=t,x=typeof a=="number"&&a<0,b=nN(g)&&x,k=Tq()?i:!0,E=Zr(o),T=Zr(a),R=Zr(s),_=tc(),S=EN(),A=C.useRef(null),N=C.useRef(null),O=C.useRef(!1),M=C.useRef(!1),F=S!=null,V=C.useCallback(function(L){return L===void 0&&(L=v),L?_h(L,Eu()):[]},[v]),z=C.useCallback(L=>{const $=V(L);return E.current.map(q=>g&&q==="reference"?g:v&&q==="floating"?v:$).filter(Boolean).flat()},[g,v,E,V]);C.useEffect(()=>{if(r||!l)return;function L(q){if(q.key==="Tab"){bt(v,zr(gn(v)))&&V().length===0&&!b&&Gt(q);const Q=z(),ee=Zo(q);E.current[0]==="reference"&&ee===g&&(Gt(q),q.shiftKey?ho(Q[Q.length-1]):ho(Q[1])),E.current[1]==="floating"&&ee===v&&q.shiftKey&&(Gt(q),ho(Q[0]))}}const $=gn(v);return $.addEventListener("keydown",L),()=>{$.removeEventListener("keydown",L)}},[r,g,v,l,E,b,V,z]),C.useEffect(()=>{if(r||!c)return;function L(){M.current=!0,setTimeout(()=>{M.current=!1})}function $(q){const Q=q.relatedTarget;queueMicrotask(()=>{const ee=!(bt(g,Q)||bt(v,Q)||bt(Q,v)||bt(S==null?void 0:S.portalNode,Q)||Q!=null&&Q.hasAttribute(ga("focus-guard"))||_&&(aa(_.nodesRef.current,h).find(te=>{var re,ce;return bt((re=te.context)==null?void 0:re.elements.floating,Q)||bt((ce=te.context)==null?void 0:ce.elements.domReference,Q)})||Sq(_.nodesRef.current,h).find(te=>{var re,ce;return((re=te.context)==null?void 0:re.elements.floating)===Q||((ce=te.context)==null?void 0:ce.elements.domReference)===Q})));Q&&ee&&!M.current&&Q!==H2()&&(O.current=!0,p(!1,q))})}if(v&&Qt(g))return g.addEventListener("focusout",$),g.addEventListener("pointerdown",L),!l&&v.addEventListener("focusout",$),()=>{g.removeEventListener("focusout",$),g.removeEventListener("pointerdown",L),!l&&v.removeEventListener("focusout",$)}},[r,g,v,l,h,_,S,p,c]),C.useEffect(()=>{var L;if(r)return;const $=Array.from((S==null||(L=S.portalNode)==null?void 0:L.querySelectorAll("["+ga("portal")+"]"))||[]);if(v){const q=[v,...$,A.current,N.current,E.current.includes("reference")||b?g:null].filter(ee=>ee!=null),Q=l||b?V2(q,k,!k):V2(q);return()=>{Q()}}},[r,g,v,l,E,S,b,k]),He(()=>{if(r||!v)return;const L=gn(v),$=zr(L);queueMicrotask(()=>{const q=z(v),Q=T.current,ee=(typeof Q=="number"?q[Q]:Q.current)||v,te=bt(v,$);!x&&!te&&d&&ho(ee,{preventScroll:ee===v})})},[r,d,v,x,z,T]),He(()=>{if(r||!v)return;let L=!1;const $=gn(v),q=zr($),Q=y.current;lm(q);function ee(te){let{reason:re,event:ce,nested:ae}=te;re==="escape-key"&&f.domReference.current&&lm(f.domReference.current),re==="hover"&&ce.type==="mouseleave"&&(O.current=!0),re==="outside-press"&&(ae?(O.current=!1,L=!0):O.current=!(eN(ce)||dx(ce)))}return m.on("openchange",ee),()=>{m.off("openchange",ee);const te=zr($),re=bt(v,te)||_&&aa(_.nodesRef.current,h).some(me=>{var Ae;return bt((Ae=me.context)==null?void 0:Ae.elements.floating,te)});(re||Q.openEvent&&["click","mousedown"].includes(Q.openEvent.type))&&f.domReference.current&&lm(f.domReference.current);const ae=H2();R.current&&!O.current&&Qt(ae)&&(!(ae!==te&&te!==$.body)||re)&&ho(ae,{cancelPrevious:!1,preventScroll:L})}},[r,v,R,y,f,m,_,h]),He(()=>{if(!(r||!S))return S.setFocusManagerState({modal:l,closeOnFocusOut:c,open:d,onOpenChange:p,refs:f}),()=>{S.setFocusManagerState(null)}},[r,S,l,d,p,f,c]),He(()=>{if(r||!v||typeof MutationObserver!="function"||x)return;const L=()=>{const q=v.getAttribute("tabindex");E.current.includes("floating")||zr(gn(v))!==f.domReference.current&&V().length===0?q!=="0"&&v.setAttribute("tabindex","0"):q!=="-1"&&v.setAttribute("tabindex","-1")};L();const $=new MutationObserver(L);return $.observe(v,{childList:!0,subtree:!0,attributes:!0}),()=>{$.disconnect()}},[r,v,f,E,V,x]);function P(L){return r||!u||!l?null:C.createElement(Fq,{ref:L==="start"?A:N,onClick:$=>p(!1,$.nativeEvent)},typeof u=="string"?u:"Dismiss")}const B=!r&&k&&(F||l);return C.createElement(C.Fragment,null,B&&C.createElement(If,{"data-type":"inside",ref:S==null?void 0:S.beforeInsideRef,onFocus:L=>{if(l){const q=z();ho(o[0]==="reference"?q[0]:q[q.length-1])}else if(S!=null&&S.preserveTabOrder&&S.portalNode)if(O.current=!1,$l(L,S.portalNode)){const q=wN()||g;q==null||q.focus()}else{var $;($=S.beforeOutsideRef.current)==null||$.focus()}}}),!b&&P("start"),n,P("end"),B&&C.createElement(If,{"data-type":"inside",ref:S==null?void 0:S.afterInsideRef,onFocus:L=>{if(l)ho(z()[0]);else if(S!=null&&S.preserveTabOrder&&S.portalNode)if(c&&(O.current=!0),$l(L,S.portalNode)){const q=kN()||g;q==null||q.focus()}else{var $;($=S.afterOutsideRef.current)==null||$.focus()}}}))}const um=new Set,Oq=C.forwardRef(function(t,n){let{lockScroll:r=!1,...o}=t;const i=Ih();return He(()=>{if(!r)return;um.add(i);const a=/iP(hone|ad|od)|iOS/.test(cx()),s=document.body.style,u=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",c=window.innerWidth-document.documentElement.clientWidth,d=s.left?parseFloat(s.left):window.pageXOffset,f=s.top?parseFloat(s.top):window.pageYOffset;if(s.overflow="hidden",c&&(s[u]=c+"px"),a){var h,p;const m=((h=window.visualViewport)==null?void 0:h.offsetLeft)||0,y=((p=window.visualViewport)==null?void 0:p.offsetTop)||0;Object.assign(s,{position:"fixed",top:-(f-Math.floor(y))+"px",left:-(d-Math.floor(m))+"px",right:"0"})}return()=>{um.delete(i),um.size===0&&(Object.assign(s,{overflow:"",[u]:""}),a&&(Object.assign(s,{position:"",top:"",left:"",right:""}),window.scrollTo(d,f)))}},[i,r]),C.createElement("div",Cu({ref:n},o,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}}))});function G2(e){return Qt(e.target)&&e.target.tagName==="BUTTON"}function K2(e){return hx(e)}function RN(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:i}}=e,{enabled:a=!0,event:s="click",toggle:l=!0,ignoreMouse:u=!1,keyboardHandlers:c=!0}=t,d=C.useRef(),f=C.useRef(!1);return C.useMemo(()=>a?{reference:{onPointerDown(h){d.current=h.pointerType},onMouseDown(h){h.button===0&&(bf(d.current,!0)&&u||s!=="click"&&(n&&l&&(!o.current.openEvent||o.current.openEvent.type==="mousedown")?r(!1,h.nativeEvent,"click"):(h.preventDefault(),r(!0,h.nativeEvent,"click"))))},onClick(h){if(s==="mousedown"&&d.current){d.current=void 0;return}bf(d.current,!0)&&u||(n&&l&&(!o.current.openEvent||o.current.openEvent.type==="click")?r(!1,h.nativeEvent,"click"):r(!0,h.nativeEvent,"click"))},onKeyDown(h){d.current=void 0,!(h.defaultPrevented||!c||G2(h))&&(h.key===" "&&!K2(i)&&(h.preventDefault(),f.current=!0),h.key==="Enter"&&r(!(n&&l),h.nativeEvent,"click"))},onKeyUp(h){h.defaultPrevented||!c||G2(h)||K2(i)||h.key===" "&&f.current&&(f.current=!1,r(!(n&&l),h.nativeEvent,"click"))}}}:{},[a,o,s,u,c,i,l,n,r])}const Lq={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Bq={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},q2=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function TN(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,nodeId:o,elements:{reference:i,domReference:a,floating:s},dataRef:l}=e,{enabled:u=!0,escapeKey:c=!0,outsidePress:d=!0,outsidePressEvent:f="pointerdown",referencePress:h=!1,referencePressEvent:p="pointerdown",ancestorScroll:m=!1,bubbles:y,capture:g}=t,v=tc(),x=Vr(typeof d=="function"?d:()=>!1),b=typeof d=="function"?x:d,k=C.useRef(!1),E=C.useRef(!1),{escapeKey:T,outsidePress:R}=q2(y),{escapeKey:_,outsidePress:S}=q2(g),A=Vr(F=>{if(!n||!u||!c||F.key!=="Escape")return;const V=v?aa(v.nodesRef.current,o):[];if(!T&&(F.stopPropagation(),V.length>0)){let z=!0;if(V.forEach(P=>{var B;if((B=P.context)!=null&&B.open&&!P.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,JG(F)?F.nativeEvent:F,"escape-key")}),N=Vr(F=>{var V;const z=()=>{var P;A(F),(P=Zo(F))==null||P.removeEventListener("keydown",z)};(V=Zo(F))==null||V.addEventListener("keydown",z)}),O=Vr(F=>{const V=k.current;k.current=!1;const z=E.current;if(E.current=!1,f==="click"&&z||V||typeof b=="function"&&!b(F))return;const P=Zo(F),B="["+ga("inert")+"]",L=gn(s).querySelectorAll(B);let $=$e(P)?P:null;for(;$&&!Ri($);){const ee=Do($);if(Ri(ee)||!$e(ee))break;$=ee}if(L.length&&$e(P)&&!ZG(P)&&!bt(P,s)&&Array.from(L).every(ee=>!bt($,ee)))return;if(Qt(P)&&s){const ee=P.clientWidth>0&&P.scrollWidth>P.clientWidth,te=P.clientHeight>0&&P.scrollHeight>P.clientHeight;let re=te&&F.offsetX>P.clientWidth;if(te&&mr(P).direction==="rtl"&&(re=F.offsetX<=P.offsetWidth-P.clientWidth),re||ee&&F.offsetY>P.clientHeight)return}const q=v&&aa(v.nodesRef.current,o).some(ee=>{var te;return tm(F,(te=ee.context)==null?void 0:te.elements.floating)});if(tm(F,s)||tm(F,a)||q)return;const Q=v?aa(v.nodesRef.current,o):[];if(Q.length>0){let ee=!0;if(Q.forEach(te=>{var re;if((re=te.context)!=null&&re.open&&!te.context.dataRef.current.__outsidePressBubbles){ee=!1;return}}),!ee)return}r(!1,F,"outside-press")}),M=Vr(F=>{var V;const z=()=>{var P;O(F),(P=Zo(F))==null||P.removeEventListener(f,z)};(V=Zo(F))==null||V.addEventListener(f,z)});return C.useEffect(()=>{if(!n||!u)return;l.current.__escapeKeyBubbles=T,l.current.__outsidePressBubbles=R;function F(P){r(!1,P,"ancestor-scroll")}const V=gn(s);c&&V.addEventListener("keydown",_?N:A,_),b&&V.addEventListener(f,S?M:O,S);let z=[];return m&&($e(a)&&(z=xi(a)),$e(s)&&(z=z.concat(xi(s))),!$e(i)&&i&&i.contextElement&&(z=z.concat(xi(i.contextElement)))),z=z.filter(P=>{var B;return P!==((B=V.defaultView)==null?void 0:B.visualViewport)}),z.forEach(P=>{P.addEventListener("scroll",F,{passive:!0})}),()=>{c&&V.removeEventListener("keydown",_?N:A,_),b&&V.removeEventListener(f,S?M:O,S),z.forEach(P=>{P.removeEventListener("scroll",F)})}},[l,s,a,i,c,b,f,n,r,m,u,T,R,A,_,N,O,S,M]),C.useEffect(()=>{k.current=!1},[b,f]),C.useMemo(()=>u?{reference:{onKeyDown:A,[Lq[p]]:F=>{h&&r(!1,F.nativeEvent,"reference-press")}},floating:{onKeyDown:A,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[Bq[f]]:()=>{k.current=!0}}}:{},[u,h,f,p,r,A])}function _N(e){var t;e===void 0&&(e={});const{open:n=!1,onOpenChange:r,nodeId:o}=e,[i,a]=C.useState(null),s=((t=e.elements)==null?void 0:t.reference)||i,l=OK(e),u=tc(),c=Nh()!=null,d=Vr((k,E,T)=>{k&&(h.current.openEvent=E),p.emit("openchange",{open:k,event:E,reason:T,nested:c}),r==null||r(k,E,T)}),f=C.useRef(null),h=C.useRef({}),p=C.useState(()=>wq())[0],m=Ih(),y=C.useCallback(k=>{const E=$e(k)?{getBoundingClientRect:()=>k.getBoundingClientRect(),contextElement:k}:k;l.refs.setReference(E)},[l.refs]),g=C.useCallback(k=>{($e(k)||k===null)&&(f.current=k,a(k)),($e(l.refs.reference.current)||l.refs.reference.current===null||k!==null&&!$e(k))&&l.refs.setReference(k)},[l.refs]),v=C.useMemo(()=>({...l.refs,setReference:g,setPositionReference:y,domReference:f}),[l.refs,g,y]),x=C.useMemo(()=>({...l.elements,domReference:s}),[l.elements,s]),b=C.useMemo(()=>({...l,refs:v,elements:x,dataRef:h,nodeId:o,floatingId:m,events:p,open:n,onOpenChange:d}),[l,o,m,p,n,d,v,x]);return He(()=>{const k=u==null?void 0:u.nodesRef.current.find(E=>E.id===o);k&&(k.context=b)}),C.useMemo(()=>({...l,context:b,refs:v,elements:x}),[l,v,x,b])}function jq(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:o,refs:i,elements:{domReference:a}}=e,{enabled:s=!0,visibleOnly:l=!0}=t,u=C.useRef(!1),c=C.useRef(),d=C.useRef(!0);return C.useEffect(()=>{if(!s)return;const f=Dn(a);function h(){!n&&Qt(a)&&a===zr(gn(a))&&(u.current=!0)}function p(){d.current=!0}return f.addEventListener("blur",h),f.addEventListener("keydown",p,!0),()=>{f.removeEventListener("blur",h),f.removeEventListener("keydown",p,!0)}},[a,n,s]),C.useEffect(()=>{if(!s)return;function f(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(u.current=!0)}return o.on("openchange",f),()=>{o.off("openchange",f)}},[o,s]),C.useEffect(()=>()=>{clearTimeout(c.current)},[]),C.useMemo(()=>s?{reference:{onPointerDown(f){dx(f.nativeEvent)||(d.current=!1)},onMouseLeave(){u.current=!1},onFocus(f){if(u.current)return;const h=Zo(f.nativeEvent);if(l&&$e(h))try{if(fx()&&tN())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!d.current&&!hx(h))return}r(!0,f.nativeEvent,"focus")},onBlur(f){u.current=!1;const h=f.relatedTarget,p=$e(h)&&h.hasAttribute(ga("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{const m=zr(a?a.ownerDocument:document);!h&&m===a||bt(i.floating.current,m)||bt(a,m)||p||r(!1,f.nativeEvent,"focus")})}}}:{},[s,l,a,i,r])}const X2="active",Y2="selected";function cm(e,t,n){const r=new Map,o=n==="item";let i=e;if(o&&e){const{[X2]:a,[Y2]:s,...l}=e;i=l}return{...n==="floating"&&{tabIndex:-1},...i,...t.map(a=>{const s=a?a[n]:null;return typeof s=="function"?e?s(e):null:s}).concat(e).reduce((a,s)=>(s&&Object.entries(s).forEach(l=>{let[u,c]=l;if(!(o&&[X2,Y2].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var d;(d=r.get(u))==null||d.push(c),a[u]=function(){for(var f,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(f=r.get(u))==null?void 0:f.map(y=>y(...p)).find(y=>y!==void 0)}}}else a[u]=c}),a),{})}}function IN(e){e===void 0&&(e=[]);const t=e,n=C.useCallback(i=>cm(i,e,"reference"),t),r=C.useCallback(i=>cm(i,e,"floating"),t),o=C.useCallback(i=>cm(i,e,"item"),e.map(i=>i==null?void 0:i.item));return C.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:o}),[n,r,o])}let Q2=!1;function Ph(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function J2(e,t){return Ph(t,e===xx||e===ec,e===Ws||e===tl)}function dm(e,t,n){return Ph(t,e===ec,n?e===Ws:e===tl)||e==="Enter"||e===" "||e===""}function zq(e,t,n){return Ph(t,n?e===Ws:e===tl,e===ec)}function Z2(e,t,n){return Ph(t,n?e===tl:e===Ws,e===xx)}function Vq(e,t){const{open:n,onOpenChange:r,refs:o,elements:{domReference:i,floating:a}}=e,{listRef:s,activeIndex:l,onNavigate:u=()=>{},enabled:c=!0,selectedIndex:d=null,allowEscape:f=!1,loop:h=!1,nested:p=!1,rtl:m=!1,virtual:y=!1,focusItemOnOpen:g="auto",focusItemOnHover:v=!0,openOnArrowKeyDown:x=!0,disabledIndices:b=void 0,orientation:k="vertical",cols:E=1,scrollItemIntoView:T=!0,virtualItemRef:R,itemSizes:_,dense:S=!1}=t,A=Nh(),N=tc(),O=Vr(u),M=C.useRef(g),F=C.useRef(d??-1),V=C.useRef(null),z=C.useRef(!0),P=C.useRef(O),B=C.useRef(!!a),L=C.useRef(!1),$=C.useRef(!1),q=Zr(b),Q=Zr(n),ee=Zr(T),[te,re]=C.useState(),[ce,ae]=C.useState(),me=Vr(function(se,be,Re){Re===void 0&&(Re=!1);const we=se.current[be.current];we&&(y?(re(we.id),N==null||N.events.emit("virtualfocus",we),R&&(R.current=we)):ho(we,{preventScroll:!0,sync:tN()&&fx()?Q2||L.current:!1}),requestAnimationFrame(()=>{const Fe=ee.current;Fe&&we&&(Re||!z.current)&&(we.scrollIntoView==null||we.scrollIntoView(typeof Fe=="boolean"?{block:"nearest",inline:"nearest"}:Fe))}))});He(()=>{document.createElement("div").focus({get preventScroll(){return Q2=!0,!1}})},[]),He(()=>{c&&(n&&a?M.current&&d!=null&&($.current=!0,F.current=d,O(d)):B.current&&(F.current=-1,P.current(null)))},[c,n,a,d,O]),He(()=>{if(c&&n&&a)if(l==null){if(L.current=!1,d!=null)return;if(B.current&&(F.current=-1,me(s,F)),!B.current&&M.current&&(V.current!=null||M.current===!0&&V.current==null)){let se=0;const be=()=>{s.current[0]==null?(se<2&&(se?requestAnimationFrame:queueMicrotask)(be),se++):(F.current=V.current==null||dm(V.current,k,m)||p?om(s,q.current):L2(s,q.current),V.current=null,O(F.current))};be()}}else Wl(s,l)||(F.current=l,me(s,F,$.current),$.current=!1)},[c,n,a,l,d,p,s,k,m,O,me,q]),He(()=>{var se;if(!c||a||!N||y||!B.current)return;const be=N.nodesRef.current,Re=(se=be.find(At=>At.id===A))==null||(se=se.context)==null?void 0:se.elements.floating,we=zr(gn(a)),Fe=be.some(At=>At.context&&bt(At.context.elements.floating,we));Re&&!Fe&&z.current&&Re.focus({preventScroll:!0})},[c,a,N,A,y]),He(()=>{if(!c||!N||!y||A)return;function se(be){ae(be.id),R&&(R.current=be)}return N.events.on("virtualfocus",se),()=>{N.events.off("virtualfocus",se)}},[c,N,y,A,R]),He(()=>{P.current=O,B.current=!!a}),He(()=>{n||(V.current=null)},[n]);const Ae=l!=null,Ce=C.useMemo(()=>{function se(Re){if(!n)return;const we=s.current.indexOf(Re);we!==-1&&O(we)}return{onFocus(Re){let{currentTarget:we}=Re;se(we)},onClick:Re=>{let{currentTarget:we}=Re;return we.focus({preventScroll:!0})},...v&&{onMouseMove(Re){let{currentTarget:we}=Re;se(we)},onPointerLeave(Re){let{pointerType:we}=Re;!z.current||we==="touch"||(F.current=-1,me(s,F),O(null),y||ho(o.floating.current,{preventScroll:!0}))}}}},[n,o,me,v,s,O,y]);return C.useMemo(()=>{if(!c)return{};const se=q.current;function be(ge){if(z.current=!1,L.current=!0,!Q.current&&ge.currentTarget===o.floating.current)return;if(p&&Z2(ge.key,k,m)){Gt(ge),r(!1,ge.nativeEvent,"list-navigation"),Qt(i)&&!y&&i.focus();return}const Xe=F.current,Vt=om(s,se),Dt=L2(s,se);if(ge.key==="Home"&&(Gt(ge),F.current=Vt,O(F.current)),ge.key==="End"&&(Gt(ge),F.current=Dt,O(F.current)),E>1){const Jt=_||Array.from({length:s.current.length},()=>({width:1,height:1})),Mt=dq(Jt,E,S),yr=Mt.findIndex(Cn=>Cn!=null&&!(se!=null&&se.includes(Cn))),kn=Mt.reduce((Cn,tr,ht)=>tr!=null&&!(se!=null&&se.includes(tr))?ht:Cn,-1);if(F.current=Mt[cq({current:Mt.map(Cn=>Cn!=null?s.current[Cn]:null)},{event:ge,orientation:k,loop:h,cols:E,disabledIndices:hq([...se||[],void 0],Mt),minIndex:yr,maxIndex:kn,prevIndex:fq(F.current,Jt,Mt,E,ge.key===ec?"bl":ge.key===tl?"tr":"tl"),stopEvent:!0})],O(F.current),k==="both")return}if(J2(ge.key,k)){if(Gt(ge),n&&!y&&zr(ge.currentTarget.ownerDocument)===ge.currentTarget){F.current=dm(ge.key,k,m)?Vt:Dt,O(F.current);return}dm(ge.key,k,m)?h?F.current=Xe>=Dt?f&&Xe!==s.current.length?-1:Vt:nn(s,{startingIndex:Xe,disabledIndices:se}):F.current=Math.min(Dt,nn(s,{startingIndex:Xe,disabledIndices:se})):h?F.current=Xe<=Vt?f&&Xe!==-1?s.current.length:Dt:nn(s,{startingIndex:Xe,decrement:!0,disabledIndices:se}):F.current=Math.max(Vt,nn(s,{startingIndex:Xe,decrement:!0,disabledIndices:se})),Wl(s,F.current)?O(null):O(F.current)}}function Re(ge){g==="auto"&&eN(ge.nativeEvent)&&(M.current=!0)}function we(ge){M.current=g,g==="auto"&&dx(ge.nativeEvent)&&(M.current=!0)}const Fe=y&&n&&Ae&&{"aria-activedescendant":ce||te},At=s.current.find(ge=>(ge==null?void 0:ge.id)===te);return{reference:{...Fe,onKeyDown(ge){z.current=!1;const Xe=ge.key.indexOf("Arrow")===0,Vt=zq(ge.key,k,m),Dt=Z2(ge.key,k,m),Jt=J2(ge.key,k),Mt=(p?Vt:Jt)||ge.key==="Enter"||ge.key.trim()==="";if(y&&n){const tr=N==null?void 0:N.nodesRef.current.find(Wo=>Wo.parentId==null),ht=N&&tr?Rq(N.nodesRef.current,tr.id):null;if(Xe&&ht&&R){const Wo=new KeyboardEvent("keydown",{key:ge.key,bubbles:!0});if(Vt||Dt){var yr,kn;const Dh=((yr=ht.context)==null?void 0:yr.elements.domReference)===ge.currentTarget,nc=Dt&&!Dh?(kn=ht.context)==null?void 0:kn.elements.domReference:Vt?At:null;nc&&(Gt(ge),nc.dispatchEvent(Wo),ae(void 0))}if(Jt&&ht.context&&ht.context.open&&ht.parentId&&ge.currentTarget!==ht.context.elements.domReference){var Cn;Gt(ge),(Cn=ht.context.elements.domReference)==null||Cn.dispatchEvent(Wo);return}}return be(ge)}if(!(!n&&!x&&Xe)){if(Mt&&(V.current=p&&Jt?null:ge.key),p){Vt&&(Gt(ge),n?(F.current=om(s,se),O(F.current)):r(!0,ge.nativeEvent,"list-navigation"));return}Jt&&(d!=null&&(F.current=d),Gt(ge),!n&&x?r(!0,ge.nativeEvent,"list-navigation"):be(ge),n&&O(F.current))}},onFocus(){n&&O(null)},onPointerDown:we,onMouseDown:Re,onClick:Re},floating:{"aria-orientation":k==="both"?void 0:k,...!nN(i)&&Fe,onKeyDown:be,onPointerMove(){z.current=!0}},item:Ce}},[i,o,te,ce,q,Q,s,c,k,m,y,n,Ae,p,d,x,f,E,h,g,O,r,Ce,N,R,_,S])}const Wq=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function NN(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:o}=e,{enabled:i=!0,role:a="dialog"}=t,s=(n=Wq.get(a))!=null?n:a,l=Ih(),c=Nh()!=null;return C.useMemo(()=>{if(!i)return{};const d={id:o,...s&&{role:s}};return s==="tooltip"||a==="label"?{reference:{["aria-"+(a==="label"?"labelledby":"describedby")]:r?o:void 0},floating:d}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":r?o:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:l},...s==="menu"&&c&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},floating:{...d,...s==="menu"&&{"aria-labelledby":l}},item(f){let{active:h,selected:p}=f;const m={role:"option",...h&&{id:o+"-option"}};switch(a){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[i,a,s,r,o,l,c])}function $q(e,t){var n;const{open:r,dataRef:o}=e,{listRef:i,activeIndex:a,onMatch:s,onTypingChange:l,enabled:u=!0,findMatch:c=null,resetMs:d=750,ignoreKeys:f=[],selectedIndex:h=null}=t,p=C.useRef(),m=C.useRef(""),y=C.useRef((n=h??a)!=null?n:-1),g=C.useRef(null),v=Vr(s),x=Vr(l),b=Zr(c),k=Zr(f);return He(()=>{r&&(clearTimeout(p.current),g.current=null,m.current="")},[r]),He(()=>{if(r&&m.current===""){var E;y.current=(E=h??a)!=null?E:-1}},[r,h,a]),C.useMemo(()=>{if(!u)return{};function E(_){_?o.current.typing||(o.current.typing=_,x(_)):o.current.typing&&(o.current.typing=_,x(_))}function T(_,S,A){const N=b.current?b.current(S,A):S.find(O=>(O==null?void 0:O.toLocaleLowerCase().indexOf(A.toLocaleLowerCase()))===0);return N?_.indexOf(N):-1}function R(_){const S=i.current;if(m.current.length>0&&m.current[0]!==" "&&(T(S,S,m.current)===-1?E(!1):_.key===" "&&Gt(_)),S==null||k.current.includes(_.key)||_.key.length!==1||_.ctrlKey||_.metaKey||_.altKey)return;r&&_.key!==" "&&(Gt(_),E(!0)),S.every(M=>{var F,V;return M?((F=M[0])==null?void 0:F.toLocaleLowerCase())!==((V=M[1])==null?void 0:V.toLocaleLowerCase()):!0})&&m.current===_.key&&(m.current="",y.current=g.current),m.current+=_.key,clearTimeout(p.current),p.current=setTimeout(()=>{m.current="",y.current=g.current,E(!1)},d);const N=y.current,O=T(S,[...S.slice((N||0)+1),...S.slice(0,(N||0)+1)],m.current);O!==-1?(v(O),g.current=O):_.key!==" "&&(m.current="",E(!1))}return{reference:{onKeyDown:R},floating:{onKeyDown:R,onKeyUp(_){_.key===" "&&E(!1)}}}},[u,r,o,i,d,k,b,v,x])}function ek(e,t){const[n,r]=e;let o=!1;const i=t.length;for(let a=0,s=i-1;a<i;s=a++){const[l,u]=t[a]||[0,0],[c,d]=t[s]||[0,0];u>=r!=d>=r&&n<=(c-l)*(r-u)/(d-u)+l&&(o=!o)}return o}function Uq(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function Hq(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=e;let o,i=!1,a=null,s=null,l=performance.now();function u(d,f){const h=performance.now(),p=h-l;if(a===null||s===null||p===0)return a=d,s=f,l=h,null;const m=d-a,y=f-s,v=Math.sqrt(m*m+y*y)/p;return a=d,s=f,l=h,v}const c=d=>{let{x:f,y:h,placement:p,elements:m,onClose:y,nodeId:g,tree:v}=d;return function(b){function k(){clearTimeout(o),y()}if(clearTimeout(o),!m.domReference||!m.floating||p==null||f==null||h==null)return;const{clientX:E,clientY:T}=b,R=[E,T],_=Zo(b),S=b.type==="mouseleave",A=bt(m.floating,_),N=bt(m.domReference,_),O=m.domReference.getBoundingClientRect(),M=m.floating.getBoundingClientRect(),F=p.split("-")[0],V=f>M.right-M.width/2,z=h>M.bottom-M.height/2,P=Uq(R,O),B=M.width>O.width,L=M.height>O.height,$=(B?O:M).left,q=(B?O:M).right,Q=(L?O:M).top,ee=(L?O:M).bottom;if(A&&(i=!0,!S))return;if(N&&(i=!1),N&&!S){i=!0;return}if(S&&$e(b.relatedTarget)&&bt(m.floating,b.relatedTarget)||v&&aa(v.nodesRef.current,g).some(ce=>{let{context:ae}=ce;return ae==null?void 0:ae.open}))return;if(F==="top"&&h>=O.bottom-1||F==="bottom"&&h<=O.top+1||F==="left"&&f>=O.right-1||F==="right"&&f<=O.left+1)return k();let te=[];switch(F){case"top":te=[[$,O.top+1],[$,M.bottom-1],[q,M.bottom-1],[q,O.top+1]];break;case"bottom":te=[[$,M.top+1],[$,O.bottom-1],[q,O.bottom-1],[q,M.top+1]];break;case"left":te=[[M.right-1,ee],[M.right-1,Q],[O.left+1,Q],[O.left+1,ee]];break;case"right":te=[[O.right-1,ee],[O.right-1,Q],[M.left+1,Q],[M.left+1,ee]];break}function re(ce){let[ae,me]=ce;switch(F){case"top":{const Ae=[B?ae+t/2:V?ae+t*4:ae-t*4,me+t+1],Ce=[B?ae-t/2:V?ae+t*4:ae-t*4,me+t+1],se=[[M.left,V||B?M.bottom-t:M.top],[M.right,V?B?M.bottom-t:M.top:M.bottom-t]];return[Ae,Ce,...se]}case"bottom":{const Ae=[B?ae+t/2:V?ae+t*4:ae-t*4,me-t],Ce=[B?ae-t/2:V?ae+t*4:ae-t*4,me-t],se=[[M.left,V||B?M.top+t:M.bottom],[M.right,V?B?M.top+t:M.bottom:M.top+t]];return[Ae,Ce,...se]}case"left":{const Ae=[ae+t+1,L?me+t/2:z?me+t*4:me-t*4],Ce=[ae+t+1,L?me-t/2:z?me+t*4:me-t*4];return[...[[z||L?M.right-t:M.left,M.top],[z?L?M.right-t:M.left:M.right-t,M.bottom]],Ae,Ce]}case"right":{const Ae=[ae-t,L?me+t/2:z?me+t*4:me-t*4],Ce=[ae-t,L?me-t/2:z?me+t*4:me-t*4],se=[[z||L?M.left+t:M.right,M.top],[z?L?M.left+t:M.right:M.left+t,M.bottom]];return[Ae,Ce,...se]}}}if(!ek([E,T],te)){if(i&&!P)return k();if(!S&&r){const ce=u(b.clientX,b.clientY);if(ce!==null&&ce<.1)return k()}ek([E,T],re([f,h]))?!i&&r&&(o=window.setTimeout(k,40)):k()}}};return c.__options={blockPointerEvents:n},c}const Gq=({arrowRef:e,placement:t})=>{const n=[];return n.push(BK(8)),n.push(t==="auto"?VK():zK()),n.push(jK({padding:8})),e!=null&&e.current&&n.push(WK({element:e.current})),n},Kq=({placement:e})=>e==="auto"?void 0:e,qq=({placement:e})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[e.split("-")[0]],PN=({open:e,arrowRef:t,placement:n="top",setOpen:r})=>_N({placement:Kq({placement:n}),open:e,onOpenChange:r,whileElementsMounted:dN,middleware:Gq({placement:n,arrowRef:t})}),AN=({context:e,trigger:t,role:n="tooltip",interactions:r=[]})=>IN([RN(e,{enabled:t==="click"}),Eq(e,{enabled:t==="hover",handleClose:Hq()}),TN(e),NN(e,{role:n}),...r]),DN=C.createContext(void 0);function wx(){const e=C.useContext(DN);if(!e)throw new Error("useDropdownContext should be used within the DropdownContext provider!");return e}const kx=({className:e,theme:t={},...n})=>{const{theme:r}=wx(),o=t.divider??r.floating.divider;return w.jsx("div",{className:K(o,e),...n})},MN=({children:e,className:t,theme:n={},...r})=>{const{theme:o}=wx(),i=n.header??o.floating.header;return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:K(i,t),...r,children:e}),w.jsx(kx,{})]})},FN=C.forwardRef(({children:e,className:t,icon:n,onClick:r,theme:o={},...i},a)=>{const{ref:s,index:l}=vq({label:typeof e=="string"?e:void 0}),u=vN([a,s]),{theme:c,activeIndex:d,dismissOnClick:f,getItemProps:h,handleSelect:p}=wx(),m=d===l,y=Z(c.floating.item,o),g=i;return w.jsx("li",{role:"menuitem",className:y.container,children:w.jsxs(ix,{ref:u,className:K(y.base,t),...g,...h({onClick:()=>{r==null||r(),f&&p(null)}}),tabIndex:m?0:-1,children:[n&&w.jsx(n,{className:y.icon}),e]})})});FN.displayName="DropdownItem";const Xq={top:iH,right:rx,bottom:xI,left:bI},Yq=({refs:e,children:t,inline:n,theme:r,disabled:o,setButtonWidth:i,getReferenceProps:a,renderTrigger:s,...l})=>{const u=e.reference,c=a();if(C.useEffect(()=>{u.current&&(i==null||i(u.current.clientWidth))},[u,i]),s){const d=s(r);return C.cloneElement(d,{ref:e.setReference,disabled:o,...c,...d.props})}return n?w.jsx("button",{type:"button",ref:e.setReference,className:r==null?void 0:r.inlineWrapper,disabled:o,...c,children:t}):w.jsx(zI,{...l,disabled:o,type:"button",ref:e.setReference,...c,children:t})},ON=({children:e,className:t,dismissOnClick:n=!0,theme:r={},renderTrigger:o,...i})=>{const[a,s]=C.useState(!1),[l,u]=C.useState(null),[c,d]=C.useState(null),[f,h]=C.useState(void 0),p=C.useRef([]),m=C.useRef([]),y=Z(ye().dropdown,r),g=i,v=i["data-testid"]||"flowbite-dropdown-target",{placement:x=i.inline?"bottom-start":"bottom",trigger:b="click",label:k,inline:E,arrowIcon:T=!0,...R}=g,_=C.useCallback(L=>{d(L),s(!1)},[]),S=C.useCallback(L=>{a?u(L):_(L)},[a,_]),{context:A,floatingStyles:N,refs:O}=PN({open:a,setOpen:s,placement:x}),M=Vq(A,{listRef:p,activeIndex:l,selectedIndex:c,onNavigate:u}),F=$q(A,{listRef:m,activeIndex:l,selectedIndex:c,onMatch:S}),{getReferenceProps:V,getFloatingProps:z,getItemProps:P}=AN({context:A,role:"menu",trigger:b,interactions:[M,F]}),B=C.useMemo(()=>{const[L]=x.split("-");return Xq[L]??xI},[x]);return w.jsxs(DN.Provider,{value:{theme:y,activeIndex:l,dismissOnClick:n,getItemProps:P,handleSelect:_},children:[w.jsxs(Yq,{...R,refs:O,inline:E,theme:y,"data-testid":v,className:K(y.floating.target,R.className),setButtonWidth:h,getReferenceProps:V,renderTrigger:o,children:[k,T&&w.jsx(B,{className:y.arrowIcon})]}),a&&w.jsx(SN,{context:A,modal:!1,children:w.jsx("div",{ref:O.setFloating,style:{...N,minWidth:f},"data-testid":"flowbite-dropdown","aria-expanded":a,...z({className:K(y.floating.base,y.floating.animation,"duration-100",!a&&y.floating.hidden,y.floating.style.auto,t)}),children:w.jsx(gq,{elementsRef:p,labelsRef:m,children:w.jsx("ul",{className:y.content,tabIndex:-1,children:e})})})})]})};ON.displayName="Dropdown";MN.displayName="Dropdown.Header";kx.displayName="Dropdown.Divider";Object.assign(ON,{Item:FN,Header:MN,Divider:kx});const Qq=C.forwardRef(({className:e,color:t="gray",helperText:n,sizing:r="md",theme:o={},...i},a)=>{const s=Z(ye().fileInput,o);return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:K(s.root.base,e),children:w.jsx("div",{className:s.field.base,children:w.jsx("input",{className:K(s.field.input.base,s.field.input.colors[t],s.field.input.sizes[r]),...i,type:"file",ref:a})})}),n&&w.jsx(Qu,{color:t,children:n})]})});Qq.displayName="FileInput";const Jq=C.forwardRef(({label:e,helperText:t,color:n="default",sizing:r="md",variant:o,disabled:i=!1,theme:a={},className:s,...l},u)=>{const c=C.useId(),d=Z(ye().floatingLabel,a);return w.jsxs("div",{children:[w.jsxs("div",{className:K("relative",o==="standard"?"z-0":""),children:[w.jsx("input",{type:"text",id:l.id?l.id:"floatingLabel"+c,"aria-describedby":"outlined_success_help",className:K(d.input[n][o][r],s),placeholder:" ","data-testid":"floating-label",disabled:i,...l,ref:u}),w.jsx("label",{htmlFor:l.id?l.id:"floatingLabel"+c,className:K(d.label[n][o][r],s),children:e})]}),w.jsx("p",{id:"outlined_helper_text"+c,className:K(d.helperText[n],s),children:t})]})});Jq.displayName="FloatingLabel";const LN=({alt:e,className:t,children:n,href:r,name:o,src:i,theme:a={},...s})=>{const l=Z(ye().footer.brand,a);return w.jsx("div",{children:r?w.jsxs("a",{"data-testid":"flowbite-footer-brand",href:r,className:K(l.base,t),...s,children:[w.jsx("img",{alt:e,src:i,className:l.img}),w.jsx("span",{"data-testid":"flowbite-footer-brand-span",className:l.span,children:o}),n]}):w.jsx("img",{alt:e,"data-testid":"flowbite-footer-brand",src:i,className:K(l.img,t),...s})})},BN=({by:e,className:t,href:n,theme:r={},year:o,...i})=>{const a=Z(ye().footer.copyright,r);return w.jsxs("div",{"data-testid":"flowbite-footer-copyright",className:K(a.base,t),...i,children:[" ",o,n?w.jsx("a",{href:n,className:a.href,children:e}):w.jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:a.span,children:e})]})},jN=({className:e,theme:t={},...n})=>{const r=Z(ye().footer.divider,t);return w.jsx("hr",{"data-testid":"footer-divider",className:K(r.base,e),...n})},zN=({ariaLabel:e,className:t,href:n,icon:r,theme:o={},...i})=>{const a=Z(ye().footer.icon,o);return w.jsx("div",{children:n?w.jsx("a",{"aria-label":e,"data-testid":"flowbite-footer-icon",href:n,className:K(a.base,t),...i,children:w.jsx(r,{className:a.size})}):w.jsx(r,{"data-testid":"flowbite-footer-icon",className:a.size,...i})})},VN=({as:e="a",children:t,className:n,href:r,theme:o={},...i})=>{const a=Z(ye().footer.groupLink.link,o);return w.jsx("li",{className:K(a.base,n),children:w.jsx(e,{href:r,className:a.href,...i,children:t})})},WN=({children:e,className:t,col:n=!1,theme:r={},...o})=>{const i=Z(ye().footer.groupLink,r);return w.jsx("ul",{"data-testid":"footer-groupLink",className:K(i.base,n&&i.col,t),...o,children:e})},$N=({as:e="h2",className:t,theme:n={},title:r,...o})=>{const i=Z(ye().footer.title,n);return w.jsx(e,{"data-testid":"flowbite-footer-title",className:K(i.base,t),...o,children:r})},UN=({bgDark:e=!1,children:t,className:n,container:r=!1,theme:o={},...i})=>{const a=Z(ye().footer,o);return w.jsx("footer",{"data-testid":"flowbite-footer",className:K(a.root.base,e&&a.root.bgDark,r&&a.root.container,n),...i,children:t})};UN.displayName="Footer";BN.displayName="Footer.Copyright";VN.displayName="Footer.Link";LN.displayName="Footer.Brand";WN.displayName="Footer.LinkGroup";zN.displayName="Footer.Icon";$N.displayName="Footer.Title";jN.displayName="Footer.Divider";Object.assign(UN,{Copyright:BN,Link:VN,LinkGroup:WN,Brand:LN,Icon:zN,Title:$N,Divider:jN});const HN=({children:e,className:t,icon:n,theme:r={},...o})=>{const i=Z(ye().list.item,r);return w.jsxs("li",{className:K(i.withIcon[n?"on":"off"],t),...o,children:[n&&w.jsx(n,{className:K(i.icon)}),e]})},GN=({children:e,className:t,unstyled:n,nested:r,ordered:o,horizontal:i,theme:a={},...s})=>{const l=Z(ye().list,a),u=o?"ol":"ul";return w.jsx(u,{className:K(l.root.base,l.root.ordered[o?"on":"off"],n&&l.root.unstyled,r&&l.root.nested,i&&l.root.horizontal,t),...s,children:e})};GN.displayName="List";HN.displayName="List.Item";Object.assign(GN,{Item:HN});const KN=({active:e,children:t,className:n,href:r,icon:o,onClick:i,theme:a={},disabled:s,...l})=>{const u=Z(ye().listGroup.item,a),c=typeof r<"u",d=c?"a":"button";return w.jsx("li",{className:K(u.base,n),children:w.jsxs(d,{href:r,onClick:i,type:c?void 0:"button",disabled:s,className:K(u.link.active[e?"on":"off"],u.link.disabled[s?"on":"off"],u.link.base,u.link.href[c?"on":"off"]),...l,children:[o&&w.jsx(o,{"aria-hidden":!0,"data-testid":"flowbite-list-group-item-icon",className:u.link.icon}),t]})})},qN=({children:e,className:t,theme:n={},...r})=>{const o=Z(ye().listGroup,n);return w.jsx("ul",{className:K(o.root.base,t),...r,children:e})};qN.displayName="ListGroup";KN.displayName="ListGroup.Item";Object.assign(qN,{Item:KN});const XN=C.createContext(void 0);function Cx(){const e=C.useContext(XN);if(!e)throw new Error("useModalContext should be used within the ModalContext provider!");return e}const YN=({children:e,className:t,theme:n={},...r})=>{const{theme:o,popup:i}=Cx(),a=Z(o.body,n);return w.jsx("div",{className:K(a.base,i&&[a.popup],t),...r,children:e})},QN=({children:e,className:t,theme:n={},...r})=>{const{theme:o,popup:i}=Cx(),a=Z(o.footer,n);return w.jsx("div",{className:K(a.base,!i&&a.popup,t),...r,children:e})},JN=({as:e="h3",children:t,className:n,theme:r={},id:o,...i})=>{const a=C.useId(),s=o||a,{theme:l,popup:u,onClose:c,setHeaderId:d}=Cx(),f=Z(l.header,r);return C.useLayoutEffect(()=>(d(s),()=>d(void 0)),[s,d]),w.jsxs("div",{className:K(f.base,u&&f.popup,n),...i,children:[w.jsx(e,{id:s,className:f.title,children:t}),w.jsx("button",{"aria-label":"Close",className:f.close.base,type:"button",onClick:c,children:w.jsx(aH,{"aria-hidden":!0,className:f.close.icon})})]})},ZN=C.forwardRef(({children:e,className:t,dismissible:n=!1,onClose:r,popup:o,position:i="center",root:a,show:s,size:l="2xl",theme:u={},initialFocus:c,...d},f)=>{const[h,p]=C.useState(void 0),m=Z(ye().modal,u),{context:y}=_N({open:s,onOpenChange:()=>r&&r()}),g=vN([y.refs.setFloating,f]),v=RN(y),x=TN(y,{outsidePressEvent:"mousedown",enabled:n}),b=NN(y),{getFloatingProps:k}=IN([v,x,b]);return s?w.jsx(XN.Provider,{value:{theme:m,popup:o,onClose:r,setHeaderId:p},children:w.jsx(Mq,{root:a,children:w.jsx(Oq,{lockScroll:!0,"data-testid":"modal-overlay",className:K(m.root.base,m.root.positions[i],s?m.root.show.on:m.root.show.off,t),...d,children:w.jsx(SN,{context:y,initialFocus:c,children:w.jsx("div",{ref:g,...k(d),"aria-labelledby":h,className:K(m.content.base,m.root.sizes[l]),children:w.jsx("div",{className:m.content.inner,children:e})})})})})}):null});ZN.displayName="Modal";JN.displayName="Modal.Header";YN.displayName="Modal.Body";QN.displayName="Modal.Footer";Object.assign(ZN,{Header:JN,Body:YN,Footer:QN});const e4=C.createContext(void 0);function Ah(){const e=C.useContext(e4);if(!e)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return e}const t4=({as:e="a",children:t,className:n,theme:r={},...o})=>{const{theme:i}=Ah(),a=Z(i.brand,r);return w.jsx(e,{className:K(a.base,n),...o,children:t})},n4=({children:e,className:t,theme:n={},...r})=>{const{theme:o,isOpen:i}=Ah(),a=Z(o.collapse,n);return w.jsx("div",{"data-testid":"flowbite-navbar-collapse",className:K(a.base,a.hidden[i?"off":"on"],t),...r,children:w.jsx("ul",{className:a.list,children:e})})},r4=({active:e,as:t="a",disabled:n,children:r,className:o,theme:i={},onClick:a,...s})=>{const{theme:l,setIsOpen:u}=Ah(),c=Z(l.link,i),d=f=>{u(!1),a==null||a(f)};return w.jsx("li",{children:w.jsx(t,{className:K(c.base,e&&c.active.on,!e&&!n&&c.active.off,c.disabled[n?"on":"off"],o),onClick:d,...s,children:r})})};function Zq(e){return wn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}const o4=({barIcon:e=Zq,className:t,theme:n={},...r})=>{const{theme:o,isOpen:i,setIsOpen:a}=Ah(),s=Z(o.toggle,n),l=()=>{a(!i)};return w.jsxs("button",{"data-testid":"flowbite-navbar-toggle",onClick:l,className:K(s.base,t),...r,children:[w.jsx("span",{className:"sr-only",children:"Open main menu"}),w.jsx(e,{"aria-hidden":!0,className:s.icon})]})},i4=({border:e,children:t,className:n,fluid:r=!1,menuOpen:o,rounded:i,theme:a={},...s})=>{const[l,u]=C.useState(o),c=Z(ye().navbar,a);return w.jsx(e4.Provider,{value:{theme:c,isOpen:l,setIsOpen:u},children:w.jsx("nav",{className:K(c.root.base,c.root.bordered[e?"on":"off"],c.root.rounded[i?"on":"off"],n),...s,children:w.jsx("div",{className:K(c.root.inner.base,c.root.inner.fluid[r?"on":"off"]),children:t})})})};i4.displayName="Navbar";t4.displayName="Navbar.Brand";n4.displayName="Navbar.Collapse";r4.displayName="Navbar.Link";o4.displayName="Navbar.Toggle";Object.assign(i4,{Brand:t4,Collapse:n4,Link:r4,Toggle:o4});const eX=(e,t)=>e>=t?[]:[...Array(t-e+1).keys()].map(n=>n+e),Ex=({active:e,children:t,className:n,onClick:r,theme:o={},...i})=>{const a=Z(ye().pagination,o);return w.jsx("button",{type:"button",className:K(e&&a.pages.selector.active,n),onClick:r,...i,children:t})};Ex.displayName="Pagination.Button";const lv=({children:e,className:t,onClick:n,theme:r={},disabled:o=!1,...i})=>{const a=Z(ye().pagination,r);return w.jsx("button",{type:"button",className:K(o&&a.pages.selector.disabled,t),disabled:o,onClick:n,...i,children:e})};lv.displayName="Pagination.Navigation";const a4=({className:e,currentPage:t,layout:n="pagination",nextLabel:r="Next",onPageChange:o,previousLabel:i="Previous",renderPaginationButton:a=d=>w.jsx(Ex,{...d}),showIcons:s=!1,theme:l={},totalPages:u,...c})=>{const d=Z(ye().pagination,l),f=Math.min(Math.max(n==="pagination"?t+2:t+4,5),u),h=Math.max(1,f-4),p=()=>{o(Math.min(t+1,u))},m=()=>{o(Math.max(t-1,1))};return w.jsxs("nav",{className:K(d.base,e),...c,children:[n==="table"&&w.jsxs("div",{className:d.layout.table.base,children:["Showing ",w.jsx("span",{className:d.layout.table.span,children:h})," to",w.jsx("span",{className:d.layout.table.span,children:f})," of",w.jsx("span",{className:d.layout.table.span,children:u})," Entries"]}),w.jsxs("ul",{className:d.pages.base,children:[w.jsx("li",{children:w.jsxs(lv,{className:K(d.pages.previous.base,s&&d.pages.showIcon),onClick:m,disabled:t===1,children:[s&&w.jsx(tH,{"aria-hidden":!0,className:d.pages.previous.icon}),i]})}),n==="pagination"&&eX(h,f).map(y=>w.jsx("li",{"aria-current":y===t?"page":void 0,children:a({className:K(d.pages.selector.base,t===y&&d.pages.selector.active),active:y===t,onClick:()=>o(y),children:y})},y)),w.jsx("li",{children:w.jsxs(lv,{className:K(d.pages.next.base,s&&d.pages.showIcon),onClick:p,disabled:t===u,children:[r,s&&w.jsx(nH,{"aria-hidden":!0,className:d.pages.next.icon})]})})]})]})};a4.displayName="Pagination";Object.assign(a4,{Button:Ex});const tX=C.forwardRef(({className:e,theme:t={},...n},r)=>{const o=Z(ye().radio,t);return w.jsx("input",{ref:r,type:"radio",className:K(o.root.base,e),...n})});tX.displayName="Radio";const nX=C.forwardRef(({className:e,sizing:t="md",theme:n={},...r},o)=>{const i=Z(ye().rangeSlider,n);return w.jsx(w.Fragment,{children:w.jsx("div",{"data-testid":"flowbite-range-slider",className:K(i.root.base,e),children:w.jsx("div",{className:i.field.base,children:w.jsx("input",{ref:o,type:"range",className:K(i.field.input.base,i.field.input.sizes[t]),...r})})})})});nX.displayName="RangeSlider";const s4=({children:e,className:t,percentFilled:n=0,theme:r={},...o})=>{const i=Z(ye().ratingAdvanced,r);return w.jsxs("div",{className:K(i.base,t),...o,children:[w.jsx("span",{className:i.label,children:e}),w.jsx("div",{className:i.progress.base,children:w.jsx("div",{className:i.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${n}%`}})}),w.jsx("span",{className:i.progress.label,children:`${n}%`})]})},l4=C.createContext(void 0);function rX(){const e=C.useContext(l4);if(!e)throw new Error("useRatingContext should be used within the RatingContext provider!");return e}const u4=({className:e,filled:t=!0,starIcon:n=rH,theme:r={},...o})=>{const{theme:i,size:a="sm"}=rX(),s=Z(i.star,r);return w.jsx(n,{"data-testid":"flowbite-rating-star",className:K(s.sizes[a],s[t?"filled":"empty"],e),...o})},c4=({children:e,className:t,size:n="sm",theme:r={},...o})=>{const i=Z(ye().rating,r);return w.jsx(l4.Provider,{value:{theme:i,size:n},children:w.jsx("div",{className:K(i.root.base,t),...o,children:e})})};c4.displayName="Rating";u4.displayName="Rating.Star";s4.displayName="Rating.Advanced";Object.assign(c4,{Star:u4,Advanced:s4});const oX=C.forwardRef(({addon:e,children:t,className:n,color:r="gray",helperText:o,icon:i,shadow:a,sizing:s="md",theme:l={},...u},c)=>{const d=Z(ye().select,l);return w.jsxs("div",{className:K(d.base,n),children:[e&&w.jsx("span",{className:d.addon,children:e}),w.jsxs("div",{className:d.field.base,children:[i&&w.jsx("div",{className:d.field.icon.base,children:w.jsx(i,{className:d.field.icon.svg})}),w.jsx("select",{className:K(d.field.select.base,d.field.select.colors[r],d.field.select.sizes[s],d.field.select.withIcon[i?"on":"off"],d.field.select.withAddon[e?"on":"off"],d.field.select.withShadow[a?"on":"off"]),...u,ref:c,children:t}),o&&w.jsx(Qu,{color:r,children:o})]})]})});oX.displayName="Select";const iX=({animation:e="duration-300",arrow:t=!0,children:n,className:r,content:o,placement:i="top",style:a="dark",theme:s,trigger:l="hover",minWidth:u,...c})=>{const d=C.useRef(null),[f,h]=C.useState(!1),p=PN({open:f,placement:i,arrowRef:d,setOpen:h}),{context:m,middlewareData:{arrow:{x:y,y:g}={}},refs:v,strategy:x,update:b,x:k,y:E}=p,T=jq(m),{getFloatingProps:R,getReferenceProps:_}=AN({context:m,role:"tooltip",trigger:l,interactions:[T]});return C.useEffect(()=>{if(v.reference.current&&v.floating.current&&f)return dN(v.reference.current,v.floating.current,b)},[f,v.floating,v.reference,b]),w.jsxs(w.Fragment,{children:[w.jsx("div",{ref:v.setReference,className:s.target,"data-testid":"flowbite-tooltip-target",..._(),children:n}),w.jsxs("div",{ref:v.setFloating,"data-testid":"flowbite-tooltip",...R({className:K(s.base,e&&`${s.animation} ${e}`,!f&&s.hidden,s.style[a],r),style:{position:x,top:E??" ",left:k??" ",minWidth:u},...c}),children:[w.jsx("div",{className:s.content,children:o}),t&&w.jsx("div",{className:K(s.arrow.base,a==="dark"&&s.arrow.style.dark,a==="light"&&s.arrow.style.light,a==="auto"&&s.arrow.style.auto),"data-testid":"flowbite-tooltip-arrow",ref:d,style:{top:g??" ",left:y??" ",right:" ",bottom:" ",[qq({placement:p.placement})]:s.arrow.placement},children:""})]})]})},Sx=({animation:e="duration-300",arrow:t=!0,children:n,className:r,content:o,placement:i="top",style:a="dark",theme:s={},trigger:l="hover",...u})=>{const c=Z(ye().tooltip,s);return w.jsx(iX,{animation:e,arrow:t,content:o,placement:i,style:a,theme:c,trigger:l,className:r,...u,children:n})};Sx.displayName="Tooltip";const d4=C.createContext(void 0);function nl(){const e=C.useContext(d4);if(!e)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return e}const Rx=C.createContext(void 0);function aX(){const e=C.useContext(Rx);if(!e)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return e}const f4=({children:e,className:t,icon:n,label:r,chevronIcon:o=yI,renderChevronIcon:i,open:a=!1,theme:s={},...l})=>{const u=C.useId(),[c,d]=C.useState(a),{theme:f,isCollapsed:h}=nl(),p=Z(f.collapse,s);C.useEffect(()=>d(a),[a]);const m=({children:y})=>w.jsx("li",{children:h&&!c?w.jsx(Sx,{content:r,placement:"right",children:y}):y});return w.jsxs(m,{children:[w.jsxs("button",{id:`flowbite-sidebar-collapse-${u}`,onClick:()=>d(!c),title:r,type:"button",className:K(p.button,t),...l,children:[n&&w.jsx(n,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-collapse-icon",className:K(p.icon.base,p.icon.open[c?"on":"off"])}),h?w.jsx("span",{className:"sr-only",children:r}):w.jsxs(w.Fragment,{children:[w.jsx("span",{"data-testid":"flowbite-sidebar-collapse-label",className:p.label.base,children:r}),i?i(p,c):w.jsx(o,{"aria-hidden":!0,className:K(p.label.icon.base,p.label.icon.open[c?"on":"off"])})]})]}),w.jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${u}`,hidden:!c,className:p.list,children:w.jsx(Rx.Provider,{value:{isInsideCollapse:!0},children:e})})]})};f4.displayName="Sidebar.Collapse";const h4=({children:e,color:t="info",className:n,theme:r={},...o})=>{const{theme:i,isCollapsed:a}=nl(),s=Z(i.cta,r);return w.jsx("div",{"data-testid":"sidebar-cta",hidden:a,className:K(s.base,s.color[t],n),...o,children:e})};h4.displayName="Sidebar.CTA";const sX=({id:e,theme:t,isCollapsed:n,tooltipChildren:r,children:o,...i})=>w.jsx("li",{...i,children:n?w.jsx(Sx,{content:w.jsx(p4,{id:e,theme:t,children:r}),placement:"right",children:o}):o}),p4=({id:e,theme:t,children:n})=>w.jsx("span",{"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${e}`,className:K(t.content.base),children:n}),m4=C.forwardRef(({active:e,as:t="a",children:n,className:r,icon:o,label:i,labelColor:a="info",theme:s={},...l},u)=>{var m,y,g,v;const c=C.useId(),{theme:d,isCollapsed:f}=nl(),{isInsideCollapse:h}=aX(),p=Z(d.item,s);return w.jsx(sX,{theme:p,className:p.listItem,id:c,isCollapsed:f,tooltipChildren:n,children:w.jsxs(t,{"aria-labelledby":`flowbite-sidebar-item-${c}`,ref:u,className:K(p.base,e&&p.active,!f&&h&&((m=p.collapsed)==null?void 0:m.insideCollapse),r),...l,children:[o&&w.jsx(o,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-item-icon",className:K((y=p.icon)==null?void 0:y.base,e&&((g=p.icon)==null?void 0:g.active))}),f&&!o&&w.jsx("span",{className:(v=p.collapsed)==null?void 0:v.noIcon,children:n.charAt(0).toLocaleUpperCase()??"?"}),!f&&w.jsx(p4,{id:c,theme:p,children:n}),!f&&i&&w.jsx(FI,{color:a,"data-testid":"flowbite-sidebar-label",hidden:f,className:p.label,children:i})]})})});m4.displayName="Sidebar.Item";const g4=({children:e,className:t,theme:n={},...r})=>{const{theme:o}=nl(),i=Z(o.itemGroup,n);return w.jsx("ul",{"data-testid":"flowbite-sidebar-item-group",className:K(i.base,t),...r,children:w.jsx(Rx.Provider,{value:{isInsideCollapse:!1},children:e})})};g4.displayName="Sidebar.ItemGroup";const v4=({children:e,className:t,theme:n={},...r})=>{const{theme:o}=nl(),i=Z(o.items,n);return w.jsx("div",{className:K(i.base,t),"data-testid":"flowbite-sidebar-items",...r,children:e})};v4.displayName="Sidebar.Items";const y4=({children:e,className:t,href:n,img:r,imgAlt:o="",theme:i={},...a})=>{const s=C.useId(),{theme:l,isCollapsed:u}=nl(),c=Z(l.logo,i);return w.jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${s}`,href:n,className:K(c.base,t),...a,children:[w.jsx("img",{alt:o,src:r,className:c.img}),w.jsx("span",{className:c.collapsed[u?"on":"off"],id:`flowbite-sidebar-logo-${s}`,children:e})]})};y4.displayName="Sidebar.Logo";const x4=({children:e,as:t="nav",collapseBehavior:n="collapse",collapsed:r=!1,theme:o={},className:i,...a})=>{const s=Z(ye().sidebar,o);return w.jsx(d4.Provider,{value:{theme:s,isCollapsed:r},children:w.jsx(t,{"aria-label":"Sidebar",hidden:r&&n==="hide",className:K(s.root.base,s.root.collapsed[r?"on":"off"],i),...a,children:w.jsx("div",{className:s.root.inner,children:e})})})};x4.displayName="Sidebar";Object.assign(x4,{Collapse:f4,CTA:h4,Item:m4,Items:v4,ItemGroup:g4,Logo:y4});const b4=C.createContext(void 0);function lX(){const e=C.useContext(b4);if(!e)throw new Error("useTableBodyContext should be used within the TableBodyContext provider!");return e}const w4=C.createContext(void 0);function Tx(){const e=C.useContext(w4);if(!e)throw new Error("useTableContext should be used within the TableContext provider!");return e}const k4=C.forwardRef(({children:e,className:t,theme:n={},...r},o)=>{const{theme:i}=Tx(),a=Z(i.body,n);return w.jsx(b4.Provider,{value:{theme:a},children:w.jsx("tbody",{className:K(a.base,t),ref:o,...r,children:e})})});k4.displayName="Table.Body";const C4=C.forwardRef(({children:e,className:t,theme:n={},...r},o)=>{const{theme:i}=lX(),a=Z(i.cell,n);return w.jsx("td",{className:K(a.base,t),ref:o,...r,children:e})});C4.displayName="Table.Cell";const E4=C.createContext(void 0);function uX(){const e=C.useContext(E4);if(!e)throw new Error("useTableHeadContext should be used within the TableHeadContext provider!");return e}const S4=C.forwardRef(({children:e,className:t,theme:n={},...r},o)=>{const{theme:i}=Tx(),a=Z(i.head,n);return w.jsx(E4.Provider,{value:{theme:a},children:w.jsx("thead",{className:K(a.base,t),ref:o,...r,children:w.jsx("tr",{children:e})})})});S4.displayName="Table.Head";const R4=C.forwardRef(({children:e,className:t,theme:n={},...r},o)=>{const{theme:i}=uX(),a=Z(i.cell,n);return w.jsx("th",{className:K(a.base,t),ref:o,...r,children:e})});R4.displayName="Table.HeadCell";const T4=C.forwardRef(({children:e,className:t,theme:n={},...r},o)=>{const{theme:i,hoverable:a,striped:s}=Tx(),l=Z(i.row,n);return w.jsx("tr",{ref:o,"data-testid":"table-row-element",className:K(l.base,s&&l.striped,a&&l.hovered,t),...r,children:e})});T4.displayName="Table.Row";const _4=C.forwardRef(({children:e,className:t,striped:n,hoverable:r,theme:o={},...i},a)=>{const s=Z(ye().table,o);return w.jsx("div",{"data-testid":"table-element",className:K(s.root.wrapper),children:w.jsxs(w4.Provider,{value:{theme:s,striped:n,hoverable:r},children:[w.jsx("div",{className:K(s.root.shadow,t)}),w.jsx("table",{className:K(s.root.base,t),...i,ref:a,children:e})]})})});_4.displayName="Table";Object.assign(_4,{Head:S4,Body:k4,Row:T4,Cell:C4,HeadCell:R4});const I4=({children:e,className:t})=>w.jsx("div",{className:t,children:e});I4.displayName="Tabs.Item";const N4=C.forwardRef(({children:e,className:t,onActiveTabChange:n,style:r="default",theme:o={},...i},a)=>{const s=Z(ye().tabs,o),l=C.useId(),u=C.useMemo(()=>C.Children.map(C.Children.toArray(e),({props:b})=>b),[e]),c=C.useRef([]),[d,f]=C.useState(Math.max(0,u.findIndex(b=>b.active))),[h,p]=C.useState(-1),m=b=>{f(b),n&&n(b)},y=({target:b})=>{m(b),p(b)},g=({event:b,target:k})=>{b.key==="ArrowLeft"&&p(Math.max(0,h-1)),b.key==="ArrowRight"&&p(Math.min(u.length-1,h+1)),b.key==="Enter"&&(m(k),p(k))},v=s.tablist.tabitem.styles[r],x=s.tabitemcontainer.styles[r];return C.useEffect(()=>{var b;(b=c.current[h])==null||b.focus()},[h]),C.useImperativeHandle(a,()=>({setActiveTab:m})),w.jsxs("div",{className:K(s.base,t),children:[w.jsx("div",{"aria-label":"Tabs",role:"tablist",className:K(s.tablist.base,s.tablist.styles[r],t),...i,children:u.map((b,k)=>w.jsxs("button",{type:"button","aria-controls":`${l}-tabpanel-${k}`,"aria-selected":k===d,className:K(s.tablist.tabitem.base,v.base,k===d&&v.active.on,k!==d&&!b.disabled&&v.active.off),disabled:b.disabled,id:`${l}-tab-${k}`,onClick:()=>y({target:k}),onKeyDown:E=>g({event:E,target:k}),ref:E=>c.current[k]=E,role:"tab",tabIndex:k===h?0:-1,style:{zIndex:k===h?2:1},children:[b.icon&&w.jsx(b.icon,{className:s.tablist.tabitem.icon}),b.title]},k))}),w.jsx("div",{className:K(s.tabitemcontainer.base,x),children:u.map((b,k)=>w.jsx("div",{"aria-labelledby":`${l}-tab-${k}`,className:s.tabpanel,hidden:k!==d,id:`${l}-tabpanel-${k}`,role:"tabpanel",tabIndex:0,children:b.children},k))})]})});N4.displayName="Tabs";Object.assign(N4,{Item:I4});const P4=C.forwardRef(({className:e,color:t="gray",helperText:n,shadow:r,theme:o={},...i},a)=>{const s=Z(ye().textarea,o);return w.jsxs(w.Fragment,{children:[w.jsx("textarea",{ref:a,className:K(s.base,s.colors[t],s.withShadow[r?"on":"off"],e),...i}),n&&w.jsx(Qu,{color:t,children:n})]})});P4.displayName="Textarea";const A4=C.createContext(void 0);function _x(){const e=C.useContext(A4);if(!e)throw new Error("useTimelineContentContext should be used within the TimelineContentContext provider!");return e}const D4=({children:e,className:t,theme:n={},...r})=>{const{theme:o}=_x(),i=Z(o.body,n);return w.jsx("div",{className:K(i.base,t),...r,children:e})},M4=C.createContext(void 0);function Ix(){const e=C.useContext(M4);if(!e)throw new Error("useTimelineContext should be used within the TimelineContext provider!");return e}const F4=C.createContext(void 0);function O4(){const e=C.useContext(F4);if(!e)throw new Error("useTimelineItemContext should be used within the TimelineItemContext provider!");return e}const L4=({children:e,className:t,theme:n={},...r})=>{const{horizontal:o}=Ix(),{theme:i}=O4(),a=Z(i.content,n);return w.jsx(A4.Provider,{value:{theme:a},children:w.jsx("div",{"data-testid":"timeline-content",className:K(o&&a.root.base,t),...r,children:e})})},B4=({children:e,className:t,theme:n={},...r})=>{const{theme:o,horizontal:i}=Ix(),a=Z(o.item,n);return w.jsx(F4.Provider,{value:{theme:a},children:w.jsx("li",{"data-testid":"timeline-item",className:K(i&&a.root.horizontal,!i&&a.root.vertical,t),...r,children:e})})},j4=({children:e,className:t,icon:n,theme:r={},...o})=>{const{horizontal:i}=Ix(),{theme:a}=O4(),s=Z(a.point,r);return w.jsxs("div",{"data-testid":"timeline-point",className:K(i&&s.horizontal,!i&&s.vertical,t),...o,children:[e,n?w.jsx("span",{className:K(s.marker.icon.wrapper),children:w.jsx(n,{"aria-hidden":!0,className:K(s.marker.icon.base)})}):w.jsx("div",{className:K(i&&s.marker.base.horizontal,!i&&s.marker.base.vertical)}),i&&w.jsx("div",{className:K(s.line)})]})},z4=({children:e,className:t,theme:n={},...r})=>{const{theme:o}=_x(),i=Z(o.time,n);return w.jsx("time",{className:K(i.base,t),...r,children:e})},V4=({as:e="h3",children:t,className:n,theme:r={},...o})=>{const{theme:i}=_x(),a=Z(i.title,r);return w.jsx(e,{className:K(a.base,n),...o,children:t})},W4=({children:e,className:t,horizontal:n,theme:r={},...o})=>{const i=Z(ye().timeline,r);return w.jsx(M4.Provider,{value:{theme:i,horizontal:n},children:w.jsx("ol",{"data-testid":"timeline-component",className:K(n&&i.root.direction.horizontal,!n&&i.root.direction.vertical,t),...o,children:e})})};W4.displayName="Timeline";B4.displayName="Timeline.Item";j4.displayName="Timeline.Point";L4.displayName="Timeline.Content";z4.displayName="Timeline.Time";V4.displayName="Timeline.Title";D4.displayName="Timeline.Body";Object.assign(W4,{Item:B4,Point:j4,Content:L4,Time:z4,Title:V4,Body:D4});const $4=C.createContext(void 0);function cX(){const e=C.useContext($4);if(!e)throw new Error("useToastContext should be used within the ToastContext provider!");return e}const U4=({className:e,onClick:t,theme:n={},xIcon:r=oH,onDismiss:o,...i})=>{const{theme:a,duration:s,isClosed:l,isRemoved:u,setIsClosed:c,setIsRemoved:d}=cX(),f=Z(a.toggle,n),h=p=>{if(t&&t(p),o){o();return}c(!l),setTimeout(()=>d(!u),s)};return w.jsx("button",{"aria-label":"Close",onClick:h,type:"button",className:K(f.base,e),...i,children:w.jsx(r,{"aria-hidden":!0,className:f.icon})})},dX={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},H4=({children:e,className:t,duration:n=300,theme:r={},...o})=>{const[i,a]=C.useState(!1),[s,l]=C.useState(!1),u=Z(ye().toast,r);return s?null:w.jsx($4.Provider,{value:{theme:u,duration:n,isClosed:i,isRemoved:s,setIsClosed:a,setIsRemoved:l},children:w.jsx("div",{"data-testid":"flowbite-toast",role:"alert",className:K(u.root.base,dX[n],i&&u.root.closed,t),...o,children:e})})};H4.displayName="Toast";U4.displayName="Toast.Toggle";Object.assign(H4,{Toggle:U4});const fX=C.forwardRef(({checked:e,className:t,color:n="blue",sizing:r="md",disabled:o,label:i,name:a,onChange:s,theme:l={},...u},c)=>{const d=C.useId(),f=Z(ye().toggleSwitch,l),h=()=>s(!e),p=()=>{h()},m=y=>{y.code=="Enter"&&y.preventDefault()};return w.jsxs(w.Fragment,{children:[a&&e?w.jsx("input",{ref:c,checked:e,hidden:!0,name:a,readOnly:!0,type:"checkbox",className:"sr-only"}):null,w.jsxs("button",{"aria-checked":e,"aria-labelledby":`${d}-flowbite-toggleswitch-label`,disabled:o,id:`${d}-flowbite-toggleswitch`,onClick:p,onKeyDown:m,role:"switch",tabIndex:0,type:"button",className:K(f.root.base,f.root.active[o?"off":"on"],t),...u,children:[w.jsx("div",{"data-testid":"flowbite-toggleswitch-toggle",className:K(f.toggle.base,f.toggle.checked[e?"on":"off"],e&&f.toggle.checked.color[n],f.toggle.sizes[r])}),i!=null&&i.length?w.jsx("span",{"data-testid":"flowbite-toggleswitch-label",id:`${d}-flowbite-toggleswitch-label`,className:f.root.label,children:i}):null]})]})});fX.displayName="ToggleSwitch";function hX({show:e,data:t}){let n=!1;const r=()=>{n=!0,n&&hr.fire({title:"Logout",text:"Are you sure to logout ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, logout!",allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}).then(o=>{if(o.isConfirmed){const a=Po(["AUTH_KEY","token"]),s=[localStorage.getItem("AUTH_KEY"),localStorage.getItem("login_token"),localStorage.getItem("devop-sso"),Ue.get("csrf")];Yt.authPost("logout",localStorage.getItem("AUTH_KEY"),Yn(a,s)).then(l=>{localStorage.clear(),l=JSON.parse(l),ft("success","Logout Succesfully","You has been loged out!",()=>{window.location.replace("/login")})})}else n=!1})};return w.jsx("div",{id:"container",className:`${e?"translate-x-[100vw]":"translate-x-0"} w-screen h-screen absolute bg-transparent z-10 left-[-100vw] top-0 duration-500`,children:w.jsx("div",{className:"relative w-3/4 h-full bg-white",children:w.jsxs("div",{className:"size-full px-4",children:[w.jsx("img",{src:"/Icons/Ellipse 190.svg",alt:"",className:"w-full absolute left-0 top-0"}),w.jsxs("div",{className:"flex absolute top-0 left-0 justify-between w-full",children:[w.jsx("img",{src:"/Icons/Group 117.svg",alt:"",className:"w-1/3"}),w.jsx("img",{src:"/Icons/Group 116.svg",alt:"",className:"w-1/3"}),w.jsx("img",{src:"/Icons/Group 115.svg",alt:"",className:"w-1/3"})]}),w.jsxs("div",{id:"bio",className:"absolute top-9 left-4 flex gap-2",children:[w.jsx("img",{src:t.img_location||"/default-profile.png",alt:"photo_profile",className:"size-12 rounded-full bg-white"}),w.jsxs("div",{className:"font-normal text-base text-bg-2",children:[w.jsx("h4",{children:"Halo!"}),w.jsx("p",{children:t.nama_lengkap})]})]}),w.jsxs("div",{id:"menu",className:"absolute top-40 w-[65vw] sm:w-[65%] text-primary-high flex flex-col gap-4",children:[w.jsxs(Ve,{to:"/profile",className:"w-full bg-bg-2 p-2 rounded-xl flex gap-3 items-center",children:[w.jsx(f6,{className:"size-9"}),w.jsx("p",{children:"Profil"}),w.jsx(Ll,{className:"size-5 stroke-2 ml-auto"})]}),w.jsxs(Ve,{to:"/setting",className:"w-full bg-bg-2 p-2 rounded-xl flex gap-3 items-center",children:[w.jsx(n6,{className:"size-9"}),w.jsx("p",{children:"Pengaturan"}),w.jsx(Ll,{className:"size-5 stroke-2 ml-auto"})]}),w.jsxs(Ve,{to:"/bantuan",className:"w-full bg-bg-2 p-2 rounded-xl flex gap-2 items-center",children:[w.jsx(c6,{className:"size-9"}),w.jsx("p",{children:"Bantuan"}),w.jsx(Ll,{className:"size-5 stroke-2 ml-auto"})]})]}),w.jsx("button",{onClick:r,className:"btn border-none w-4/5 py-3 px-16 bg-primary-low text-center font-bold rounded-xl absolute bottom-4 left-[10%]",children:"Keluar"})]})})})}const pX=()=>{const[e,t]=C.useState(!1),[n,r]=C.useState(null);qf();const o=C.useCallback(async()=>{try{const a=Po(["AUTH_KEY","login_token"]);let s=a.map(c=>{let d=localStorage.getItem(c);return c==="csrf_token"&&!d&&(d=Ue.get("csrf")),d});const l=await Yt.usersPost("profile",s[0],Yn(a,s)),u=JSON.parse(l);if(u!=null&&u.data){localStorage.setItem("token",u.data.token),Ue.set("csrf",u.csrfHash);const c=So(u.data.token);localStorage.setItem("group_id",c.group_id),r(c)}else ft("error","No data in API response:","err")}catch(i){pr(i,"/login")}},[]);return C.useEffect(()=>{const a=setInterval(async()=>{try{const l=Po(["AUTH_KEY"]);let u=l.map(f=>{let h=localStorage.getItem(f);return f==="csrf_token"&&!h&&(h=Ue.get("csrf")),h});const c=await Yt.authPost("sessTime",u[1],Yn(l,u)),d=JSON.parse(c);d.data.title==="Your Session OK"?Ue.set("csrf",d.csrfHash):Bj(d.data)}catch(s){pr(s,"/login")}},36e5);return()=>clearInterval(a)},[]),C.useEffect(()=>{localStorage.getItem("login_token")?o():window.location.replace("/login")},[o]),window.addEventListener("click",i=>{i.pageX>screen.width*75/100&&t(!1)}),w.jsxs("div",{className:"bg-primary-low font-primary flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] pt-6 relative text-white px-6",children:[w.jsx("img",{src:"/Icons/elipse.svg",alt:"elipse",className:"w-full min-h-fit absolute z-[1] left-0 top-[-30px] "}),w.jsxs("div",{id:"core",className:"relative z-[2] size-full",children:[w.jsxs("nav",{className:"flex items-center justify-between",children:[w.jsx("button",{onClick:()=>{t(!0)},children:w.jsx(W9,{className:"fill-white size-8"})}),w.jsxs("div",{id:"profile",className:"flex items-center gap-2",children:[w.jsx("img",{src:n.img_location,alt:"photo_profile",id:"photo_profile",className:"size-12 rounded-full bg-white cursor-pointer",onClick:()=>{document.getElementById("my_modal_1").showModal()}}),w.jsx("dialog",{id:"my_modal_1",className:"modal",children:w.jsxs("div",{className:"modal-box",children:[w.jsx("img",{src:n.img_location,className:"w-full"}),w.jsx("div",{className:"modal-action",children:w.jsx("form",{method:"dialog",children:w.jsx("button",{className:"btn",children:"Close"})})})]})}),w.jsx("p",{className:"font-semibold text-sm ",children:n.nama_lengkap})]}),w.jsx(Ve,{to:"/notifikasi",children:w.jsx(U9,{className:"fill-white size-8"})})]}),w.jsx("main",{className:"mt-8 h-56 sm:h-52",children:w.jsxs("div",{id:"news",className:"size-full",children:[w.jsxs(qI,{leftControl:" ",rightControl:" ",className:"drop-shadow-[4px_4px_2px_rgba(0,0,0,0.5)]",children:[w.jsx("img",{src:"/img/news.png",className:""}),w.jsx("img",{src:"/img/news.png",className:""}),w.jsx("img",{src:"/img/news.png",className:""}),w.jsx("img",{src:"/img/news.png",className:""})]}),w.jsxs("div",{id:"rekap",className:"bg-white h-3/5 mt-5 rounded-2xl px-3 py-2",children:[w.jsx("h3",{className:"text-primary-md font-bold text-base",children:"Rekapan Presensi (Bulan Ini)"}),w.jsxs("div",{className:"flex justify-between mt-2",children:[w.jsxs("div",{id:"hadir",className:"w-24",children:[w.jsx("div",{className:"mx-auto bg-secondary-green size-[50px] rounded-full p-[10px]",children:w.jsx("p",{className:"text-center text-lg font-bold",children:n.hadir?n.hadir:0})}),w.jsx("h4",{className:"text-center text-xs font-bold text-primary-md",children:"Hadir"})]}),w.jsxs("div",{id:"izin",className:"w-24",children:[w.jsx("div",{className:"mx-auto bg-secondary-yellow size-[50px] rounded-full p-[10px]",children:w.jsx("p",{className:"text-center text-lg font-bold",children:n.tidak_hadir?n.tidak_hadir:0})}),w.jsx("h4",{className:"text-center text-xs font-bold text-primary-md",children:"Izin / Sakit"})]}),w.jsxs("div",{id:"terlambat",className:"w-24",children:[w.jsx("div",{className:"mx-auto bg-secondary-red size-[50px] rounded-full p-[10px]",children:w.jsx("p",{className:"text-center text-lg font-bold",children:n.terlambat_pulang_cepat?n.terlambat_pulang_cepat:0})}),w.jsx("h4",{className:"text-center text-xs font-bold text-primary-md",children:"Terlambat"})]})]})]}),w.jsxs(Ve,{id:"presensi",to:localStorage.getItem("group_id")=="4"?"/presensi":"/presensi/staff",className:"bg-white w-full h-fit mt-5 rounded-2xl px-3 py-2 flex gap-2 items-center",children:[w.jsx("div",{className:"size-10 bg-primary-md rounded-full flex justify-center items-center",children:w.jsx(Kj,{className:"size-6"})}),w.jsx("p",{className:"text-primary-md text-center font-bold text-sm",children:"Presensi"}),w.jsx(Ll,{className:"absolute size-4 stroke-bg-3 right-10"})]}),w.jsxs(Ve,{id:"riwayat_presensi",to:"/riwayat",className:"bg-white w-full h-fit mt-5 rounded-2xl px-3 py-2 flex gap-2 items-center",children:[w.jsx("div",{className:"size-10 bg-primary-md rounded-full flex justify-center items-center",children:w.jsx(e6,{className:"size-6"})}),w.jsx("p",{className:"text-primary-md text-center font-bold text-sm",children:"Riwayat Presensi"}),w.jsx(Ll,{className:"absolute size-4 stroke-bg-3 right-10"})]})]})})]}),w.jsx(hX,{show:e,data:n})]})};function mX(){const e=So(localStorage.getItem("token"));return w.jsxs("div",{className:"font-primary flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] pt-8 relative text-white px-6",children:[w.jsxs("div",{id:"id",className:"absolute w-full top-0 left-0 bg-primary-md rounded-b-[3rem] p-6 sm:p-8",children:[w.jsx(Ve,{to:"/home",children:w.jsx(gr,{className:"size-7 absolute top-8 left-6"})}),w.jsx("h2",{className:"text-center font-bold text-lg",children:"Profil"}),w.jsx("img",{src:e.img_location,alt:"photo_profile",className:"size-28 rounded-full bg-white mt-6 mx-auto"}),w.jsx("p",{className:"text-center text-base font-semibold mt-3",children:e.nama_lengkap})]}),w.jsxs("div",{id:"bio",className:"text-bg-3 mt-64 flex flex-col gap-2",children:[w.jsxs("div",{className:"pb-4 border-b-[0.5px]",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Name"}),w.jsx("p",{className:"w-full text-gray-800",children:e.nama_lengkap})]}),w.jsxs("div",{className:"pb-4 border-b-[0.5px]",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-400 mt-3",children:"Account Email"}),w.jsx("p",{className:"w-full text-gray-800",children:e.email})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-sm font-medium text-gray-400 mt-3",children:"Phone Number"}),w.jsx("p",{className:"w-full text-gray-800",children:e.phone})]})]})]})}const G4=e=>C.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},C.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.5 6C10.1193 6 9 7.11929 9 8.5C9 9.88071 10.1193 11 11.5 11C12.8807 11 14 9.88071 14 8.5C14 7.11929 12.8807 6 11.5 6ZM7 8.5C7 6.01472 9.01472 4 11.5 4C13.9853 4 16 6.01472 16 8.5C16 10.9853 13.9853 13 11.5 13C9.01472 13 7 10.9853 7 8.5Z",fill:"currentColor"}),C.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C2 2.61929 3.11929 1.5 4.5 1.5C5.88071 1.5 7 2.61929 7 4V7.27222C7 8.15468 7.30938 9.00921 7.87432 9.68713L9.26822 11.3598C9.62179 11.7841 9.56446 12.4147 9.14018 12.7682C8.71591 13.1218 8.08534 13.0645 7.73178 12.6402L6.33788 10.9675C5.47342 9.93015 5 8.62255 5 7.27222V4C5 3.72386 4.77614 3.5 4.5 3.5C4.22386 3.5 4 3.72386 4 4V7.75C4 8.40656 4.16162 9.05303 4.47059 9.63235L7.88235 16.0294C8.14225 16.5167 7.9579 17.1225 7.47059 17.3824C6.98328 17.6423 6.37755 17.4579 6.11765 16.9706L2.70588 10.5735C2.24243 9.70455 2 8.73484 2 7.75V4Z",fill:"currentColor"}),C.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 12C7.5 11.4477 7.94772 11 8.5 11H11C14.3137 11 17 13.6863 17 17V19C17 19.5523 16.5523 20 16 20C15.4477 20 15 19.5523 15 19V17C15 14.7909 13.2091 13 11 13H8.5C7.94772 13 7.5 12.5523 7.5 12ZM7 15.5C7.55228 15.5 8 15.9477 8 16.5V19C8 19.5523 7.55228 20 7 20C6.44772 20 6 19.5523 6 19V16.5C6 15.9477 6.44772 15.5 7 15.5Z",fill:"currentColor"})),uv=C.createContext(void 0),gX={};uv.Provider;const vX=()=>C.useContext(uv)?C.useContext(uv):gX,fm=typeof window>"u"?global:window,hm="@griffel/";function yX(e,t){return fm[Symbol.for(hm+e)]||(fm[Symbol.for(hm+e)]=t),fm[Symbol.for(hm+e)]}const cv=yX("DEFINITION_LOOKUP_TABLE",{}),Ul="data-make-styles-bucket",xX="data-priority",dv=7,Nx="___",bX=Nx.length+dv,wX=0,kX=1;function CX(e){for(var t=0,n,r=0,o=e.length;o>=4;++r,o-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function EX(e){const t=e.length;if(t===dv)return e;for(let n=t;n<dv;n++)e+="0";return e}function K4(e,t,n=[]){return Nx+EX(CX(e+t))}function q4(e,t){let n="",r="";for(const o in e){const i=e[o];if(i===0){r+=o+" ";continue}const a=Array.isArray(i),s=t==="rtl"?(a?i[1]:i)+" ":(a?i[0]:i)+" ";n+=s,r+=s}return[n.slice(0,-1),r.slice(0,-1)]}function tk(e,t){const n={};for(const r in e){const[o,i]=q4(e[r],t);if(i===""){n[r]="";continue}const a=K4(i,t),s=a+(o===""?"":" "+o);cv[a]=[e[r],t],n[r]=s}return n}const nk={};function SX(){let e=null,t="",n="";const r=new Array(arguments.length);for(let d=0;d<arguments.length;d++){const f=arguments[d];if(typeof f=="string"&&f!==""){const h=f.indexOf(Nx);if(h===-1)t+=f+" ";else{const p=f.substr(h,bX);h>0&&(t+=f.slice(0,h)),n+=p,r[d]=p}}}if(n==="")return t.slice(0,-1);const o=nk[n];if(o!==void 0)return t+o;const i=[];for(let d=0;d<arguments.length;d++){const f=r[d];if(f){const h=cv[f];h&&(i.push(h[wX]),e=h[kX])}}const a=Object.assign.apply(Object,[{}].concat(i)),[s,l]=q4(a,e),u=K4(l,e,r),c=u+" "+s;return nk[n]=c,cv[u]=[a,e],t+c}function RX(e){return Array.isArray(e)?e:[e]}function TX(e,t,n,r){const o=[];if(r[Ul]=t,r[xX]=String(n),e)for(const a in r)e.setAttribute(a,r[a]);function i(a){return e!=null&&e.sheet?e.sheet.insertRule(a,e.sheet.cssRules.length):o.push(a)}return{elementAttributes:r,insertRule:i,element:e,bucketName:t,cssRules(){return e!=null&&e.sheet?Array.from(e.sheet.cssRules).map(a=>a.cssText):o}}}const _X=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"],rk=_X.reduce((e,t,n)=>(e[t]=n,e),{});function IX(e,t,n){return(e==="m"?e+t:e)+n}function NX(e,t,n,r,o={}){var i,a;const s=e==="m",l=(i=o.m)!==null&&i!==void 0?i:"0",u=(a=o.p)!==null&&a!==void 0?a:0,c=IX(e,l,u);if(!r.stylesheets[c]){const d=t&&t.createElement("style"),f=TX(d,e,u,Object.assign({},r.styleElementAttributes,s&&{media:l}));r.stylesheets[c]=f,t&&d&&t.head.insertBefore(d,AX(t,n,e,r,o))}return r.stylesheets[c]}function PX(e,t,n){var r,o;const i=t+((r=n.m)!==null&&r!==void 0?r:""),a=e.getAttribute(Ul)+((o=e.media)!==null&&o!==void 0?o:"");return i===a}function AX(e,t,n,r,o={}){var i,a;const s=rk[n],l=(i=o.m)!==null&&i!==void 0?i:"",u=(a=o.p)!==null&&a!==void 0?a:0;let c=m=>s-rk[m.getAttribute(Ul)],d=e.head.querySelectorAll(`[${Ul}]`);if(n==="m"){const m=e.head.querySelectorAll(`[${Ul}="${n}"]`);m.length&&(d=m,c=y=>r.compareMediaQueries(l,y.media))}const f=m=>PX(m,n,o)?u-Number(m.getAttribute("data-priority")):c(m),h=d.length;let p=h-1;for(;p>=0;){const m=d.item(p);if(f(m)>0)return m.nextSibling;p--}return h>0?d.item(0):t?t.nextSibling:null}function ok(e,t){try{e.insertRule(t)}catch{}}let DX=0;const MX=(e,t)=>e<t?-1:e>t?1:0;function FX(e=typeof document>"u"?void 0:document,t={}){const{classNameHashSalt:n,unstable_filterCSSRule:r,insertionPoint:o,styleElementAttributes:i,compareMediaQueries:a=MX}=t,s={classNameHashSalt:n,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(i),compareMediaQueries:a,id:`d${DX++}`,insertCSSRules(l){for(const u in l){const c=l[u];for(let d=0,f=c.length;d<f;d++){const[h,p]=RX(c[d]),m=NX(u,e,o||null,s,p);s.insertionCache[h]||(s.insertionCache[h]=u,r?r(h)&&ok(m,h):ok(m,h))}}}};return s}const OX=()=>{const e={};return function(n,r){e[n.id]===void 0&&(n.insertCSSRules(r),e[n.id]=!0)}};function LX(e,t,n=OX){const r=n();let o=null,i=null;function a(s){const{dir:l,renderer:u}=s,c=l==="ltr";return c?o===null&&(o=tk(e,l)):i===null&&(i=tk(e,l)),r(u,t),c?o:i}return a}function BX(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const ik=Hl.useInsertionEffect?Hl.useInsertionEffect:void 0,jX=()=>{const e={};return function(n,r){if(ik&&BX()){ik(()=>{n.insertCSSRules(r)},[n,r]);return}e[n.id]===void 0&&(n.insertCSSRules(r),e[n.id]=!0)}},zX=C.createContext(FX());function VX(){return C.useContext(zX)}const WX=C.createContext("ltr");function $X(){return C.useContext(WX)}function UX(e,t){const n=LX(e,t,jX);return function(){const o=$X(),i=VX();return n({dir:o,renderer:i})}}const HX=UX({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),GX=(e,t)=>{const{title:n,primaryFill:r="currentColor",...o}=e,i={...o,title:void 0,fill:r},a=HX(),s=vX();return i.className=SX(a.root,(t==null?void 0:t.flipInRtl)&&(s==null?void 0:s.textDirection)==="rtl"&&a.rtl,i.className),n&&(i["aria-label"]=n),!i["aria-label"]&&!i["aria-labelledby"]?i["aria-hidden"]=!0:i.role="img",i},KX=(e,t,n,r)=>{const o="20",i=C.forwardRef((a,s)=>{const l={...GX(a,{flipInRtl:r==null?void 0:r.flipInRtl}),ref:s,width:t,height:t,viewBox:`0 0 ${o} ${o}`,xmlns:"http://www.w3.org/2000/svg"};return C.createElement("svg",l,...n.map(u=>C.createElement("path",{d:u,fill:l.fill})))});return i.displayName=e,i},qX=KX("DoctorRegular","1em",["M8.5 4a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 0-.5.5v3c0 .28.22.5.5.5h3c.28 0 .5.22.5.5v3c0 .28.22.5.5.5h3a.5.5 0 0 0 .5-.5v-3c0-.28.22-.5.5-.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 0-.5-.5h-3ZM7 4.5C7 3.67 7.67 3 8.5 3h3c.83 0 1.5.67 1.5 1.5V7h2.5c.83 0 1.5.67 1.5 1.5v3c0 .83-.67 1.5-1.5 1.5H13v2.5c0 .83-.67 1.5-1.5 1.5h-3A1.5 1.5 0 0 1 7 15.5V13H4.5A1.5 1.5 0 0 1 3 11.5v-3C3 7.67 3.67 7 4.5 7H7V4.5Z"]);function XX(){const e=C.useRef(null),t=C.useRef(null),n=C.useRef(null),{state:r}=Ni();return GR(e,t,n),w.jsxs("div",{className:"bg-primary-low font-primary flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px) relative text-white",children:[w.jsxs("header",{className:"h-1/5 bg-primary-md relative p-6",children:[w.jsx(Ve,{to:localStorage.getItem("group_id")=="4"?"/home":"/presensi/staff",className:"absolute top-5",children:w.jsx(gr,{className:"size-7"})}),w.jsx("h2",{className:"text-[2.125rem] font-bold absolute bottom-5",children:"Presensi"})]}),w.jsx("main",{className:"w-full h-full relative bottom-0 left-0 px-8 pt-10 pb-4 text-primary-md",children:w.jsxs("div",{className:"bg-white w-full rounded-xl p-4 flex flex-col gap-2",children:[w.jsxs("div",{className:"flex justify-between items-center w-full",children:[w.jsx("p",{ref:e,className:"text-lg font-semibold"}),w.jsxs("div",{className:"text-lg font-bold",children:[w.jsx("small",{ref:n}),w.jsx("small",{ref:t})]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-2 text-white",children:[w.jsxs(Ve,{to:"/presensi/verif",state:r?[...r,"masuk"]:["masuk"],className:"p-5 bg-secondary-green rounded-md flex flex-col justify-center items-center",children:[w.jsx(G4,{className:"size-20"}),w.jsx("p",{className:"text-center font-semibold",children:"Masuk"})]}),w.jsxs(Ve,{to:"/presensi/verif",state:r?[...r,"pulang"]:["pulang"],className:"p-5 bg-secondary-green rounded-md flex flex-col justify-center items-center",children:[w.jsx("img",{src:"/Icons/exit-run.svg",className:"size-20"}),w.jsx("p",{className:"text-center font-semibold",children:"Pulang"})]}),w.jsxs(Ve,{to:"/presensi/izin",state:r?{kode:2,ket:[...r,"sakit"]}:{kode:2,ket:["sakit"]},className:"p-5 bg-secondary-red rounded-md flex flex-col justify-center items-center",children:[w.jsx(qX,{className:"size-20",strokeWidth:"1.5"}),w.jsx("p",{className:"text-center font-semibold",children:"Sakit"})]}),w.jsxs(Ve,{to:"/presensi/izin",state:r?{kode:3,ket:[...r,"izin"]}:{kode:3,ket:["sakit"]},className:"p-5 bg-secondary-yellow rounded-md flex flex-col justify-center items-center",children:[w.jsx(o6,{className:"size-20 stroke-[2.5]"}),w.jsx("p",{className:"text-center font-semibold",children:"Izin"})]})]})]})})]})}function YX({index:e,history:t,biodata:n}){const[r,o]=C.useState(null),[i,a]=C.useState(!0),s=C.useRef(null),l=()=>{document.getElementById(`my_modal_${e}`).showModal(),o(null);const c=Po(["AUTH_KEY","token","param"]);let d=[localStorage.getItem("AUTH_KEY"),localStorage.getItem("login_token"),n.id.concat(",",t["Tanggal Presensi"]),localStorage.getItem("devop-sso"),Ue.get("csrf")];i&&!r&&Yt.presensiPost("detail_presensi",localStorage.getItem("AUTH_KEY"),Yn(c,d)).then(f=>{f=JSON.parse(f),Ue.set("csrf",f.csrfHash),o(So(f.data.token).result),a(!1)}).catch(f=>{const h=JSON.parse(f.responseText);Ue.set("csrf",h.csrfHash),a(!1),s.current.click(),ft(h.data.info,h.data.title,h.data.message,()=>hr.close())})};return w.jsxs(w.Fragment,{children:[w.jsxs("button",{onClick:l,className:"btn w-full h-fit bg-white rounded-xl text-black flex flex-col justify-center items-center p-4 gap-2",children:[w.jsx("img",{src:n.img_location,alt:"photo_profile",className:"size-12 rounded-full bg-white"}),w.jsx("p",{className:"font-bold text-base",children:t["Nama Lengkap"]}),w.jsxs("div",{className:"w-full flex gap-2 justify-between",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("p",{className:"font-medium text-xs",children:k1(t["Tanggal Presensi"])}),w.jsxs("p",{className:"text-xs font-normal",children:[w.jsxs("span",{className:"text-secondary-green",children:["Masuk :"," "]}),t["Jam Masuk"]]}),w.jsxs("p",{className:"text-xs font-normal",children:[w.jsxs("span",{className:"text-secondary-red",children:["Keluar :"," "]}),t["Jam Pulang"]]})]}),w.jsx("div",{className:`${t["Status Masuk"]=="Masuk Normal"&&t["Status Pulang"]=="Pulang Normal"?"bg-secondary-green":t["Status Masuk"]=="Terlambat Masuk"||t["Status Pulang"]=="Pulang Cepat"?"bg-secondary-red":t["Status Masuk"]==null&&t["Status Pulang"]==null&&t.Keterangan=="Dinas Luar"?"bg-gray-600":"bg-secondary-yellow"} row-span-3 justify-self-center self-center w-full max-w-28 mt-3 py-[0.4rem] text-center text-sm font-bold text-white rounded-md flex-shrink`,children:`${t["Status Masuk"]=="Masuk Normal"&&t["Status Pulang"]=="Pulang Normal"?"Normal":t["Status Masuk"]=="Terlambat Masuk"||t["Status Pulang"]=="Pulang Cepat"?"Tidak Normal":t.Keterangan=="Dinas Luar"?"Dinas Luar":"Izin/Sakit"}`})]})]}),w.jsx("dialog",{id:`my_modal_${e}`,className:"modal",children:w.jsxs("div",{className:"modal-box",children:[i?w.jsx("div",{className:"size-full flex justify-center items-center",children:w.jsx("span",{className:"loading loading-spinner text-gray-500"})}):w.jsxs(w.Fragment,{children:[w.jsx("h3",{className:"font-semibold text-xl mb-4",children:"Detail"}),r.map((u,c)=>w.jsx("div",{children:w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx("img",{src:`https://devop-sso.smalabschoolunesa1.sch.id/${u.foto_presensi}`,alt:"foto_presensi",className:"rounded-xl border-4 border-white"}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium text-md",children:k1(u.tanggal_presensi)}),w.jsx("p",{className:"text-sm font-normal",children:u.waktu_presensi}),w.jsx("div",{className:`${u.keterangan.split(" ")[1]==="Normal"?"bg-secondary-green":"bg-secondary-red"} justify-self-center self-center w-full max-w-28 mt-3 py-[0.4rem] text-center text-sm font-bold text-white rounded-md flex-shrink`,children:u.keterangan})]})]})},c))]}),w.jsx("div",{className:"modal-action",children:w.jsx("form",{method:"dialog",children:w.jsx("button",{onClick:()=>{o(null),a(!0)},className:"btn",ref:s,children:"Close"})})})]})})]})}function QX(){const[e,t]=C.useState("7 Hari"),[n,r]=C.useState(["on","off"]),[o,i]=C.useState(null),[a,s]=C.useState(!0);let l={};localStorage.getItem("token")?l=So(localStorage.getItem("token")):window.location.replace("/login"),l=So(localStorage.getItem("token")),window.addEventListener("click",f=>{const h=document.getElementById("dropdown"),p=document.getElementById("dropdown-content");!h.contains(f.target)&&n[0]=="off"&&(p.classList.add("hidden"),r(["on","off"]))});const c=Po(["AUTH_KEY","token","table","key"]);let d=c.map(f=>{let h=localStorage.getItem(f);return f==="csrf_token"&&!h&&(h=Ue.get("csrf")),f==="table"&&!h&&(h="tab-presensi"),f==="key"&&!h&&(e==="7 Hari"?h="7 DAY":h="14 DAY"),h});return!o&&a&&Yt.presensiPost("reports",localStorage.getItem("AUTH_KEY"),Yn(c,d)).then(f=>{f=JSON.parse(f),Ue.set("csrf",f.csrfHash);const h=So(f.data.token);i(h.data),s(!1)}).catch(f=>{console.log(f),f=JSON.parse(f),f.status==500?(s(!1),i("no data found"),console.log("no data found")):pr(f,"/login")}),w.jsxs("div",{className:"bg-primary-low font-primary flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] relative text-white",children:[w.jsxs("header",{className:"h-1/5 min-h-[130px] bg-primary-md relative p-6",children:[w.jsx(Ve,{to:"/home",className:"absolute top-5",children:w.jsx(gr,{className:"size-7"})}),w.jsx("h2",{className:"text-[2.125rem] font-bold absolute bottom-5",children:"Riwayat Presensi"})]}),w.jsxs("main",{className:"w-full h-full relative bottom-0 left-0 px-8 pt-10 pb-4 text-black flex flex-col gap-4 overflow-y-auto",children:[w.jsxs("div",{id:"dropdown",className:"w-fit mt-[-1.5rem]",children:[w.jsxs("button",{className:"btn m-1 ml-0 bg-white border-none text-bg-3 btn-sm flex justify-between items-center",onClick:()=>{n[0]=="on"?r(["off","on"]):r(["on","off"])},children:[w.jsx("p",{children:e}),w.jsx(Xj,{className:`${n[0]=="on"?"":"hidden"} size-5`}),w.jsx(Jj,{className:`${n[1]=="on"?"":"hidden"} size-5`})]}),w.jsxs("ul",{tabIndex:0,id:"dropdown-content",className:`${n[0]=="off"?"":"hidden"} absolute z-[1] menu p-2 shadow bg-white rounded-box w-52`,children:[w.jsx("li",{children:w.jsx("button",{onClick:()=>{t("7 Hari"),r(["on","off"]),i(null),s(!0)},children:"7 Hari"})}),w.jsx("li",{children:w.jsx("button",{onClick:()=>{t("14 Hari"),r(["on","off"]),i(null),s(!0)},children:"14 Hari"})})]})]}),a?w.jsx("div",{className:"size-full flex justify-center items-center",children:w.jsx("span",{className:"loading loading-spinner text-white"})}):o?o.map((f,h)=>w.jsx(YX,{index:h,history:f,biodata:l},h)):w.jsx("div",{className:"size-full flex justify-center items-center",children:w.jsx("p",{className:"text-white",children:"Belum ada riwayat."})})]})]})}function JX(){const e=[{head:"Lorem ipsum dolor sit amet.",desc:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid dignissimos doloremque deserunt nisi, nesciunt placeat recusandae sit nemo, enim veniam explicabo quaerat autem ipsam dolor. Distinctio accusantium labore soluta ex."},{head:"Lorem ipsum dolor sit amet, consectetur",desc:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid dignissimos doloremque deserunt nisi, nesciunt placeat recusandae sit nemo, enim veniam explicabo quaerat autem ipsam dolor. Distinctio accusantium labore"},{head:"Lorem ipsum dolor sit amet, consectetur",desc:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid dignissimos doloremque deserunt nisi, nesciunt placeat recusandae sit nemo, enim veniam explicabo quaerat autem ipsam dolor. Distinctio accusantium labore"},{head:"Lorem ipsum dolor sit amet, consectetur",desc:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid dignissimos doloremque deserunt nisi, nesciunt placeat recusandae sit nemo, enim veniam explicabo quaerat autem ipsam dolor. Distinctio accusantium labore"},{head:"Lorem ipsum dolor sit amet, consectetur",desc:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid dignissimos doloremque deserunt nisi, nesciunt placeat recusandae sit nemo, enim veniam explicabo quaerat autem ipsam dolor. Distinctio accusantium labore"}];return w.jsxs("div",{className:"bg-primary-low font-primary flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] relative text-white overflow-y-hidden",children:[w.jsxs("header",{className:"h-[60px] min-h-[60px] bg-primary-md p-4 pl-6 flex",children:[w.jsx(Ve,{to:"/home",children:w.jsx(gr,{className:"size-7 absolute"})}),w.jsx("h2",{className:"text-lg font-bold mx-auto",children:"Bantuan"})]}),w.jsxs("main",{className:"w-full h-full relative bottom-0 left-0 pt-5 pb-4 text-black flex flex-col gap-4 overflow-y-auto bg-white",children:[w.jsx("h2",{className:"mx-auto font-bold text-3xl mb-4",children:"FAQ"}),w.jsx(Vc,{className:"rounded-none",children:e.map((t,n)=>w.jsxs(Vc.Panel,{children:[w.jsx(Vc.Title,{className:"focus:ring-0",children:t.head}),w.jsx(Vc.Content,{children:t.desc})]},n))})]})]})}function ZX({datas:e}){return w.jsx("div",{className:"flex flex-col gap-4",children:e.map((t,n)=>w.jsx("div",{className:"w-full h-fit bg-white rounded-xl text-black p-6 flex gap-2",children:w.jsxs("div",{className:"flex flex-col justify-center",children:[t.category!="notifikasi"?w.jsxs(w.Fragment,{children:[w.jsxs("h4",{className:"font-semibold text-[12px] text-primary-low inline",children:["Berita",w.jsx("span",{className:"text-bg-3 ml-3 opacity-50",children:t.created_at.slice(10,16)})]}),w.jsx("h4",{className:"font-semibold text-[12px]",children:t.title})]}):w.jsxs(w.Fragment,{children:[w.jsxs("h4",{className:"font-semibold text-[12px] text-primary-low",children:["Notifikasi",w.jsx("span",{className:"text-bg-3 ml-3 opacity-50",children:t.created_at.slice(10,16)})]}),t.title=="Presensi Berhasil"?w.jsx("h4",{className:"font-semibold text-[12px] text-secondary-green",children:"Presensi Berhasil"}):w.jsx("h4",{className:"font-semibold text-[12px] text-secondary-red",children:"Presensi Gagal!"})]}),w.jsx("p",{className:"text-bg-3 font-light text-[10px] text-justify",children:t.message})]})},n))})}function eY(){const[e,t]=C.useState(null),[n,r]=C.useState(!0),i=Po(["AUTH_KEY","token"]),a=[localStorage.getItem("AUTH_KEY"),localStorage.getItem("login_token"),localStorage.getItem("devop-sso"),Ue.get("csrf")];return n&&!e&&Yt.notificationsPost("detail",localStorage.getItem("login_token"),Yn(i,a)).then(s=>{s=JSON.parse(s),t(So(s.data)),r(!1)}).catch(s=>{s=JSON.parse(s.responseText),t(s.data),r(!1)}),w.jsxs("div",{className:"bg-primary-low font-primary flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] relative text-white overflow-y-hidden",children:[w.jsxs("header",{className:"min-h-[60px] bg-primary-md relative p-6 flex justify-start items-center gap-3",children:[w.jsx(Ve,{to:"/home",children:w.jsx(gr,{className:"size-7"})}),w.jsx("h2",{className:"text-2xl font-bold",children:"Notifikasi"})]}),w.jsx("main",{className:"w-full h-full relative bottom-0 left-0 px-8 pt-6 pb-4 text-black overflow-y-auto",children:n?w.jsx("div",{className:"size-full flex justify-center items-center",children:w.jsx("span",{className:"loading loading-spinner text-white"})}):e.info=="error"?w.jsx("div",{className:"size-full flex justify-center items-center",children:w.jsx("p",{className:"text-white",children:"Belum ada notifikasi."})}):w.jsx(ZX,{datas:e})})]})}function tY(){const e=C.useRef(null),t=C.useRef(null),n=C.useRef(null);return GR(e,t,n),w.jsxs("div",{className:"bg-primary-low font-primary flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px) relative text-white",children:[w.jsxs("header",{className:"h-1/5 bg-primary-md relative p-6",children:[w.jsx(Ve,{to:"/home",className:"absolute top-5",children:w.jsx(gr,{className:"size-7"})}),w.jsx("h2",{className:"text-[2.125rem] font-bold absolute bottom-5",children:"Presensi"})]}),w.jsx("main",{className:"w-full h-full relative bottom-0 left-0 px-8 pt-10 pb-4 text-primary-md",children:w.jsxs("div",{className:"bg-white w-full rounded-xl p-4 flex flex-col gap-2",children:[w.jsxs("div",{className:"flex justify-between items-center w-full",children:[w.jsx("p",{ref:e,className:"text-lg font-semibold"}),w.jsxs("div",{className:"text-lg font-bold",children:[w.jsx("small",{ref:n}),w.jsx("small",{ref:t})]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-2 text-white",children:[w.jsxs(Ve,{to:"/presensi",state:["non-dinas"],className:"p-5 bg-secondary-green rounded-md flex flex-col justify-center items-center",children:[w.jsx(G4,{className:"size-20"}),w.jsx("p",{className:"text-center font-semibold",children:"Non-Dinas"})]}),w.jsxs(Ve,{to:"/presensi/izin",state:{kode:1,ket:["dinas-luar"]},className:"p-5 bg-secondary-green rounded-md flex flex-col justify-center items-center",children:[w.jsx("img",{src:"/Icons/exit-run.svg",className:"size-20"}),w.jsx("p",{className:"text-center font-semibold",children:"Dinas Luar"})]})]})]})})]})}function nY(e){return wn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M220,48V76a4,4,0,0,1-8,0V48a4,4,0,0,0-4-4H180a4,4,0,0,1,0-8h28A12,12,0,0,1,220,48Zm-4,128a4,4,0,0,0-4,4v28a4,4,0,0,1-4,4H180a4,4,0,0,0,0,8h28a12,12,0,0,0,12-12V180A4,4,0,0,0,216,176ZM76,212H48a4,4,0,0,1-4-4V180a4,4,0,0,0-8,0v28a12,12,0,0,0,12,12H76a4,4,0,0,0,0-8ZM40,80a4,4,0,0,0,4-4V48a4,4,0,0,1,4-4H76a4,4,0,0,0,0-8H48A12,12,0,0,0,36,48V76A4,4,0,0,0,40,80Zm136,92a4,4,0,0,1-3.2-1.6,56,56,0,0,0-89.6,0,4,4,0,1,1-6.4-4.8,63.65,63.65,0,0,1,32.5-22.85,36,36,0,1,1,37.4,0,63.65,63.65,0,0,1,32.5,22.85A4,4,0,0,1,176,172Zm-48-32a28,28,0,1,0-28-28A28,28,0,0,0,128,140Z"},child:[]}]})(e)}function rY(){const{state:e}=Ni(),t=qf(),n={min_longitude:112.6651,longitude:112.6645,max_longitude:112.6638,min_latitude:-7.3004,latitude:-7.2998,max_latitude:-7.2994},r={enableHighAccuracy:!0,timeout:3e4,maximumAge:3e4},o=s=>{const l=s.coords.latitude,u=s.coords.longitude;l>=n.min_latitude&&l<=n.max_latitude&&u<=n.min_longitude&&u>=n.max_longitude?ft("success","Done","Anda berada di area sekolah",()=>t("/facecam",{state:[...e,JSON.stringify({longitude:u.toString(),latitude:l.toString()})]})):ft("success","Done","Anda berada di area sekolah",()=>t("/facecam",{state:[...e,JSON.stringify({longitude:u.toString(),latitude:l.toString()})]}))},i=s=>{alert(`ERROR(${s.code}): ${s.message}`)},a=()=>{navigator.geolocation.getCurrentPosition(o,i,r)};return w.jsxs("div",{className:"bg-primary-low font-primary text-white flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] relative z-[1]",children:[w.jsx(Ve,{to:"/presensi",state:e[1]?[e[0]]:null,children:w.jsx(gr,{className:"size-7 absolute top-8 left-6 z-[2]"})}),w.jsxs("div",{className:"mt-[35%] flex flex-col items-center gap-12",children:[w.jsx("div",{className:"size-fit relative flex justify-center items-center after:size-56 after:bg-[rgba(255,255,255,0.7)] after:rounded-full after:absolute after:z-[4] after:blur-sm before:size-56 before:bg-primary-high before:rounded-full before:absolute before:z-[3] before:bottom-3 before:left-6 before:blur-[2px]",children:w.jsx(nY,{className:"size-48 z-[5]"})}),w.jsxs("div",{className:"flex flex-col text-center px-12",children:[w.jsx("h4",{className:"font-bold text-3xl mb-2",children:"Verifikasi"}),w.jsx("p",{children:"Wajah anda akan diverifikasi untuk memenuhi syarat presensi"})]}),w.jsx("div",{className:"w-full px-6 absolute bottom-16",children:w.jsx("button",{onClick:a,className:"btn border-none w-full text-primary-md font-semibold bg-white rounded-xl text-sm px-4 py-2 text-center",children:"Verifikasi"})})]})]})}function oY(){const[e,t]=C.useState({ext:!1,size:!1}),[n,r]=C.useState(null),o=C.useRef(),i=C.useRef(),{state:a}=Ni();a||window.location.replace("/home");const s=l=>{l.preventDefault();const c=Po(["AUTH_KEY","token"]);let d=[localStorage.getItem("AUTH_KEY"),localStorage.getItem("login_token"),localStorage.getItem("devop-sso"),Ue.get("csrf")],f=[...c];localStorage.getItem("group_id")=="4"||a.ket[0]==="non-dinas"?(f=[...f,"status_dinas","status_kehadiran","keterangan_kehadiran"],d=[...d,"non-dinas",a.ket[a.ket.length-1],i.current.value]):(f=[...f,"status_dinas","status_kehadiran","keterangan_kehadiran"],d=[...d,"non-dinas",...a.ket,i.current.value]),n&&(f=[...f,"foto_surat"],d=[...d,`["${n}"]`]),Ao("Loading","Data sedang diproses..."),Yt.presensiPost("process",localStorage.getItem("AUTH_KEY"),Yn(f,d)).then(h=>{h=JSON.parse(h);const p=So(h.data);ft(p.info,p.title,p.message,()=>window.location.replace("/home"))}).catch(h=>{pr(h,"/login")})};return w.jsxs("div",{className:"bg-primary-low font-primary flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px) relative text-white",children:[w.jsxs("header",{className:"h-1/5 bg-primary-md relative p-6",children:[w.jsx(Ve,{to:localStorage.getItem("group_id")=="4"?"/presensi":"/presensi/staff",className:"absolute top-5",children:w.jsx(gr,{className:"size-7"})}),w.jsx("h2",{className:"text-[2.125rem] font-bold absolute bottom-5",children:"Bukti Pendukung"})]}),w.jsx("main",{className:"w-full h-full px-8 pt-8 pb-4",children:w.jsxs("form",{onSubmit:s,children:[w.jsxs("div",{className:"max-w-md",children:[w.jsx("div",{className:"mb-2 block",children:w.jsx("label",{htmlFor:"comment",className:"text-white text-base font-semibold",children:"Keterangan"})}),w.jsx(P4,{id:"comment",placeholder:"Berikan alasan....",required:!0,rows:6,className:"text-md",ref:i})]}),w.jsxs("div",{className:"mt-4",children:[w.jsx("div",{className:"mb-2",children:w.jsxs("label",{htmlFor:"file-upload-helper-text",className:"text-white text-base font-semibold",children:["Upload bukti"," "]})}),w.jsx("input",{type:"file",id:"file-upload-helper-text",accept:".jpg, .jpeg, .png, .pdf",className:"whitespace-nowrap w-full rounded-xl bg-white text-gray-500 text-sm",ref:o,required:a.kode!=3,onChange:l=>{const u=l.target.accept.split(", "),c=l.target.value;let d=c.lastIndexOf(".");d=c.substr(d,c.length).toLowerCase(),!u.includes(d)&&c?(l.target.value="",t({ext:!0,size:!1}),l.target.focus(),l.target.classList.add("focus:border-secondary-red"),l.target.classList.add("focus:border-2")):t({ext:!1,size:!1});const f=l.target.files[0];f&&(f.size/1024<750?(t({ext:!1,size:!1}),Oj(f,h=>{r(h)})):(t({ext:!1,size:!0}),l.target.value=""))}}),e.ext?w.jsx("p",{className:"text-xs font-semibold text-secondary-red",children:"Harap upload file sesuai format yang telah ditentukan (*.jpg, *.jpeg, *.png, *.pdf)"}):e.size?w.jsx("p",{className:"text-xs font-semibold text-secondary-red",children:"Harap upload file dengan ukuran kurang dari 750Kb"}):null,w.jsx("button",{type:"submit",className:"btn border-none w-full h-12 text-primary-md font-semibold bg-white hover:bg-primary-300 focus:ring-4 focus:outline-none focus:ring-primary-300 rounded-xl text-sm px-4 py-2 text-center mt-8",children:"Submit"})]})]})})]})}function iY(){return w.jsxs("div",{className:"bg-primary-low font-primary flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)] relative text-white overflow-y-hidden",children:[w.jsxs("header",{className:"h-[60px] min-h-[60px] bg-primary-md p-4 pl-6 flex",children:[w.jsx(Ve,{to:"/home",children:w.jsx(gr,{className:"size-7 absolute"})}),w.jsx("h2",{className:"text-lg font-bold mx-auto",children:"Pengaturan"})]}),w.jsx("main",{className:"w-full h-full relative bottom-0 left-0 pt-5 px-7 pb-4 text-black flex flex-col gap-4 overflow-y-auto bg-white",children:w.jsx("div",{className:"form-control",children:w.jsxs("label",{className:"label",children:[w.jsx("span",{className:"font-medium text-lg text-primary-low",children:"Notifikasi"}),w.jsx("button",{id:"switcher",className:"w-14 h-7 px-1 bg-primary-low rounded-2xl flex items-center shadow-inner",onClick:()=>{const e=document.getElementById("switcher"),t=document.getElementById("circle");e.classList.contains("bg-primary-low")?(e.classList.replace("bg-primary-low","bg-bg-2"),t.classList.replace("translate-x-[1.7rem]","translate-x-0")):(e.classList.replace("bg-bg-2","bg-primary-low"),t.classList.replace("translate-x-0","translate-x-[1.7rem]"))},children:w.jsx("span",{id:"circle",className:"size-5 bg-white rounded-full shadow-xl translate-x-[1.7rem] transition delay duration-500 ease-in-out"})})]})})})]})}function aY(){return C.useRef(),C.useRef(),C.useRef(),Ni(),console.log(localStorage.getItem("token")),!1}function sY(){const[e,t]=C.useState("none"),[n,r]=C.useState(!1),o=C.useRef(),i=C.useRef(),a=l=>{o.current.value?(t("none"),l.target.value==o.current.value?r(!1):r(!0)):t("inline")},s=l=>{l.preventDefault(),Ao("Loading","Processing Set Password Data..."),r(!0);const c=Po(["password"]),d=[HR(o.current.value),localStorage.getItem("regist_token"),Ue.get("csrf")];Yt.postInput("setPassword",Yn(c,d)).then(f=>{r(!1),f=JSON.parse(f),ft(f.data.info,f.data.title,f.data.message,()=>window.location.replace(f.data.location))}).catch(f=>{pr(f,"/setpassword")})};return w.jsxs("div",{className:"bg-primary-low font-primary text-white flex flex-col h-screen w-screen sm:w-[400px] sm:ml-[calc(50vw-200px)]",children:[w.jsx(Ve,{to:"/",children:w.jsx(gr,{className:"size-7 absolute top-8 left-6 z-[2]"})}),w.jsx("img",{src:"/img/reset_pwd.png",alt:"reset",className:"h-[57.5%] w-full absolute top-0 left-0"}),w.jsxs("div",{className:"w-full h-fit mt-auto bottom-0 bg-primary-md rounded-t-[2rem] p-6 sm:p-8 relative z-10",children:[w.jsx("h2",{className:"font-bold text-4xl",children:"Set Password"}),w.jsx("div",{className:"my-6 space-y-4 md:space-y-6",children:w.jsxs("form",{className:"space-y-4 md:space-y-6 flex flex-col gap-2",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",children:"Password"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"password",name:"password",id:"password",placeholder:"Password (8 or more characters)",className:"bg-primary-md border-white border-[1px] placeholder-white text-white text-xs rounded-lg focus:bg-white focus:border-0 focus:text-black block w-full py-3 px-4",required:"",ref:o}),w.jsx(ev,{ref:o})]}),w.jsx("label",{htmlFor:"password",style:{display:`${e}`},className:"text-red-700 text-sm font-semibold",children:"Please fill it first"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"confirm-password",children:"Confirm Password"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"password",placeholder:"Password (8 or more characters)",className:"bg-primary-md border-white border-[1px] placeholder-white text-white text-xs rounded-lg focus:bg-white focus:border-0 focus:text-black block w-full py-3 px-4",required:"",ref:i,onChange:a}),w.jsx(ev,{ref:i})]})]}),w.jsx("button",{onClick:s,disabled:n,className:"btn border-none w-full text-primary-md font-semibold bg-white hover:bg-primary-300 focus:ring-4 focus:outline-none focus:ring-primary-300 rounded-xl text-sm px-4 py-2 text-center disabled:text-white",children:n?w.jsxs("div",{className:"flex justify-center items-center gap-2",children:[w.jsx("p",{children:"Loading "}),w.jsx("span",{className:"loading loading-spinner text-white"})]}):"Set Password"})]})})]})]})}function lY(){return w.jsx("section",{className:"font-primary bg-white dark:bg-gray-900 ",children:w.jsx("div",{className:"container flex items-center min-h-screen px-6 py-12 mx-auto",children:w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:"404 error"}),w.jsx("h1",{className:"mt-3 text-2xl font-semibold text-gray-800 dark:text-white md:text-3xl",children:"We cant find that page"}),w.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:"Sorry, the page you are looking for doesn't exist or has been moved."})]})})})}const uY=[{path:"/register",component:Uj},{path:"/verify",component:h6},{path:"/facereg",component:B9},{path:"/login",component:j9},{path:"/recover",component:z9},{path:"/home",component:pX},{path:"/profile",component:mX},{path:"/presensi",component:XX},{path:"/riwayat",component:QX},{path:"/bantuan",component:JX},{path:"/notifikasi",component:eY},{path:"/presensi/staff",component:tY},{path:"/presensi/verif",component:rY},{path:"/presensi/izin",component:oY},{path:"/setting",component:iY},{path:"/facecam",component:aY},{path:"/setpassword",component:sY},{path:"*",component:lY}];function cY(){return C.useEffect(()=>{Yt.getCsrf(),Ue.get("cookiesAccepted")||(hr.fire({title:"Allow Cookies",text:"Kami menggunakan cookie untuk meningkatkan pengalaman Anda.",icon:"warning",allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}),Ue.set("cookiesAccepted","true",{expires:1,secure:!0,sameSite:"Strict"}))},[]),w.jsx(kD,{children:w.jsx(C.Suspense,{fallback:w.jsx(Dj,{}),children:w.jsx(mD,{children:uY.map(({path:e,component:t},n)=>e=="/register"?w.jsx(lg,{exact:!0,path:e,element:w.jsx(t,{})},n):w.jsx(lg,{path:e,element:w.jsx(t,{})},n))})})})}pm.createRoot(document.getElementById("root")).render(w.jsx($r.StrictMode,{children:w.jsx(cY,{})}))});export default dY();
